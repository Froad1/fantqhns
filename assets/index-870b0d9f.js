function Db(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Ob=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J0={exports:{}},Hd={},X0={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),Vb=Symbol.for("react.portal"),Fb=Symbol.for("react.fragment"),Bb=Symbol.for("react.strict_mode"),zb=Symbol.for("react.profiler"),Ub=Symbol.for("react.provider"),$b=Symbol.for("react.context"),jb=Symbol.for("react.forward_ref"),qb=Symbol.for("react.suspense"),Wb=Symbol.for("react.memo"),Hb=Symbol.for("react.lazy"),DI=Symbol.iterator;function Gb(t){return t===null||typeof t!="object"?null:(t=DI&&t[DI]||t["@@iterator"],typeof t=="function"?t:null)}var eP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tP=Object.assign,nP={};function Ea(t,e,n){this.props=t,this.context=e,this.refs=nP,this.updater=n||eP}Ea.prototype.isReactComponent={};Ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iP(){}iP.prototype=Ea.prototype;function x_(t,e,n){this.props=t,this.context=e,this.refs=nP,this.updater=n||eP}var b_=x_.prototype=new iP;b_.constructor=x_;tP(b_,Ea.prototype);b_.isPureReactComponent=!0;var OI=Array.isArray,rP=Object.prototype.hasOwnProperty,L_={current:null},sP={key:!0,ref:!0,__self:!0,__source:!0};function oP(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)rP.call(e,i)&&!sP.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Hl,type:t,key:s,ref:a,props:r,_owner:L_.current}}function Kb(t,e){return{$$typeof:Hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function N_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hl}function Zb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MI=/\/+/g;function jp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zb(""+t.key):e.toString(36)}function vh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Hl:case Vb:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+jp(a,0):i,OI(r)?(n="",t!=null&&(n=t.replace(MI,"$&/")+"/"),vh(r,e,n,"",function(d){return d})):r!=null&&(N_(r)&&(r=Kb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(MI,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",OI(t))for(var l=0;l<t.length;l++){s=t[l];var c=i+jp(s,l);a+=vh(s,e,n,c,r)}else if(c=Gb(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=i+jp(s,l++),a+=vh(s,e,n,c,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Wc(t,e,n){if(t==null)return t;var i=[],r=0;return vh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Qb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},wh={transition:null},Yb={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:wh,ReactCurrentOwner:L_};me.Children={map:Wc,forEach:function(t,e,n){Wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wc(t,function(){e++}),e},toArray:function(t){return Wc(t,function(e){return e})||[]},only:function(t){if(!N_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Ea;me.Fragment=Fb;me.Profiler=zb;me.PureComponent=x_;me.StrictMode=Bb;me.Suspense=qb;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yb;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=tP({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=L_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)rP.call(e,c)&&!sP.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:Hl,type:t.type,key:r,ref:s,props:i,_owner:a}};me.createContext=function(t){return t={$$typeof:$b,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ub,_context:t},t.Consumer=t};me.createElement=oP;me.createFactory=function(t){var e=oP.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:jb,render:t}};me.isValidElement=N_;me.lazy=function(t){return{$$typeof:Hb,_payload:{_status:-1,_result:t},_init:Qb}};me.memo=function(t,e){return{$$typeof:Wb,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=wh.transition;wh.transition={};try{t()}finally{wh.transition=e}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,e){return tn.current.useCallback(t,e)};me.useContext=function(t){return tn.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};me.useEffect=function(t,e){return tn.current.useEffect(t,e)};me.useId=function(){return tn.current.useId()};me.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return tn.current.useMemo(t,e)};me.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};me.useRef=function(t){return tn.current.useRef(t)};me.useState=function(t){return tn.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return tn.current.useTransition()};me.version="18.2.0";X0.exports=me;var N=X0.exports;const Qu=Mb(N),Jb=Db({__proto__:null,default:Qu},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb=N,eL=Symbol.for("react.element"),tL=Symbol.for("react.fragment"),nL=Object.prototype.hasOwnProperty,iL=Xb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rL={key:!0,ref:!0,__self:!0,__source:!0};function aP(t,e,n){var i,r={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)nL.call(e,i)&&!rL.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:eL,type:t,key:s,ref:a,props:r,_owner:iL.current}}Hd.Fragment=tL;Hd.jsx=aP;Hd.jsxs=aP;J0.exports=Hd;var ee=J0.exports,zm={},uP={exports:{}},Pn={},lP={exports:{}},cP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,se){var $=D.length;D.push(se);e:for(;0<$;){var ie=$-1>>>1,ve=D[ie];if(0<r(ve,se))D[ie]=se,D[$]=ve,$=ie;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var se=D[0],$=D.pop();if($!==se){D[0]=$;e:for(var ie=0,ve=D.length,ht=ve>>>1;ie<ht;){var Ce=2*(ie+1)-1,Te=D[Ce],ue=Ce+1,rn=D[ue];if(0>r(Te,$))ue<ve&&0>r(rn,Te)?(D[ie]=rn,D[ue]=$,ie=ue):(D[ie]=Te,D[Ce]=$,ie=Ce);else if(ue<ve&&0>r(rn,$))D[ie]=rn,D[ue]=$,ie=ue;else break e}}return se}function r(D,se){var $=D.sortIndex-se.sortIndex;return $!==0?$:D.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],p=1,g=null,_=3,v=!1,S=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(D){for(var se=n(d);se!==null;){if(se.callback===null)i(d);else if(se.startTime<=D)i(d),se.sortIndex=se.expirationTime,e(c,se);else break;se=n(d)}}function x(D){if(T=!1,E(D),!S)if(n(c)!==null)S=!0,At(O);else{var se=n(d);se!==null&&Ti(x,se.startTime-D)}}function O(D,se){S=!1,T&&(T=!1,I(Z),Z=-1),v=!0;var $=_;try{for(E(se),g=n(c);g!==null&&(!(g.expirationTime>se)||D&&!xe());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,_=g.priorityLevel;var ve=ie(g.expirationTime<=se);se=t.unstable_now(),typeof ve=="function"?g.callback=ve:g===n(c)&&i(c),E(se)}else i(c);g=n(c)}if(g!==null)var ht=!0;else{var Ce=n(d);Ce!==null&&Ti(x,Ce.startTime-se),ht=!1}return ht}finally{g=null,_=$,v=!1}}var z=!1,j=null,Z=-1,Ee=5,oe=-1;function xe(){return!(t.unstable_now()-oe<Ee)}function mt(){if(j!==null){var D=t.unstable_now();oe=D;var se=!0;try{se=j(!0,D)}finally{se?es():(z=!1,j=null)}}else z=!1}var es;if(typeof w=="function")es=function(){w(mt)};else if(typeof MessageChannel<"u"){var An=new MessageChannel,up=An.port2;An.port1.onmessage=mt,es=function(){up.postMessage(null)}}else es=function(){C(mt,0)};function At(D){j=D,z||(z=!0,es())}function Ti(D,se){Z=C(function(){D(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){S||v||(S=!0,At(O))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var $=_;_=se;try{return D()}finally{_=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,se){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=_;_=D;try{return se()}finally{_=$}},t.unstable_scheduleCallback=function(D,se,$){var ie=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ie+$:ie):$=ie,D){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=$+ve,D={id:p++,callback:se,priorityLevel:D,startTime:$,expirationTime:ve,sortIndex:-1},$>ie?(D.sortIndex=$,e(d,D),n(c)===null&&D===n(d)&&(T?(I(Z),Z=-1):T=!0,Ti(x,$-ie))):(D.sortIndex=ve,e(c,D),S||v||(S=!0,At(O))),D},t.unstable_shouldYield=xe,t.unstable_wrapCallback=function(D){var se=_;return function(){var $=_;_=se;try{return D.apply(this,arguments)}finally{_=$}}}})(cP);lP.exports=cP;var sL=lP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP=N,In=sL;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dP=new Set,Yu={};function Ks(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(Yu[t]=e,t=0;t<e.length;t++)dP.add(e[t])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Um=Object.prototype.hasOwnProperty,oL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VI={},FI={};function aL(t){return Um.call(FI,t)?!0:Um.call(VI,t)?!1:oL.test(t)?FI[t]=!0:(VI[t]=!0,!1)}function uL(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lL(t,e,n,i){if(e===null||typeof e>"u"||uL(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var D_=/[\-:]([a-z])/g;function O_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D_,O_);Mt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D_,O_);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D_,O_);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function M_(t,e,n,i){var r=Mt.hasOwnProperty(e)?Mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lL(e,n,r,i)&&(n=null),i||r===null?aL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Hi=hP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hc=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),V_=Symbol.for("react.strict_mode"),$m=Symbol.for("react.profiler"),fP=Symbol.for("react.provider"),pP=Symbol.for("react.context"),F_=Symbol.for("react.forward_ref"),jm=Symbol.for("react.suspense"),qm=Symbol.for("react.suspense_list"),B_=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),mP=Symbol.for("react.offscreen"),BI=Symbol.iterator;function nu(t){return t===null||typeof t!="object"?null:(t=BI&&t[BI]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,qp;function wu(t){if(qp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qp=e&&e[1]||""}return`
`+qp+t}var Wp=!1;function Hp(t,e){if(!t||Wp)return"";Wp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,l=s.length-1;1<=a&&0<=l&&r[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==s[l]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Wp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wu(t):""}function cL(t){switch(t.tag){case 5:return wu(t.type);case 16:return wu("Lazy");case 13:return wu("Suspense");case 19:return wu("SuspenseList");case 0:case 2:case 15:return t=Hp(t.type,!1),t;case 11:return t=Hp(t.type.render,!1),t;case 1:return t=Hp(t.type,!0),t;default:return""}}function Wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Co:return"Fragment";case Ro:return"Portal";case $m:return"Profiler";case V_:return"StrictMode";case jm:return"Suspense";case qm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pP:return(t.displayName||"Context")+".Consumer";case fP:return(t._context.displayName||"Context")+".Provider";case F_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B_:return e=t.displayName||null,e!==null?e:Wm(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return Wm(t(e))}catch{}}return null}function hL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wm(e);case 8:return e===V_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dL(t){var e=gP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gc(t){t._valueTracker||(t._valueTracker=dL(t))}function _P(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=gP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hm(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zI(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yP(t,e){e=e.checked,e!=null&&M_(t,"checked",e,!1)}function Gm(t,e){yP(t,e);var n=Cr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Km(t,e.type,n):e.hasOwnProperty("defaultValue")&&Km(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function UI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Km(t,e,n){(e!=="number"||Wh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Iu=Array.isArray;function Uo(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Zm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $I(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Iu(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function vP(t,e){var n=Cr(e.value),i=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function jI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kc,IP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kc=Kc||document.createElement("div"),Kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ju(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fL=["Webkit","ms","Moz","O"];Object.keys(bu).forEach(function(t){fL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bu[e]=bu[t]})});function EP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bu.hasOwnProperty(t)&&bu[t]?(""+e).trim():e+"px"}function TP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=EP(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var pL=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ym(t,e){if(e){if(pL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Jm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xm=null;function z_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eg=null,$o=null,jo=null;function qI(t){if(t=Zl(t)){if(typeof eg!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Yd(e),eg(t.stateNode,t.type,e))}}function PP(t){$o?jo?jo.push(t):jo=[t]:$o=t}function SP(){if($o){var t=$o,e=jo;if(jo=$o=null,qI(t),e)for(t=0;t<e.length;t++)qI(e[t])}}function AP(t,e){return t(e)}function RP(){}var Gp=!1;function CP(t,e,n){if(Gp)return t(e,n);Gp=!0;try{return AP(t,e,n)}finally{Gp=!1,($o!==null||jo!==null)&&(RP(),SP())}}function Xu(t,e){var n=t.stateNode;if(n===null)return null;var i=Yd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var tg=!1;if(Bi)try{var iu={};Object.defineProperty(iu,"passive",{get:function(){tg=!0}}),window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{tg=!1}function mL(t,e,n,i,r,s,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Lu=!1,Hh=null,Gh=!1,ng=null,gL={onError:function(t){Lu=!0,Hh=t}};function _L(t,e,n,i,r,s,a,l,c){Lu=!1,Hh=null,mL.apply(gL,arguments)}function yL(t,e,n,i,r,s,a,l,c){if(_L.apply(this,arguments),Lu){if(Lu){var d=Hh;Lu=!1,Hh=null}else throw Error(B(198));Gh||(Gh=!0,ng=d)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WI(t){if(Zs(t)!==t)throw Error(B(188))}function vL(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return WI(r),t;if(s===i)return WI(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function xP(t){return t=vL(t),t!==null?bP(t):null}function bP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bP(t);if(e!==null)return e;t=t.sibling}return null}var LP=In.unstable_scheduleCallback,HI=In.unstable_cancelCallback,wL=In.unstable_shouldYield,IL=In.unstable_requestPaint,et=In.unstable_now,EL=In.unstable_getCurrentPriorityLevel,U_=In.unstable_ImmediatePriority,NP=In.unstable_UserBlockingPriority,Kh=In.unstable_NormalPriority,TL=In.unstable_LowPriority,DP=In.unstable_IdlePriority,Gd=null,mi=null;function PL(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(Gd,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:RL,SL=Math.log,AL=Math.LN2;function RL(t){return t>>>=0,t===0?32:31-(SL(t)/AL|0)|0}var Zc=64,Qc=4194304;function Eu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?i=Eu(l):(s&=a,s!==0&&(i=Eu(s)))}else a=n&~r,a!==0?i=Eu(a):s!==0&&(i=Eu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Hn(e),r=1<<n,i|=t[n],e&=~r;return i}function CL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kL(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Hn(s),l=1<<a,c=r[a];c===-1?(!(l&n)||l&i)&&(r[a]=CL(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function ig(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OP(){var t=Zc;return Zc<<=1,!(Zc&4194240)&&(Zc=64),t}function Kp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function xL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Hn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function $_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Hn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ae=0;function MP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VP,j_,FP,BP,zP,rg=!1,Yc=[],_r=null,yr=null,vr=null,el=new Map,tl=new Map,ur=[],bL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GI(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":el.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(e.pointerId)}}function ru(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Zl(e),e!==null&&j_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function LL(t,e,n,i,r){switch(e){case"focusin":return _r=ru(_r,t,e,n,i,r),!0;case"dragenter":return yr=ru(yr,t,e,n,i,r),!0;case"mouseover":return vr=ru(vr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return el.set(s,ru(el.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,tl.set(s,ru(tl.get(s)||null,t,e,n,i,r)),!0}return!1}function UP(t){var e=gs(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=kP(n),e!==null){t.blockedOn=e,zP(t.priority,function(){FP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Xm=i,n.target.dispatchEvent(i),Xm=null}else return e=Zl(n),e!==null&&j_(e),t.blockedOn=n,!1;e.shift()}return!0}function KI(t,e,n){Ih(t)&&n.delete(e)}function NL(){rg=!1,_r!==null&&Ih(_r)&&(_r=null),yr!==null&&Ih(yr)&&(yr=null),vr!==null&&Ih(vr)&&(vr=null),el.forEach(KI),tl.forEach(KI)}function su(t,e){t.blockedOn===e&&(t.blockedOn=null,rg||(rg=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,NL)))}function nl(t){function e(r){return su(r,t)}if(0<Yc.length){su(Yc[0],t);for(var n=1;n<Yc.length;n++){var i=Yc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(_r!==null&&su(_r,t),yr!==null&&su(yr,t),vr!==null&&su(vr,t),el.forEach(e),tl.forEach(e),n=0;n<ur.length;n++)i=ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)UP(n),n.blockedOn===null&&ur.shift()}var qo=Hi.ReactCurrentBatchConfig,Qh=!0;function DL(t,e,n,i){var r=Ae,s=qo.transition;qo.transition=null;try{Ae=1,q_(t,e,n,i)}finally{Ae=r,qo.transition=s}}function OL(t,e,n,i){var r=Ae,s=qo.transition;qo.transition=null;try{Ae=4,q_(t,e,n,i)}finally{Ae=r,qo.transition=s}}function q_(t,e,n,i){if(Qh){var r=sg(t,e,n,i);if(r===null)rm(t,e,i,Yh,n),GI(t,i);else if(LL(r,t,e,n,i))i.stopPropagation();else if(GI(t,i),e&4&&-1<bL.indexOf(t)){for(;r!==null;){var s=Zl(r);if(s!==null&&VP(s),s=sg(t,e,n,i),s===null&&rm(t,e,i,Yh,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else rm(t,e,i,null,n)}}var Yh=null;function sg(t,e,n,i){if(Yh=null,t=z_(i),t=gs(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yh=t,null}function $P(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EL()){case U_:return 1;case NP:return 4;case Kh:case TL:return 16;case DP:return 536870912;default:return 16}default:return 16}}var dr=null,W_=null,Eh=null;function jP(){if(Eh)return Eh;var t,e=W_,n=e.length,i,r="value"in dr?dr.value:dr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Eh=r.slice(t,1<i?1-i:void 0)}function Th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jc(){return!0}function ZI(){return!1}function Sn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jc:ZI,this.isPropagationStopped=ZI,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jc)},persist:function(){},isPersistent:Jc}),e}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H_=Sn(Ta),Kl=He({},Ta,{view:0,detail:0}),ML=Sn(Kl),Zp,Qp,ou,Kd=He({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ou&&(ou&&t.type==="mousemove"?(Zp=t.screenX-ou.screenX,Qp=t.screenY-ou.screenY):Qp=Zp=0,ou=t),Zp)},movementY:function(t){return"movementY"in t?t.movementY:Qp}}),QI=Sn(Kd),VL=He({},Kd,{dataTransfer:0}),FL=Sn(VL),BL=He({},Kl,{relatedTarget:0}),Yp=Sn(BL),zL=He({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),UL=Sn(zL),$L=He({},Ta,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jL=Sn($L),qL=He({},Ta,{data:0}),YI=Sn(qL),WL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GL[t])?!!e[t]:!1}function G_(){return KL}var ZL=He({},Kl,{key:function(t){if(t.key){var e=WL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G_,charCode:function(t){return t.type==="keypress"?Th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QL=Sn(ZL),YL=He({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JI=Sn(YL),JL=He({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G_}),XL=Sn(JL),eN=He({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),tN=Sn(eN),nN=He({},Kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iN=Sn(nN),rN=[9,13,27,32],K_=Bi&&"CompositionEvent"in window,Nu=null;Bi&&"documentMode"in document&&(Nu=document.documentMode);var sN=Bi&&"TextEvent"in window&&!Nu,qP=Bi&&(!K_||Nu&&8<Nu&&11>=Nu),XI=String.fromCharCode(32),eE=!1;function WP(t,e){switch(t){case"keyup":return rN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function oN(t,e){switch(t){case"compositionend":return HP(e);case"keypress":return e.which!==32?null:(eE=!0,XI);case"textInput":return t=e.data,t===XI&&eE?null:t;default:return null}}function aN(t,e){if(ko)return t==="compositionend"||!K_&&WP(t,e)?(t=jP(),Eh=W_=dr=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qP&&e.locale!=="ko"?null:e.data;default:return null}}var uN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uN[t.type]:e==="textarea"}function GP(t,e,n,i){PP(i),e=Jh(e,"onChange"),0<e.length&&(n=new H_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Du=null,il=null;function lN(t){rS(t,0)}function Zd(t){var e=Lo(t);if(_P(e))return t}function cN(t,e){if(t==="change")return e}var KP=!1;if(Bi){var Jp;if(Bi){var Xp="oninput"in document;if(!Xp){var nE=document.createElement("div");nE.setAttribute("oninput","return;"),Xp=typeof nE.oninput=="function"}Jp=Xp}else Jp=!1;KP=Jp&&(!document.documentMode||9<document.documentMode)}function iE(){Du&&(Du.detachEvent("onpropertychange",ZP),il=Du=null)}function ZP(t){if(t.propertyName==="value"&&Zd(il)){var e=[];GP(e,il,t,z_(t)),CP(lN,e)}}function hN(t,e,n){t==="focusin"?(iE(),Du=e,il=n,Du.attachEvent("onpropertychange",ZP)):t==="focusout"&&iE()}function dN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zd(il)}function fN(t,e){if(t==="click")return Zd(e)}function pN(t,e){if(t==="input"||t==="change")return Zd(e)}function mN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:mN;function rl(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Um.call(e,r)||!Kn(t[r],e[r]))return!1}return!0}function rE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sE(t,e){var n=rE(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rE(n)}}function QP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function YP(){for(var t=window,e=Wh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wh(t.document)}return e}function Z_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gN(t){var e=YP(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QP(n.ownerDocument.documentElement,n)){if(i!==null&&Z_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=sE(n,s);var a=sE(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _N=Bi&&"documentMode"in document&&11>=document.documentMode,xo=null,og=null,Ou=null,ag=!1;function oE(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ag||xo==null||xo!==Wh(i)||(i=xo,"selectionStart"in i&&Z_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ou&&rl(Ou,i)||(Ou=i,i=Jh(og,"onSelect"),0<i.length&&(e=new H_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=xo)))}function Xc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:Xc("Animation","AnimationEnd"),animationiteration:Xc("Animation","AnimationIteration"),animationstart:Xc("Animation","AnimationStart"),transitionend:Xc("Transition","TransitionEnd")},em={},JP={};Bi&&(JP=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Qd(t){if(em[t])return em[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JP)return em[t]=e[n];return t}var XP=Qd("animationend"),eS=Qd("animationiteration"),tS=Qd("animationstart"),nS=Qd("transitionend"),iS=new Map,aE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(t,e){iS.set(t,e),Ks(e,[t])}for(var tm=0;tm<aE.length;tm++){var nm=aE[tm],yN=nm.toLowerCase(),vN=nm[0].toUpperCase()+nm.slice(1);$r(yN,"on"+vN)}$r(XP,"onAnimationEnd");$r(eS,"onAnimationIteration");$r(tS,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(nS,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tu));function uE(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,yL(i,e,void 0,t),t.currentTarget=null}function rS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&r.isPropagationStopped())break e;uE(r,l,d),s=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&r.isPropagationStopped())break e;uE(r,l,d),s=c}}}if(Gh)throw t=ng,Gh=!1,ng=null,t}function De(t,e){var n=e[dg];n===void 0&&(n=e[dg]=new Set);var i=t+"__bubble";n.has(i)||(sS(e,t,2,!1),n.add(i))}function im(t,e,n){var i=0;e&&(i|=4),sS(n,t,i,e)}var eh="_reactListening"+Math.random().toString(36).slice(2);function sl(t){if(!t[eh]){t[eh]=!0,dP.forEach(function(n){n!=="selectionchange"&&(wN.has(n)||im(n,!1,t),im(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eh]||(e[eh]=!0,im("selectionchange",!1,e))}}function sS(t,e,n,i){switch($P(e)){case 1:var r=DL;break;case 4:r=OL;break;default:r=q_}n=r.bind(null,e,n,t),r=void 0,!tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function rm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=gs(l),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}l=l.parentNode}}i=i.return}CP(function(){var d=s,p=z_(n),g=[];e:{var _=iS.get(t);if(_!==void 0){var v=H_,S=t;switch(t){case"keypress":if(Th(n)===0)break e;case"keydown":case"keyup":v=QL;break;case"focusin":S="focus",v=Yp;break;case"focusout":S="blur",v=Yp;break;case"beforeblur":case"afterblur":v=Yp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=QI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=FL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=XL;break;case XP:case eS:case tS:v=UL;break;case nS:v=tN;break;case"scroll":v=ML;break;case"wheel":v=iN;break;case"copy":case"cut":case"paste":v=jL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=JI}var T=(e&4)!==0,C=!T&&t==="scroll",I=T?_!==null?_+"Capture":null:_;T=[];for(var w=d,E;w!==null;){E=w;var x=E.stateNode;if(E.tag===5&&x!==null&&(E=x,I!==null&&(x=Xu(w,I),x!=null&&T.push(ol(w,x,E)))),C)break;w=w.return}0<T.length&&(_=new v(_,S,null,n,p),g.push({event:_,listeners:T}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",_&&n!==Xm&&(S=n.relatedTarget||n.fromElement)&&(gs(S)||S[zi]))break e;if((v||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,v?(S=n.relatedTarget||n.toElement,v=d,S=S?gs(S):null,S!==null&&(C=Zs(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(v=null,S=d),v!==S)){if(T=QI,x="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(T=JI,x="onPointerLeave",I="onPointerEnter",w="pointer"),C=v==null?_:Lo(v),E=S==null?_:Lo(S),_=new T(x,w+"leave",v,n,p),_.target=C,_.relatedTarget=E,x=null,gs(p)===d&&(T=new T(I,w+"enter",S,n,p),T.target=E,T.relatedTarget=C,x=T),C=x,v&&S)t:{for(T=v,I=S,w=0,E=T;E;E=po(E))w++;for(E=0,x=I;x;x=po(x))E++;for(;0<w-E;)T=po(T),w--;for(;0<E-w;)I=po(I),E--;for(;w--;){if(T===I||I!==null&&T===I.alternate)break t;T=po(T),I=po(I)}T=null}else T=null;v!==null&&lE(g,_,v,T,!1),S!==null&&C!==null&&lE(g,C,S,T,!0)}}e:{if(_=d?Lo(d):window,v=_.nodeName&&_.nodeName.toLowerCase(),v==="select"||v==="input"&&_.type==="file")var O=cN;else if(tE(_))if(KP)O=pN;else{O=dN;var z=hN}else(v=_.nodeName)&&v.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(O=fN);if(O&&(O=O(t,d))){GP(g,O,n,p);break e}z&&z(t,_,d),t==="focusout"&&(z=_._wrapperState)&&z.controlled&&_.type==="number"&&Km(_,"number",_.value)}switch(z=d?Lo(d):window,t){case"focusin":(tE(z)||z.contentEditable==="true")&&(xo=z,og=d,Ou=null);break;case"focusout":Ou=og=xo=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,oE(g,n,p);break;case"selectionchange":if(_N)break;case"keydown":case"keyup":oE(g,n,p)}var j;if(K_)e:{switch(t){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else ko?WP(t,n)&&(Z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Z="onCompositionStart");Z&&(qP&&n.locale!=="ko"&&(ko||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&ko&&(j=jP()):(dr=p,W_="value"in dr?dr.value:dr.textContent,ko=!0)),z=Jh(d,Z),0<z.length&&(Z=new YI(Z,t,null,n,p),g.push({event:Z,listeners:z}),j?Z.data=j:(j=HP(n),j!==null&&(Z.data=j)))),(j=sN?oN(t,n):aN(t,n))&&(d=Jh(d,"onBeforeInput"),0<d.length&&(p=new YI("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=j))}rS(g,e)})}function ol(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Xu(t,n),s!=null&&i.unshift(ol(t,s,r)),s=Xu(t,e),s!=null&&i.push(ol(t,s,r))),t=t.return}return i}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lE(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&d!==null&&(l=d,r?(c=Xu(n,s),c!=null&&a.unshift(ol(n,c,l))):r||(c=Xu(n,s),c!=null&&a.push(ol(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var IN=/\r\n?/g,EN=/\u0000|\uFFFD/g;function cE(t){return(typeof t=="string"?t:""+t).replace(IN,`
`).replace(EN,"")}function th(t,e,n){if(e=cE(e),cE(t)!==e&&n)throw Error(B(425))}function Xh(){}var ug=null,lg=null;function cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hg=typeof setTimeout=="function"?setTimeout:void 0,TN=typeof clearTimeout=="function"?clearTimeout:void 0,hE=typeof Promise=="function"?Promise:void 0,PN=typeof queueMicrotask=="function"?queueMicrotask:typeof hE<"u"?function(t){return hE.resolve(null).then(t).catch(SN)}:hg;function SN(t){setTimeout(function(){throw t})}function sm(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),nl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);nl(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),ri="__reactFiber$"+Pa,al="__reactProps$"+Pa,zi="__reactContainer$"+Pa,dg="__reactEvents$"+Pa,AN="__reactListeners$"+Pa,RN="__reactHandles$"+Pa;function gs(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zi]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dE(t);t!==null;){if(n=t[ri])return n;t=dE(t)}return e}t=n,n=t.parentNode}return null}function Zl(t){return t=t[ri]||t[zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Yd(t){return t[al]||null}var fg=[],No=-1;function jr(t){return{current:t}}function Ve(t){0>No||(t.current=fg[No],fg[No]=null,No--)}function Le(t,e){No++,fg[No]=t.current,t.current=e}var kr={},qt=jr(kr),fn=jr(!1),xs=kr;function ta(t,e){var n=t.type.contextTypes;if(!n)return kr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function pn(t){return t=t.childContextTypes,t!=null}function ed(){Ve(fn),Ve(qt)}function fE(t,e,n){if(qt.current!==kr)throw Error(B(168));Le(qt,e),Le(fn,n)}function oS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(B(108,hL(t)||"Unknown",r));return He({},n,i)}function td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,xs=qt.current,Le(qt,t),Le(fn,fn.current),!0}function pE(t,e,n){var i=t.stateNode;if(!i)throw Error(B(169));n?(t=oS(t,e,xs),i.__reactInternalMemoizedMergedChildContext=t,Ve(fn),Ve(qt),Le(qt,t)):Ve(fn),Le(fn,n)}var ki=null,Jd=!1,om=!1;function aS(t){ki===null?ki=[t]:ki.push(t)}function CN(t){Jd=!0,aS(t)}function qr(){if(!om&&ki!==null){om=!0;var t=0,e=Ae;try{var n=ki;for(Ae=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ki=null,Jd=!1}catch(r){throw ki!==null&&(ki=ki.slice(t+1)),LP(U_,qr),r}finally{Ae=e,om=!1}}return null}var Do=[],Oo=0,nd=null,id=0,xn=[],bn=0,bs=null,xi=1,bi="";function as(t,e){Do[Oo++]=id,Do[Oo++]=nd,nd=t,id=e}function uS(t,e,n){xn[bn++]=xi,xn[bn++]=bi,xn[bn++]=bs,bs=t;var i=xi;t=bi;var r=32-Hn(i)-1;i&=~(1<<r),n+=1;var s=32-Hn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,xi=1<<32-Hn(e)+r|n<<r|i,bi=s+t}else xi=1<<s|n<<r|i,bi=t}function Q_(t){t.return!==null&&(as(t,1),uS(t,1,0))}function Y_(t){for(;t===nd;)nd=Do[--Oo],Do[Oo]=null,id=Do[--Oo],Do[Oo]=null;for(;t===bs;)bs=xn[--bn],xn[bn]=null,bi=xn[--bn],xn[bn]=null,xi=xn[--bn],xn[bn]=null}var wn=null,yn=null,Fe=!1,qn=null;function lS(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,yn=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:xi,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,yn=null,!0):!1;default:return!1}}function pg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mg(t){if(Fe){var e=yn;if(e){var n=e;if(!mE(t,e)){if(pg(t))throw Error(B(418));e=wr(n.nextSibling);var i=wn;e&&mE(t,e)?lS(i,n):(t.flags=t.flags&-4097|2,Fe=!1,wn=t)}}else{if(pg(t))throw Error(B(418));t.flags=t.flags&-4097|2,Fe=!1,wn=t}}}function gE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function nh(t){if(t!==wn)return!1;if(!Fe)return gE(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cg(t.type,t.memoizedProps)),e&&(e=yn)){if(pg(t))throw cS(),Error(B(418));for(;e;)lS(t,e),e=wr(e.nextSibling)}if(gE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=wn?wr(t.stateNode.nextSibling):null;return!0}function cS(){for(var t=yn;t;)t=wr(t.nextSibling)}function na(){yn=wn=null,Fe=!1}function J_(t){qn===null?qn=[t]:qn.push(t)}var kN=Hi.ReactCurrentBatchConfig;function $n(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var rd=jr(null),sd=null,Mo=null,X_=null;function ey(){X_=Mo=sd=null}function ty(t){var e=rd.current;Ve(rd),t._currentValue=e}function gg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Wo(t,e){sd=t,X_=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(X_!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(sd===null)throw Error(B(308));Mo=t,sd.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var _s=null;function ny(t){_s===null?_s=[t]:_s.push(t)}function hS(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,ny(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ui(t,i)}function Ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function iy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,we&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ui(t,n)}return r=i.interleaved,r===null?(e.next=e,ny(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ui(t,n)}function Ph(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,$_(t,n)}}function _E(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function od(t,e,n,i){var r=t.updateQueue;ar=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=c))}if(s!==null){var g=r.baseState;a=0,p=d=c=null,l=s;do{var _=l.lane,v=l.eventTime;if((i&_)===_){p!==null&&(p=p.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,T=l;switch(_=e,v=n,T.tag){case 1:if(S=T.payload,typeof S=="function"){g=S.call(v,g,_);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=T.payload,_=typeof S=="function"?S.call(v,g,_):S,_==null)break e;g=He({},g,_);break e;case 2:ar=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[l]:_.push(l))}else v={eventTime:v,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=v,c=g):p=p.next=v,a|=_;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(1);if(p===null&&(c=g),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ns|=a,t.lanes=a,t.memoizedState=g}}function yE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(B(191,r));r.call(i)}}}var fS=new hP.Component().refs;function _g(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xd={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Qt(),r=Tr(t),s=Mi(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ir(t,s,r),e!==null&&(Gn(e,t,r,i),Ph(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Qt(),r=Tr(t),s=Mi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ir(t,s,r),e!==null&&(Gn(e,t,r,i),Ph(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),i=Tr(t),r=Mi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ir(t,r,i),e!==null&&(Gn(e,t,i,n),Ph(e,t,i))}};function vE(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!rl(n,i)||!rl(r,s):!0}function pS(t,e,n){var i=!1,r=kr,s=e.contextType;return typeof s=="object"&&s!==null?s=Mn(s):(r=pn(e)?xs:qt.current,i=e.contextTypes,s=(i=i!=null)?ta(t,r):kr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function wE(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Xd.enqueueReplaceState(e,e.state,null)}function yg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=fS,iy(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Mn(s):(s=pn(e)?xs:qt.current,r.context=ta(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_g(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Xd.enqueueReplaceState(r,r.state,null),od(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function au(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var i=n.stateNode}if(!i)throw Error(B(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=r.refs;l===fS&&(l=r.refs={}),a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function ih(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IE(t){var e=t._init;return e(t._payload)}function mS(t){function e(I,w){if(t){var E=I.deletions;E===null?(I.deletions=[w],I.flags|=16):E.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function i(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function r(I,w){return I=Pr(I,w),I.index=0,I.sibling=null,I}function s(I,w,E){return I.index=E,t?(E=I.alternate,E!==null?(E=E.index,E<w?(I.flags|=2,w):E):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,E,x){return w===null||w.tag!==6?(w=fm(E,I.mode,x),w.return=I,w):(w=r(w,E),w.return=I,w)}function c(I,w,E,x){var O=E.type;return O===Co?p(I,w,E.props.children,x,E.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===or&&IE(O)===w.type)?(x=r(w,E.props),x.ref=au(I,w,E),x.return=I,x):(x=xh(E.type,E.key,E.props,null,I.mode,x),x.ref=au(I,w,E),x.return=I,x)}function d(I,w,E,x){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=pm(E,I.mode,x),w.return=I,w):(w=r(w,E.children||[]),w.return=I,w)}function p(I,w,E,x,O){return w===null||w.tag!==7?(w=Ss(E,I.mode,x,O),w.return=I,w):(w=r(w,E),w.return=I,w)}function g(I,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=fm(""+w,I.mode,E),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Hc:return E=xh(w.type,w.key,w.props,null,I.mode,E),E.ref=au(I,null,w),E.return=I,E;case Ro:return w=pm(w,I.mode,E),w.return=I,w;case or:var x=w._init;return g(I,x(w._payload),E)}if(Iu(w)||nu(w))return w=Ss(w,I.mode,E,null),w.return=I,w;ih(I,w)}return null}function _(I,w,E,x){var O=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:l(I,w,""+E,x);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hc:return E.key===O?c(I,w,E,x):null;case Ro:return E.key===O?d(I,w,E,x):null;case or:return O=E._init,_(I,w,O(E._payload),x)}if(Iu(E)||nu(E))return O!==null?null:p(I,w,E,x,null);ih(I,E)}return null}function v(I,w,E,x,O){if(typeof x=="string"&&x!==""||typeof x=="number")return I=I.get(E)||null,l(w,I,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hc:return I=I.get(x.key===null?E:x.key)||null,c(w,I,x,O);case Ro:return I=I.get(x.key===null?E:x.key)||null,d(w,I,x,O);case or:var z=x._init;return v(I,w,E,z(x._payload),O)}if(Iu(x)||nu(x))return I=I.get(E)||null,p(w,I,x,O,null);ih(w,x)}return null}function S(I,w,E,x){for(var O=null,z=null,j=w,Z=w=0,Ee=null;j!==null&&Z<E.length;Z++){j.index>Z?(Ee=j,j=null):Ee=j.sibling;var oe=_(I,j,E[Z],x);if(oe===null){j===null&&(j=Ee);break}t&&j&&oe.alternate===null&&e(I,j),w=s(oe,w,Z),z===null?O=oe:z.sibling=oe,z=oe,j=Ee}if(Z===E.length)return n(I,j),Fe&&as(I,Z),O;if(j===null){for(;Z<E.length;Z++)j=g(I,E[Z],x),j!==null&&(w=s(j,w,Z),z===null?O=j:z.sibling=j,z=j);return Fe&&as(I,Z),O}for(j=i(I,j);Z<E.length;Z++)Ee=v(j,I,Z,E[Z],x),Ee!==null&&(t&&Ee.alternate!==null&&j.delete(Ee.key===null?Z:Ee.key),w=s(Ee,w,Z),z===null?O=Ee:z.sibling=Ee,z=Ee);return t&&j.forEach(function(xe){return e(I,xe)}),Fe&&as(I,Z),O}function T(I,w,E,x){var O=nu(E);if(typeof O!="function")throw Error(B(150));if(E=O.call(E),E==null)throw Error(B(151));for(var z=O=null,j=w,Z=w=0,Ee=null,oe=E.next();j!==null&&!oe.done;Z++,oe=E.next()){j.index>Z?(Ee=j,j=null):Ee=j.sibling;var xe=_(I,j,oe.value,x);if(xe===null){j===null&&(j=Ee);break}t&&j&&xe.alternate===null&&e(I,j),w=s(xe,w,Z),z===null?O=xe:z.sibling=xe,z=xe,j=Ee}if(oe.done)return n(I,j),Fe&&as(I,Z),O;if(j===null){for(;!oe.done;Z++,oe=E.next())oe=g(I,oe.value,x),oe!==null&&(w=s(oe,w,Z),z===null?O=oe:z.sibling=oe,z=oe);return Fe&&as(I,Z),O}for(j=i(I,j);!oe.done;Z++,oe=E.next())oe=v(j,I,Z,oe.value,x),oe!==null&&(t&&oe.alternate!==null&&j.delete(oe.key===null?Z:oe.key),w=s(oe,w,Z),z===null?O=oe:z.sibling=oe,z=oe);return t&&j.forEach(function(mt){return e(I,mt)}),Fe&&as(I,Z),O}function C(I,w,E,x){if(typeof E=="object"&&E!==null&&E.type===Co&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Hc:e:{for(var O=E.key,z=w;z!==null;){if(z.key===O){if(O=E.type,O===Co){if(z.tag===7){n(I,z.sibling),w=r(z,E.props.children),w.return=I,I=w;break e}}else if(z.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===or&&IE(O)===z.type){n(I,z.sibling),w=r(z,E.props),w.ref=au(I,z,E),w.return=I,I=w;break e}n(I,z);break}else e(I,z);z=z.sibling}E.type===Co?(w=Ss(E.props.children,I.mode,x,E.key),w.return=I,I=w):(x=xh(E.type,E.key,E.props,null,I.mode,x),x.ref=au(I,w,E),x.return=I,I=x)}return a(I);case Ro:e:{for(z=E.key;w!==null;){if(w.key===z)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(I,w.sibling),w=r(w,E.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=pm(E,I.mode,x),w.return=I,I=w}return a(I);case or:return z=E._init,C(I,w,z(E._payload),x)}if(Iu(E))return S(I,w,E,x);if(nu(E))return T(I,w,E,x);ih(I,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(I,w.sibling),w=r(w,E),w.return=I,I=w):(n(I,w),w=fm(E,I.mode,x),w.return=I,I=w),a(I)):n(I,w)}return C}var ia=mS(!0),gS=mS(!1),Ql={},gi=jr(Ql),ul=jr(Ql),ll=jr(Ql);function ys(t){if(t===Ql)throw Error(B(174));return t}function ry(t,e){switch(Le(ll,e),Le(ul,t),Le(gi,Ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qm(e,t)}Ve(gi),Le(gi,e)}function ra(){Ve(gi),Ve(ul),Ve(ll)}function _S(t){ys(ll.current);var e=ys(gi.current),n=Qm(e,t.type);e!==n&&(Le(ul,t),Le(gi,n))}function sy(t){ul.current===t&&(Ve(gi),Ve(ul))}var je=jr(0);function ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var am=[];function oy(){for(var t=0;t<am.length;t++)am[t]._workInProgressVersionPrimary=null;am.length=0}var Sh=Hi.ReactCurrentDispatcher,um=Hi.ReactCurrentBatchConfig,Ls=0,qe=null,dt=null,yt=null,ud=!1,Mu=!1,cl=0,xN=0;function Ft(){throw Error(B(321))}function ay(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function uy(t,e,n,i,r,s){if(Ls=s,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sh.current=t===null||t.memoizedState===null?DN:ON,t=n(i,r),Mu){s=0;do{if(Mu=!1,cl=0,25<=s)throw Error(B(301));s+=1,yt=dt=null,e.updateQueue=null,Sh.current=MN,t=n(i,r)}while(Mu)}if(Sh.current=ld,e=dt!==null&&dt.next!==null,Ls=0,yt=dt=qe=null,ud=!1,e)throw Error(B(300));return t}function ly(){var t=cl!==0;return cl=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?qe.memoizedState=yt=t:yt=yt.next=t,yt}function Vn(){if(dt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=yt===null?qe.memoizedState:yt.next;if(e!==null)yt=e,dt=t;else{if(t===null)throw Error(B(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},yt===null?qe.memoizedState=yt=t:yt=yt.next=t}return yt}function hl(t,e){return typeof e=="function"?e(t):e}function lm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=dt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=a=null,c=null,d=s;do{var p=d.lane;if((Ls&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=g,a=i):c=c.next=g,qe.lanes|=p,Ns|=p}d=d.next}while(d!==null&&d!==s);c===null?a=i:c.next=l,Kn(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,qe.lanes|=s,Ns|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Kn(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function yS(){}function vS(t,e){var n=qe,i=Vn(),r=e(),s=!Kn(i.memoizedState,r);if(s&&(i.memoizedState=r,ln=!0),i=i.queue,cy(ES.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,dl(9,IS.bind(null,n,i,r,e),void 0,null),wt===null)throw Error(B(349));Ls&30||wS(n,e,r)}return r}function wS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IS(t,e,n,i){e.value=n,e.getSnapshot=i,TS(e)&&PS(t)}function ES(t,e,n){return n(function(){TS(e)&&PS(t)})}function TS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function PS(t){var e=Ui(t,1);e!==null&&Gn(e,t,1,-1)}function EE(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:t},e.queue=t,t=t.dispatch=NN.bind(null,qe,t),[e.memoizedState,t]}function dl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function SS(){return Vn().memoizedState}function Ah(t,e,n,i){var r=ii();qe.flags|=t,r.memoizedState=dl(1|e,n,void 0,i===void 0?null:i)}function ef(t,e,n,i){var r=Vn();i=i===void 0?null:i;var s=void 0;if(dt!==null){var a=dt.memoizedState;if(s=a.destroy,i!==null&&ay(i,a.deps)){r.memoizedState=dl(e,n,s,i);return}}qe.flags|=t,r.memoizedState=dl(1|e,n,s,i)}function TE(t,e){return Ah(8390656,8,t,e)}function cy(t,e){return ef(2048,8,t,e)}function AS(t,e){return ef(4,2,t,e)}function RS(t,e){return ef(4,4,t,e)}function CS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kS(t,e,n){return n=n!=null?n.concat([t]):null,ef(4,4,CS.bind(null,e,t),n)}function hy(){}function xS(t,e){var n=Vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ay(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function bS(t,e){var n=Vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ay(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function LS(t,e,n){return Ls&21?(Kn(n,e)||(n=OP(),qe.lanes|=n,Ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function bN(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var i=um.transition;um.transition={};try{t(!1),e()}finally{Ae=n,um.transition=i}}function NS(){return Vn().memoizedState}function LN(t,e,n){var i=Tr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},DS(t))OS(e,n);else if(n=hS(t,e,n,i),n!==null){var r=Qt();Gn(n,t,i,r),MS(n,e,i)}}function NN(t,e,n){var i=Tr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(DS(t))OS(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Kn(l,a)){var c=e.interleaved;c===null?(r.next=r,ny(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=hS(t,e,r,i),n!==null&&(r=Qt(),Gn(n,t,i,r),MS(n,e,i))}}function DS(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function OS(t,e){Mu=ud=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,$_(t,n)}}var ld={readContext:Mn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},DN={readContext:Mn,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:TE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ah(4194308,4,CS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ah(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ah(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ii();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=LN.bind(null,qe,t),[i.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:EE,useDebugValue:hy,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=EE(!1),e=t[0];return t=bN.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=qe,r=ii();if(Fe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),wt===null)throw Error(B(349));Ls&30||wS(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,TE(ES.bind(null,i,s,t),[t]),i.flags|=2048,dl(9,IS.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=ii(),e=wt.identifierPrefix;if(Fe){var n=bi,i=xi;n=(i&~(1<<32-Hn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=cl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ON={readContext:Mn,useCallback:xS,useContext:Mn,useEffect:cy,useImperativeHandle:kS,useInsertionEffect:AS,useLayoutEffect:RS,useMemo:bS,useReducer:lm,useRef:SS,useState:function(){return lm(hl)},useDebugValue:hy,useDeferredValue:function(t){var e=Vn();return LS(e,dt.memoizedState,t)},useTransition:function(){var t=lm(hl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:vS,useId:NS,unstable_isNewReconciler:!1},MN={readContext:Mn,useCallback:xS,useContext:Mn,useEffect:cy,useImperativeHandle:kS,useInsertionEffect:AS,useLayoutEffect:RS,useMemo:bS,useReducer:cm,useRef:SS,useState:function(){return cm(hl)},useDebugValue:hy,useDeferredValue:function(t){var e=Vn();return dt===null?e.memoizedState=t:LS(e,dt.memoizedState,t)},useTransition:function(){var t=cm(hl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:vS,useId:NS,unstable_isNewReconciler:!1};function sa(t,e){try{var n="",i=e;do n+=cL(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function hm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VN=typeof WeakMap=="function"?WeakMap:Map;function VS(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){hd||(hd=!0,kg=i),vg(t,e)},n}function FS(t,e,n){n=Mi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){vg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vg(t,e),typeof i!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function PE(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new VN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=YN.bind(null,t,e,n),e.then(t,t))}function SE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function AE(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var FN=Hi.ReactCurrentOwner,ln=!1;function Ht(t,e,n,i){e.child=t===null?gS(e,null,n,i):ia(e,t.child,n,i)}function RE(t,e,n,i,r){n=n.render;var s=e.ref;return Wo(e,r),i=uy(t,e,n,i,s,r),n=ly(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$i(t,e,r)):(Fe&&n&&Q_(e),e.flags|=1,Ht(t,e,i,r),e.child)}function CE(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!vy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,BS(t,e,s,i,r)):(t=xh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:rl,n(a,i)&&t.ref===e.ref)return $i(t,e,r)}return e.flags|=1,t=Pr(s,i),t.ref=e.ref,t.return=e,e.child=t}function BS(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(rl(s,i)&&t.ref===e.ref)if(ln=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,$i(t,e,r)}return wg(t,e,n,i,r)}function zS(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Fo,gn),gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Fo,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Le(Fo,gn),gn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Le(Fo,gn),gn|=i;return Ht(t,e,r,n),e.child}function US(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wg(t,e,n,i,r){var s=pn(n)?xs:qt.current;return s=ta(e,s),Wo(e,r),n=uy(t,e,n,i,s,r),i=ly(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$i(t,e,r)):(Fe&&i&&Q_(e),e.flags|=1,Ht(t,e,n,r),e.child)}function kE(t,e,n,i,r){if(pn(n)){var s=!0;td(e)}else s=!1;if(Wo(e,r),e.stateNode===null)Rh(t,e),pS(e,n,i),yg(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mn(d):(d=pn(n)?xs:qt.current,d=ta(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||c!==d)&&wE(e,a,i,d),ar=!1;var _=e.memoizedState;a.state=_,od(e,i,a,r),c=e.memoizedState,l!==i||_!==c||fn.current||ar?(typeof p=="function"&&(_g(e,n,p,i),c=e.memoizedState),(l=ar||vE(e,n,l,i,_,c,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=d,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,dS(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:$n(e.type,l),a.props=d,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=pn(n)?xs:qt.current,c=ta(e,c));var v=n.getDerivedStateFromProps;(p=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||_!==c)&&wE(e,a,i,c),ar=!1,_=e.memoizedState,a.state=_,od(e,i,a,r);var S=e.memoizedState;l!==g||_!==S||fn.current||ar?(typeof v=="function"&&(_g(e,n,v,i),S=e.memoizedState),(d=ar||vE(e,n,d,i,_,S,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,S,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,S,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=S),a.props=i,a.state=S,a.context=c,i=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Ig(t,e,n,i,s,r)}function Ig(t,e,n,i,r,s){US(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&pE(e,n,!1),$i(t,e,s);i=e.stateNode,FN.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=ia(e,t.child,null,s),e.child=ia(e,null,l,s)):Ht(t,e,l,s),e.memoizedState=i.state,r&&pE(e,n,!0),e.child}function $S(t){var e=t.stateNode;e.pendingContext?fE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fE(t,e.context,!1),ry(t,e.containerInfo)}function xE(t,e,n,i,r){return na(),J_(r),e.flags|=256,Ht(t,e,n,i),e.child}var Eg={dehydrated:null,treeContext:null,retryLane:0};function Tg(t){return{baseLanes:t,cachePool:null,transitions:null}}function jS(t,e,n){var i=e.pendingProps,r=je.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Le(je,r&1),t===null)return mg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=rf(a,i,0,null),t=Ss(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Tg(n),e.memoizedState=Eg,t):dy(e,a));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return BN(t,e,a,i,l,r,n);if(s){s=i.fallback,a=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Pr(r,c),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=Pr(l,s):(s=Ss(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?Tg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Eg,i}return s=t.child,t=s.sibling,i=Pr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function dy(t,e){return e=rf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rh(t,e,n,i){return i!==null&&J_(i),ia(e,t.child,null,n),t=dy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BN(t,e,n,i,r,s,a){if(n)return e.flags&256?(e.flags&=-257,i=hm(Error(B(422))),rh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=rf({mode:"visible",children:i.children},r,0,null),s=Ss(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ia(e,t.child,null,a),e.child.memoizedState=Tg(a),e.memoizedState=Eg,s);if(!(e.mode&1))return rh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(B(419)),i=hm(s,i,void 0),rh(t,e,a,i)}if(l=(a&t.childLanes)!==0,ln||l){if(i=wt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ui(t,r),Gn(i,t,r,-1))}return yy(),i=hm(Error(B(421))),rh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=JN.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,yn=wr(r.nextSibling),wn=e,Fe=!0,qn=null,t!==null&&(xn[bn++]=xi,xn[bn++]=bi,xn[bn++]=bs,xi=t.id,bi=t.overflow,bs=e),e=dy(e,i.children),e.flags|=4096,e)}function bE(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),gg(t.return,e,n)}function dm(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function qS(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ht(t,e,i.children,n),i=je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bE(t,n,e);else if(t.tag===19)bE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Le(je,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ad(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),dm(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ad(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}dm(e,!0,n,null,s);break;case"together":dm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zN(t,e,n){switch(e.tag){case 3:$S(e),na();break;case 5:_S(e);break;case 1:pn(e.type)&&td(e);break;case 4:ry(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Le(rd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Le(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?jS(t,e,n):(Le(je,je.current&1),t=$i(t,e,n),t!==null?t.sibling:null);Le(je,je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return qS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Le(je,je.current),i)break;return null;case 22:case 23:return e.lanes=0,zS(t,e,n)}return $i(t,e,n)}var WS,Pg,HS,GS;WS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pg=function(){};HS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ys(gi.current);var s=null;switch(n){case"input":r=Hm(t,r),i=Hm(t,i),s=[];break;case"select":r=He({},r,{value:void 0}),i=He({},i,{value:void 0}),s=[];break;case"textarea":r=Zm(t,r),i=Zm(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Xh)}Ym(n,i);var a;n=null;for(d in r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var c=i[d];if(l=r!=null?r[d]:void 0,i.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yu.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",t),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};GS=function(t,e,n,i){n!==i&&(e.flags|=4)};function uu(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function UN(t,e,n){var i=e.pendingProps;switch(Y_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(e),null;case 1:return pn(e.type)&&ed(),Bt(e),null;case 3:return i=e.stateNode,ra(),Ve(fn),Ve(qt),oy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(nh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(Lg(qn),qn=null))),Pg(t,e),Bt(e),null;case 5:sy(e);var r=ys(ll.current);if(n=e.type,t!==null&&e.stateNode!=null)HS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Bt(e),null}if(t=ys(gi.current),nh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[ri]=e,i[al]=s,t=(e.mode&1)!==0,n){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(r=0;r<Tu.length;r++)De(Tu[r],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":zI(i,s),De("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},De("invalid",i);break;case"textarea":$I(i,s),De("invalid",i)}Ym(n,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&th(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&th(i.textContent,l,t),r=["children",""+l]):Yu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&De("scroll",i)}switch(n){case"input":Gc(i),UI(i,s,!0);break;case"textarea":Gc(i),jI(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Xh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ri]=e,t[al]=i,WS(t,e,!1,!1),e.stateNode=t;e:{switch(a=Jm(n,i),n){case"dialog":De("cancel",t),De("close",t),r=i;break;case"iframe":case"object":case"embed":De("load",t),r=i;break;case"video":case"audio":for(r=0;r<Tu.length;r++)De(Tu[r],t);r=i;break;case"source":De("error",t),r=i;break;case"img":case"image":case"link":De("error",t),De("load",t),r=i;break;case"details":De("toggle",t),r=i;break;case"input":zI(t,i),r=Hm(t,i),De("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=He({},i,{value:void 0}),De("invalid",t);break;case"textarea":$I(t,i),r=Zm(t,i),De("invalid",t);break;default:r=i}Ym(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?TP(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&IP(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ju(t,c):typeof c=="number"&&Ju(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&De("scroll",t):c!=null&&M_(t,s,c,a))}switch(n){case"input":Gc(t),UI(t,i,!1);break;case"textarea":Gc(t),jI(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Cr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Uo(t,!!i.multiple,s,!1):i.defaultValue!=null&&Uo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Xh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bt(e),null;case 6:if(t&&e.stateNode!=null)GS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(n=ys(ll.current),ys(gi.current),nh(e)){if(i=e.stateNode,n=e.memoizedProps,i[ri]=e,(s=i.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:th(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&th(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ri]=e,e.stateNode=i}return Bt(e),null;case 13:if(Ve(je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&yn!==null&&e.mode&1&&!(e.flags&128))cS(),na(),e.flags|=98560,s=!1;else if(s=nh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[ri]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bt(e),s=!1}else qn!==null&&(Lg(qn),qn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?ft===0&&(ft=3):yy())),e.updateQueue!==null&&(e.flags|=4),Bt(e),null);case 4:return ra(),Pg(t,e),t===null&&sl(e.stateNode.containerInfo),Bt(e),null;case 10:return ty(e.type._context),Bt(e),null;case 17:return pn(e.type)&&ed(),Bt(e),null;case 19:if(Ve(je),s=e.memoizedState,s===null)return Bt(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)uu(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ad(t),a!==null){for(e.flags|=128,uu(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&et()>oa&&(e.flags|=128,i=!0,uu(s,!1),e.lanes=4194304)}else{if(!i)if(t=ad(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Fe)return Bt(e),null}else 2*et()-s.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,i=!0,uu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=et(),e.sibling=null,n=je.current,Le(je,i?n&1|2:n&1),e):(Bt(e),null);case 22:case 23:return _y(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gn&1073741824&&(Bt(e),e.subtreeFlags&6&&(e.flags|=8192)):Bt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function $N(t,e){switch(Y_(e),e.tag){case 1:return pn(e.type)&&ed(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),Ve(fn),Ve(qt),oy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sy(e),null;case 13:if(Ve(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(je),null;case 4:return ra(),null;case 10:return ty(e.type._context),null;case 22:case 23:return _y(),null;case 24:return null;default:return null}}var sh=!1,Ut=!1,jN=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ke(t,e,i)}else n.current=null}function Sg(t,e,n){try{n()}catch(i){Ke(t,e,i)}}var LE=!1;function qN(t,e){if(ug=Qh,t=YP(),Z_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,p=0,g=t,_=null;t:for(;;){for(var v;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(v=g.firstChild)!==null;)_=g,g=v;for(;;){if(g===t)break t;if(_===n&&++d===r&&(l=a),_===s&&++p===i&&(c=a),(v=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lg={focusedElem:t,selectionRange:n},Qh=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var T=S.memoizedProps,C=S.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?T:$n(e.type,T),C);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(x){Ke(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return S=LE,LE=!1,S}function Vu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Sg(e,n,s)}r=r.next}while(r!==i)}}function tf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Ag(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KS(t){var e=t.alternate;e!==null&&(t.alternate=null,KS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[al],delete e[dg],delete e[AN],delete e[RN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZS(t){return t.tag===5||t.tag===3||t.tag===4}function NE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xh));else if(i!==4&&(t=t.child,t!==null))for(Rg(t,e,n),t=t.sibling;t!==null;)Rg(t,e,n),t=t.sibling}function Cg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Cg(t,e,n),t=t.sibling;t!==null;)Cg(t,e,n),t=t.sibling}var Ct=null,jn=!1;function tr(t,e,n){for(n=n.child;n!==null;)QS(t,e,n),n=n.sibling}function QS(t,e,n){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(Gd,n)}catch{}switch(n.tag){case 5:Ut||Vo(n,e);case 6:var i=Ct,r=jn;Ct=null,tr(t,e,n),Ct=i,jn=r,Ct!==null&&(jn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(jn?(t=Ct,n=n.stateNode,t.nodeType===8?sm(t.parentNode,n):t.nodeType===1&&sm(t,n),nl(t)):sm(Ct,n.stateNode));break;case 4:i=Ct,r=jn,Ct=n.stateNode.containerInfo,jn=!0,tr(t,e,n),Ct=i,jn=r;break;case 0:case 11:case 14:case 15:if(!Ut&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Sg(n,e,a),r=r.next}while(r!==i)}tr(t,e,n);break;case 1:if(!Ut&&(Vo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){Ke(n,e,l)}tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:n.mode&1?(Ut=(i=Ut)||n.memoizedState!==null,tr(t,e,n),Ut=i):tr(t,e,n);break;default:tr(t,e,n)}}function DE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jN),e.forEach(function(i){var r=XN.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ct=l.stateNode,jn=!1;break e;case 3:Ct=l.stateNode.containerInfo,jn=!0;break e;case 4:Ct=l.stateNode.containerInfo,jn=!0;break e}l=l.return}if(Ct===null)throw Error(B(160));QS(s,a,r),Ct=null,jn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ke(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YS(e,t),e=e.sibling}function YS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),ni(t),i&4){try{Vu(3,t,t.return),tf(3,t)}catch(T){Ke(t,t.return,T)}try{Vu(5,t,t.return)}catch(T){Ke(t,t.return,T)}}break;case 1:Un(e,t),ni(t),i&512&&n!==null&&Vo(n,n.return);break;case 5:if(Un(e,t),ni(t),i&512&&n!==null&&Vo(n,n.return),t.flags&32){var r=t.stateNode;try{Ju(r,"")}catch(T){Ke(t,t.return,T)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&yP(r,s),Jm(l,a);var d=Jm(l,s);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?TP(r,g):p==="dangerouslySetInnerHTML"?IP(r,g):p==="children"?Ju(r,g):M_(r,p,g,d)}switch(l){case"input":Gm(r,s);break;case"textarea":vP(r,s);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Uo(r,!!s.multiple,v,!1):_!==!!s.multiple&&(s.defaultValue!=null?Uo(r,!!s.multiple,s.defaultValue,!0):Uo(r,!!s.multiple,s.multiple?[]:"",!1))}r[al]=s}catch(T){Ke(t,t.return,T)}}break;case 6:if(Un(e,t),ni(t),i&4){if(t.stateNode===null)throw Error(B(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(T){Ke(t,t.return,T)}}break;case 3:if(Un(e,t),ni(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{nl(e.containerInfo)}catch(T){Ke(t,t.return,T)}break;case 4:Un(e,t),ni(t);break;case 13:Un(e,t),ni(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(my=et())),i&4&&DE(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||p,Un(e,t),Ut=d):Un(e,t),ni(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(g=Q=p;Q!==null;){switch(_=Q,v=_.child,_.tag){case 0:case 11:case 14:case 15:Vu(4,_,_.return);break;case 1:Vo(_,_.return);var S=_.stateNode;if(typeof S.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(T){Ke(i,n,T)}}break;case 5:Vo(_,_.return);break;case 22:if(_.memoizedState!==null){ME(g);continue}}v!==null?(v.return=_,Q=v):ME(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{r=g.stateNode,d?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=EP("display",a))}catch(T){Ke(t,t.return,T)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(T){Ke(t,t.return,T)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Un(e,t),ni(t),i&4&&DE(t);break;case 21:break;default:Un(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZS(n)){var i=n;break e}n=n.return}throw Error(B(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ju(r,""),i.flags&=-33);var s=NE(t);Cg(t,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,l=NE(t);Rg(t,l,a);break;default:throw Error(B(161))}}catch(c){Ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WN(t,e,n){Q=t,JS(t)}function JS(t,e,n){for(var i=(t.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||sh;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=sh;var d=Ut;if(sh=a,(Ut=c)&&!d)for(Q=r;Q!==null;)a=Q,c=a.child,a.tag===22&&a.memoizedState!==null?VE(r):c!==null?(c.return=a,Q=c):VE(r);for(;s!==null;)Q=s,JS(s),s=s.sibling;Q=r,sh=l,Ut=d}OE(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):OE(t)}}function OE(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||tf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ut)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yE(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yE(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&nl(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ut||e.flags&512&&Ag(e)}catch(_){Ke(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function ME(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function VE(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tf(4,e)}catch(c){Ke(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){Ke(e,r,c)}}var s=e.return;try{Ag(e)}catch(c){Ke(e,s,c)}break;case 5:var a=e.return;try{Ag(e)}catch(c){Ke(e,a,c)}}}catch(c){Ke(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var HN=Math.ceil,cd=Hi.ReactCurrentDispatcher,fy=Hi.ReactCurrentOwner,On=Hi.ReactCurrentBatchConfig,we=0,wt=null,ut=null,Lt=0,gn=0,Fo=jr(0),ft=0,fl=null,Ns=0,nf=0,py=0,Fu=null,un=null,my=0,oa=1/0,Ci=null,hd=!1,kg=null,Er=null,oh=!1,fr=null,dd=0,Bu=0,xg=null,Ch=-1,kh=0;function Qt(){return we&6?et():Ch!==-1?Ch:Ch=et()}function Tr(t){return t.mode&1?we&2&&Lt!==0?Lt&-Lt:kN.transition!==null?(kh===0&&(kh=OP()),kh):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:$P(t.type)),t):1}function Gn(t,e,n,i){if(50<Bu)throw Bu=0,xg=null,Error(B(185));Gl(t,n,i),(!(we&2)||t!==wt)&&(t===wt&&(!(we&2)&&(nf|=n),ft===4&&lr(t,Lt)),mn(t,i),n===1&&we===0&&!(e.mode&1)&&(oa=et()+500,Jd&&qr()))}function mn(t,e){var n=t.callbackNode;kL(t,e);var i=Zh(t,t===wt?Lt:0);if(i===0)n!==null&&HI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&HI(n),e===1)t.tag===0?CN(FE.bind(null,t)):aS(FE.bind(null,t)),PN(function(){!(we&6)&&qr()}),n=null;else{switch(MP(i)){case 1:n=U_;break;case 4:n=NP;break;case 16:n=Kh;break;case 536870912:n=DP;break;default:n=Kh}n=o1(n,XS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XS(t,e){if(Ch=-1,kh=0,we&6)throw Error(B(327));var n=t.callbackNode;if(Ho()&&t.callbackNode!==n)return null;var i=Zh(t,t===wt?Lt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=fd(t,i);else{e=i;var r=we;we|=2;var s=t1();(wt!==t||Lt!==e)&&(Ci=null,oa=et()+500,Ps(t,e));do try{ZN();break}catch(l){e1(t,l)}while(1);ey(),cd.current=s,we=r,ut!==null?e=0:(wt=null,Lt=0,e=ft)}if(e!==0){if(e===2&&(r=ig(t),r!==0&&(i=r,e=bg(t,r))),e===1)throw n=fl,Ps(t,0),lr(t,i),mn(t,et()),n;if(e===6)lr(t,i);else{if(r=t.current.alternate,!(i&30)&&!GN(r)&&(e=fd(t,i),e===2&&(s=ig(t),s!==0&&(i=s,e=bg(t,s))),e===1))throw n=fl,Ps(t,0),lr(t,i),mn(t,et()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(B(345));case 2:us(t,un,Ci);break;case 3:if(lr(t,i),(i&130023424)===i&&(e=my+500-et(),10<e)){if(Zh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Qt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=hg(us.bind(null,t,un,Ci),e);break}us(t,un,Ci);break;case 4:if(lr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-Hn(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=et()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*HN(i/1960))-i,10<i){t.timeoutHandle=hg(us.bind(null,t,un,Ci),i);break}us(t,un,Ci);break;case 5:us(t,un,Ci);break;default:throw Error(B(329))}}}return mn(t,et()),t.callbackNode===n?XS.bind(null,t):null}function bg(t,e){var n=Fu;return t.current.memoizedState.isDehydrated&&(Ps(t,e).flags|=256),t=fd(t,e),t!==2&&(e=un,un=n,e!==null&&Lg(e)),t}function Lg(t){un===null?un=t:un.push.apply(un,t)}function GN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Kn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~py,e&=~nf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),i=1<<n;t[n]=-1,e&=~i}}function FE(t){if(we&6)throw Error(B(327));Ho();var e=Zh(t,0);if(!(e&1))return mn(t,et()),null;var n=fd(t,e);if(t.tag!==0&&n===2){var i=ig(t);i!==0&&(e=i,n=bg(t,i))}if(n===1)throw n=fl,Ps(t,0),lr(t,e),mn(t,et()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,un,Ci),mn(t,et()),null}function gy(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(oa=et()+500,Jd&&qr())}}function Ds(t){fr!==null&&fr.tag===0&&!(we&6)&&Ho();var e=we;we|=1;var n=On.transition,i=Ae;try{if(On.transition=null,Ae=1,t)return t()}finally{Ae=i,On.transition=n,we=e,!(we&6)&&qr()}}function _y(){gn=Fo.current,Ve(Fo)}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TN(n)),ut!==null)for(n=ut.return;n!==null;){var i=n;switch(Y_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ed();break;case 3:ra(),Ve(fn),Ve(qt),oy();break;case 5:sy(i);break;case 4:ra();break;case 13:Ve(je);break;case 19:Ve(je);break;case 10:ty(i.type._context);break;case 22:case 23:_y()}n=n.return}if(wt=t,ut=t=Pr(t.current,null),Lt=gn=e,ft=0,fl=null,py=nf=Ns=0,un=Fu=null,_s!==null){for(e=0;e<_s.length;e++)if(n=_s[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}n.pending=i}_s=null}return t}function e1(t,e){do{var n=ut;try{if(ey(),Sh.current=ld,ud){for(var i=qe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ud=!1}if(Ls=0,yt=dt=qe=null,Mu=!1,cl=0,fy.current=null,n===null||n.return===null){ft=1,fl=e,ut=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=Lt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=SE(a);if(v!==null){v.flags&=-257,AE(v,a,l,s,e),v.mode&1&&PE(s,d,e),e=v,c=d;var S=e.updateQueue;if(S===null){var T=new Set;T.add(c),e.updateQueue=T}else S.add(c);break e}else{if(!(e&1)){PE(s,d,e),yy();break e}c=Error(B(426))}}else if(Fe&&l.mode&1){var C=SE(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),AE(C,a,l,s,e),J_(sa(c,l));break e}}s=c=sa(c,l),ft!==4&&(ft=2),Fu===null?Fu=[s]:Fu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=VS(s,c,e);_E(s,I);break e;case 1:l=c;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Er===null||!Er.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=FS(s,l,e);_E(s,x);break e}}s=s.return}while(s!==null)}i1(n)}catch(O){e=O,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(1)}function t1(){var t=cd.current;return cd.current=ld,t===null?ld:t}function yy(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(Ns&268435455)&&!(nf&268435455)||lr(wt,Lt)}function fd(t,e){var n=we;we|=2;var i=t1();(wt!==t||Lt!==e)&&(Ci=null,Ps(t,e));do try{KN();break}catch(r){e1(t,r)}while(1);if(ey(),we=n,cd.current=i,ut!==null)throw Error(B(261));return wt=null,Lt=0,ft}function KN(){for(;ut!==null;)n1(ut)}function ZN(){for(;ut!==null&&!wL();)n1(ut)}function n1(t){var e=s1(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?i1(t):ut=e,fy.current=null}function i1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$N(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ut=null;return}}else if(n=UN(n,e,gn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);ft===0&&(ft=5)}function us(t,e,n){var i=Ae,r=On.transition;try{On.transition=null,Ae=1,QN(t,e,n,i)}finally{On.transition=r,Ae=i}return null}function QN(t,e,n,i){do Ho();while(fr!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(xL(t,s),t===wt&&(ut=wt=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oh||(oh=!0,o1(Kh,function(){return Ho(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=On.transition,On.transition=null;var a=Ae;Ae=1;var l=we;we|=4,fy.current=null,qN(t,n),YS(n,t),gN(lg),Qh=!!ug,lg=ug=null,t.current=n,WN(n),IL(),we=l,Ae=a,On.transition=s}else t.current=n;if(oh&&(oh=!1,fr=t,dd=r),s=t.pendingLanes,s===0&&(Er=null),PL(n.stateNode),mn(t,et()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(hd)throw hd=!1,t=kg,kg=null,t;return dd&1&&t.tag!==0&&Ho(),s=t.pendingLanes,s&1?t===xg?Bu++:(Bu=0,xg=t):Bu=0,qr(),null}function Ho(){if(fr!==null){var t=MP(dd),e=On.transition,n=Ae;try{if(On.transition=null,Ae=16>t?16:t,fr===null)var i=!1;else{if(t=fr,fr=null,dd=0,we&6)throw Error(B(331));var r=we;for(we|=4,Q=t.current;Q!==null;){var s=Q,a=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:Vu(8,p,s)}var g=p.child;if(g!==null)g.return=p,Q=g;else for(;Q!==null;){p=Q;var _=p.sibling,v=p.return;if(KS(p),p===d){Q=null;break}if(_!==null){_.return=v,Q=_;break}Q=v}}}var S=s.alternate;if(S!==null){var T=S.child;if(T!==null){S.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}Q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Q=a;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vu(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,Q=I;break e}Q=s.return}}var w=t.current;for(Q=w;Q!==null;){a=Q;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,Q=E;else e:for(a=w;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tf(9,l)}}catch(O){Ke(l,l.return,O)}if(l===a){Q=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,Q=x;break e}Q=l.return}}if(we=r,qr(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(Gd,t)}catch{}i=!0}return i}finally{Ae=n,On.transition=e}}return!1}function BE(t,e,n){e=sa(n,e),e=VS(t,e,1),t=Ir(t,e,1),e=Qt(),t!==null&&(Gl(t,1,e),mn(t,e))}function Ke(t,e,n){if(t.tag===3)BE(t,t,n);else for(;e!==null;){if(e.tag===3){BE(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Er===null||!Er.has(i))){t=sa(n,t),t=FS(e,t,1),e=Ir(e,t,1),t=Qt(),e!==null&&(Gl(e,1,t),mn(e,t));break}}e=e.return}}function YN(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Lt&n)===n&&(ft===4||ft===3&&(Lt&130023424)===Lt&&500>et()-my?Ps(t,0):py|=n),mn(t,e)}function r1(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var n=Qt();t=Ui(t,e),t!==null&&(Gl(t,e,n),mn(t,n))}function JN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r1(t,n)}function XN(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(e),r1(t,n)}var s1;s1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,zN(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Fe&&e.flags&1048576&&uS(e,id,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Rh(t,e),t=e.pendingProps;var r=ta(e,qt.current);Wo(e,n),r=uy(null,e,i,t,r,n);var s=ly();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(i)?(s=!0,td(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,iy(e),r.updater=Xd,e.stateNode=r,r._reactInternals=e,yg(e,i,t,n),e=Ig(null,e,i,!0,s,n)):(e.tag=0,Fe&&s&&Q_(e),Ht(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Rh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=tD(i),t=$n(i,t),r){case 0:e=wg(null,e,i,t,n);break e;case 1:e=kE(null,e,i,t,n);break e;case 11:e=RE(null,e,i,t,n);break e;case 14:e=CE(null,e,i,$n(i.type,t),n);break e}throw Error(B(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),wg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),kE(t,e,i,r,n);case 3:e:{if($S(e),t===null)throw Error(B(387));i=e.pendingProps,s=e.memoizedState,r=s.element,dS(t,e),od(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=sa(Error(B(423)),e),e=xE(t,e,i,n,r);break e}else if(i!==r){r=sa(Error(B(424)),e),e=xE(t,e,i,n,r);break e}else for(yn=wr(e.stateNode.containerInfo.firstChild),wn=e,Fe=!0,qn=null,n=gS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),i===r){e=$i(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 5:return _S(e),t===null&&mg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,cg(i,r)?a=null:s!==null&&cg(i,s)&&(e.flags|=32),US(t,e),Ht(t,e,a,n),e.child;case 6:return t===null&&mg(e),null;case 13:return jS(t,e,n);case 4:return ry(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ia(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),RE(t,e,i,r,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Le(rd,i._currentValue),i._currentValue=a,s!==null)if(Kn(s.value,a)){if(s.children===r.children&&!fn.current){e=$i(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Mi(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),gg(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(B(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),gg(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ht(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Wo(e,n),r=Mn(r),i=i(r),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return i=e.type,r=$n(i,e.pendingProps),r=$n(i.type,r),CE(t,e,i,r,n);case 15:return BS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),Rh(t,e),e.tag=1,pn(i)?(t=!0,td(e)):t=!1,Wo(e,n),pS(e,i,r),yg(e,i,r,n),Ig(null,e,i,!0,t,n);case 19:return qS(t,e,n);case 22:return zS(t,e,n)}throw Error(B(156,e.tag))};function o1(t,e){return LP(t,e)}function eD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,i){return new eD(t,e,n,i)}function vy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tD(t){if(typeof t=="function")return vy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===F_)return 11;if(t===B_)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xh(t,e,n,i,r,s){var a=2;if(i=t,typeof t=="function")vy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Co:return Ss(n.children,r,s,e);case V_:a=8,r|=8;break;case $m:return t=Nn(12,n,e,r|2),t.elementType=$m,t.lanes=s,t;case jm:return t=Nn(13,n,e,r),t.elementType=jm,t.lanes=s,t;case qm:return t=Nn(19,n,e,r),t.elementType=qm,t.lanes=s,t;case mP:return rf(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fP:a=10;break e;case pP:a=9;break e;case F_:a=11;break e;case B_:a=14;break e;case or:a=16,i=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Nn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ss(t,e,n,i){return t=Nn(7,t,i,e),t.lanes=n,t}function rf(t,e,n,i){return t=Nn(22,t,i,e),t.elementType=mP,t.lanes=n,t.stateNode={isHidden:!1},t}function fm(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function pm(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kp(0),this.expirationTimes=Kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function wy(t,e,n,i,r,s,a,l,c){return t=new nD(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iy(s),t}function iD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function a1(t){if(!t)return kr;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(pn(n))return oS(t,n,e)}return e}function u1(t,e,n,i,r,s,a,l,c){return t=wy(n,i,!0,t,r,s,a,l,c),t.context=a1(null),n=t.current,i=Qt(),r=Tr(n),s=Mi(i,r),s.callback=e??null,Ir(n,s,r),t.current.lanes=r,Gl(t,r,i),mn(t,i),t}function sf(t,e,n,i){var r=e.current,s=Qt(),a=Tr(r);return n=a1(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ir(r,e,a),t!==null&&(Gn(t,r,a,s),Ph(t,r,a)),a}function pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Iy(t,e){zE(t,e),(t=t.alternate)&&zE(t,e)}function rD(){return null}var l1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ey(t){this._internalRoot=t}of.prototype.render=Ey.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));sf(t,e,null,null)};of.prototype.unmount=Ey.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ds(function(){sf(null,t,null,null)}),e[zi]=null}};function of(t){this._internalRoot=t}of.prototype.unstable_scheduleHydration=function(t){if(t){var e=BP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&UP(t)}};function Ty(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function UE(){}function sD(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var d=pd(a);s.call(d)}}var a=u1(e,i,t,0,null,!1,!1,"",UE);return t._reactRootContainer=a,t[zi]=a.current,sl(t.nodeType===8?t.parentNode:t),Ds(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var d=pd(c);l.call(d)}}var c=wy(t,0,!1,null,null,!1,!1,"",UE);return t._reactRootContainer=c,t[zi]=c.current,sl(t.nodeType===8?t.parentNode:t),Ds(function(){sf(e,c,n,i)}),c}function uf(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var l=r;r=function(){var c=pd(a);l.call(c)}}sf(e,a,t,r)}else a=sD(n,e,t,r,i);return pd(a)}VP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Eu(e.pendingLanes);n!==0&&($_(e,n|1),mn(e,et()),!(we&6)&&(oa=et()+500,qr()))}break;case 13:Ds(function(){var i=Ui(t,1);if(i!==null){var r=Qt();Gn(i,t,1,r)}}),Iy(t,1)}};j_=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var n=Qt();Gn(e,t,134217728,n)}Iy(t,134217728)}};FP=function(t){if(t.tag===13){var e=Tr(t),n=Ui(t,e);if(n!==null){var i=Qt();Gn(n,t,e,i)}Iy(t,e)}};BP=function(){return Ae};zP=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};eg=function(t,e,n){switch(e){case"input":if(Gm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Yd(i);if(!r)throw Error(B(90));_P(i),Gm(i,r)}}}break;case"textarea":vP(t,n);break;case"select":e=n.value,e!=null&&Uo(t,!!n.multiple,e,!1)}};AP=gy;RP=Ds;var oD={usingClientEntryPoint:!1,Events:[Zl,Lo,Yd,PP,SP,gy]},lu={findFiberByHostInstance:gs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aD={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xP(t),t===null?null:t.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||rD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{Gd=ah.inject(aD),mi=ah}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oD;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ty(e))throw Error(B(200));return iD(t,e,null,n)};Pn.createRoot=function(t,e){if(!Ty(t))throw Error(B(299));var n=!1,i="",r=l1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=wy(t,1,!1,null,null,n,!1,i,r),t[zi]=e.current,sl(t.nodeType===8?t.parentNode:t),new Ey(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=xP(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Ds(t)};Pn.hydrate=function(t,e,n){if(!af(e))throw Error(B(200));return uf(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!Ty(t))throw Error(B(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",a=l1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=u1(e,null,t,1,n??null,r,!1,s,a),t[zi]=e.current,sl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new of(e)};Pn.render=function(t,e,n){if(!af(e))throw Error(B(200));return uf(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!af(t))throw Error(B(40));return t._reactRootContainer?(Ds(function(){uf(null,null,t,!1,function(){t._reactRootContainer=null,t[zi]=null})}),!0):!1};Pn.unstable_batchedUpdates=gy;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!af(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return uf(t,e,n,!1,i)};Pn.version="18.2.0-next-9e3b772b8-20220608";function c1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c1)}catch(t){console.error(t)}}c1(),uP.exports=Pn;var h1=uP.exports,$E=h1;zm.createRoot=$E.createRoot,zm.hydrateRoot=$E.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pl.apply(this,arguments)}var pr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pr||(pr={}));const jE="popstate";function uD(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:a,hash:l}=i.location;return Ng("",{pathname:s,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:md(r)}return cD(e,n,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Py(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lD(){return Math.random().toString(36).substr(2,8)}function qE(t,e){return{usr:t.state,key:t.key,idx:e}}function Ng(t,e,n,i){return n===void 0&&(n=null),pl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sa(e):e,{state:n,key:e&&e.key||i||lD()})}function md(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Sa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function cD(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,l=pr.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(pl({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function g(){l=pr.Pop;let C=p(),I=C==null?null:C-d;d=C,c&&c({action:l,location:T.location,delta:I})}function _(C,I){l=pr.Push;let w=Ng(T.location,C,I);n&&n(w,C),d=p()+1;let E=qE(w,d),x=T.createHref(w);try{a.pushState(E,"",x)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;r.location.assign(x)}s&&c&&c({action:l,location:T.location,delta:1})}function v(C,I){l=pr.Replace;let w=Ng(T.location,C,I);n&&n(w,C),d=p();let E=qE(w,d),x=T.createHref(w);a.replaceState(E,"",x),s&&c&&c({action:l,location:T.location,delta:0})}function S(C){let I=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof C=="string"?C:md(C);return lt(I,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,I)}let T={get action(){return l},get location(){return t(r,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(jE,g),c=C,()=>{r.removeEventListener(jE,g),c=null}},createHref(C){return e(r,C)},createURL:S,encodeLocation(C){let I=S(C);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:_,replace:v,go(C){return a.go(C)}};return T}var WE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(WE||(WE={}));function hD(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Sa(e):e,r=Sy(i.pathname||"/",n);if(r==null)return null;let s=d1(t);dD(s);let a=null;for(let l=0;a==null&&l<s.length;++l)a=ID(s[l],PD(r));return a}function d1(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(lt(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let d=Sr([i,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(lt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),d1(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:vD(d,s.index),routesMeta:p})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,a);else for(let c of f1(s.path))r(s,a,c)}),e}function f1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=f1(i.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function dD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wD(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const fD=/^:\w+$/,pD=3,mD=2,gD=1,_D=10,yD=-2,HE=t=>t==="*";function vD(t,e){let n=t.split("/"),i=n.length;return n.some(HE)&&(i+=yD),e&&(i+=mD),n.filter(r=>!HE(r)).reduce((r,s)=>r+(fD.test(s)?pD:s===""?gD:_D),i)}function wD(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function ID(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=r==="/"?e:e.slice(r.length)||"/",p=ED({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d);if(!p)return null;Object.assign(i,p.params);let g=l.route;s.push({params:i,pathname:Sr([r,p.pathname]),pathnameBase:CD(Sr([r,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(r=Sr([r,p.pathnameBase]))}return s}function ED(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=TD(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((d,p,g)=>{let{paramName:_,isOptional:v}=p;if(_==="*"){let T=l[g]||"";a=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const S=l[g];return v&&!S?d[_]=void 0:d[_]=SD(S||"",_),d},{}),pathname:s,pathnameBase:a,pattern:t}}function TD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Py(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(a,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function PD(t){try{return decodeURI(t)}catch(e){return Py(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function SD(t,e){try{return decodeURIComponent(t)}catch(n){return Py(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Sy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function AD(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Sa(t):t;return{pathname:n?n.startsWith("/")?n:RD(n,e):e,search:kD(i),hash:xD(r)}}function RD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function mm(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function p1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function m1(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Sa(t):(r=pl({},t),lt(!r.pathname||!r.pathname.includes("?"),mm("?","pathname","search",r)),lt(!r.pathname||!r.pathname.includes("#"),mm("#","pathname","hash",r)),lt(!r.search||!r.search.includes("#"),mm("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,l;if(i||a==null)l=n;else{let g=e.length-1;if(a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}l=g>=0?e[g]:"/"}let c=AD(r,l),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),CD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const g1=["post","put","patch","delete"];new Set(g1);const LD=["get",...g1];new Set(LD);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gd.apply(this,arguments)}const Ay=N.createContext(null),ND=N.createContext(null),Aa=N.createContext(null),lf=N.createContext(null),Wr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),_1=N.createContext(null);function DD(t,e){let{relative:n}=e===void 0?{}:e;Yl()||lt(!1);let{basename:i,navigator:r}=N.useContext(Aa),{hash:s,pathname:a,search:l}=w1(t,{relative:n}),c=a;return i!=="/"&&(c=a==="/"?i:Sr([i,a])),r.createHref({pathname:c,search:l,hash:s})}function Yl(){return N.useContext(lf)!=null}function cf(){return Yl()||lt(!1),N.useContext(lf).location}function y1(t){N.useContext(Aa).static||N.useLayoutEffect(t)}function Ry(){let{isDataRoute:t}=N.useContext(Wr);return t?GD():OD()}function OD(){Yl()||lt(!1);let t=N.useContext(Ay),{basename:e,navigator:n}=N.useContext(Aa),{matches:i}=N.useContext(Wr),{pathname:r}=cf(),s=JSON.stringify(p1(i).map(c=>c.pathnameBase)),a=N.useRef(!1);return y1(()=>{a.current=!0}),N.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let p=m1(c,JSON.parse(s),r,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Sr([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,s,r,t])}function v1(){let{matches:t}=N.useContext(Wr),e=t[t.length-1];return e?e.params:{}}function w1(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=N.useContext(Wr),{pathname:r}=cf(),s=JSON.stringify(p1(i).map(a=>a.pathnameBase));return N.useMemo(()=>m1(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function MD(t,e){return VD(t,e)}function VD(t,e,n){Yl()||lt(!1);let{navigator:i}=N.useContext(Aa),{matches:r}=N.useContext(Wr),s=r[r.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=cf(),d;if(e){var p;let T=typeof e=="string"?Sa(e):e;l==="/"||(p=T.pathname)!=null&&p.startsWith(l)||lt(!1),d=T}else d=c;let g=d.pathname||"/",_=l==="/"?g:g.slice(l.length)||"/",v=hD(t,{pathname:_}),S=$D(v&&v.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:Sr([l,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:Sr([l,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),r,n);return e&&S?N.createElement(lf.Provider,{value:{location:gd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:pr.Pop}},S):S}function FD(){let t=HD(),e=bD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:r},n):null,s)}const BD=N.createElement(FD,null);class zD extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?N.createElement(Wr.Provider,{value:this.props.routeContext},N.createElement(_1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UD(t){let{routeContext:e,match:n,children:i}=t,r=N.useContext(Ay);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Wr.Provider,{value:e},i)}function $D(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let l=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));l>=0||lt(!1),s=s.slice(0,Math.min(s.length,l+1))}return s.reduceRight((l,c,d)=>{let p=c.route.id?a==null?void 0:a[c.route.id]:null,g=null;n&&(g=c.route.errorElement||BD);let _=e.concat(s.slice(0,d+1)),v=()=>{let S;return p?S=g:c.route.Component?S=N.createElement(c.route.Component,null):c.route.element?S=c.route.element:S=l,N.createElement(UD,{match:c,routeContext:{outlet:l,matches:_,isDataRoute:n!=null},children:S})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?N.createElement(zD,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var I1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I1||{}),_d=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_d||{});function jD(t){let e=N.useContext(Ay);return e||lt(!1),e}function qD(t){let e=N.useContext(ND);return e||lt(!1),e}function WD(t){let e=N.useContext(Wr);return e||lt(!1),e}function E1(t){let e=WD(),n=e.matches[e.matches.length-1];return n.route.id||lt(!1),n.route.id}function HD(){var t;let e=N.useContext(_1),n=qD(_d.UseRouteError),i=E1(_d.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function GD(){let{router:t}=jD(I1.UseNavigateStable),e=E1(_d.UseNavigateStable),n=N.useRef(!1);return y1(()=>{n.current=!0}),N.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,gd({fromRouteId:e},s)))},[t,e])}function bh(t){lt(!1)}function KD(t){let{basename:e="/",children:n=null,location:i,navigationType:r=pr.Pop,navigator:s,static:a=!1}=t;Yl()&&lt(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:a}),[l,s,a]);typeof i=="string"&&(i=Sa(i));let{pathname:d="/",search:p="",hash:g="",state:_=null,key:v="default"}=i,S=N.useMemo(()=>{let T=Sy(d,l);return T==null?null:{location:{pathname:T,search:p,hash:g,state:_,key:v},navigationType:r}},[l,d,p,g,_,v,r]);return S==null?null:N.createElement(Aa.Provider,{value:c},N.createElement(lf.Provider,{children:n,value:S}))}function ZD(t){let{children:e,location:n}=t;return MD(Dg(e),n)}new Promise(()=>{});function Dg(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(i,r)=>{if(!N.isValidElement(i))return;let s=[...e,r];if(i.type===N.Fragment){n.push.apply(n,Dg(i.props.children,s));return}i.type!==bh&&lt(!1),!i.props.index||!i.props.children||lt(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Dg(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Og(){return Og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Og.apply(this,arguments)}function QD(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function YD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JD(t,e){return t.button===0&&(!e||e==="_self")&&!YD(t)}const XD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],eO="startTransition",GE=Jb[eO];function tO(t){let{basename:e,children:n,future:i,window:r}=t,s=N.useRef();s.current==null&&(s.current=uD({window:r,v5Compat:!0}));let a=s.current,[l,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:d}=i||{},p=N.useCallback(g=>{d&&GE?GE(()=>c(g)):c(g)},[c,d]);return N.useLayoutEffect(()=>a.listen(p),[a,p]),N.createElement(KD,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a})}const nO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T1=N.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:l,target:c,to:d,preventScrollReset:p,unstable_viewTransition:g}=e,_=QD(e,XD),{basename:v}=N.useContext(Aa),S,T=!1;if(typeof d=="string"&&iO.test(d)&&(S=d,nO))try{let E=new URL(window.location.href),x=d.startsWith("//")?new URL(E.protocol+d):new URL(d),O=Sy(x.pathname,v);x.origin===E.origin&&O!=null?d=O+x.search+x.hash:T=!0}catch{}let C=DD(d,{relative:r}),I=rO(d,{replace:a,state:l,target:c,preventScrollReset:p,relative:r,unstable_viewTransition:g});function w(E){i&&i(E),E.defaultPrevented||I(E)}return N.createElement("a",Og({},_,{href:S||C,onClick:T||s?i:w,ref:n,target:c}))});var KE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(KE||(KE={}));var ZE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ZE||(ZE={}));function rO(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:l}=e===void 0?{}:e,c=Ry(),d=cf(),p=w1(t,{relative:a});return N.useCallback(g=>{if(JD(g,n)){g.preventDefault();let _=i!==void 0?i:md(d)===md(p);c(t,{replace:_,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:l})}},[d,c,p,i,r,n,t,s,a,l])}function P1(t,e){const n=N.useRef(e);N.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function sO(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const oO=1;function aO(t){return Object.freeze({__version:oO,map:t})}function S1(t,e){return Object.freeze({...t,...e})}const A1=N.createContext(null),R1=A1.Provider;function Cy(){const t=N.useContext(A1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function C1(t){function e(n,i){const{instance:r,context:s}=t(n).current;return N.useImperativeHandle(i,()=>r),n.children==null?null:Qu.createElement(R1,{value:s},n.children)}return N.forwardRef(e)}function uO(t){function e(n,i){const[r,s]=N.useState(!1),{instance:a}=t(n,s).current;N.useImperativeHandle(i,()=>a),N.useEffect(function(){r&&a.update()},[a,r,n.children]);const l=a._contentNode;return l?h1.createPortal(n.children,l):null}return N.forwardRef(e)}function lO(t){function e(n,i){const{instance:r}=t(n).current;return N.useImperativeHandle(i,()=>r),null}return N.forwardRef(e)}function ky(t,e){const n=N.useRef();N.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function hf(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function cO(t,e){return function(i,r){const s=Cy(),a=t(hf(i,s),s);return P1(s.map,i.attribution),ky(a.current,i.eventHandlers),e(a.current,s,i,r),a}}var Mg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Ob,function(n){var i="1.9.4";function r(o){var u,h,f,m;for(h=1,f=arguments.length;h<f;h++){m=arguments[h];for(u in m)o[u]=m[u]}return o}var s=Object.create||function(){function o(){}return function(u){return o.prototype=u,new o}}();function a(o,u){var h=Array.prototype.slice;if(o.bind)return o.bind.apply(o,h.call(arguments,1));var f=h.call(arguments,2);return function(){return o.apply(u,f.length?f.concat(h.call(arguments)):arguments)}}var l=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function d(o,u,h){var f,m,y,P;return P=function(){f=!1,m&&(y.apply(h,m),m=!1)},y=function(){f?m=arguments:(o.apply(h,arguments),setTimeout(P,u),f=!0)},y}function p(o,u,h){var f=u[1],m=u[0],y=f-m;return o===f&&h?o:((o-m)%y+y)%y+m}function g(){return!1}function _(o,u){if(u===!1)return o;var h=Math.pow(10,u===void 0?6:u);return Math.round(o*h)/h}function v(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function S(o){return v(o).split(/\s+/)}function T(o,u){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var h in u)o.options[h]=u[h];return o.options}function C(o,u,h){var f=[];for(var m in o)f.push(encodeURIComponent(h?m.toUpperCase():m)+"="+encodeURIComponent(o[m]));return(!u||u.indexOf("?")===-1?"?":"&")+f.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function w(o,u){return o.replace(I,function(h,f){var m=u[f];if(m===void 0)throw new Error("No value provided for variable "+h);return typeof m=="function"&&(m=m(u)),m})}var E=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function x(o,u){for(var h=0;h<o.length;h++)if(o[h]===u)return h;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var j=0;function Z(o){var u=+new Date,h=Math.max(0,16-(u-j));return j=u+h,window.setTimeout(o,h)}var Ee=window.requestAnimationFrame||z("RequestAnimationFrame")||Z,oe=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function xe(o,u,h){if(h&&Ee===Z)o.call(u);else return Ee.call(window,a(o,u))}function mt(o){o&&oe.call(window,o)}var es={__proto__:null,extend:r,create:s,bind:a,get lastId(){return l},stamp:c,throttle:d,wrapNum:p,falseFn:g,formatNum:_,trim:v,splitWords:S,setOptions:T,getParamString:C,template:w,isArray:E,indexOf:x,emptyImageUrl:O,requestFn:Ee,cancelFn:oe,requestAnimFrame:xe,cancelAnimFrame:mt};function An(){}An.extend=function(o){var u=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=u.__super__=this.prototype,f=s(h);f.constructor=u,u.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(u[m]=this[m]);return o.statics&&r(u,o.statics),o.includes&&(up(o.includes),r.apply(null,[f].concat(o.includes))),r(f,o),delete f.statics,delete f.includes,f.options&&(f.options=h.options?s(h.options):{},r(f.options,o.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,P=f._initHooks.length;y<P;y++)f._initHooks[y].call(this)}},u},An.include=function(o){var u=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=u,this.mergeOptions(o.options)),this},An.mergeOptions=function(o){return r(this.prototype.options,o),this},An.addInitHook=function(o){var u=Array.prototype.slice.call(arguments,1),h=typeof o=="function"?o:function(){this[o].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function up(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=E(o)?o:[o];for(var u=0;u<o.length;u++)o[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var At={on:function(o,u,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],u);else{o=S(o);for(var m=0,y=o.length;m<y;m++)this._on(o[m],u,h)}return this},off:function(o,u,h){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var f in o)this._off(f,o[f],u);else{o=S(o);for(var m=arguments.length===1,y=0,P=o.length;y<P;y++)m?this._off(o[y]):this._off(o[y],u,h)}return this},_on:function(o,u,h,f){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(o,u,h)===!1){h===this&&(h=void 0);var m={fn:u,ctx:h};f&&(m.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(m)}},_off:function(o,u,h){var f,m,y;if(this._events&&(f=this._events[o],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,y=f.length;m<y;m++)f[m].fn=g;delete this._events[o];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var P=this._listens(o,u,h);if(P!==!1){var A=f[P];this._firingCount&&(A.fn=g,this._events[o]=f=f.slice()),f.splice(P,1)}}},fire:function(o,u,h){if(!this.listens(o,h))return this;var f=r({},u,{type:o,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var m=this._events[o];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,P=m.length;y<P;y++){var A=m[y],k=A.fn;A.once&&this.off(o,k,A.ctx),k.call(A.ctx||this,f)}this._firingCount--}}return h&&this._propagateEvent(f),this},listens:function(o,u,h,f){typeof o!="string"&&console.warn('"string" type argument expected');var m=u;typeof u!="function"&&(f=!!u,m=void 0,h=void 0);var y=this._events&&this._events[o];if(y&&y.length&&this._listens(o,m,h)!==!1)return!0;if(f){for(var P in this._eventParents)if(this._eventParents[P].listens(o,u,h,f))return!0}return!1},_listens:function(o,u,h){if(!this._events)return!1;var f=this._events[o]||[];if(!u)return!!f.length;h===this&&(h=void 0);for(var m=0,y=f.length;m<y;m++)if(f[m].fn===u&&f[m].ctx===h)return m;return!1},once:function(o,u,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],u,!0);else{o=S(o);for(var m=0,y=o.length;m<y;m++)this._on(o[m],u,h,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var u in this._eventParents)this._eventParents[u].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};At.addEventListener=At.on,At.removeEventListener=At.clearAllEventListeners=At.off,At.addOneTimeEventListener=At.once,At.fireEvent=At.fire,At.hasEventListeners=At.listens;var Ti=An.extend(At);function D(o,u,h){this.x=h?Math.round(o):o,this.y=h?Math.round(u):u}var se=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(o){return this.clone()._add($(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract($(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new D(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new D(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=se(this.x),this.y=se(this.y),this},distanceTo:function(o){o=$(o);var u=o.x-this.x,h=o.y-this.y;return Math.sqrt(u*u+h*h)},equals:function(o){return o=$(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=$(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function $(o,u,h){return o instanceof D?o:E(o)?new D(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new D(o.x,o.y):new D(o,u,h)}function ie(o,u){if(o)for(var h=u?[o,u]:o,f=0,m=h.length;f<m;f++)this.extend(h[f])}ie.prototype={extend:function(o){var u,h;if(!o)return this;if(o instanceof D||typeof o[0]=="number"||"x"in o)u=h=$(o);else if(o=ve(o),u=o.min,h=o.max,!u||!h)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=h.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(o){return $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return $(this.min.x,this.max.y)},getTopRight:function(){return $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var u,h;return typeof o[0]=="number"||o instanceof D?o=$(o):o=ve(o),o instanceof ie?(u=o.min,h=o.max):u=h=o,u.x>=this.min.x&&h.x<=this.max.x&&u.y>=this.min.y&&h.y<=this.max.y},intersects:function(o){o=ve(o);var u=this.min,h=this.max,f=o.min,m=o.max,y=m.x>=u.x&&f.x<=h.x,P=m.y>=u.y&&f.y<=h.y;return y&&P},overlaps:function(o){o=ve(o);var u=this.min,h=this.max,f=o.min,m=o.max,y=m.x>u.x&&f.x<h.x,P=m.y>u.y&&f.y<h.y;return y&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var u=this.min,h=this.max,f=Math.abs(u.x-h.x)*o,m=Math.abs(u.y-h.y)*o;return ve($(u.x-f,u.y-m),$(h.x+f,h.y+m))},equals:function(o){return o?(o=ve(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ve(o,u){return!o||o instanceof ie?o:new ie(o,u)}function ht(o,u){if(o)for(var h=u?[o,u]:o,f=0,m=h.length;f<m;f++)this.extend(h[f])}ht.prototype={extend:function(o){var u=this._southWest,h=this._northEast,f,m;if(o instanceof Te)f=o,m=o;else if(o instanceof ht){if(f=o._southWest,m=o._northEast,!f||!m)return this}else return o?this.extend(ue(o)||Ce(o)):this;return!u&&!h?(this._southWest=new Te(f.lat,f.lng),this._northEast=new Te(m.lat,m.lng)):(u.lat=Math.min(f.lat,u.lat),u.lng=Math.min(f.lng,u.lng),h.lat=Math.max(m.lat,h.lat),h.lng=Math.max(m.lng,h.lng)),this},pad:function(o){var u=this._southWest,h=this._northEast,f=Math.abs(u.lat-h.lat)*o,m=Math.abs(u.lng-h.lng)*o;return new ht(new Te(u.lat-f,u.lng-m),new Te(h.lat+f,h.lng+m))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Te||"lat"in o?o=ue(o):o=Ce(o);var u=this._southWest,h=this._northEast,f,m;return o instanceof ht?(f=o.getSouthWest(),m=o.getNorthEast()):f=m=o,f.lat>=u.lat&&m.lat<=h.lat&&f.lng>=u.lng&&m.lng<=h.lng},intersects:function(o){o=Ce(o);var u=this._southWest,h=this._northEast,f=o.getSouthWest(),m=o.getNorthEast(),y=m.lat>=u.lat&&f.lat<=h.lat,P=m.lng>=u.lng&&f.lng<=h.lng;return y&&P},overlaps:function(o){o=Ce(o);var u=this._southWest,h=this._northEast,f=o.getSouthWest(),m=o.getNorthEast(),y=m.lat>u.lat&&f.lat<h.lat,P=m.lng>u.lng&&f.lng<h.lng;return y&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,u){return o?(o=Ce(o),this._southWest.equals(o.getSouthWest(),u)&&this._northEast.equals(o.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ce(o,u){return o instanceof ht?o:new ht(o,u)}function Te(o,u,h){if(isNaN(o)||isNaN(u))throw new Error("Invalid LatLng object: ("+o+", "+u+")");this.lat=+o,this.lng=+u,h!==void 0&&(this.alt=+h)}Te.prototype={equals:function(o,u){if(!o)return!1;o=ue(o);var h=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return h<=(u===void 0?1e-9:u)},toString:function(o){return"LatLng("+_(this.lat,o)+", "+_(this.lng,o)+")"},distanceTo:function(o){return Ji.distance(this,ue(o))},wrap:function(){return Ji.wrapLatLng(this)},toBounds:function(o){var u=180*o/40075017,h=u/Math.cos(Math.PI/180*this.lat);return Ce([this.lat-u,this.lng-h],[this.lat+u,this.lng+h])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function ue(o,u,h){return o instanceof Te?o:E(o)&&typeof o[0]!="object"?o.length===3?new Te(o[0],o[1],o[2]):o.length===2?new Te(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Te(o.lat,"lng"in o?o.lng:o.lon,o.alt):u===void 0?null:new Te(o,u,h)}var rn={latLngToPoint:function(o,u){var h=this.projection.project(o),f=this.scale(u);return this.transformation._transform(h,f)},pointToLatLng:function(o,u){var h=this.scale(u),f=this.transformation.untransform(o,h);return this.projection.unproject(f)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var u=this.projection.bounds,h=this.scale(o),f=this.transformation.transform(u.min,h),m=this.transformation.transform(u.max,h);return new ie(f,m)},infinite:!1,wrapLatLng:function(o){var u=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,h=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,f=o.alt;return new Te(h,u,f)},wrapLatLngBounds:function(o){var u=o.getCenter(),h=this.wrapLatLng(u),f=u.lat-h.lat,m=u.lng-h.lng;if(f===0&&m===0)return o;var y=o.getSouthWest(),P=o.getNorthEast(),A=new Te(y.lat-f,y.lng-m),k=new Te(P.lat-f,P.lng-m);return new ht(A,k)}},Ji=r({},rn,{wrapLng:[-180,180],R:6371e3,distance:function(o,u){var h=Math.PI/180,f=o.lat*h,m=u.lat*h,y=Math.sin((u.lat-o.lat)*h/2),P=Math.sin((u.lng-o.lng)*h/2),A=y*y+Math.cos(f)*Math.cos(m)*P*P,k=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*k}}),Pw=6378137,lp={R:Pw,MAX_LATITUDE:85.0511287798,project:function(o){var u=Math.PI/180,h=this.MAX_LATITUDE,f=Math.max(Math.min(h,o.lat),-h),m=Math.sin(f*u);return new D(this.R*o.lng*u,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(o){var u=180/Math.PI;return new Te((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*u,o.x*u/this.R)},bounds:function(){var o=Pw*Math.PI;return new ie([-o,-o],[o,o])}()};function cp(o,u,h,f){if(E(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=u,this._c=h,this._d=f}cp.prototype={transform:function(o,u){return this._transform(o.clone(),u)},_transform:function(o,u){return u=u||1,o.x=u*(this._a*o.x+this._b),o.y=u*(this._c*o.y+this._d),o},untransform:function(o,u){return u=u||1,new D((o.x/u-this._b)/this._a,(o.y/u-this._d)/this._c)}};function $a(o,u,h,f){return new cp(o,u,h,f)}var hp=r({},Ji,{code:"EPSG:3857",projection:lp,transformation:function(){var o=.5/(Math.PI*lp.R);return $a(o,.5,-o,.5)}()}),cx=r({},hp,{code:"EPSG:900913"});function Sw(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Aw(o,u){var h="",f,m,y,P,A,k;for(f=0,y=o.length;f<y;f++){for(A=o[f],m=0,P=A.length;m<P;m++)k=A[m],h+=(m?"L":"M")+k.x+" "+k.y;h+=u?X.svg?"z":"x":""}return h||"M0 0"}var dp=document.documentElement.style,Ac="ActiveXObject"in window,hx=Ac&&!document.addEventListener,Rw="msLaunchUri"in navigator&&!("documentMode"in document),fp=Jn("webkit"),Cw=Jn("android"),kw=Jn("android 2")||Jn("android 3"),dx=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),fx=Cw&&Jn("Google")&&dx<537&&!("AudioNode"in window),pp=!!window.opera,xw=!Rw&&Jn("chrome"),bw=Jn("gecko")&&!fp&&!pp&&!Ac,px=!xw&&Jn("safari"),Lw=Jn("phantom"),Nw="OTransition"in dp,mx=navigator.platform.indexOf("Win")===0,Dw=Ac&&"transition"in dp,mp="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kw,Ow="MozPerspective"in dp,gx=!window.L_DISABLE_3D&&(Dw||mp||Ow)&&!Nw&&!Lw,ja=typeof orientation<"u"||Jn("mobile"),_x=ja&&fp,yx=ja&&mp,Mw=!window.PointerEvent&&window.MSPointerEvent,Vw=!!(window.PointerEvent||Mw),Fw="ontouchstart"in window||!!window.TouchEvent,vx=!window.L_NO_TOUCH&&(Fw||Vw),wx=ja&&pp,Ix=ja&&bw,Ex=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tx=function(){var o=!1;try{var u=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",g,u),window.removeEventListener("testPassiveEventSupport",g,u)}catch{}return o}(),Px=function(){return!!document.createElement("canvas").getContext}(),gp=!!(document.createElementNS&&Sw("svg").createSVGRect),Sx=!!gp&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ax=!gp&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var u=o.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Rx=navigator.platform.indexOf("Mac")===0,Cx=navigator.platform.indexOf("Linux")===0;function Jn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var X={ie:Ac,ielt9:hx,edge:Rw,webkit:fp,android:Cw,android23:kw,androidStock:fx,opera:pp,chrome:xw,gecko:bw,safari:px,phantom:Lw,opera12:Nw,win:mx,ie3d:Dw,webkit3d:mp,gecko3d:Ow,any3d:gx,mobile:ja,mobileWebkit:_x,mobileWebkit3d:yx,msPointer:Mw,pointer:Vw,touch:vx,touchNative:Fw,mobileOpera:wx,mobileGecko:Ix,retina:Ex,passiveEvents:Tx,canvas:Px,svg:gp,vml:Ax,inlineSvg:Sx,mac:Rx,linux:Cx},Bw=X.msPointer?"MSPointerDown":"pointerdown",zw=X.msPointer?"MSPointerMove":"pointermove",Uw=X.msPointer?"MSPointerUp":"pointerup",$w=X.msPointer?"MSPointerCancel":"pointercancel",_p={touchstart:Bw,touchmove:zw,touchend:Uw,touchcancel:$w},jw={touchstart:Dx,touchmove:Rc,touchend:Rc,touchcancel:Rc},ro={},qw=!1;function kx(o,u,h){return u==="touchstart"&&Nx(),jw[u]?(h=jw[u].bind(this,h),o.addEventListener(_p[u],h,!1),h):(console.warn("wrong event specified:",u),g)}function xx(o,u,h){if(!_p[u]){console.warn("wrong event specified:",u);return}o.removeEventListener(_p[u],h,!1)}function bx(o){ro[o.pointerId]=o}function Lx(o){ro[o.pointerId]&&(ro[o.pointerId]=o)}function Ww(o){delete ro[o.pointerId]}function Nx(){qw||(document.addEventListener(Bw,bx,!0),document.addEventListener(zw,Lx,!0),document.addEventListener(Uw,Ww,!0),document.addEventListener($w,Ww,!0),qw=!0)}function Rc(o,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var h in ro)u.touches.push(ro[h]);u.changedTouches=[u],o(u)}}function Dx(o,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Rt(u),Rc(o,u)}function Ox(o){var u={},h,f;for(f in o)h=o[f],u[f]=h&&h.bind?h.bind(o):h;return o=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var Mx=200;function Vx(o,u){o.addEventListener("dblclick",u);var h=0,f;function m(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var P=Qw(y);if(!(P.some(function(k){return k instanceof HTMLLabelElement&&k.attributes.for})&&!P.some(function(k){return k instanceof HTMLInputElement||k instanceof HTMLSelectElement}))){var A=Date.now();A-h<=Mx?(f++,f===2&&u(Ox(y))):f=1,h=A}}}return o.addEventListener("click",m),{dblclick:u,simDblclick:m}}function Fx(o,u){o.removeEventListener("dblclick",u.dblclick),o.removeEventListener("click",u.simDblclick)}var yp=xc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qa=xc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Hw=qa==="webkitTransition"||qa==="OTransition"?qa+"End":"transitionend";function Gw(o){return typeof o=="string"?document.getElementById(o):o}function Wa(o,u){var h=o.style[u]||o.currentStyle&&o.currentStyle[u];if((!h||h==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(o,null);h=f?f[u]:null}return h==="auto"?null:h}function Pe(o,u,h){var f=document.createElement(o);return f.className=u||"",h&&h.appendChild(f),f}function $e(o){var u=o.parentNode;u&&u.removeChild(o)}function Cc(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function so(o){var u=o.parentNode;u&&u.lastChild!==o&&u.appendChild(o)}function oo(o){var u=o.parentNode;u&&u.firstChild!==o&&u.insertBefore(o,u.firstChild)}function vp(o,u){if(o.classList!==void 0)return o.classList.contains(u);var h=kc(o);return h.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(h)}function he(o,u){if(o.classList!==void 0)for(var h=S(u),f=0,m=h.length;f<m;f++)o.classList.add(h[f]);else if(!vp(o,u)){var y=kc(o);wp(o,(y?y+" ":"")+u)}}function Xe(o,u){o.classList!==void 0?o.classList.remove(u):wp(o,v((" "+kc(o)+" ").replace(" "+u+" "," ")))}function wp(o,u){o.className.baseVal===void 0?o.className=u:o.className.baseVal=u}function kc(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Rn(o,u){"opacity"in o.style?o.style.opacity=u:"filter"in o.style&&Bx(o,u)}function Bx(o,u){var h=!1,f="DXImageTransform.Microsoft.Alpha";try{h=o.filters.item(f)}catch{if(u===1)return}u=Math.round(u*100),h?(h.Enabled=u!==100,h.Opacity=u):o.style.filter+=" progid:"+f+"(opacity="+u+")"}function xc(o){for(var u=document.documentElement.style,h=0;h<o.length;h++)if(o[h]in u)return o[h];return!1}function ts(o,u,h){var f=u||new D(0,0);o.style[yp]=(X.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(h?" scale("+h+")":"")}function rt(o,u){o._leaflet_pos=u,X.any3d?ts(o,u):(o.style.left=u.x+"px",o.style.top=u.y+"px")}function ns(o){return o._leaflet_pos||new D(0,0)}var Ha,Ga,Ip;if("onselectstart"in document)Ha=function(){le(window,"selectstart",Rt)},Ga=function(){be(window,"selectstart",Rt)};else{var Ka=xc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ha=function(){if(Ka){var o=document.documentElement.style;Ip=o[Ka],o[Ka]="none"}},Ga=function(){Ka&&(document.documentElement.style[Ka]=Ip,Ip=void 0)}}function Ep(){le(window,"dragstart",Rt)}function Tp(){be(window,"dragstart",Rt)}var bc,Pp;function Sp(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Lc(),bc=o,Pp=o.style.outlineStyle,o.style.outlineStyle="none",le(window,"keydown",Lc))}function Lc(){bc&&(bc.style.outlineStyle=Pp,bc=void 0,Pp=void 0,be(window,"keydown",Lc))}function Kw(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Ap(o){var u=o.getBoundingClientRect();return{x:u.width/o.offsetWidth||1,y:u.height/o.offsetHeight||1,boundingClientRect:u}}var zx={__proto__:null,TRANSFORM:yp,TRANSITION:qa,TRANSITION_END:Hw,get:Gw,getStyle:Wa,create:Pe,remove:$e,empty:Cc,toFront:so,toBack:oo,hasClass:vp,addClass:he,removeClass:Xe,setClass:wp,getClass:kc,setOpacity:Rn,testProp:xc,setTransform:ts,setPosition:rt,getPosition:ns,get disableTextSelection(){return Ha},get enableTextSelection(){return Ga},disableImageDrag:Ep,enableImageDrag:Tp,preventOutline:Sp,restoreOutline:Lc,getSizedParentNode:Kw,getScale:Ap};function le(o,u,h,f){if(u&&typeof u=="object")for(var m in u)Cp(o,m,u[m],h);else{u=S(u);for(var y=0,P=u.length;y<P;y++)Cp(o,u[y],h,f)}return this}var Xn="_leaflet_events";function be(o,u,h,f){if(arguments.length===1)Zw(o),delete o[Xn];else if(u&&typeof u=="object")for(var m in u)kp(o,m,u[m],h);else if(u=S(u),arguments.length===2)Zw(o,function(A){return x(u,A)!==-1});else for(var y=0,P=u.length;y<P;y++)kp(o,u[y],h,f);return this}function Zw(o,u){for(var h in o[Xn]){var f=h.split(/\d/)[0];(!u||u(f))&&kp(o,f,null,null,h)}}var Rp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cp(o,u,h,f){var m=u+c(h)+(f?"_"+c(f):"");if(o[Xn]&&o[Xn][m])return this;var y=function(A){return h.call(f||o,A||window.event)},P=y;!X.touchNative&&X.pointer&&u.indexOf("touch")===0?y=kx(o,u,y):X.touch&&u==="dblclick"?y=Vx(o,y):"addEventListener"in o?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?o.addEventListener(Rp[u]||u,y,X.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(y=function(A){A=A||window.event,bp(o,A)&&P(A)},o.addEventListener(Rp[u],y,!1)):o.addEventListener(u,P,!1):o.attachEvent("on"+u,y),o[Xn]=o[Xn]||{},o[Xn][m]=y}function kp(o,u,h,f,m){m=m||u+c(h)+(f?"_"+c(f):"");var y=o[Xn]&&o[Xn][m];if(!y)return this;!X.touchNative&&X.pointer&&u.indexOf("touch")===0?xx(o,u,y):X.touch&&u==="dblclick"?Fx(o,y):"removeEventListener"in o?o.removeEventListener(Rp[u]||u,y,!1):o.detachEvent("on"+u,y),o[Xn][m]=null}function is(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function xp(o){return Cp(o,"wheel",is),this}function Za(o){return le(o,"mousedown touchstart dblclick contextmenu",is),o._leaflet_disable_click=!0,this}function Rt(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function rs(o){return Rt(o),is(o),this}function Qw(o){if(o.composedPath)return o.composedPath();for(var u=[],h=o.target;h;)u.push(h),h=h.parentNode;return u}function Yw(o,u){if(!u)return new D(o.clientX,o.clientY);var h=Ap(u),f=h.boundingClientRect;return new D((o.clientX-f.left)/h.x-u.clientLeft,(o.clientY-f.top)/h.y-u.clientTop)}var Ux=X.linux&&X.chrome?window.devicePixelRatio:X.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Jw(o){return X.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Ux:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function bp(o,u){var h=u.relatedTarget;if(!h)return!0;try{for(;h&&h!==o;)h=h.parentNode}catch{return!1}return h!==o}var $x={__proto__:null,on:le,off:be,stopPropagation:is,disableScrollPropagation:xp,disableClickPropagation:Za,preventDefault:Rt,stop:rs,getPropagationPath:Qw,getMousePosition:Yw,getWheelDelta:Jw,isExternalTarget:bp,addListener:le,removeListener:be},Xw=Ti.extend({run:function(o,u,h,f){this.stop(),this._el=o,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=ns(o),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=xe(this._animate,this),this._step()},_step:function(o){var u=+new Date-this._startTime,h=this._duration*1e3;u<h?this._runFrame(this._easeOut(u/h),o):(this._runFrame(1),this._complete())},_runFrame:function(o,u){var h=this._startPos.add(this._offset.multiplyBy(o));u&&h._round(),rt(this._el,h),this.fire("step")},_complete:function(){mt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),ge=Ti.extend({options:{crs:hp,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,u){u=T(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(ue(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qa&&X.any3d&&!X.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,Hw,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,u,h){if(u=u===void 0?this._zoom:this._limitZoom(u),o=this._limitCenter(ue(o),u,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=r({animate:h.animate},h.zoom),h.pan=r({animate:h.animate,duration:h.duration},h.pan));var f=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,u,h.zoom):this._tryAnimatedPan(o,h.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(o,u,h.pan&&h.pan.noMoveStart),this},setZoom:function(o,u){return this._loaded?this.setView(this.getCenter(),o,{zoom:u}):(this._zoom=o,this)},zoomIn:function(o,u){return o=o||(X.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,u)},zoomOut:function(o,u){return o=o||(X.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,u)},setZoomAround:function(o,u,h){var f=this.getZoomScale(u),m=this.getSize().divideBy(2),y=o instanceof D?o:this.latLngToContainerPoint(o),P=y.subtract(m).multiplyBy(1-1/f),A=this.containerPointToLatLng(m.add(P));return this.setView(A,u,{zoom:h})},_getBoundsCenterZoom:function(o,u){u=u||{},o=o.getBounds?o.getBounds():Ce(o);var h=$(u.paddingTopLeft||u.padding||[0,0]),f=$(u.paddingBottomRight||u.padding||[0,0]),m=this.getBoundsZoom(o,!1,h.add(f));if(m=typeof u.maxZoom=="number"?Math.min(u.maxZoom,m):m,m===1/0)return{center:o.getCenter(),zoom:m};var y=f.subtract(h).divideBy(2),P=this.project(o.getSouthWest(),m),A=this.project(o.getNorthEast(),m),k=this.unproject(P.add(A).divideBy(2).add(y),m);return{center:k,zoom:m}},fitBounds:function(o,u){if(o=Ce(o),!o.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(o,u);return this.setView(h.center,h.zoom,u)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,u){return this.setView(o,this._zoom,{pan:u})},panBy:function(o,u){if(o=$(o).round(),u=u||{},!o.x&&!o.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xw,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){he(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,h,u.duration||.25,u.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,u,h){if(h=h||{},h.animate===!1||!X.any3d)return this.setView(o,u,h);this._stop();var f=this.project(this.getCenter()),m=this.project(o),y=this.getSize(),P=this._zoom;o=ue(o),u=u===void 0?P:u;var A=Math.max(y.x,y.y),k=A*this.getZoomScale(P,u),M=m.distanceTo(f)||1,G=1.42,ne=G*G;function de(st){var qc=st?-1:1,xb=st?k:A,bb=k*k-A*A+qc*ne*ne*M*M,Lb=2*xb*ne*M,$p=bb/Lb,NI=Math.sqrt($p*$p+1)-$p,Nb=NI<1e-9?-18:Math.log(NI);return Nb}function Wt(st){return(Math.exp(st)-Math.exp(-st))/2}function gt(st){return(Math.exp(st)+Math.exp(-st))/2}function kn(st){return Wt(st)/gt(st)}var sn=de(0);function fo(st){return A*(gt(sn)/gt(sn+G*st))}function Ab(st){return A*(gt(sn)*kn(sn+G*st)-Wt(sn))/ne}function Rb(st){return 1-Math.pow(1-st,1.5)}var Cb=Date.now(),bI=(de(1)-sn)/G,kb=h.duration?1e3*h.duration:1e3*bI*.8;function LI(){var st=(Date.now()-Cb)/kb,qc=Rb(st)*bI;st<=1?(this._flyToFrame=xe(LI,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(Ab(qc)/M)),P),this.getScaleZoom(A/fo(qc),P),{flyTo:!0})):this._move(o,u)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),LI.call(this),this},flyToBounds:function(o,u){var h=this._getBoundsCenterZoom(o,u);return this.flyTo(h.center,h.zoom,u)},setMaxBounds:function(o){return o=Ce(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var u=this.options.minZoom;return this.options.minZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var u=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,u){this._enforcingBounds=!0;var h=this.getCenter(),f=this._limitCenter(h,this._zoom,Ce(o));return h.equals(f)||this.panTo(f,u),this._enforcingBounds=!1,this},panInside:function(o,u){u=u||{};var h=$(u.paddingTopLeft||u.padding||[0,0]),f=$(u.paddingBottomRight||u.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(o),P=this.getPixelBounds(),A=ve([P.min.add(h),P.max.subtract(f)]),k=A.getSize();if(!A.contains(y)){this._enforcingBounds=!0;var M=y.subtract(A.getCenter()),G=A.extend(y).getSize().subtract(k);m.x+=M.x<0?-G.x:G.x,m.y+=M.y<0?-G.y:G.y,this.panTo(this.unproject(m),u),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),f=u.divideBy(2).round(),m=h.divideBy(2).round(),y=f.subtract(m);return!y.x&&!y.y?this:(o.animate&&o.pan?this.panBy(y):(o.pan&&this._rawPanBy(y),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,h,o):navigator.geolocation.getCurrentPosition(u,h,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var u=o.code,h=o.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var u=o.coords.latitude,h=o.coords.longitude,f=new Te(u,h),m=f.toBounds(o.coords.accuracy*2),y=this._locateOptions;if(y.setView){var P=this.getBoundsZoom(m);this.setView(f,y.maxZoom?Math.min(P,y.maxZoom):P)}var A={latlng:f,bounds:m,timestamp:o.timestamp};for(var k in o.coords)typeof o.coords[k]=="number"&&(A[k]=o.coords[k]);this.fire("locationfound",A)}},addHandler:function(o,u){if(!u)return this;var h=this[o]=new u(this);return this._handlers.push(h),this.options[o]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(mt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)$e(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,u){var h="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),f=Pe("div",h,u||this._mapPane);return o&&(this._panes[o]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),u=this.unproject(o.getBottomLeft()),h=this.unproject(o.getTopRight());return new ht(u,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,u,h){o=Ce(o),h=$(h||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),P=o.getNorthWest(),A=o.getSouthEast(),k=this.getSize().subtract(h),M=ve(this.project(A,f),this.project(P,f)).getSize(),G=X.any3d?this.options.zoomSnap:1,ne=k.x/M.x,de=k.y/M.y,Wt=u?Math.max(ne,de):Math.min(ne,de);return f=this.getScaleZoom(Wt,f),G&&(f=Math.round(f/(G/100))*(G/100),f=u?Math.ceil(f/G)*G:Math.floor(f/G)*G),Math.max(m,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,u){var h=this._getTopLeftPoint(o,u);return new ie(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,u){var h=this.options.crs;return u=u===void 0?this._zoom:u,h.scale(o)/h.scale(u)},getScaleZoom:function(o,u){var h=this.options.crs;u=u===void 0?this._zoom:u;var f=h.zoom(o*h.scale(u));return isNaN(f)?1/0:f},project:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(ue(o),u)},unproject:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng($(o),u)},layerPointToLatLng:function(o){var u=$(o).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(o){var u=this.project(ue(o))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ue(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Ce(o))},distance:function(o,u){return this.options.crs.distance(ue(o),ue(u))},containerPointToLayerPoint:function(o){return $(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return $(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var u=this.containerPointToLayerPoint($(o));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(o)))},mouseEventToContainerPoint:function(o){return Yw(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var u=this._container=Gw(o);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&X.any3d,he(o,"leaflet-container"+(X.touch?" leaflet-touch":"")+(X.retina?" leaflet-retina":"")+(X.ielt9?" leaflet-oldie":"")+(X.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Wa(o,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),rt(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(o.markerPane,"leaflet-zoom-hide"),he(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,u,h){rt(this._mapPane,new D(0,0));var f=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var m=this._zoom!==u;this._moveStart(m,h)._move(o,u)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(o,u){return o&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(o,u,h,f){u===void 0&&(u=this._zoom);var m=this._zoom!==u;return this._zoom=u,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),f?h&&h.pinch&&this.fire("zoom",h):((m||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return mt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){rt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var u=o?be:le;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),X.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){mt(this._resizeRequest),this._resizeRequest=xe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,u){for(var h=[],f,m=u==="mouseout"||u==="mouseover",y=o.target||o.srcElement,P=!1;y;){if(f=this._targets[c(y)],f&&(u==="click"||u==="preclick")&&this._draggableMoved(f)){P=!0;break}if(f&&f.listens(u,!0)&&(m&&!bp(y,o)||(h.push(f),m))||y===this._container)break;y=y.parentNode}return!h.length&&!P&&!m&&this.listens(u,!0)&&(h=[this]),h},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var u=o.target||o.srcElement;if(!(!this._loaded||u._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(u))){var h=o.type;h==="mousedown"&&Sp(u),this._fireDOMEvent(o,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,u,h){if(o.type==="click"){var f=r({},o);f.type="preclick",this._fireDOMEvent(f,f.type,h)}var m=this._findEventTargets(o,u);if(h){for(var y=[],P=0;P<h.length;P++)h[P].listens(u,!0)&&y.push(h[P]);m=y.concat(m)}if(m.length){u==="contextmenu"&&Rt(o);var A=m[0],k={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var M=A.getLatLng&&(!A._radius||A._radius<=10);k.containerPoint=M?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(o),k.layerPoint=this.containerPointToLayerPoint(k.containerPoint),k.latlng=M?A.getLatLng():this.layerPointToLatLng(k.layerPoint)}for(P=0;P<m.length;P++)if(m[P].fire(u,k,!0),k.originalEvent._stopped||m[P].options.bubblingMouseEvents===!1&&x(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,u=this._handlers.length;o<u;o++)this._handlers[o].disable()},whenReady:function(o,u){return this._loaded?o.call(u||this,{target:this}):this.on("load",o,u),this},_getMapPanePos:function(){return ns(this._mapPane)||new D(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,u){var h=o&&u!==void 0?this._getNewPixelOrigin(o,u):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,u){var h=this.getSize()._divideBy(2);return this.project(o,u)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,u,h){var f=this._getNewPixelOrigin(h,u);return this.project(o,u)._subtract(f)},_latLngBoundsToNewLayerBounds:function(o,u,h){var f=this._getNewPixelOrigin(h,u);return ve([this.project(o.getSouthWest(),u)._subtract(f),this.project(o.getNorthWest(),u)._subtract(f),this.project(o.getSouthEast(),u)._subtract(f),this.project(o.getNorthEast(),u)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,u,h){if(!h)return o;var f=this.project(o,u),m=this.getSize().divideBy(2),y=new ie(f.subtract(m),f.add(m)),P=this._getBoundsOffset(y,h,u);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?o:this.unproject(f.add(P),u)},_limitOffset:function(o,u){if(!u)return o;var h=this.getPixelBounds(),f=new ie(h.min.add(o),h.max.add(o));return o.add(this._getBoundsOffset(f,u))},_getBoundsOffset:function(o,u,h){var f=ve(this.project(u.getNorthEast(),h),this.project(u.getSouthWest(),h)),m=f.min.subtract(o.min),y=f.max.subtract(o.max),P=this._rebound(m.x,-y.x),A=this._rebound(m.y,-y.y);return new D(P,A)},_rebound:function(o,u){return o+u>0?Math.round(o-u)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(u))},_limitZoom:function(o){var u=this.getMinZoom(),h=this.getMaxZoom(),f=X.any3d?this.options.zoomSnap:1;return f&&(o=Math.round(o/f)*f),Math.max(u,Math.min(h,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,u){var h=this._getCenterOffset(o)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,u),!0)},_createAnimProxy:function(){var o=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(u){var h=yp,f=this._proxy.style[h];ts(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),f===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),u=this.getZoom();ts(this._proxy,this.project(o,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,u,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(u),m=this._getCenterOffset(o)._divideBy(1-1/f);return h.animate!==!0&&!this.getSize().contains(m)?!1:(xe(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(o,u,!0)},this),!0)},_animateZoom:function(o,u,h,f){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=u,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:u,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jx(o,u){return new ge(o,u)}var Bn=An.extend({options:{position:"topright"},initialize:function(o){T(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var u=this._map;return u&&u.removeControl(this),this.options.position=o,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var u=this._container=this.onAdd(o),h=this.getPosition(),f=o._controlCorners[h];return he(u,"leaflet-control"),h.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Qa=function(o){return new Bn(o)};ge.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},u="leaflet-",h=this._controlContainer=Pe("div",u+"control-container",this._container);function f(m,y){var P=u+m+" "+u+y;o[m+y]=Pe("div",P,h)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)$e(this._controlCorners[o]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eI=Bn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,u,h,f){return h<f?-1:f<h?1:0}},initialize:function(o,u,h){T(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in o)this._addLayer(o[f],f);for(f in u)this._addLayer(u[f],f,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Bn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,u){return this._addLayer(o,u),this._map?this._update():this},addOverlay:function(o,u){return this._addLayer(o,u,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(o));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",u=this._container=Pe("div",o),h=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Za(u),xp(u);var f=this._section=Pe("section",o+"-list");h&&(this._map.on("click",this.collapse,this),le(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Pe("a",o+"-toggle",u);m.href="#",m.title="Layers",m.setAttribute("role","button"),le(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){Rt(y),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Pe("div",o+"-base",f),this._separator=Pe("div",o+"-separator",f),this._overlaysList=Pe("div",o+"-overlays",f),u.appendChild(f)},_getLayer:function(o){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===o)return this._layers[u]},_addLayer:function(o,u,h){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:u,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cc(this._baseLayersList),Cc(this._overlaysList),this._layerControlInputs=[];var o,u,h,f,m=0;for(h=0;h<this._layers.length;h++)f=this._layers[h],this._addItem(f),u=u||f.overlay,o=o||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(o=o&&m>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=u&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var u=this._getLayer(c(o.target)),h=u.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;h&&this._map.fire(h,u)},_createRadioElement:function(o,u){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(u?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=h,f.firstChild},_addItem:function(o){var u=document.createElement("label"),h=this._map.hasLayer(o.layer),f;o.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=h):f=this._createRadioElement("leaflet-base-layers_"+c(this),h),this._layerControlInputs.push(f),f.layerId=c(o.layer),le(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+o.name;var y=document.createElement("span");u.appendChild(y),y.appendChild(f),y.appendChild(m);var P=o.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,u,h,f=[],m=[];this._handlingClick=!0;for(var y=o.length-1;y>=0;y--)u=o[y],h=this._getLayer(u.layerId).layer,u.checked?f.push(h):u.checked||m.push(h);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,u,h,f=this._map.getZoom(),m=o.length-1;m>=0;m--)u=o[m],h=this._getLayer(u.layerId).layer,u.disabled=h.options.minZoom!==void 0&&f<h.options.minZoom||h.options.maxZoom!==void 0&&f>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,le(o,"click",Rt),this.expand();var u=this;setTimeout(function(){be(o,"click",Rt),u._preventClick=!1})}}),qx=function(o,u,h){return new eI(o,u,h)},Lp=Bn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var u="leaflet-control-zoom",h=Pe("div",u+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,u+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,u+"-out",h,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,u,h,f,m){var y=Pe("a",h,f);return y.innerHTML=o,y.href="#",y.title=u,y.setAttribute("role","button"),y.setAttribute("aria-label",u),Za(y),le(y,"click",rs),le(y,"click",m,this),le(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var o=this._map,u="leaflet-disabled";Xe(this._zoomInButton,u),Xe(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(he(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(he(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});ge.mergeOptions({zoomControl:!0}),ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Lp,this.addControl(this.zoomControl))});var Wx=function(o){return new Lp(o)},tI=Bn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var u="leaflet-control-scale",h=Pe("div",u),f=this.options;return this._addScales(f,u+"-line",h),o.on(f.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),h},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,u,h){o.metric&&(this._mScale=Pe("div",u,h)),o.imperial&&(this._iScale=Pe("div",u,h))},_update:function(){var o=this._map,u=o.getSize().y/2,h=o.distance(o.containerPointToLatLng([0,u]),o.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(h)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var u=this._getRoundNum(o),h=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,h,u/o)},_updateImperial:function(o){var u=o*3.2808399,h,f,m;u>5280?(h=u/5280,f=this._getRoundNum(h),this._updateScale(this._iScale,f+" mi",f/h)):(m=this._getRoundNum(u),this._updateScale(this._iScale,m+" ft",m/u))},_updateScale:function(o,u,h){o.style.width=Math.round(this.options.maxWidth*h)+"px",o.innerHTML=u},_getRoundNum:function(o){var u=Math.pow(10,(Math.floor(o)+"").length-1),h=o/u;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,u*h}}),Hx=function(o){return new tI(o)},Gx='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Np=Bn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(X.inlineSvg?Gx+" ":"")+"Leaflet</a>"},initialize:function(o){T(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Za(this._container);for(var u in o._layers)o._layers[u].getAttribution&&this.addAttribution(o._layers[u].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var u in this._attributions)this._attributions[u]&&o.push(u);var h=[];this.options.prefix&&h.push(this.options.prefix),o.length&&h.push(o.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});ge.mergeOptions({attributionControl:!0}),ge.addInitHook(function(){this.options.attributionControl&&new Np().addTo(this)});var Kx=function(o){return new Np(o)};Bn.Layers=eI,Bn.Zoom=Lp,Bn.Scale=tI,Bn.Attribution=Np,Qa.layers=qx,Qa.zoom=Wx,Qa.scale=Hx,Qa.attribution=Kx;var ei=An.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ei.addTo=function(o,u){return o.addHandler(u,this),this};var Zx={Events:At},nI=X.touch?"touchstart mousedown":"mousedown",Xi=Ti.extend({options:{clickTolerance:3},initialize:function(o,u,h,f){T(this,f),this._element=o,this._dragStartTarget=u||o,this._preventOutline=h},enable:function(){this._enabled||(le(this._dragStartTarget,nI,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xi._dragging===this&&this.finishDrag(!0),be(this._dragStartTarget,nI,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!vp(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Xi._dragging===this&&this.finishDrag();return}if(!(Xi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Xi._dragging=this,this._preventOutline&&Sp(this._element),Ep(),Ha(),!this._moving)){this.fire("down");var u=o.touches?o.touches[0]:o,h=Kw(this._element);this._startPoint=new D(u.clientX,u.clientY),this._startPos=ns(this._element),this._parentScale=Ap(h);var f=o.type==="mousedown";le(document,f?"mousemove":"touchmove",this._onMove,this),le(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var u=o.touches&&o.touches.length===1?o.touches[0]:o,h=new D(u.clientX,u.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Rt(o),this._moved||(this.fire("dragstart"),this._moved=!0,he(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),rt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xe(document.body,"leaflet-dragging"),this._lastTarget&&(Xe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),be(document,"mousemove touchmove",this._onMove,this),be(document,"mouseup touchend touchcancel",this._onUp,this),Tp(),Ga();var u=this._moved&&this._moving;this._moving=!1,Xi._dragging=!1,u&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function iI(o,u,h){var f,m=[1,4,2,8],y,P,A,k,M,G,ne,de;for(y=0,G=o.length;y<G;y++)o[y]._code=ss(o[y],u);for(A=0;A<4;A++){for(ne=m[A],f=[],y=0,G=o.length,P=G-1;y<G;P=y++)k=o[y],M=o[P],k._code&ne?M._code&ne||(de=Nc(M,k,ne,u,h),de._code=ss(de,u),f.push(de)):(M._code&ne&&(de=Nc(M,k,ne,u,h),de._code=ss(de,u),f.push(de)),f.push(k));o=f}return o}function rI(o,u){var h,f,m,y,P,A,k,M,G;if(!o||o.length===0)throw new Error("latlngs not passed");Cn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ne=ue([0,0]),de=Ce(o),Wt=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Wt<1700&&(ne=Dp(o));var gt=o.length,kn=[];for(h=0;h<gt;h++){var sn=ue(o[h]);kn.push(u.project(ue([sn.lat-ne.lat,sn.lng-ne.lng])))}for(A=k=M=0,h=0,f=gt-1;h<gt;f=h++)m=kn[h],y=kn[f],P=m.y*y.x-y.y*m.x,k+=(m.x+y.x)*P,M+=(m.y+y.y)*P,A+=P*3;A===0?G=kn[0]:G=[k/A,M/A];var fo=u.unproject($(G));return ue([fo.lat+ne.lat,fo.lng+ne.lng])}function Dp(o){for(var u=0,h=0,f=0,m=0;m<o.length;m++){var y=ue(o[m]);u+=y.lat,h+=y.lng,f++}return ue([u/f,h/f])}var Qx={__proto__:null,clipPolygon:iI,polygonCenter:rI,centroid:Dp};function sI(o,u){if(!u||!o.length)return o.slice();var h=u*u;return o=Xx(o,h),o=Jx(o,h),o}function oI(o,u,h){return Math.sqrt(Ya(o,u,h,!0))}function Yx(o,u,h){return Ya(o,u,h)}function Jx(o,u){var h=o.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,m=new f(h);m[0]=m[h-1]=1,Op(o,m,u,0,h-1);var y,P=[];for(y=0;y<h;y++)m[y]&&P.push(o[y]);return P}function Op(o,u,h,f,m){var y=0,P,A,k;for(A=f+1;A<=m-1;A++)k=Ya(o[A],o[f],o[m],!0),k>y&&(P=A,y=k);y>h&&(u[P]=1,Op(o,u,h,f,P),Op(o,u,h,P,m))}function Xx(o,u){for(var h=[o[0]],f=1,m=0,y=o.length;f<y;f++)eb(o[f],o[m])>u&&(h.push(o[f]),m=f);return m<y-1&&h.push(o[y-1]),h}var aI;function uI(o,u,h,f,m){var y=f?aI:ss(o,h),P=ss(u,h),A,k,M;for(aI=P;;){if(!(y|P))return[o,u];if(y&P)return!1;A=y||P,k=Nc(o,u,A,h,m),M=ss(k,h),A===y?(o=k,y=M):(u=k,P=M)}}function Nc(o,u,h,f,m){var y=u.x-o.x,P=u.y-o.y,A=f.min,k=f.max,M,G;return h&8?(M=o.x+y*(k.y-o.y)/P,G=k.y):h&4?(M=o.x+y*(A.y-o.y)/P,G=A.y):h&2?(M=k.x,G=o.y+P*(k.x-o.x)/y):h&1&&(M=A.x,G=o.y+P*(A.x-o.x)/y),new D(M,G,m)}function ss(o,u){var h=0;return o.x<u.min.x?h|=1:o.x>u.max.x&&(h|=2),o.y<u.min.y?h|=4:o.y>u.max.y&&(h|=8),h}function eb(o,u){var h=u.x-o.x,f=u.y-o.y;return h*h+f*f}function Ya(o,u,h,f){var m=u.x,y=u.y,P=h.x-m,A=h.y-y,k=P*P+A*A,M;return k>0&&(M=((o.x-m)*P+(o.y-y)*A)/k,M>1?(m=h.x,y=h.y):M>0&&(m+=P*M,y+=A*M)),P=o.x-m,A=o.y-y,f?P*P+A*A:new D(m,y)}function Cn(o){return!E(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function lI(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cn(o)}function cI(o,u){var h,f,m,y,P,A,k,M;if(!o||o.length===0)throw new Error("latlngs not passed");Cn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var G=ue([0,0]),ne=Ce(o),de=ne.getNorthWest().distanceTo(ne.getSouthWest())*ne.getNorthEast().distanceTo(ne.getNorthWest());de<1700&&(G=Dp(o));var Wt=o.length,gt=[];for(h=0;h<Wt;h++){var kn=ue(o[h]);gt.push(u.project(ue([kn.lat-G.lat,kn.lng-G.lng])))}for(h=0,f=0;h<Wt-1;h++)f+=gt[h].distanceTo(gt[h+1])/2;if(f===0)M=gt[0];else for(h=0,y=0;h<Wt-1;h++)if(P=gt[h],A=gt[h+1],m=P.distanceTo(A),y+=m,y>f){k=(y-f)/m,M=[A.x-k*(A.x-P.x),A.y-k*(A.y-P.y)];break}var sn=u.unproject($(M));return ue([sn.lat+G.lat,sn.lng+G.lng])}var tb={__proto__:null,simplify:sI,pointToSegmentDistance:oI,closestPointOnSegment:Yx,clipSegment:uI,_getEdgeIntersection:Nc,_getBitCode:ss,_sqClosestPointOnSegment:Ya,isFlat:Cn,_flat:lI,polylineCenter:cI},Mp={project:function(o){return new D(o.lng,o.lat)},unproject:function(o){return new Te(o.y,o.x)},bounds:new ie([-180,-90],[180,90])},Vp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var u=Math.PI/180,h=this.R,f=o.lat*u,m=this.R_MINOR/h,y=Math.sqrt(1-m*m),P=y*Math.sin(f),A=Math.tan(Math.PI/4-f/2)/Math.pow((1-P)/(1+P),y/2);return f=-h*Math.log(Math.max(A,1e-10)),new D(o.lng*u*h,f)},unproject:function(o){for(var u=180/Math.PI,h=this.R,f=this.R_MINOR/h,m=Math.sqrt(1-f*f),y=Math.exp(-o.y/h),P=Math.PI/2-2*Math.atan(y),A=0,k=.1,M;A<15&&Math.abs(k)>1e-7;A++)M=m*Math.sin(P),M=Math.pow((1-M)/(1+M),m/2),k=Math.PI/2-2*Math.atan(y*M)-P,P+=k;return new Te(P*u,o.x*u/h)}},nb={__proto__:null,LonLat:Mp,Mercator:Vp,SphericalMercator:lp},ib=r({},Ji,{code:"EPSG:3395",projection:Vp,transformation:function(){var o=.5/(Math.PI*Vp.R);return $a(o,.5,-o,.5)}()}),hI=r({},Ji,{code:"EPSG:4326",projection:Mp,transformation:$a(1/180,1,-1/180,.5)}),rb=r({},rn,{projection:Mp,transformation:$a(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,u){var h=u.lng-o.lng,f=u.lat-o.lat;return Math.sqrt(h*h+f*f)},infinite:!0});rn.Earth=Ji,rn.EPSG3395=ib,rn.EPSG3857=hp,rn.EPSG900913=cx,rn.EPSG4326=hI,rn.Simple=rb;var zn=Ti.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var u=o.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var h=this.getEvents();u.on(h,this),this.once("remove",function(){u.off(h,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});ge.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(o);return this._layers[u]?this:(this._layers[u]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var u=c(o);return this._layers[u]?(this._loaded&&o.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,u){for(var h in this._layers)o.call(u,this._layers[h]);return this},_addLayers:function(o){o=o?E(o)?o:[o]:[];for(var u=0,h=o.length;u<h;u++)this.addLayer(o[u])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var u=c(o);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,u=-1/0,h=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;o=m.minZoom===void 0?o:Math.min(o,m.minZoom),u=m.maxZoom===void 0?u:Math.max(u,m.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=o===1/0?void 0:o,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ao=zn.extend({initialize:function(o,u){T(this,u),this._layers={};var h,f;if(o)for(h=0,f=o.length;h<f;h++)this.addLayer(o[h])},addLayer:function(o){var u=this.getLayerId(o);return this._layers[u]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var u=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(o){var u=typeof o=="number"?o:this.getLayerId(o);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var u=Array.prototype.slice.call(arguments,1),h,f;for(h in this._layers)f=this._layers[h],f[o]&&f[o].apply(f,u);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,u){for(var h in this._layers)o.call(u,this._layers[h]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),sb=function(o,u){return new ao(o,u)},Pi=ao.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),ao.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),ao.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ht;for(var u in this._layers){var h=this._layers[u];o.extend(h.getBounds?h.getBounds():h.getLatLng())}return o}}),ob=function(o,u){return new Pi(o,u)},uo=An.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){T(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,u){var h=this._getIconUrl(o);if(!h){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(h,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(f,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(o,u){var h=this.options,f=h[u+"Size"];typeof f=="number"&&(f=[f,f]);var m=$(f),y=$(u==="shadow"&&h.shadowAnchor||h.iconAnchor||m&&m.divideBy(2,!0));o.className="leaflet-marker-"+u+" "+(h.className||""),y&&(o.style.marginLeft=-y.x+"px",o.style.marginTop=-y.y+"px"),m&&(o.style.width=m.x+"px",o.style.height=m.y+"px")},_createImg:function(o,u){return u=u||document.createElement("img"),u.src=o,u},_getIconUrl:function(o){return X.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function ab(o){return new uo(o)}var Ja=uo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Ja.imagePath!="string"&&(Ja.imagePath=this._detectIconPath()),(this.options.imagePath||Ja.imagePath)+uo.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var u=function(h,f,m){var y=f.exec(h);return y&&y[m]};return o=u(o,/^url\((['"])?(.+)\1\)$/,2),o&&u(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Pe("div","leaflet-default-icon-path",document.body),u=Wa(o,"background-image")||Wa(o,"backgroundImage");if(document.body.removeChild(o),u=this._stripUrl(u),u)return u;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),dI=ei.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Xi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var u=this._marker,h=u._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=ns(u._icon),P=h.getPixelBounds(),A=h.getPixelOrigin(),k=ve(P.min._subtract(A).add(m),P.max._subtract(A).subtract(m));if(!k.contains(y)){var M=$((Math.max(k.max.x,y.x)-k.max.x)/(P.max.x-k.max.x)-(Math.min(k.min.x,y.x)-k.min.x)/(P.min.x-k.min.x),(Math.max(k.max.y,y.y)-k.max.y)/(P.max.y-k.max.y)-(Math.min(k.min.y,y.y)-k.min.y)/(P.min.y-k.min.y)).multiplyBy(f);h.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),rt(u._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=xe(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(mt(this._panRequest),this._panRequest=xe(this._adjustPan.bind(this,o)))},_onDrag:function(o){var u=this._marker,h=u._shadow,f=ns(u._icon),m=u._map.layerPointToLatLng(f);h&&rt(h,f),u._latlng=m,o.latlng=m,o.oldLatLng=this._oldLatLng,u.fire("move",o).fire("drag",o)},_onDragEnd:function(o){mt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Dc=zn.extend({options:{icon:new Ja,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,u){T(this,u),this._latlng=ue(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var u=this._latlng;return this._latlng=ue(o),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=o.icon.createIcon(this._icon),f=!1;h!==this._icon&&(this._icon&&this._removeIcon(),f=!0,o.title&&(h.title=o.title),h.tagName==="IMG"&&(h.alt=o.alt||"")),he(h,u),o.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(h,"focus",this._panOnFocus,this);var m=o.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(he(m,u),m.alt=""),this._shadow=m,o.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&be(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&rt(this._icon,o),this._shadow&&rt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dI)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dI(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Rn(this._icon,o),this._shadow&&Rn(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var u=this.options.icon.options,h=u.iconSize?$(u.iconSize):$(0,0),f=u.iconAnchor?$(u.iconAnchor):$(0,0);o.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:h.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ub(o,u){return new Dc(o,u)}var er=zn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return T(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Oc=er.extend({options:{fill:!0,radius:10},initialize:function(o,u){T(this,u),this._latlng=ue(o),this._radius=this.options.radius},setLatLng:function(o){var u=this._latlng;return this._latlng=ue(o),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var u=o&&o.radius||this._radius;return er.prototype.setStyle.call(this,o),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,u=this._radiusY||o,h=this._clickTolerance(),f=[o+h,u+h];this._pxBounds=new ie(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lb(o,u){return new Oc(o,u)}var Fp=Oc.extend({initialize:function(o,u,h){if(typeof u=="number"&&(u=r({},h,{radius:u})),T(this,u),this._latlng=ue(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ht(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:er.prototype.setStyle,_project:function(){var o=this._latlng.lng,u=this._latlng.lat,h=this._map,f=h.options.crs;if(f.distance===Ji.distance){var m=Math.PI/180,y=this._mRadius/Ji.R/m,P=h.project([u+y,o]),A=h.project([u-y,o]),k=P.add(A).divideBy(2),M=h.unproject(k).lat,G=Math.acos((Math.cos(y*m)-Math.sin(u*m)*Math.sin(M*m))/(Math.cos(u*m)*Math.cos(M*m)))/m;(isNaN(G)||G===0)&&(G=y/Math.cos(Math.PI/180*u)),this._point=k.subtract(h.getPixelOrigin()),this._radius=isNaN(G)?0:k.x-h.project([M,o-G]).x,this._radiusY=k.y-P.y}else{var ne=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(ne).x}this._updateBounds()}});function cb(o,u,h){return new Fp(o,u,h)}var Si=er.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,u){T(this,u),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var u=1/0,h=null,f=Ya,m,y,P=0,A=this._parts.length;P<A;P++)for(var k=this._parts[P],M=1,G=k.length;M<G;M++){m=k[M-1],y=k[M];var ne=f(o,m,y,!0);ne<u&&(u=ne,h=f(o,m,y))}return h&&(h.distance=Math.sqrt(u)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cI(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,u){return u=u||this._defaultShape(),o=ue(o),u.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ht,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Cn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var u=[],h=Cn(o),f=0,m=o.length;f<m;f++)h?(u[f]=ue(o[f]),this._bounds.extend(u[f])):u[f]=this._convertLatLngs(o[f]);return u},_project:function(){var o=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),u=new D(o,o);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(o,u,h){var f=o[0]instanceof Te,m=o.length,y,P;if(f){for(P=[],y=0;y<m;y++)P[y]=this._map.latLngToLayerPoint(o[y]),h.extend(P[y]);u.push(P)}else for(y=0;y<m;y++)this._projectLatlngs(o[y],u,h)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,h,f,m,y,P,A,k;for(h=0,m=0,y=this._rings.length;h<y;h++)for(k=this._rings[h],f=0,P=k.length;f<P-1;f++)A=uI(k[f],k[f+1],o,f,!0),A&&(u[m]=u[m]||[],u[m].push(A[0]),(A[1]!==k[f+1]||f===P-2)&&(u[m].push(A[1]),m++))}},_simplifyPoints:function(){for(var o=this._parts,u=this.options.smoothFactor,h=0,f=o.length;h<f;h++)o[h]=sI(o[h],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,u){var h,f,m,y,P,A,k=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(h=0,y=this._parts.length;h<y;h++)for(A=this._parts[h],f=0,P=A.length,m=P-1;f<P;m=f++)if(!(!u&&f===0)&&oI(o,A[m],A[f])<=k)return!0;return!1}});function hb(o,u){return new Si(o,u)}Si._flat=lI;var lo=Si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rI(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var u=Si.prototype._convertLatLngs.call(this,o),h=u.length;return h>=2&&u[0]instanceof Te&&u[0].equals(u[h-1])&&u.pop(),u},_setLatLngs:function(o){Si.prototype._setLatLngs.call(this,o),Cn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,u=this.options.weight,h=new D(u,u);if(o=new ie(o.min.subtract(h),o.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,y;f<m;f++)y=iI(this._rings[f],o,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var u=!1,h,f,m,y,P,A,k,M;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(y=0,k=this._parts.length;y<k;y++)for(h=this._parts[y],P=0,M=h.length,A=M-1;P<M;A=P++)f=h[P],m=h[A],f.y>o.y!=m.y>o.y&&o.x<(m.x-f.x)*(o.y-f.y)/(m.y-f.y)+f.x&&(u=!u);return u||Si.prototype._containsPoint.call(this,o,!0)}});function db(o,u){return new lo(o,u)}var Ai=Pi.extend({initialize:function(o,u){T(this,u),this._layers={},o&&this.addData(o)},addData:function(o){var u=E(o)?o:o.features,h,f,m;if(u){for(h=0,f=u.length;h<f;h++)m=u[h],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(o))return this;var P=Mc(o,y);return P?(P.feature=Bc(o),P.defaultOptions=P.options,this.resetStyle(P),y.onEachFeature&&y.onEachFeature(o,P),this.addLayer(P)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(u){this._setLayerStyle(u,o)},this)},_setLayerStyle:function(o,u){o.setStyle&&(typeof u=="function"&&(u=u(o.feature)),o.setStyle(u))}});function Mc(o,u){var h=o.type==="Feature"?o.geometry:o,f=h?h.coordinates:null,m=[],y=u&&u.pointToLayer,P=u&&u.coordsToLatLng||Bp,A,k,M,G;if(!f&&!h)return null;switch(h.type){case"Point":return A=P(f),fI(y,o,A,u);case"MultiPoint":for(M=0,G=f.length;M<G;M++)A=P(f[M]),m.push(fI(y,o,A,u));return new Pi(m);case"LineString":case"MultiLineString":return k=Vc(f,h.type==="LineString"?0:1,P),new Si(k,u);case"Polygon":case"MultiPolygon":return k=Vc(f,h.type==="Polygon"?1:2,P),new lo(k,u);case"GeometryCollection":for(M=0,G=h.geometries.length;M<G;M++){var ne=Mc({geometry:h.geometries[M],type:"Feature",properties:o.properties},u);ne&&m.push(ne)}return new Pi(m);case"FeatureCollection":for(M=0,G=h.features.length;M<G;M++){var de=Mc(h.features[M],u);de&&m.push(de)}return new Pi(m);default:throw new Error("Invalid GeoJSON object.")}}function fI(o,u,h,f){return o?o(u,h):new Dc(h,f&&f.markersInheritOptions&&f)}function Bp(o){return new Te(o[1],o[0],o[2])}function Vc(o,u,h){for(var f=[],m=0,y=o.length,P;m<y;m++)P=u?Vc(o[m],u-1,h):(h||Bp)(o[m]),f.push(P);return f}function zp(o,u){return o=ue(o),o.alt!==void 0?[_(o.lng,u),_(o.lat,u),_(o.alt,u)]:[_(o.lng,u),_(o.lat,u)]}function Fc(o,u,h,f){for(var m=[],y=0,P=o.length;y<P;y++)m.push(u?Fc(o[y],Cn(o[y])?0:u-1,h,f):zp(o[y],f));return!u&&h&&m.length>0&&m.push(m[0].slice()),m}function co(o,u){return o.feature?r({},o.feature,{geometry:u}):Bc(u)}function Bc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Up={toGeoJSON:function(o){return co(this,{type:"Point",coordinates:zp(this.getLatLng(),o)})}};Dc.include(Up),Fp.include(Up),Oc.include(Up),Si.include({toGeoJSON:function(o){var u=!Cn(this._latlngs),h=Fc(this._latlngs,u?1:0,!1,o);return co(this,{type:(u?"Multi":"")+"LineString",coordinates:h})}}),lo.include({toGeoJSON:function(o){var u=!Cn(this._latlngs),h=u&&!Cn(this._latlngs[0]),f=Fc(this._latlngs,h?2:u?1:0,!0,o);return u||(f=[f]),co(this,{type:(h?"Multi":"")+"Polygon",coordinates:f})}}),ao.include({toMultiPoint:function(o){var u=[];return this.eachLayer(function(h){u.push(h.toGeoJSON(o).geometry.coordinates)}),co(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(o){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(o);var h=u==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(o);if(h)f.push(y.geometry);else{var P=Bc(y);P.type==="FeatureCollection"?f.push.apply(f,P.features):f.push(P)}}}),h?co(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function pI(o,u){return new Ai(o,u)}var fb=pI,zc=zn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,u,h){this._url=o,this._bounds=Ce(u),T(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&so(this._image),this},bringToBack:function(){return this._map&&oo(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Ce(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",u=this._image=o?this._url:Pe("img");if(he(u,"leaflet-image-layer"),this._zoomAnimated&&he(u,"leaflet-zoom-animated"),this.options.className&&he(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onload=a(this.fire,this,"load"),u.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(o){var u=this._map.getZoomScale(o.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;ts(this._image,h,u)},_reset:function(){var o=this._image,u=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=u.getSize();rt(o,u.min),o.style.width=h.x+"px",o.style.height=h.y+"px"},_updateOpacity:function(){Rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),pb=function(o,u,h){return new zc(o,u,h)},mI=zc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",u=this._image=o?this._url:Pe("video");if(he(u,"leaflet-image-layer"),this._zoomAnimated&&he(u,"leaflet-zoom-animated"),this.options.className&&he(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onloadeddata=a(this.fire,this,"load"),o){for(var h=u.getElementsByTagName("source"),f=[],m=0;m<h.length;m++)f.push(h[m].src);this._url=h.length>0?f:[u.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var P=Pe("source");P.src=this._url[y],u.appendChild(P)}}});function mb(o,u,h){return new mI(o,u,h)}var gI=zc.extend({_initImage:function(){var o=this._image=this._url;he(o,"leaflet-image-layer"),this._zoomAnimated&&he(o,"leaflet-zoom-animated"),this.options.className&&he(o,this.options.className),o.onselectstart=g,o.onmousemove=g}});function gb(o,u,h){return new gI(o,u,h)}var ti=zn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,u){o&&(o instanceof Te||E(o))?(this._latlng=ue(o),T(this,u)):(T(this,o),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Rn(this._container,1),this.bringToFront(),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Rn(this._container,0),this._removeTimeout=setTimeout(a($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ue(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&so(this._container),this},bringToBack:function(){return this._map&&oo(this._container),this},_prepareOpen:function(o){var u=this._source;if(!u._map)return!1;if(u instanceof Pi){u=null;var h=this._source._layers;for(var f in h)if(h[f]._map){u=h[f];break}if(!u)return!1;this._source=u}if(!o)if(u.getCenter)o=u.getCenter();else if(u.getLatLng)o=u.getLatLng();else if(u.getBounds)o=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")o.innerHTML=u;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),u=$(this.options.offset),h=this._getAnchor();this._zoomAnimated?rt(this._container,o.add(h)):u=u.add(o).add(h);var f=this._containerBottom=-u.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});ge.include({_initOverlay:function(o,u,h,f){var m=u;return m instanceof o||(m=new o(f).setContent(u)),h&&m.setLatLng(h),m}}),zn.include({_initOverlay:function(o,u,h,f){var m=h;return m instanceof o?(T(m,f),m._source=this):(m=u&&!f?u:new o(f,this),m.setContent(h)),m}});var Uc=ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,ti.prototype.openOn.call(this,o)},onAdd:function(o){ti.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof er||this._source.on("preclick",is))},onRemove:function(o){ti.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof er||this._source.off("preclick",is))},getEvents:function(){var o=ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",u=this._container=Pe("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Pe("div",o+"-content-wrapper",u);if(this._contentNode=Pe("div",o+"-content",h),Za(u),xp(this._contentNode),le(u,"contextmenu",is),this._tipContainer=Pe("div",o+"-tip-container",u),this._tip=Pe("div",o+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",o+"-close-button",u);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',le(f,"click",function(m){Rt(m),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,u=o.style;u.width="",u.whiteSpace="nowrap";var h=o.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),u.width=h+1+"px",u.whiteSpace="",u.height="";var f=o.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&f>m?(u.height=m+"px",he(o,y)):Xe(o,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),h=this._getAnchor();rt(this._container,u.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,u=parseInt(Wa(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+u,f=this._containerWidth,m=new D(this._containerLeft,-h-this._containerBottom);m._add(ns(this._container));var y=o.layerPointToContainerPoint(m),P=$(this.options.autoPanPadding),A=$(this.options.autoPanPaddingTopLeft||P),k=$(this.options.autoPanPaddingBottomRight||P),M=o.getSize(),G=0,ne=0;y.x+f+k.x>M.x&&(G=y.x+f-M.x+k.x),y.x-G-A.x<0&&(G=y.x-A.x),y.y+h+k.y>M.y&&(ne=y.y+h-M.y+k.y),y.y-ne-A.y<0&&(ne=y.y-A.y),(G||ne)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([G,ne]))}},_getAnchor:function(){return $(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_b=function(o,u){return new Uc(o,u)};ge.mergeOptions({closePopupOnClick:!0}),ge.include({openPopup:function(o,u,h){return this._initOverlay(Uc,o,u,h).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),zn.include({bindPopup:function(o,u){return this._popup=this._initOverlay(Uc,this._popup,o,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Pi||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){rs(o);var u=o.layer||o.target;if(this._popup._source===u&&!(u instanceof er)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=u,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var $c=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){ti.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){ti.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=ti.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",u=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var u,h,f=this._map,m=this._container,y=f.latLngToContainerPoint(f.getCenter()),P=f.layerPointToContainerPoint(o),A=this.options.direction,k=m.offsetWidth,M=m.offsetHeight,G=$(this.options.offset),ne=this._getAnchor();A==="top"?(u=k/2,h=M):A==="bottom"?(u=k/2,h=0):A==="center"?(u=k/2,h=M/2):A==="right"?(u=0,h=M/2):A==="left"?(u=k,h=M/2):P.x<y.x?(A="right",u=0,h=M/2):(A="left",u=k+(G.x+ne.x)*2,h=M/2),o=o.subtract($(u,h,!0)).add(G).add(ne),Xe(m,"leaflet-tooltip-right"),Xe(m,"leaflet-tooltip-left"),Xe(m,"leaflet-tooltip-top"),Xe(m,"leaflet-tooltip-bottom"),he(m,"leaflet-tooltip-"+A),rt(m,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Rn(this._container,o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(u)},_getAnchor:function(){return $(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yb=function(o,u){return new $c(o,u)};ge.include({openTooltip:function(o,u,h){return this._initOverlay($c,o,u,h).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),zn.include({bindTooltip:function(o,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay($c,this._tooltip,o,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var u=o?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[u](h),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Pi||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&(le(u,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),le(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var u=o.latlng,h,f;this._tooltip.options.sticky&&o.originalEvent&&(h=this._map.mouseEventToContainerPoint(o.originalEvent),f=this._map.containerPointToLayerPoint(h),u=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(u)}});var _I=uo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var u=o&&o.tagName==="DIV"?o:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Cc(u),u.appendChild(h.html)):u.innerHTML=h.html!==!1?h.html:"",h.bgPos){var f=$(h.bgPos);u.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function vb(o){return new _I(o)}uo.Default=Ja;var Xa=zn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:X.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){T(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),$e(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(so(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof D?o:new D(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var u=this.getPane().children,h=-o(-1/0,1/0),f=0,m=u.length,y;f<m;f++)y=u[f].style.zIndex,u[f]!==this._container&&y&&(h=o(h,+y));isFinite(h)&&(this.options.zIndex=h+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!X.ielt9){Rn(this._container,this.options.opacity);var o=+new Date,u=!1,h=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var y=Math.min(1,(o-m.loaded)/200);Rn(m.el,y),y<1?u=!0:(m.active?h=!0:this._onOpaqueTile(m),m.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),u&&(mt(this._fadeFrame),this._fadeFrame=xe(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,u=this.options.maxZoom;if(o!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===o?(this._levels[h].el.style.zIndex=u-Math.abs(o-h),this._onUpdateLevel(h)):($e(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var f=this._levels[o],m=this._map;return f||(f=this._levels[o]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=u,f.origin=m.project(m.unproject(m.getPixelOrigin()),o).round(),f.zoom=o,this._setZoomTransform(f,m.getCenter(),m.getZoom()),g(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var o,u,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)u=this._tiles[o],u.retain=u.current;for(o in this._tiles)if(u=this._tiles[o],u.current&&!u.active){var f=u.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var u in this._tiles)this._tiles[u].coords.z===o&&this._removeTile(u)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)$e(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,u,h,f){var m=Math.floor(o/2),y=Math.floor(u/2),P=h-1,A=new D(+m,+y);A.z=+P;var k=this._tileCoordsToKey(A),M=this._tiles[k];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),P>f?this._retainParent(m,y,P,f):!1)},_retainChildren:function(o,u,h,f){for(var m=2*o;m<2*o+2;m++)for(var y=2*u;y<2*u+2;y++){var P=new D(m,y);P.z=h+1;var A=this._tileCoordsToKey(P),k=this._tiles[A];if(k&&k.active){k.retain=!0;continue}else k&&k.loaded&&(k.retain=!0);h+1<f&&this._retainChildren(m,y,h+1,f)}},_resetView:function(o){var u=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var u=this.options;return u.minNativeZoom!==void 0&&o<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<o?u.maxNativeZoom:o},_setView:function(o,u,h,f){var m=Math.round(u);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(o),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(o,u)},_setZoomTransforms:function(o,u){for(var h in this._levels)this._setZoomTransform(this._levels[h],o,u)},_setZoomTransform:function(o,u,h){var f=this._map.getZoomScale(h,o.zoom),m=o.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(u,h)).round();X.any3d?ts(o.el,m,f):rt(o.el,m)},_resetGrid:function(){var o=this._map,u=o.options.crs,h=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,u.wrapLng[0]],f).x/h.x),Math.ceil(o.project([0,u.wrapLng[1]],f).x/h.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([u.wrapLat[0],0],f).y/h.x),Math.ceil(o.project([u.wrapLat[1],0],f).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var u=this._map,h=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),f=u.getZoomScale(h,this._tileZoom),m=u.project(o,this._tileZoom).floor(),y=u.getSize().divideBy(f*2);return new ie(m.subtract(y),m.add(y))},_update:function(o){var u=this._map;if(u){var h=this._clampZoom(u.getZoom());if(o===void 0&&(o=u.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(o),m=this._pxBoundsToTileRange(f),y=m.getCenter(),P=[],A=this.options.keepBuffer,k=new ie(m.getBottomLeft().subtract([A,-A]),m.getTopRight().add([A,-A]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var G=this._tiles[M].coords;(G.z!==this._tileZoom||!k.contains(new D(G.x,G.y)))&&(this._tiles[M].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(o,h);return}for(var ne=m.min.y;ne<=m.max.y;ne++)for(var de=m.min.x;de<=m.max.x;de++){var Wt=new D(de,ne);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var gt=this._tiles[this._tileCoordsToKey(Wt)];gt?gt.current=!0:P.push(Wt)}}if(P.sort(function(sn,fo){return sn.distanceTo(y)-fo.distanceTo(y)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var kn=document.createDocumentFragment();for(de=0;de<P.length;de++)this._addTile(P[de],kn);this._level.el.appendChild(kn)}}}},_isValidTile:function(o){var u=this._map.options.crs;if(!u.infinite){var h=this._globalTileRange;if(!u.wrapLng&&(o.x<h.min.x||o.x>h.max.x)||!u.wrapLat&&(o.y<h.min.y||o.y>h.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(o);return Ce(this.options.bounds).overlaps(f)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var u=this._map,h=this.getTileSize(),f=o.scaleBy(h),m=f.add(h),y=u.unproject(f,o.z),P=u.unproject(m,o.z);return[y,P]},_tileCoordsToBounds:function(o){var u=this._tileCoordsToNwSe(o),h=new ht(u[0],u[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var u=o.split(":"),h=new D(+u[0],+u[1]);return h.z=+u[2],h},_removeTile:function(o){var u=this._tiles[o];u&&($e(u.el),delete this._tiles[o],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){he(o,"leaflet-tile");var u=this.getTileSize();o.style.width=u.x+"px",o.style.height=u.y+"px",o.onselectstart=g,o.onmousemove=g,X.ielt9&&this.options.opacity<1&&Rn(o,this.options.opacity)},_addTile:function(o,u){var h=this._getTilePos(o),f=this._tileCoordsToKey(o),m=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(m),this.createTile.length<2&&xe(a(this._tileReady,this,o,null,m)),rt(m,h),this._tiles[f]={el:m,coords:o,current:!0},u.appendChild(m),this.fire("tileloadstart",{tile:m,coords:o})},_tileReady:function(o,u,h){u&&this.fire("tileerror",{error:u,tile:h,coords:o});var f=this._tileCoordsToKey(o);h=this._tiles[f],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Rn(h.el,0),mt(this._fadeFrame),this._fadeFrame=xe(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),u||(he(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),X.ielt9||!this._map._fadeAnimated?xe(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var u=new D(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return u.z=o.z,u},_pxBoundsToTileRange:function(o){var u=this.getTileSize();return new ie(o.min.unscaleBy(u).floor(),o.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function wb(o){return new Xa(o)}var ho=Xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,u){this._url=o,u=T(this,u),u.detectRetina&&X.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,u){return this._url===o&&u===void 0&&(u=!0),this._url=o,u||this.redraw(),this},createTile:function(o,u){var h=document.createElement("img");return le(h,"load",a(this._tileOnLoad,this,u,h)),le(h,"error",a(this._tileOnError,this,u,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(o),h},getTileUrl:function(o){var u={r:X.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-o.y;this.options.tms&&(u.y=h),u["-y"]=h}return w(this._url,r(u,this.options))},_tileOnLoad:function(o,u){X.ielt9?setTimeout(a(o,this,null,u),0):o(null,u)},_tileOnError:function(o,u,h){var f=this.options.errorTileUrl;f&&u.getAttribute("src")!==f&&(u.src=f),o(h,u)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,u=this.options.maxZoom,h=this.options.zoomReverse,f=this.options.zoomOffset;return h&&(o=u-o),o+f},_getSubdomain:function(o){var u=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var o,u;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(u=this._tiles[o].el,u.onload=g,u.onerror=g,!u.complete)){u.src=O;var h=this._tiles[o].coords;$e(u),delete this._tiles[o],this.fire("tileabort",{tile:u,coords:h})}},_removeTile:function(o){var u=this._tiles[o];if(u)return u.el.setAttribute("src",O),Xa.prototype._removeTile.call(this,o)},_tileReady:function(o,u,h){if(!(!this._map||h&&h.getAttribute("src")===O))return Xa.prototype._tileReady.call(this,o,u,h)}});function yI(o,u){return new ho(o,u)}var vI=ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,u){this._url=o;var h=r({},this.defaultWmsParams);for(var f in u)f in this.options||(h[f]=u[f]);u=T(this,u);var m=u.detectRetina&&X.retina?2:1,y=this.getTileSize();h.width=y.x*m,h.height=y.y*m,this.wmsParams=h},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,ho.prototype.onAdd.call(this,o)},getTileUrl:function(o){var u=this._tileCoordsToNwSe(o),h=this._crs,f=ve(h.project(u[0]),h.project(u[1])),m=f.min,y=f.max,P=(this._wmsVersion>=1.3&&this._crs===hI?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),A=ho.prototype.getTileUrl.call(this,o);return A+C(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(o,u){return r(this.wmsParams,o),u||this.redraw(),this}});function Ib(o,u){return new vI(o,u)}ho.WMS=vI,yI.wms=Ib;var Ri=zn.extend({options:{padding:.1},initialize:function(o){T(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,u){var h=this._map.getZoomScale(u,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,u),y=f.multiplyBy(-h).add(m).subtract(this._map._getNewPixelOrigin(o,u));X.any3d?ts(this._container,y,h):rt(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,u=this._map.getSize(),h=this._map.containerPointToLayerPoint(u.multiplyBy(-o)).round();this._bounds=new ie(h,h.add(u.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wI=Ri.extend({options:{tolerance:0},getEvents:function(){var o=Ri.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");le(o,"mousemove",this._onMouseMove,this),le(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){mt(this._redrawRequest),delete this._ctx,$e(this._container),be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var u in this._layers)o=this._layers[u],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ri.prototype._update.call(this);var o=this._bounds,u=this._container,h=o.getSize(),f=X.retina?2:1;rt(u,o.min),u.width=f*h.x,u.height=f*h.y,u.style.width=h.x+"px",u.style.height=h.y+"px",X.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var u=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var u=o._order,h=u.next,f=u.prev;h?h.prev=f:this._drawLast=f,f?f.next=h:this._drawFirst=h,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var u=o.options.dashArray.split(/[, ]+/),h=[],f,m;for(m=0;m<u.length;m++){if(f=Number(u[m]),isNaN(f))return;h.push(f)}o.options._dashArray=h}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||xe(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var u=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(o._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(o._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var u=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,u=this._redrawBounds;if(this._ctx.save(),u){var h=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)o=f.layer,(!u||o._pxBounds&&o._pxBounds.intersects(u))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,u){if(this._drawing){var h,f,m,y,P=o._parts,A=P.length,k=this._ctx;if(A){for(k.beginPath(),h=0;h<A;h++){for(f=0,m=P[h].length;f<m;f++)y=P[h][f],k[f?"lineTo":"moveTo"](y.x,y.y);u&&k.closePath()}this._fillStroke(k,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var u=o._point,h=this._ctx,f=Math.max(Math.round(o._radius),1),m=(Math.max(Math.round(o._radiusY),1)||f)/f;m!==1&&(h.save(),h.scale(1,m)),h.beginPath(),h.arc(u.x,u.y/m,f,0,Math.PI*2,!1),m!==1&&h.restore(),this._fillStroke(h,o)}},_fillStroke:function(o,u){var h=u.options;h.fill&&(o.globalAlpha=h.fillOpacity,o.fillStyle=h.fillColor||h.color,o.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(o.setLineDash&&o.setLineDash(u.options&&u.options._dashArray||[]),o.globalAlpha=h.opacity,o.lineWidth=h.weight,o.strokeStyle=h.color,o.lineCap=h.lineCap,o.lineJoin=h.lineJoin,o.stroke())},_onClick:function(o){for(var u=this._map.mouseEventToLayerPoint(o),h,f,m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(u)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(h))&&(f=h);this._fireEvent(f?[f]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,u)}},_handleMouseOut:function(o){var u=this._hoveredLayer;u&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([u],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,u){if(!this._mouseHoverThrottled){for(var h,f,m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(u)&&(f=h);f!==this._hoveredLayer&&(this._handleMouseOut(o),f&&(he(this._container,"leaflet-interactive"),this._fireEvent([f],o,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,u,h){this._map._fireDOMEvent(u,h||u.type,o)},_bringToFront:function(o){var u=o._order;if(u){var h=u.next,f=u.prev;if(h)h.prev=f;else return;f?f.next=h:h&&(this._drawFirst=h),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(o)}},_bringToBack:function(o){var u=o._order;if(u){var h=u.next,f=u.prev;if(f)f.next=h;else return;h?h.prev=f:f&&(this._drawLast=f),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(o)}}});function II(o){return X.canvas?new wI(o):null}var eu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Eb={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ri.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var u=o._container=eu("shape");he(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",o._path=eu("path"),u.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var u=o._container;this._container.appendChild(u),o.options.interactive&&o.addInteractiveTarget(u)},_removePath:function(o){var u=o._container;$e(u),o.removeInteractiveTarget(u),delete this._layers[c(o)]},_updateStyle:function(o){var u=o._stroke,h=o._fill,f=o.options,m=o._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(u||(u=o._stroke=eu("stroke")),m.appendChild(u),u.weight=f.weight+"px",u.color=f.color,u.opacity=f.opacity,f.dashArray?u.dashStyle=E(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=f.lineCap.replace("butt","flat"),u.joinstyle=f.lineJoin):u&&(m.removeChild(u),o._stroke=null),f.fill?(h||(h=o._fill=eu("fill")),m.appendChild(h),h.color=f.fillColor||f.color,h.opacity=f.fillOpacity):h&&(m.removeChild(h),o._fill=null)},_updateCircle:function(o){var u=o._point.round(),h=Math.round(o._radius),f=Math.round(o._radiusY||h);this._setPath(o,o._empty()?"M0 0":"AL "+u.x+","+u.y+" "+h+","+f+" 0,"+65535*360)},_setPath:function(o,u){o._path.v=u},_bringToFront:function(o){so(o._container)},_bringToBack:function(o){oo(o._container)}},jc=X.vml?eu:Sw,tu=Ri.extend({_initContainer:function(){this._container=jc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=jc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ri.prototype._update.call(this);var o=this._bounds,u=o.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,h.setAttribute("width",u.x),h.setAttribute("height",u.y)),rt(h,o.min),h.setAttribute("viewBox",[o.min.x,o.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(o){var u=o._path=jc("path");o.options.className&&he(u,o.options.className),o.options.interactive&&he(u,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){$e(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var u=o._path,h=o.options;u&&(h.stroke?(u.setAttribute("stroke",h.color),u.setAttribute("stroke-opacity",h.opacity),u.setAttribute("stroke-width",h.weight),u.setAttribute("stroke-linecap",h.lineCap),u.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?u.setAttribute("stroke-dasharray",h.dashArray):u.removeAttribute("stroke-dasharray"),h.dashOffset?u.setAttribute("stroke-dashoffset",h.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),h.fill?(u.setAttribute("fill",h.fillColor||h.color),u.setAttribute("fill-opacity",h.fillOpacity),u.setAttribute("fill-rule",h.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(o,u){this._setPath(o,Aw(o._parts,u))},_updateCircle:function(o){var u=o._point,h=Math.max(Math.round(o._radius),1),f=Math.max(Math.round(o._radiusY),1)||h,m="a"+h+","+f+" 0 1,0 ",y=o._empty()?"M0 0":"M"+(u.x-h)+","+u.y+m+h*2+",0 "+m+-h*2+",0 ";this._setPath(o,y)},_setPath:function(o,u){o._path.setAttribute("d",u)},_bringToFront:function(o){so(o._path)},_bringToBack:function(o){oo(o._path)}});X.vml&&tu.include(Eb);function EI(o){return X.svg||X.vml?new tu(o):null}ge.include({getRenderer:function(o){var u=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var u=this._paneRenderers[o];return u===void 0&&(u=this._createRenderer({pane:o}),this._paneRenderers[o]=u),u},_createRenderer:function(o){return this.options.preferCanvas&&II(o)||EI(o)}});var TI=lo.extend({initialize:function(o,u){lo.prototype.initialize.call(this,this._boundsToLatLngs(o),u)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Ce(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Tb(o,u){return new TI(o,u)}tu.create=jc,tu.pointsToPath=Aw,Ai.geometryToLayer=Mc,Ai.coordsToLatLng=Bp,Ai.coordsToLatLngs=Vc,Ai.latLngToCoords=zp,Ai.latLngsToCoords=Fc,Ai.getFeature=co,Ai.asFeature=Bc,ge.mergeOptions({boxZoom:!0});var PI=ei.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ha(),Ep(),this._startPoint=this._map.mouseEventToContainerPoint(o),le(document,{contextmenu:rs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var u=new ie(this._point,this._startPoint),h=u.getSize();rt(this._box,u.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&($e(this._box),Xe(this._container,"leaflet-crosshair")),Ga(),Tp(),be(document,{contextmenu:rs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var u=new ht(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ge.addInitHook("addHandler","boxZoom",PI),ge.mergeOptions({doubleClickZoom:!0});var SI=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var u=this._map,h=u.getZoom(),f=u.options.zoomDelta,m=o.originalEvent.shiftKey?h-f:h+f;u.options.doubleClickZoom==="center"?u.setZoom(m):u.setZoomAround(o.containerPoint,m)}});ge.addInitHook("addHandler","doubleClickZoom",SI),ge.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var AI=ei.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Xi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xe(this._map._container,"leaflet-grab"),Xe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Ce(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var u=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(u),this._prunePositions(u)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,u){return o-(o-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;o.x<u.min.x&&(o.x=this._viscousLimit(o.x,u.min.x)),o.y<u.min.y&&(o.y=this._viscousLimit(o.y,u.min.y)),o.x>u.max.x&&(o.x=this._viscousLimit(o.x,u.max.x)),o.y>u.max.y&&(o.y=this._viscousLimit(o.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,u=Math.round(o/2),h=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-u+h)%o+u-h,y=(f+u+h)%o-u-h,P=Math.abs(m+h)<Math.abs(y+h)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(o){var u=this._map,h=u.options,f=!h.inertia||o.noInertia||this._times.length<2;if(u.fire("dragend",o),f)u.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,P=h.easeLinearity,A=m.multiplyBy(P/y),k=A.distanceTo([0,0]),M=Math.min(h.inertiaMaxSpeed,k),G=A.multiplyBy(M/k),ne=M/(h.inertiaDeceleration*P),de=G.multiplyBy(-ne/2).round();!de.x&&!de.y?u.fire("moveend"):(de=u._limitOffset(de,u.options.maxBounds),xe(function(){u.panBy(de,{duration:ne,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});ge.addInitHook("addHandler","dragging",AI),ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var RI=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),le(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,u=document.documentElement,h=o.scrollTop||u.scrollTop,f=o.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(f,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var u=this._panKeys={},h=this.keyCodes,f,m;for(f=0,m=h.left.length;f<m;f++)u[h.left[f]]=[-1*o,0];for(f=0,m=h.right.length;f<m;f++)u[h.right[f]]=[o,0];for(f=0,m=h.down.length;f<m;f++)u[h.down[f]]=[0,o];for(f=0,m=h.up.length;f<m;f++)u[h.up[f]]=[0,-1*o]},_setZoomDelta:function(o){var u=this._zoomKeys={},h=this.keyCodes,f,m;for(f=0,m=h.zoomIn.length;f<m;f++)u[h.zoomIn[f]]=o;for(f=0,m=h.zoomOut.length;f<m;f++)u[h.zoomOut[f]]=-o},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var u=o.keyCode,h=this._map,f;if(u in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(f=this._panKeys[u],o.shiftKey&&(f=$(f).multiplyBy(3)),h.options.maxBounds&&(f=h._limitOffset($(f),h.options.maxBounds)),h.options.worldCopyJump){var m=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(f)));h.panTo(m)}else h.panBy(f)}else if(u in this._zoomKeys)h.setZoom(h.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;rs(o)}}});ge.addInitHook("addHandler","keyboard",RI),ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var CI=ei.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var u=Jw(o),h=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var f=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),f),rs(o)},_performZoom:function(){var o=this._map,u=o.getZoom(),h=this._map.options.zoomSnap||0;o._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=h?Math.ceil(m/h)*h:m,P=o._limitZoom(u+(this._delta>0?y:-y))-u;this._delta=0,this._startTime=null,P&&(o.options.scrollWheelZoom==="center"?o.setZoom(u+P):o.setZoomAround(this._lastMousePos,u+P))}});ge.addInitHook("addHandler","scrollWheelZoom",CI);var Pb=600;ge.mergeOptions({tapHold:X.touchNative&&X.safari&&X.mobile,tapTolerance:15});var kI=ei.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var u=o.touches[0];this._startPos=this._newPos=new D(u.clientX,u.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",Rt),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Pb),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){be(document,"touchend",Rt),be(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),be(document,"touchend touchcancel contextmenu",this._cancel,this),be(document,"touchmove",this._onMove,this)},_onMove:function(o){var u=o.touches[0];this._newPos=new D(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,u){var h=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});h._simulated=!0,u.target.dispatchEvent(h)}});ge.addInitHook("addHandler","tapHold",kI),ge.mergeOptions({touchZoom:X.touch,bounceAtZoomLimits:!0});var xI=ei.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var u=this._map;if(!(!o.touches||o.touches.length!==2||u._animatingZoom||this._zooming)){var h=u.mouseEventToContainerPoint(o.touches[0]),f=u.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(h.add(f)._divideBy(2))),this._startDist=h.distanceTo(f),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),Rt(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var u=this._map,h=u.mouseEventToContainerPoint(o.touches[0]),f=u.mouseEventToContainerPoint(o.touches[1]),m=h.distanceTo(f)/this._startDist;if(this._zoom=u.getScaleZoom(m,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&m<1||this._zoom>u.getMaxZoom()&&m>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=h._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),mt(this._animRequest);var P=a(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=xe(P,this,!0),Rt(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,mt(this._animRequest),be(document,"touchmove",this._onTouchMove,this),be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ge.addInitHook("addHandler","touchZoom",xI),ge.BoxZoom=PI,ge.DoubleClickZoom=SI,ge.Drag=AI,ge.Keyboard=RI,ge.ScrollWheelZoom=CI,ge.TapHold=kI,ge.TouchZoom=xI,n.Bounds=ie,n.Browser=X,n.CRS=rn,n.Canvas=wI,n.Circle=Fp,n.CircleMarker=Oc,n.Class=An,n.Control=Bn,n.DivIcon=_I,n.DivOverlay=ti,n.DomEvent=$x,n.DomUtil=zx,n.Draggable=Xi,n.Evented=Ti,n.FeatureGroup=Pi,n.GeoJSON=Ai,n.GridLayer=Xa,n.Handler=ei,n.Icon=uo,n.ImageOverlay=zc,n.LatLng=Te,n.LatLngBounds=ht,n.Layer=zn,n.LayerGroup=ao,n.LineUtil=tb,n.Map=ge,n.Marker=Dc,n.Mixin=Zx,n.Path=er,n.Point=D,n.PolyUtil=Qx,n.Polygon=lo,n.Polyline=Si,n.Popup=Uc,n.PosAnimation=Xw,n.Projection=nb,n.Rectangle=TI,n.Renderer=Ri,n.SVG=tu,n.SVGOverlay=gI,n.TileLayer=ho,n.Tooltip=$c,n.Transformation=cp,n.Util=es,n.VideoOverlay=mI,n.bind=a,n.bounds=ve,n.canvas=II,n.circle=cb,n.circleMarker=lb,n.control=Qa,n.divIcon=vb,n.extend=r,n.featureGroup=ob,n.geoJSON=pI,n.geoJson=fb,n.gridLayer=wb,n.icon=ab,n.imageOverlay=pb,n.latLng=ue,n.latLngBounds=Ce,n.layerGroup=sb,n.map=jx,n.marker=ub,n.point=$,n.polygon=db,n.polyline=hb,n.popup=_b,n.rectangle=Tb,n.setOptions=T,n.stamp=c,n.svg=EI,n.svgOverlay=gb,n.tileLayer=yI,n.tooltip=yb,n.transformation=$a,n.version=i,n.videoOverlay=mb;var Sb=window.L;n.noConflict=function(){return window.L=Sb,this},window.L=n})})(Mg,Mg.exports);var Jl=Mg.exports;function df(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function ff(t,e){return e==null?function(i,r){const s=N.useRef();return s.current||(s.current=t(i,r)),s}:function(i,r){const s=N.useRef();s.current||(s.current=t(i,r));const a=N.useRef(i),{instance:l}=s.current;return N.useEffect(function(){a.current!==i&&(e(l,i,a.current),a.current=i)},[l,i,r]),s}}function k1(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function x1(t){return function(n){const i=Cy(),r=t(hf(n,i),i);return P1(i.map,n.attribution),ky(r.current,n.eventHandlers),k1(r.current,i),r}}function hO(t,e){const n=N.useRef();N.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function dO(t){return function(n){const i=Cy(),r=t(hf(n,i),i);return ky(r.current,n.eventHandlers),k1(r.current,i),hO(r.current,n),r}}function fO(t,e){const n=ff(t,e),i=x1(n);return C1(i)}function pO(t,e){const n=ff(t),i=cO(n,e);return uO(i)}function mO(t,e){const n=ff(t,e),i=dO(n);return C1(i)}function gO(t,e){const n=ff(t,e),i=x1(n);return lO(i)}function _O(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}const QE=mO(function({center:e,children:n,...i},r){const s=new Jl.Circle(e,i);return df(s,S1(r,{overlayContainer:s}))},sO);function Vg(){return Vg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vg.apply(this,arguments)}function yO({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:s,placeholder:a,style:l,whenReady:c,zoom:d,...p},g){const[_]=N.useState({className:r,id:s,style:l}),[v,S]=N.useState(null);N.useImperativeHandle(g,()=>(v==null?void 0:v.map)??null,[v]);const T=N.useCallback(I=>{if(I!==null&&v===null){const w=new Jl.Map(I,p);n!=null&&d!=null?w.setView(n,d):t!=null&&w.fitBounds(t,e),c!=null&&w.whenReady(c),S(aO(w))}},[]);N.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const C=v?Qu.createElement(R1,{value:v},i):a??null;return Qu.createElement("div",Vg({},_,{ref:T}),C)}const vO=N.forwardRef(yO),YE=fO(function({position:e,...n},i){const r=new Jl.Marker(e,n);return df(r,S1(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),JE=pO(function(e,n){const i=new Jl.Popup(e,n.overlayContainer);return df(i,n)},function(e,n,{position:i},r){N.useEffect(function(){const{instance:a}=e;function l(d){d.popup===a&&(a.update(),r(!0))}function c(d){d.popup===a&&r(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var p;n.map.off({popupopen:l,popupclose:c}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),wO=gO(function({url:e,...n},i){const r=new Jl.TileLayer(e,hf(n,i));return df(r,i)},function(e,n,i){_O(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},IO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},L1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,p=s>>2,g=(s&3)<<4|l>>4;let _=(l&15)<<2|d>>6,v=d&63;c||(v=64,a||(_=64)),i.push(n[p],n[g],n[_],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||d==null||g==null)throw new EO;const _=s<<2|l>>4;if(i.push(_),d!==64){const v=l<<4&240|d>>2;if(i.push(v),g!==64){const S=d<<6&192|g;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TO=function(t){const e=b1(t);return L1.encodeByteArray(e,!0)},yd=function(t){return TO(t).replace(/\./g,"")},N1=function(t){try{return L1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vd(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!PO(n)||(t[n]=vd(t[n],e[n]));return t}function PO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=()=>SO().__FIREBASE_DEFAULTS__,RO=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&N1(t[1]);return e&&JSON.parse(e)},xy=()=>{try{return AO()||RO()||CO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D1=()=>{var t;return(t=xy())===null||t===void 0?void 0:t.config},kO=t=>{var e;return(e=xy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[yd(JSON.stringify(n)),yd(JSON.stringify(a)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function by(){var t;const e=(t=xy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NO(){return typeof self=="object"&&self.self===self}function O1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ly(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M1(){const t=Ge();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DO(){return!by()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ml(){try{return typeof indexedDB=="object"}catch{return!1}}function OO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="FirebaseError";class Yt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=MO,Object.setPrototypeOf(this,Yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?VO(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Yt(r,l,i)}}function VO(t,e){return t.replace(FO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const FO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function BO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fg(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(eT(s)&&eT(a)){if(!Fg(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function eT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Bo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Pu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function V1(t,e){const n=new zO(t,e);return n.subscribe.bind(n)}class zO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");UO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=gm),r.error===void 0&&(r.error=gm),r.complete===void 0&&(r.complete=gm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t){return t&&t._delegate?t._delegate:t}class vi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new xO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qO(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jO(t){return t===ls?void 0:t}function qO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $O(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=[];var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const F1={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},HO=fe.INFO,GO={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},KO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=GO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pf{constructor(e){this.name=e,this._logLevel=HO,this._logHandler=KO,this._userLogHandler=null,Ny.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}function ZO(t){Ny.forEach(e=>{e.setLogLevel(t)})}function QO(t,e){for(const n of Ny){let i=null;e&&e.level&&(i=F1[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const l=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(i??r.logLevel)&&t({level:fe[s].toLowerCase(),message:l,args:a,type:r.name})}}}const YO=(t,e)=>e.some(n=>t instanceof n);let tT,nT;function JO(){return tT||(tT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XO(){return nT||(nT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B1=new WeakMap,Bg=new WeakMap,z1=new WeakMap,_m=new WeakMap,Dy=new WeakMap;function eM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ar(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&B1.set(n,t)}).catch(()=>{}),Dy.set(e,t),e}function tM(t){if(Bg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Bg.set(t,e)}let zg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nM(t){zg=t(zg)}function iM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(ym(this),e,...n);return z1.set(i,e.sort?e.sort():[e]),Ar(i)}:XO().includes(t)?function(...e){return t.apply(ym(this),e),Ar(B1.get(this))}:function(...e){return Ar(t.apply(ym(this),e))}}function rM(t){return typeof t=="function"?iM(t):(t instanceof IDBTransaction&&tM(t),YO(t,JO())?new Proxy(t,zg):t)}function Ar(t){if(t instanceof IDBRequest)return eM(t);if(_m.has(t))return _m.get(t);const e=rM(t);return e!==t&&(_m.set(t,e),Dy.set(e,t)),e}const ym=t=>Dy.get(t);function sM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=Ar(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Ar(a.result),c.oldVersion,c.newVersion,Ar(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const oM=["get","getKey","getAll","getAllKeys","count"],aM=["put","add","delete","clear"],vm=new Map;function iT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vm.get(e))return vm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=aM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||oM.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&c.done]))[0]};return vm.set(e,s),s}nM(t=>({...t,get:(e,n,i)=>iT(e,n)||t.get(e,n,i),has:(e,n)=>!!iT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function lM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ug="@firebase/app",rT="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new pf("@firebase/app"),cM="@firebase/app-compat",hM="@firebase/analytics-compat",dM="@firebase/analytics",fM="@firebase/app-check-compat",pM="@firebase/app-check",mM="@firebase/auth",gM="@firebase/auth-compat",_M="@firebase/database",yM="@firebase/database-compat",vM="@firebase/functions",wM="@firebase/functions-compat",IM="@firebase/installations",EM="@firebase/installations-compat",TM="@firebase/messaging",PM="@firebase/messaging-compat",SM="@firebase/performance",AM="@firebase/performance-compat",RM="@firebase/remote-config",CM="@firebase/remote-config-compat",kM="@firebase/storage",xM="@firebase/storage-compat",bM="@firebase/firestore",LM="@firebase/firestore-compat",NM="firebase",DM="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="[DEFAULT]",OM={[Ug]:"fire-core",[cM]:"fire-core-compat",[dM]:"fire-analytics",[hM]:"fire-analytics-compat",[pM]:"fire-app-check",[fM]:"fire-app-check-compat",[mM]:"fire-auth",[gM]:"fire-auth-compat",[_M]:"fire-rtdb",[yM]:"fire-rtdb-compat",[vM]:"fire-fn",[wM]:"fire-fn-compat",[IM]:"fire-iid",[EM]:"fire-iid-compat",[TM]:"fire-fcm",[PM]:"fire-fcm-compat",[SM]:"fire-perf",[AM]:"fire-perf-compat",[RM]:"fire-rc",[CM]:"fire-rc-compat",[kM]:"fire-gcs",[xM]:"fire-gcs-compat",[bM]:"fire-fst",[LM]:"fire-fst-compat","fire-js":"fire-js",[NM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Map,gl=new Map;function wd(t,e){try{t.container.addComponent(e)}catch(n){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function U1(t,e){t.container.addOrOverwriteComponent(e)}function Lr(t){const e=t.name;if(gl.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;gl.set(e,t);for(const n of br.values())wd(n,t);return!0}function $1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function MM(t,e,n=xr){$1(t,e).clearInstance(n)}function VM(){gl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Vi=new Qs("app","Firebase",FM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BM=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=DM;function Oy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:xr,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Vi.create("bad-app-name",{appName:String(r)});if(n||(n=D1()),!n)throw Vi.create("no-options");const s=br.get(r);if(s){if(Fg(n,s.options)&&Fg(i,s.config))return s;throw Vi.create("duplicate-app",{appName:r})}const a=new WO(r);for(const c of gl.values())a.addComponent(c);const l=new BM(n,i,a);return br.set(r,l),l}function zM(t=xr){const e=br.get(t);if(!e&&t===xr&&D1())return Oy();if(!e)throw Vi.create("no-app",{appName:t});return e}function UM(){return Array.from(br.values())}async function j1(t){const e=t.name;br.has(e)&&(br.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function _i(t,e,n){var i;let r=(i=OM[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(l.join(" "));return}Lr(new vi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function q1(t,e){if(t!==null&&typeof t!="function")throw Vi.create("invalid-log-argument");QO(t,e)}function W1(t){ZO(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="firebase-heartbeat-database",jM=1,_l="firebase-heartbeat-store";let wm=null;function H1(){return wm||(wm=sM($M,jM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_l)}}}).catch(t=>{throw Vi.create("idb-open",{originalErrorMessage:t.message})})),wm}async function qM(t){try{return await(await H1()).transaction(_l).objectStore(_l).get(G1(t))}catch(e){if(e instanceof Yt)Os.warn(e.message);else{const n=Vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Os.warn(n.message)}}}async function sT(t,e){try{const i=(await H1()).transaction(_l,"readwrite");await i.objectStore(_l).put(e,G1(t)),await i.done}catch(n){if(n instanceof Yt)Os.warn(n.message);else{const i=Vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Os.warn(i.message)}}}function G1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=1024,HM=30*24*60*60*1e3;class GM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=oT();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=HM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=oT(),{heartbeatsToSend:n,unsentEntries:i}=KM(this._heartbeatsCache.heartbeats),r=yd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function oT(){return new Date().toISOString().substring(0,10)}function KM(t,e=WM){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),aT(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),aT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ZM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ml()?OO().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await qM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return sT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return sT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function aT(t){return yd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t){Lr(new vi("platform-logger",e=>new uM(e),"PRIVATE")),Lr(new vi("heartbeat",e=>new GM(e),"PRIVATE")),_i(Ug,rT,t),_i(Ug,rT,"esm2017"),_i("fire-js","")}QM("");const YM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Yt,SDK_VERSION:Hr,_DEFAULT_ENTRY_NAME:xr,_addComponent:wd,_addOrOverwriteComponent:U1,_apps:br,_clearComponents:VM,_components:gl,_getProvider:$1,_registerComponent:Lr,_removeServiceInstance:MM,deleteApp:j1,getApp:zM,getApps:UM,initializeApp:Oy,onLog:q1,registerVersion:_i,setLogLevel:W1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this._delegate=e,this.firebase=n,wd(e,new vi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),j1(this._delegate)))}_getService(e,n=xr){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=xr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){wd(this._delegate,e)}_addOrOverwriteComponent(e){U1(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},uT=new Qs("app-compat","Firebase",XM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:_i,setLogLevel:W1,onLog:q1,apps:null,SDK_VERSION:Hr,INTERNAL:{registerComponent:l,removeApp:i,useAsService:c,modularAPIs:YM}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(d){delete e[d]}function r(d){if(d=d||xr,!XE(e,d))throw uT.create("no-app",{appName:d});return e[d]}r.App=t;function s(d,p={}){const g=Oy(d,p);if(XE(e,g.name))return e[g.name];const _=new t(g,n);return e[g.name]=_,_}function a(){return Object.keys(e).map(d=>e[d])}function l(d){const p=d.name,g=p.replace("-compat","");if(Lr(d)&&d.type==="PUBLIC"){const _=(v=r())=>{if(typeof v[g]!="function")throw uT.create("invalid-app-argument",{appName:p});return v[g]()};d.serviceProps!==void 0&&vd(_,d.serviceProps),n[g]=_,t.prototype[g]=function(...v){return this._getService.bind(this,p).apply(this,d.multipleInstances?v:[])}}return d.type==="PUBLIC"?n[g]:null}function c(d,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){const t=eV(JM);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:K1,extendNamespace:e,createSubscribe:V1,ErrorFactory:Qs,deepExtend:vd});function e(n){vd(t,n)}return t}const tV=K1();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=new pf("@firebase/app-compat"),nV="@firebase/app-compat",iV="0.2.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t){_i(nV,iV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(NO()&&self.firebase!==void 0){lT.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&lT.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Nt=tV;rV();var sV="firebase",oV="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.registerVersion(sV,oV,"app-compat");var aV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},H,My=My||{},re=aV||self;function mf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Xl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function uV(t){return Object.prototype.hasOwnProperty.call(t,Im)&&t[Im]||(t[Im]=++lV)}var Im="closure_uid_"+(1e9*Math.random()>>>0),lV=0;function cV(t,e,n){return t.call.apply(t.bind,arguments)}function hV(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=cV:$t=hV,$t.apply(null,arguments)}function uh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Tt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var a=Array(arguments.length-2),l=2;l<arguments.length;l++)a[l-2]=arguments[l];return e.prototype[r].apply(i,a)}}function Gr(){this.s=this.s,this.o=this.o}var dV=0;Gr.prototype.s=!1;Gr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),dV!=0)&&uV(this)};Gr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Z1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Vy(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function cT(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(mf(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let a=0;a<s;a++)t[r+a]=i[a]}else t.push(i)}}function jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var fV=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return t}();function yl(t){return/^[\s\xa0]*$/.test(t)}function gf(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function si(t){return gf().indexOf(t)!=-1}function Fy(t){return Fy[" "](t),t}Fy[" "]=function(){};function pV(t,e){var n=o2;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var mV=si("Opera"),aa=si("Trident")||si("MSIE"),Q1=si("Edge"),$g=Q1||aa,Y1=si("Gecko")&&!(gf().toLowerCase().indexOf("webkit")!=-1&&!si("Edge"))&&!(si("Trident")||si("MSIE"))&&!si("Edge"),gV=gf().toLowerCase().indexOf("webkit")!=-1&&!si("Edge");function J1(){var t=re.document;return t?t.documentMode:void 0}var jg;e:{var Em="",Tm=function(){var t=gf();if(Y1)return/rv:([^\);]+)(\)|;)/.exec(t);if(Q1)return/Edge\/([\d\.]+)/.exec(t);if(aa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(gV)return/WebKit\/(\S+)/.exec(t);if(mV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Tm&&(Em=Tm?Tm[1]:""),aa){var Pm=J1();if(Pm!=null&&Pm>parseFloat(Em)){jg=String(Pm);break e}}jg=Em}var qg;if(re.document&&aa){var hT=J1();qg=hT||parseInt(jg,10)||void 0}else qg=void 0;var _V=qg;function vl(t,e){if(jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Y1){e:{try{Fy(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:yV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vl.$.h.call(this)}}Tt(vl,jt);var yV={2:"touch",3:"pen",4:"mouse"};vl.prototype.h=function(){vl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ec="closure_listenable_"+(1e6*Math.random()|0),vV=0;function wV(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++vV,this.fa=this.ia=!1}function _f(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function By(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function IV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function X1(t){const e={};for(const n in t)e[n]=t[n];return e}const dT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eA(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<dT.length;s++)n=dT[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function yf(t){this.src=t,this.g={},this.h=0}yf.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=Hg(t,e,i,r);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new wV(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function Wg(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=Z1(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(_f(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Hg(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var zy="closure_lm_"+(1e6*Math.random()|0),Sm={};function tA(t,e,n,i,r){if(i&&i.once)return iA(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)tA(t,e[s],n,i,r);return null}return n=jy(n),t&&t[ec]?t.O(e,n,Xl(i)?!!i.capture:!!i,r):nA(t,e,n,!1,i,r)}function nA(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=Xl(r)?!!r.capture:!!r,l=$y(t);if(l||(t[zy]=l=new yf(t)),n=l.add(e,n,i,a,s),n.proxy)return n;if(i=EV(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)fV||(r=a),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(sA(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function EV(){function t(n){return e.call(t.src,t.listener,n)}const e=TV;return t}function iA(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)iA(t,e[s],n,i,r);return null}return n=jy(n),t&&t[ec]?t.P(e,n,Xl(i)?!!i.capture:!!i,r):nA(t,e,n,!0,i,r)}function rA(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)rA(t,e[s],n,i,r);else i=Xl(i)?!!i.capture:!!i,n=jy(n),t&&t[ec]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Hg(s,n,i,r),-1<n&&(_f(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=$y(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Hg(e,n,i,r)),(n=-1<t?e[t]:null)&&Uy(n))}function Uy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ec])Wg(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(sA(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=$y(e))?(Wg(n,t),n.h==0&&(n.src=null,e[zy]=null)):_f(t)}}}function sA(t){return t in Sm?Sm[t]:Sm[t]="on"+t}function TV(t,e){if(t.fa)t=!0;else{e=new vl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Uy(t),t=n.call(i,e)}return t}function $y(t){return t=t[zy],t instanceof yf?t:null}var Am="__closure_events_fn_"+(1e9*Math.random()>>>0);function jy(t){return typeof t=="function"?t:(t[Am]||(t[Am]=function(e){return t.handleEvent(e)}),t[Am])}function Et(){Gr.call(this),this.i=new yf(this),this.S=this,this.J=null}Tt(Et,Gr);Et.prototype[ec]=!0;Et.prototype.removeEventListener=function(t,e,n,i){rA(this,t,e,n,i)};function Dt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new jt(e,t);else if(e instanceof jt)e.target=e.target||t;else{var r=e;e=new jt(i,t),eA(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];r=lh(a,i,!0,e)&&r}if(a=e.g=t,r=lh(a,i,!0,e)&&r,r=lh(a,i,!1,e)&&r,n)for(s=0;s<n.length;s++)a=e.g=n[s],r=lh(a,i,!1,e)&&r}Et.prototype.N=function(){if(Et.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)_f(n[i]);delete t.g[e],t.h--}}this.J=null};Et.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Et.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function lh(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==n){var l=a.listener,c=a.la||a.src;a.ia&&Wg(t.i,a),r=l.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var qy=re.JSON.stringify;class PV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function SV(){var t=Wy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class AV{constructor(){this.h=this.g=null}add(e,n){const i=oA.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var oA=new PV(()=>new RV,t=>t.reset());class RV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function CV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function kV(t){re.setTimeout(()=>{throw t},0)}let wl,Il=!1,Wy=new AV,aA=()=>{const t=re.Promise.resolve(void 0);wl=()=>{t.then(xV)}};var xV=()=>{for(var t;t=SV();){try{t.h.call(t.g)}catch(n){kV(n)}var e=oA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Il=!1};function vf(t,e){Et.call(this),this.h=t||1,this.g=e||re,this.j=$t(this.qb,this),this.l=Date.now()}Tt(vf,Et);H=vf.prototype;H.ga=!1;H.T=null;H.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dt(this,"tick"),this.ga&&(Hy(this),this.start()))}};H.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Hy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}H.N=function(){vf.$.N.call(this),Hy(this),delete this.g};function Gy(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function uA(t){t.g=Gy(()=>{t.g=null,t.i&&(t.i=!1,uA(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class bV extends Gr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uA(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function El(t){Gr.call(this),this.h=t,this.g={}}Tt(El,Gr);var fT=[];function lA(t,e,n,i){Array.isArray(n)||(n&&(fT[0]=n.toString()),n=fT);for(var r=0;r<n.length;r++){var s=tA(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function cA(t){By(t.g,function(e,n){this.g.hasOwnProperty(n)&&Uy(e)},t),t.g={}}El.prototype.N=function(){El.$.N.call(this),cA(this)};El.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wf(){this.g=!0}wf.prototype.Ea=function(){this.g=!1};function LV(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var a="",l=s.split("&"),c=0;c<l.length;c++){var d=l[c].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");a=2<=g.length&&g[1]=="type"?a+(p+"="+d+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+a})}function NV(t,e,n,i,r,s,a){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+a})}function zo(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+OV(t,n)+(i?" "+i:"")})}function DV(t,e){t.info(function(){return"TIMEOUT: "+e})}wf.prototype.info=function(){};function OV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<r.length;a++)r[a]=""}}}}return qy(n)}catch{return e}}var Ys={},pT=null;function If(){return pT=pT||new Et}Ys.Ta="serverreachability";function hA(t){jt.call(this,Ys.Ta,t)}Tt(hA,jt);function Tl(t){const e=If();Dt(e,new hA(e))}Ys.STAT_EVENT="statevent";function dA(t,e){jt.call(this,Ys.STAT_EVENT,t),this.stat=e}Tt(dA,jt);function Zt(t){const e=If();Dt(e,new dA(e,t))}Ys.Ua="timingevent";function fA(t,e){jt.call(this,Ys.Ua,t),this.size=e}Tt(fA,jt);function tc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var Ef={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ky(){}Ky.prototype.h=null;function mT(t){return t.h||(t.h=t.i())}function mA(){}var nc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zy(){jt.call(this,"d")}Tt(Zy,jt);function Qy(){jt.call(this,"c")}Tt(Qy,jt);var Gg;function Tf(){}Tt(Tf,Ky);Tf.prototype.g=function(){return new XMLHttpRequest};Tf.prototype.i=function(){return{}};Gg=new Tf;function ic(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new El(this),this.P=MV,t=$g?125:void 0,this.V=new vf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gA}function gA(){this.i=null,this.g="",this.h=!1}var MV=45e3,Kg={},Id={};H=ic.prototype;H.setTimeout=function(t){this.P=t};function Zg(t,e,n){t.L=1,t.v=Sf(ji(e)),t.s=n,t.S=!0,_A(t,null)}function _A(t,e){t.G=Date.now(),rc(t),t.A=ji(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),SA(n.i,"t",i),t.C=0,n=t.l.J,t.h=new gA,t.g=HA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new bV($t(t.Pa,t,t.g),t.O)),lA(t.U,t.g,"readystatechange",t.nb),e=t.I?X1(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Tl(),LV(t.j,t.u,t.A,t.m,t.W,t.s)}H.nb=function(t){t=t.target;const e=this.M;e&&ci(t)==3?e.l():this.Pa(t)};H.Pa=function(t){try{if(t==this.g)e:{const p=ci(this.g);var e=this.g.Ia();const g=this.g.da();if(!(3>p)&&(p!=3||$g||this.g&&(this.h.h||this.g.ja()||vT(this.g)))){this.J||p!=4||e==7||(e==8||0>=g?Tl(3):Tl(2)),Pf(this);var n=this.g.da();this.ca=n;t:if(yA(this)){var i=vT(this.g);t="";var r=i.length,s=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vs(this),zu(this);var a="";break t}this.h.i=new re.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,NV(this.j,this.u,this.A,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yl(l)){var d=l;break t}}d=null}if(n=d)zo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qg(this,n);else{this.i=!1,this.o=3,Zt(12),vs(this),zu(this);break e}}this.S?(vA(this,p,a),$g&&this.i&&p==3&&(lA(this.U,this.V,"tick",this.mb),this.V.start())):(zo(this.j,this.m,a,null),Qg(this,a)),p==4&&vs(this),this.i&&!this.J&&(p==4?$A(this.l,this):(this.i=!1,rc(this)))}else i2(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),vs(this),zu(this)}}}catch{}finally{}};function yA(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function vA(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=VV(t,n),r==Id){e==4&&(t.o=4,Zt(14),i=!1),zo(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Kg){t.o=4,Zt(15),zo(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else zo(t.j,t.m,r,null),Qg(t,r);yA(t)&&r!=Id&&r!=Kg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Zt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),nv(e),e.M=!0,Zt(11))):(zo(t.j,t.m,n,"[Invalid Chunked Response]"),vs(t),zu(t))}H.mb=function(){if(this.g){var t=ci(this.g),e=this.g.ja();this.C<e.length&&(Pf(this),vA(this,t,e),this.i&&t!=4&&rc(this))}};function VV(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Id:(n=Number(e.substring(n,i)),isNaN(n)?Kg:(i+=1,i+n>e.length?Id:(e=e.slice(i,i+n),t.C=i+n,e)))}H.cancel=function(){this.J=!0,vs(this)};function rc(t){t.Y=Date.now()+t.P,wA(t,t.P)}function wA(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=tc($t(t.lb,t),e)}function Pf(t){t.B&&(re.clearTimeout(t.B),t.B=null)}H.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(DV(this.j,this.A),this.L!=2&&(Tl(),Zt(17)),vs(this),this.o=2,zu(this)):wA(this,this.Y-t)};function zu(t){t.l.H==0||t.J||$A(t.l,t)}function vs(t){Pf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Hy(t.V),cA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Qg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Yg(n.i,t))){if(!t.K&&Yg(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Pd(n),Cf(n);else break e;tv(n),Zt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=tc($t(n.ib,n),6e3));if(1>=CA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ws(n,11)}else if((t.K||n.g==t)&&Pd(n),!yl(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let d=r[e];if(n.V=d[0],d=d[1],n.H==2)if(d[0]=="c"){n.K=d[1],n.pa=d[2];const p=d[3];p!=null&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];g!=null&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];_!=null&&typeof _=="number"&&0<_&&(i=1.5*_,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const v=t.g;if(v){const S=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var s=i.i;s.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Yy(s,s.h),s.h=null))}if(i.F){const T=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(i.Da=T,Oe(i.I,i.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var a=t;if(i.wa=WA(i,i.J?i.pa:null,i.Y),a.K){kA(i.i,a);var l=a,c=i.L;c&&l.setTimeout(c),l.B&&(Pf(l),rc(l)),i.g=a}else zA(i);0<n.j.length&&kf(n)}else d[0]!="stop"&&d[0]!="close"||ws(n,7);else n.H==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?ws(n,7):ev(n):d[0]!="noop"&&n.h&&n.h.Aa(d),n.A=0)}}Tl(4)}catch{}}function FV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(mf(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function BV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(mf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function IA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(mf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=BV(t),i=FV(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var EA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function As(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof As){this.h=t.h,Ed(this,t.j),this.s=t.s,this.g=t.g,Td(this,t.m),this.l=t.l;var e=t.i,n=new Pl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),gT(this,n),this.o=t.o}else t&&(e=String(t).match(EA))?(this.h=!1,Ed(this,e[1]||"",!0),this.s=Su(e[2]||""),this.g=Su(e[3]||"",!0),Td(this,e[4]),this.l=Su(e[5]||"",!0),gT(this,e[6]||"",!0),this.o=Su(e[7]||"")):(this.h=!1,this.i=new Pl(null,this.h))}As.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Au(e,_T,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Au(e,_T,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Au(n,n.charAt(0)=="/"?jV:$V,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Au(n,WV)),t.join("")};function ji(t){return new As(t)}function Ed(t,e,n){t.j=n?Su(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Td(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function gT(t,e,n){e instanceof Pl?(t.i=e,HV(t.i,t.h)):(n||(e=Au(e,qV)),t.i=new Pl(e,t.h))}function Oe(t,e,n){t.i.set(e,n)}function Sf(t){return Oe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Su(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Au(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,UV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function UV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var _T=/[#\/\?@]/g,$V=/[#\?:]/g,jV=/[#\?]/g,qV=/[#\?@]/g,WV=/#/g;function Pl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Kr(t){t.g||(t.g=new Map,t.h=0,t.i&&zV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}H=Pl.prototype;H.add=function(t,e){Kr(this),this.i=null,t=Ca(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function TA(t,e){Kr(t),e=Ca(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function PA(t,e){return Kr(t),e=Ca(t,e),t.g.has(e)}H.forEach=function(t,e){Kr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};H.ta=function(){Kr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};H.Z=function(t){Kr(this);let e=[];if(typeof t=="string")PA(this,t)&&(e=e.concat(this.g.get(Ca(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};H.set=function(t,e){return Kr(this),this.i=null,t=Ca(this,t),PA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};H.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function SA(t,e,n){TA(t,e),0<n.length&&(t.i=null,t.g.set(Ca(t,e),Vy(n)),t.h+=n.length)}H.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=s;a[i]!==""&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")};function Ca(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function HV(t,e){e&&!t.j&&(Kr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(TA(this,i),SA(this,r,n))},t)),t.j=e}var GV=class{constructor(t,e){this.g=t,this.map=e}};function AA(t){this.l=t||KV,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var KV=10;function RA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function CA(t){return t.h?1:t.g?t.g.size:0}function Yg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Yy(t,e){t.g?t.g.add(e):t.h=e}function kA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}AA.prototype.cancel=function(){if(this.i=xA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function xA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Vy(t.i)}var ZV=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function QV(){this.g=new ZV}function YV(t,e,n){const i=n||"";try{IA(t,function(r,s){let a=r;Xl(r)&&(a=qy(r)),e.push(i+s+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function JV(t,e){const n=new wf;if(re.Image){const i=new Image;i.onload=uh(ch,n,i,"TestLoadImage: loaded",!0,e),i.onerror=uh(ch,n,i,"TestLoadImage: error",!1,e),i.onabort=uh(ch,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=uh(ch,n,i,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function ch(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function sc(t){this.l=t.ec||null,this.j=t.ob||!1}Tt(sc,Ky);sc.prototype.g=function(){return new Af(this.l,this.j)};sc.prototype.i=function(t){return function(){return t}}({});function Af(t,e){Et.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Jy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tt(Af,Et);var Jy=0;H=Af.prototype;H.open=function(t,e){if(this.readyState!=Jy)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Sl(this)};H.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};H.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oc(this)),this.readyState=Jy};H.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Sl(this)),this.g&&(this.readyState=3,Sl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function bA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}H.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?oc(this):Sl(this),this.readyState==3&&bA(this)}};H.Za=function(t){this.g&&(this.response=this.responseText=t,oc(this))};H.Ya=function(t){this.g&&(this.response=t,oc(this))};H.ka=function(){this.g&&oc(this)};function oc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Sl(t)}H.setRequestHeader=function(t,e){this.v.append(t,e)};H.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};H.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Sl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Af.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var XV=re.JSON.parse;function Qe(t){Et.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=LA,this.L=this.M=!1}Tt(Qe,Et);var LA="",e2=/^https?$/i,t2=["POST","PUT"];H=Qe.prototype;H.Oa=function(t){this.M=t};H.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gg.g(),this.C=this.u?mT(this.u):mT(Gg),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){yT(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=re.FormData&&t instanceof re.FormData,!(0<=Z1(t2,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{OA(this),0<this.B&&((this.L=n2(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=Gy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){yT(this,s)}};function n2(t){return aa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}H.ua=function(){typeof My<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dt(this,"timeout"),this.abort(8))};function yT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,NA(t),Rf(t)}function NA(t){t.F||(t.F=!0,Dt(t,"complete"),Dt(t,"error"))}H.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dt(this,"complete"),Dt(this,"abort"),Rf(this))};H.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rf(this,!0)),Qe.$.N.call(this)};H.La=function(){this.s||(this.G||this.v||this.l?DA(this):this.kb())};H.kb=function(){DA(this)};function DA(t){if(t.h&&typeof My<"u"&&(!t.C[1]||ci(t)!=4||t.da()!=2)){if(t.v&&ci(t)==4)Gy(t.La,0,t);else if(Dt(t,"readystatechange"),ci(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.I).match(EA)[1]||null;!r&&re.self&&re.self.location&&(r=re.self.location.protocol.slice(0,-1)),i=!e2.test(r?r.toLowerCase():"")}n=i}if(n)Dt(t,"complete"),Dt(t,"success");else{t.m=6;try{var s=2<ci(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",NA(t)}}finally{Rf(t)}}}}function Rf(t,e){if(t.g){OA(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dt(t,"ready");try{n.onreadystatechange=i}catch{}}}function OA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}H.isActive=function(){return!!this.g};function ci(t){return t.g?t.g.readyState:0}H.da=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}};H.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};H.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),XV(e)}};function vT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case LA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function i2(t){const e={};t=(t.g&&2<=ci(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(yl(t[i]))continue;var n=CV(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}IV(e,function(i){return i.join(", ")})}H.Ia=function(){return this.m};H.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function MA(t){let e="";return By(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Xy(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=MA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Oe(t,e,n))}function cu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function VA(t){this.Ga=0,this.j=[],this.l=new wf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cu("baseRetryDelayMs",5e3,t),this.hb=cu("retryDelaySeedMs",1e4,t),this.eb=cu("forwardChannelMaxRetries",2,t),this.xa=cu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new AA(t&&t.concurrentRequestLimit),this.Ja=new QV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}H=VA.prototype;H.ra=8;H.H=1;function ev(t){if(FA(t),t.H==3){var e=t.W++,n=ji(t.I);if(Oe(n,"SID",t.K),Oe(n,"RID",e),Oe(n,"TYPE","terminate"),ac(t,n),e=new ic(t,t.l,e),e.L=2,e.v=Sf(ji(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&re.Image&&(new Image().src=e.v,n=!0),n||(e.g=HA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rc(e)}qA(t)}function Cf(t){t.g&&(nv(t),t.g.cancel(),t.g=null)}function FA(t){Cf(t),t.u&&(re.clearTimeout(t.u),t.u=null),Pd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function kf(t){if(!RA(t.i)&&!t.m){t.m=!0;var e=t.Na;wl||aA(),Il||(wl(),Il=!0),Wy.add(e,t),t.C=0}}function r2(t,e){return CA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=tc($t(t.Na,t,e),jA(t,t.C)),t.C++,!0)}H.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new ic(this,this.l,t);let s=this.s;if(this.U&&(s?(s=X1(s),eA(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=BA(this,r,e),n=ji(this.I),Oe(n,"RID",t),Oe(n,"CVER",22),this.F&&Oe(n,"X-HTTP-Session-Id",this.F),ac(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(MA(s)))+"&"+e:this.o&&Xy(n,this.o,s)),Yy(this.i,r),this.bb&&Oe(n,"TYPE","init"),this.P?(Oe(n,"$req",e),Oe(n,"SID","null"),r.aa=!0,Zg(r,n,null)):Zg(r,n,e),this.H=2}}else this.H==3&&(t?wT(this,t):this.j.length==0||RA(this.i)||wT(this))};function wT(t,e){var n;e?n=e.m:n=t.W++;const i=ji(t.I);Oe(i,"SID",t.K),Oe(i,"RID",n),Oe(i,"AID",t.V),ac(t,i),t.o&&t.s&&Xy(i,t.o,t.s),n=new ic(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=BA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Yy(t.i,n),Zg(n,i,e)}function ac(t,e){t.na&&By(t.na,function(n,i){Oe(e,i,n)}),t.h&&IA({},function(n,i){Oe(e,i,n)})}function BA(t,e,n){n=Math.min(t.j.length,n);var i=t.h?$t(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){const a=["count="+n];s==-1?0<n?(s=r[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let l=!0;for(let c=0;c<n;c++){let d=r[c].g;const p=r[c].map;if(d-=s,0>d)s=Math.max(0,r[c].g-100),l=!1;else try{YV(p,a,"req"+d+"_")}catch{i&&i(p)}}if(l){i=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function zA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;wl||aA(),Il||(wl(),Il=!0),Wy.add(e,t),t.A=0}}function tv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=tc($t(t.Ma,t),jA(t,t.A)),t.A++,!0)}H.Ma=function(){if(this.u=null,UA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=tc($t(this.jb,this),t)}};H.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zt(10),Cf(this),UA(this))};function nv(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function UA(t){t.g=new ic(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ji(t.wa);Oe(e,"RID","rpc"),Oe(e,"SID",t.K),Oe(e,"AID",t.V),Oe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Oe(e,"TO",t.qa),Oe(e,"TYPE","xmlhttp"),ac(t,e),t.o&&t.s&&Xy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Sf(ji(e)),n.s=null,n.S=!0,_A(n,t)}H.ib=function(){this.v!=null&&(this.v=null,Cf(this),tv(this),Zt(19))};function Pd(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function $A(t,e){var n=null;if(t.g==e){Pd(t),nv(t),t.g=null;var i=2}else if(Yg(t.i,e))n=e.F,kA(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=If(),Dt(i,new fA(i,n)),kf(t)}else zA(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&r2(t,e)||i==2&&tv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:ws(t,5);break;case 4:ws(t,10);break;case 3:ws(t,6);break;default:ws(t,2)}}}function jA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ws(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=$t(t.pb,t);n||(n=new As("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||Ed(n,"https"),Sf(n)),JV(n.toString(),i)}else Zt(2);t.H=0,t.h&&t.h.za(e),qA(t),FA(t)}H.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Zt(2)):(this.l.info("Failed to ping google.com"),Zt(1))};function qA(t){if(t.H=0,t.ma=[],t.h){const e=xA(t.i);(e.length!=0||t.j.length!=0)&&(cT(t.ma,e),cT(t.ma,t.j),t.i.i.length=0,Vy(t.j),t.j.length=0),t.h.ya()}}function WA(t,e,n){var i=n instanceof As?ji(n):new As(n);if(i.g!="")e&&(i.g=e+"."+i.g),Td(i,i.m);else{var r=re.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new As(null);i&&Ed(s,i),e&&(s.g=e),r&&Td(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Oe(i,n,e),Oe(i,"VER",t.ra),ac(t,i),i}function HA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Qe(new sc({ob:!0})):new Qe(t.va),e.Oa(t.J),e}H.isActive=function(){return!!this.h&&this.h.isActive(this)};function GA(){}H=GA.prototype;H.Ba=function(){};H.Aa=function(){};H.za=function(){};H.ya=function(){};H.isActive=function(){return!0};H.Va=function(){};function Sd(){if(aa&&!(10<=Number(_V)))throw Error("Environmental error: no available transport.")}Sd.prototype.g=function(t,e){return new En(t,e)};function En(t,e){Et.call(this),this.g=new VA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!yl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ka(this)}Tt(En,Et);En.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Zt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=WA(t,null,t.Y),kf(t)};En.prototype.close=function(){ev(this.g)};En.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=qy(t),t=n);e.j.push(new GV(e.fb++,t)),e.H==3&&kf(e)};En.prototype.N=function(){this.g.h=null,delete this.j,ev(this.g),delete this.g,En.$.N.call(this)};function KA(t){Zy.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Tt(KA,Zy);function ZA(){Qy.call(this),this.status=1}Tt(ZA,Qy);function ka(t){this.g=t}Tt(ka,GA);ka.prototype.Ba=function(){Dt(this.g,"a")};ka.prototype.Aa=function(t){Dt(this.g,new KA(t))};ka.prototype.za=function(t){Dt(this.g,new ZA)};ka.prototype.ya=function(){Dt(this.g,"b")};function s2(){this.blockSize=-1}function Zn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Tt(Zn,s2);Zn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Rm(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],a=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Zn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)Rm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Rm(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Rm(this,i),r=0;break}}this.h=r,this.i+=e};Zn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Re(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var o2={};function iv(t){return-128<=t&&128>t?pV(t,function(e){return new Re([e|0],0>e?-1:0)}):new Re([t|0],0>t?-1:0)}function hi(t){if(isNaN(t)||!isFinite(t))return Go;if(0>t)return xt(hi(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Jg;return new Re(e,0)}function QA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xt(QA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=hi(Math.pow(e,8)),i=Go,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),a=parseInt(t.substring(r,r+s),e);8>s?(s=hi(Math.pow(e,s)),i=i.R(s).add(hi(a))):(i=i.R(n),i=i.add(hi(a)))}return i}var Jg=4294967296,Go=iv(0),Xg=iv(1),IT=iv(16777216);H=Re.prototype;H.ea=function(){if(Ln(this))return-xt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Jg+i)*e,e*=Jg}return t};H.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Li(this))return"0";if(Ln(this))return"-"+xt(this).toString(t);for(var e=hi(Math.pow(t,6)),n=this,i="";;){var r=Rd(n,e).g;n=Ad(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Li(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};H.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Li(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ln(t){return t.h==-1}H.X=function(t){return t=Ad(this,t),Ln(t)?-1:Li(t)?0:1};function xt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Re(n,~t.h).add(Xg)}H.abs=function(){return Ln(this)?xt(this):this};H.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),a=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=a>>>16,s&=65535,a&=65535,n[r]=a<<16|s}return new Re(n,n[n.length-1]&-2147483648?-1:0)};function Ad(t,e){return t.add(xt(e))}H.R=function(t){if(Li(this)||Li(t))return Go;if(Ln(this))return Ln(t)?xt(this).R(xt(t)):xt(xt(this).R(t));if(Ln(t))return xt(this.R(xt(t)));if(0>this.X(IT)&&0>t.X(IT))return hi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,a=this.D(i)&65535,l=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=a*c,hh(n,2*i+2*r),n[2*i+2*r+1]+=s*c,hh(n,2*i+2*r+1),n[2*i+2*r+1]+=a*l,hh(n,2*i+2*r+1),n[2*i+2*r+2]+=s*l,hh(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Re(n,0)};function hh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function hu(t,e){this.g=t,this.h=e}function Rd(t,e){if(Li(e))throw Error("division by zero");if(Li(t))return new hu(Go,Go);if(Ln(t))return e=Rd(xt(t),e),new hu(xt(e.g),xt(e.h));if(Ln(e))return e=Rd(t,xt(e)),new hu(xt(e.g),e.h);if(30<t.g.length){if(Ln(t)||Ln(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Xg,i=e;0>=i.X(t);)n=ET(n),i=ET(i);var r=mo(n,1),s=mo(i,1);for(i=mo(i,2),n=mo(n,2);!Li(i);){var a=s.add(i);0>=a.X(t)&&(r=r.add(n),s=a),i=mo(i,1),n=mo(n,1)}return e=Ad(t,r.R(e)),new hu(r,e)}for(r=Go;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=hi(n),a=s.R(e);Ln(a)||0<a.X(t);)n-=i,s=hi(n),a=s.R(e);Li(s)&&(s=Xg),r=r.add(s),t=Ad(t,a)}return new hu(r,t)}H.gb=function(t){return Rd(this,t).h};H.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Re(n,this.h&t.h)};H.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Re(n,this.h|t.h)};H.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Re(n,this.h^t.h)};function ET(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Re(n,t.h)}function mo(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Re(r,t.h)}Sd.prototype.createWebChannel=Sd.prototype.g;En.prototype.send=En.prototype.u;En.prototype.open=En.prototype.m;En.prototype.close=En.prototype.close;Ef.NO_ERROR=0;Ef.TIMEOUT=8;Ef.HTTP_ERROR=6;pA.COMPLETE="complete";mA.EventType=nc;nc.OPEN="a";nc.CLOSE="b";nc.ERROR="c";nc.MESSAGE="d";Et.prototype.listen=Et.prototype.O;Qe.prototype.listenOnce=Qe.prototype.P;Qe.prototype.getLastError=Qe.prototype.Sa;Qe.prototype.getLastErrorCode=Qe.prototype.Ia;Qe.prototype.getStatus=Qe.prototype.da;Qe.prototype.getResponseJson=Qe.prototype.Wa;Qe.prototype.getResponseText=Qe.prototype.ja;Qe.prototype.send=Qe.prototype.ha;Qe.prototype.setWithCredentials=Qe.prototype.Oa;Zn.prototype.digest=Zn.prototype.l;Zn.prototype.reset=Zn.prototype.reset;Zn.prototype.update=Zn.prototype.j;Re.prototype.add=Re.prototype.add;Re.prototype.multiply=Re.prototype.R;Re.prototype.modulo=Re.prototype.gb;Re.prototype.compare=Re.prototype.X;Re.prototype.toNumber=Re.prototype.ea;Re.prototype.toString=Re.prototype.toString;Re.prototype.getBits=Re.prototype.D;Re.fromNumber=hi;Re.fromString=QA;var a2=function(){return new Sd},u2=function(){return If()},Cm=Ef,l2=pA,c2=Ys,TT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},h2=sc,dh=mA,d2=Qe,f2=Zn,Ko=Re;const PT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new pf("@firebase/firestore");function Eo(){return Nr.logLevel}function p2(t){Nr.setLogLevel(t)}function F(t,...e){if(Nr.logLevel<=fe.DEBUG){const n=e.map(rv);Nr.debug(`Firestore (${xa}): ${t}`,...n)}}function tt(t,...e){if(Nr.logLevel<=fe.ERROR){const n=e.map(rv);Nr.error(`Firestore (${xa}): ${t}`,...n)}}function Qn(t,...e){if(Nr.logLevel<=fe.WARN){const n=e.map(rv);Nr.warn(`Firestore (${xa}): ${t}`,...n)}}function rv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t="Unexpected state"){const e=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: `+t;throw tt(e),new Error(e)}function J(t,e){t||K()}function m2(t,e){t||K()}function W(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends Yt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class _2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y2{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new It;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new It,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new It)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(J(typeof i.accessToken=="string"),new YA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new vt(e)}}class v2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class w2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new v2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J(typeof n.token=="string"),this.R=n.token,new I2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=T2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ae(t,e){return t<e?-1:t>e?1:0}function ua(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function XA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ue(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Ue(0,0))}static max(){return new Y(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,i){n===void 0?n=0:n>e.length&&K(),i===void 0?i=e.length-n:i>e.length-n&&K(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Al.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Al?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),a=n.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends Al{construct(e,n,i){return new ye(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new V(b.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const P2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Al{construct(e,n,i){return new Be(e,n,i)}static isValidIdentifier(e){return P2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new V(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new V(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new V(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ye.fromString(e))}static fromName(e){return new q(ye.fromString(e).popFirst(5))}static empty(){return new q(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function e_(t){return t.fields.find(e=>e.kind===2)}function cs(t){return t.fields.filter(e=>e.kind!==2)}Cd.UNKNOWN_ID=-1;class Lh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Rl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Rl(0,Tn.min())}}function eR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Y.fromTimestamp(i===1e9?new Ue(n+1,0):new Ue(n,i));return new Tn(r,q.empty(),e)}function tR(t){return new Tn(t.readTime,t.key,-1)}class Tn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Tn(Y.min(),q.empty(),-1)}static max(){return new Tn(Y.max(),q.empty(),-1)}}function sv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==nR)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new R((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):R.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):R.reject(n)}static resolve(e){return new R((n,i)=>{n(e)})}static reject(e){return new R((n,i)=>{i(e)})}static waitFor(e){return new R((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},c=>i(c))}),a=!0,s===r&&n()})}static or(e){let n=R.resolve(!1);for(const i of e)n=n.next(r=>r?R.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new R((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(p=>{a[d]=p,++l,l===s&&i(a)},p=>r(p))}})}static doWhile(e,n){return new R((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new It,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Uu(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=ov(i.target.error);this.V.reject(new Uu(e,r))}}static open(e,n,i,r){try{return new xf(n,e.transaction(r,i))}catch(s){throw new Uu(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new A2(n)}}class Wn{constructor(e,n,i){this.name=e,this.version=n,this.p=i,Wn.S(Ge())===12.2&&tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ml())return!1;if(Wn.C())return!0;const e=Ge(),n=Wn.S(e),i=0<n&&n<10,r=Wn.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async O(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new Uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new V(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new V(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new Uu(e,a))},r.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.N(a,r.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.O(e);const l=xf.open(this.db,e,s?"readonly":"readwrite",i),c=r(l).next(d=>(l.g(),d)).catch(d=>(l.abort(d),R.reject(d))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,d=c.name!=="FirebaseError"&&a<3;if(F("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class S2{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return hs(this.k.delete())}}class Uu extends V{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Qr(t){return t.name==="IndexedDbTransactionError"}class A2{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),hs(i)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),hs(this.store.add(e))}get(e){return hs(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),hs(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),hs(this.store.count())}W(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const r=this.cursor(i),s=[];return this.G(r,(a,l)=>{s.push(l)}).next(()=>s)}{const r=this.store.getAll(i.range);return new R((s,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}}j(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new R((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}H(e,n){F("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.J=!1;const r=this.cursor(i);return this.G(r,(s,a,l)=>l.delete())}Y(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.G(r,n)}Z(e){const n=this.cursor({});return new R((i,r)=>{n.onerror=s=>{const a=ov(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(l=>{l?a.continue():i()}):i()}})}G(e,n){const i=[];return new R((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const l=a.target.result;if(!l)return void r();const c=new S2(l),d=n(l.primaryKey,l.value,c);if(d instanceof R){const p=d.catch(g=>(c.done(),R.reject(g)));i.push(p)}c.isDone?r():c.$===null?l.continue():l.continue(c.$)}}).next(()=>R.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function hs(t){return new R((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=ov(i.target.error);n(r)}})}let ST=!1;function ov(t){const e=Wn.S(Ge());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ST||(ST=!0,setTimeout(()=>{throw i},0)),i}}return t}class R2{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){F("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{F("IndexBackiller",`Documents written: ${await this.X.te()}`)}catch(n){Qr(n)?F("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Zr(n)}await this.ee(6e4)})}}class C2{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const i=new Set;let r=n,s=!0;return R.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return F("IndexBackiller",`Processing collection: ${a}`),this.re(e,a,r).next(l=>{r-=l,i.add(a)});s=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.ie(r,s)).next(l=>(F("IndexBackiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>a.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=tR(s);sv(a,i)>0&&(i=a)}),new Tn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.se(i),this.oe=i=>n.writeSequenceNumber(i))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}cn._e=-1;function uc(t){return t==null}function Cl(t){return t===0&&1/t==-1/0}function rR(t){return typeof t=="number"&&Number.isInteger(t)&&!Cl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AT(e)),e=k2(t.get(n),e);return AT(e)}function k2(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function AT(t){return t+""}function di(t){const e=t.length;if(J(e>=2),e===2)return J(t.charAt(0)===""&&t.charAt(1)===""),ye.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>n)&&K(),t.charAt(a+1)){case"":const l=t.substring(s,a);let c;r.length===0?c=l:(r+=l,c=r,r=""),i.push(c);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:K()}s=a+2}return new ye(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e){return[t,Jt(e)]}function sR(t,e,n){return[t,Jt(e),n]}const x2={},b2=["prefixPath","collectionGroup","readTime","documentId"],L2=["prefixPath","collectionGroup","documentId"],N2=["collectionGroup","readTime","prefixPath","documentId"],D2=["canonicalId","targetId"],O2=["targetId","path"],M2=["path","targetId"],V2=["collectionId","parent"],F2=["indexId","uid"],B2=["uid","sequenceNumber"],z2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],U2=["indexId","uid","orderedDocumentKey"],$2=["userId","collectionPath","documentId"],j2=["userId","collectionPath","largestBatchId"],q2=["userId","collectionGroup","largestBatchId"],oR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],W2=[...oR,"documentOverlays"],aR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uR=aR,H2=[...uR,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends iR{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Pt(t,e){const n=W(t);return Wn.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??kt.RED,this.left=r??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new kt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,i,r,s){return this}insert(e,n,i){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kT(this.data.getIterator())}getIteratorFrom(e){return new kT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class kT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function go(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new hn([])}unionWith(e){let n=new ke(Be.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cR("Invalid base64 string: "+s):s}}(e);return new pt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const K2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(J(!!t),typeof t=="string"){let e=0;const n=K2.exec(t);if(J(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function av(t){const e=t.mapValue.fields.__previous_value__;return bf(e)?av(e):e}function kl(t){const e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,i,r,s,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Mr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dh={nullValue:"NULL_VALUE"};function Ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bf(t)?4:hR(t)?9007199254740991:10:K()}function wi(t,e){if(t===e)return!0;const n=Ms(t);if(n!==Ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kl(t).isEqual(kl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Dr(r.timestampValue),l=Dr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Or(r.bytesValue).isEqual(Or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ze(r.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(r.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ze(r.integerValue)===Ze(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Ze(r.doubleValue),l=Ze(s.doubleValue);return a===l?Cl(a)===Cl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(CT(a)!==CT(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!wi(a[c],l[c])))return!1;return!0}(t,e);default:return K()}}function xl(t,e){return(t.values||[]).find(n=>wi(n,e))!==void 0}function Vr(t,e){if(t===e)return 0;const n=Ms(t),i=Ms(e);if(n!==i)return ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Ze(s.integerValue||s.doubleValue),c=Ze(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return xT(t.timestampValue,e.timestampValue);case 4:return xT(kl(t),kl(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Or(s),c=Or(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const p=ae(l[d],c[d]);if(p!==0)return p}return ae(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ae(Ze(s.latitude),Ze(a.latitude));return l!==0?l:ae(Ze(s.longitude),Ze(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const l=s.values||[],c=a.values||[];for(let d=0;d<l.length&&d<c.length;++d){const p=Vr(l[d],c[d]);if(p)return p}return ae(l.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===mr.mapValue&&a===mr.mapValue)return 0;if(s===mr.mapValue)return 1;if(a===mr.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=a.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=ae(c[g],p[g]);if(_!==0)return _;const v=Vr(l[c[g]],d[p[g]]);if(v!==0)return v}return ae(c.length,p.length)}(t.mapValue,e.mapValue);default:throw K()}}function xT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Dr(t),i=Dr(e),r=ae(n.seconds,i.seconds);return r!==0?r:ae(n.nanos,i.nanos)}function la(t){return n_(t)}function n_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=n_(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${n_(n.fields[a])}`;return r+"}"}(t.mapValue):K()}function Vs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function i_(t){return!!t&&"integerValue"in t}function bl(t){return!!t&&"arrayValue"in t}function bT(t){return!!t&&"nullValue"in t}function LT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oh(t){return!!t&&"mapValue"in t}function $u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=$u(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$u(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Q2(t){return"nullValue"in t?Dh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vs(Mr.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:K()}function Y2(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vs(Mr.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?mr:K()}function NT(t,e){const n=Vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function DT(t,e){const n=Vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(n)}setAll(e){let n=Be.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=$u(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Oh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Js(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new bt($u(this.value))}}function dR(t){const e=[];return Js(t.fields,(n,i)=>{const r=new Be([n]);if(Oh(i)){const s=dR(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Me(e,0,Y.min(),Y.min(),Y.min(),bt.empty(),0)}static newFoundDocument(e,n,i,r){return new Me(e,1,n,Y.min(),i,r,0)}static newNoDocument(e,n){return new Me(e,2,n,Y.min(),Y.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Me(e,3,n,Y.min(),Y.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){this.position=e,this.inclusive=n}}function OT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=q.comparator(q.fromName(a.referenceValue),n.key):i=Vr(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function MT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n="asc"){this.field=e,this.dir=n}}function J2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{}class pe extends fR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new X2(e,n,i):n==="array-contains"?new nF(e,i):n==="in"?new vR(e,i):n==="not-in"?new iF(e,i):n==="array-contains-any"?new rF(e,i):new pe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new eF(e,i):new tF(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vr(n,this.value)):n!==null&&Ms(this.value)===Ms(n)&&this.matchesComparison(Vr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends fR{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Se(e,n)}matches(e){return ca(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ca(t){return t.op==="and"}function r_(t){return t.op==="or"}function uv(t){return pR(t)&&ca(t)}function pR(t){for(const e of t.filters)if(e instanceof Se)return!1;return!0}function s_(t){if(t instanceof pe)return t.field.canonicalString()+t.op.toString()+la(t.value);if(uv(t))return t.filters.map(e=>s_(e)).join(",");{const e=t.filters.map(n=>s_(n)).join(",");return`${t.op}(${e})`}}function mR(t,e){return t instanceof pe?function(i,r){return r instanceof pe&&i.op===r.op&&i.field.isEqual(r.field)&&wi(i.value,r.value)}(t,e):t instanceof Se?function(i,r){return r instanceof Se&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&mR(a,r.filters[l]),!0):!1}(t,e):void K()}function gR(t,e){const n=t.filters.concat(e);return Se.create(n,t.op)}function _R(t){return t instanceof pe?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(_R).join(" ,")+"}"}(t):"Filter"}class X2 extends pe{constructor(e,n,i){super(e,n,i),this.key=q.fromName(i.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class eF extends pe{constructor(e,n){super(e,"in",n),this.keys=yR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tF extends pe{constructor(e,n){super(e,"not-in",n),this.keys=yR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>q.fromName(i.referenceValue))}class nF extends pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bl(n)&&xl(n.arrayValue,this.value)}}class vR extends pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xl(this.value.arrayValue,n)}}class iF extends pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xl(this.value.arrayValue,n)}}class rF extends pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>xl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.ce=null}}function o_(t,e=null,n=[],i=[],r=null,s=null,a=null){return new sF(t,e,n,i,r,s,a)}function Fs(t){const e=W(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>s_(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),uc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>la(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>la(i)).join(",")),e.ce=n}return e.ce}function lc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!J2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MT(t.startAt,e.startAt)&&MT(t.endAt,e.endAt)}function kd(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function xd(t,e){return t.filters.filter(n=>n instanceof pe&&n.field.isEqual(e))}function VT(t,e,n){let i=Dh,r=!0;for(const s of xd(t,e)){let a=Dh,l=!0;switch(s.op){case"<":case"<=":a=Q2(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,l=!1;break;case"!=":case"not-in":a=Dh}NT({value:i,inclusive:r},{value:a,inclusive:l})<0&&(i=a,r=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];NT({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function FT(t,e,n){let i=mr,r=!0;for(const s of xd(t,e)){let a=mr,l=!0;switch(s.op){case">=":case">":a=Y2(s.value),l=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,l=!1;break;case"!=":case"not-in":a=mr}DT({value:i,inclusive:r},{value:a,inclusive:l})>0&&(i=a,r=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];DT({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function wR(t,e,n,i,r,s,a,l){return new Gi(t,e,n,i,r,s,a,l)}function ba(t){return new Gi(t)}function BT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lv(t){return t.collectionGroup!==null}function Zo(t){const e=W(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ke(Be.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ll(s,i))}),n.has(Be.keyField().canonicalString())||e.le.push(new Ll(Be.keyField(),i))}return e.le}function Xt(t){const e=W(t);return e.he||(e.he=oF(e,Zo(t))),e.he}function oF(t,e){if(t.limitType==="F")return o_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ll(r.field,s)});const n=t.endAt?new Fr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fr(t.startAt.position,t.startAt.inclusive):null;return o_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function a_(t,e){const n=t.filters.concat([e]);return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bd(t,e,n){return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cc(t,e){return lc(Xt(t),Xt(e))&&t.limitType===e.limitType}function IR(t){return`${Fs(Xt(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>_R(r)).join(", ")}]`),uc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>la(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>la(r)).join(",")),`Target(${i})`}(Xt(t))}; limitType=${t.limitType})`}function hc(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Zo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,c){const d=OT(a,l,c);return a.inclusive?d<=0:d<0}(i.startAt,Zo(i),r)||i.endAt&&!function(a,l,c){const d=OT(a,l,c);return a.inclusive?d>=0:d>0}(i.endAt,Zo(i),r))}(t,e)}function ER(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TR(t){return(e,n)=>{let i=!1;for(const r of Zo(t)){const s=aF(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function aF(t,e,n){const i=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),d=l.data.field(s);return c!==null&&d!==null?Vr(c,d):K()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return K()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return lR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new Ne(q.comparator);function dn(){return uF}const PR=new Ne(q.comparator);function Ru(...t){let e=PR;for(const n of t)e=e.insert(n.key,n);return e}function SR(t){let e=PR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function fi(){return ju()}function AR(){return ju()}function ju(){return new Yr(t=>t.toString(),(t,e)=>t.isEqual(e))}const lF=new Ne(q.comparator),cF=new ke(q.comparator);function ce(...t){let e=cF;for(const n of t)e=e.add(n);return e}const hF=new ke(ae);function cv(){return hF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cl(e)?"-0":e}}function CR(t){return{integerValue:""+t}}function kR(t,e){return rR(e)?CR(e):RR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function dF(t,e,n){return t instanceof ha?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&bf(s)&&(s=av(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Bs?bR(t,e):t instanceof zs?LR(t,e):function(r,s){const a=xR(r,s),l=zT(a)+zT(r.Ie);return i_(a)&&i_(r.Ie)?CR(l):RR(r.serializer,l)}(t,e)}function fF(t,e,n){return t instanceof Bs?bR(t,e):t instanceof zs?LR(t,e):n}function xR(t,e){return t instanceof da?function(i){return i_(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class ha extends Lf{}class Bs extends Lf{constructor(e){super(),this.elements=e}}function bR(t,e){const n=NR(e);for(const i of t.elements)n.some(r=>wi(r,i))||n.push(i);return{arrayValue:{values:n}}}class zs extends Lf{constructor(e){super(),this.elements=e}}function LR(t,e){let n=NR(e);for(const i of t.elements)n=n.filter(r=>!wi(r,i));return{arrayValue:{values:n}}}class da extends Lf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function zT(t){return Ze(t.integerValue||t.doubleValue)}function NR(t){return bl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.field=e,this.transform=n}}function pF(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Bs&&r instanceof Bs||i instanceof zs&&r instanceof zs?ua(i.elements,r.elements,wi):i instanceof da&&r instanceof da?wi(i.Ie,r.Ie):i instanceof ha&&r instanceof ha}(t.transform,e.transform)}class mF{constructor(e,n){this.version=e,this.transformResults=n}}class ze{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ze}static exists(e){return new ze(void 0,e)}static updateTime(e){return new ze(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nf{}function DR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Na(t.key,ze.none()):new La(t.key,t.data,ze.none());{const n=t.data,i=bt.empty();let r=new ke(Be.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Ki(t.key,i,new hn(r.toArray()),ze.none())}}function gF(t,e,n){t instanceof La?function(r,s,a){const l=r.value.clone(),c=$T(r.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ki?function(r,s,a){if(!Mh(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=$T(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(OR(r)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qu(t,e,n,i){return t instanceof La?function(s,a,l,c){if(!Mh(s.precondition,a))return l;const d=s.value.clone(),p=jT(s.fieldTransforms,c,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ki?function(s,a,l,c){if(!Mh(s.precondition,a))return l;const d=jT(s.fieldTransforms,c,a),p=a.data;return p.setAll(OR(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,a,l){return Mh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function _F(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=xR(i.transform,r||null);s!=null&&(n===null&&(n=bt.empty()),n.set(i.field,s))}return n||null}function UT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ua(i,r,(s,a)=>pF(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class La extends Nf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ki extends Nf{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function $T(t,e,n){const i=new Map;J(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,fF(a,l,n[r]))}return i}function jT(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,dF(s,a,e))}return i}class Na extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hv extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&gF(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=qu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=qu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=AR();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const c=DR(a,l);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(Y.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(n,i)=>UT(n,i))&&ua(this.baseMutations,e.baseMutations,(n,i)=>UT(n,i))}}class fv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){J(e.mutations.length===i.length);let r=function(){return lF}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new fv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,_e;function MR(t){switch(t){default:return K();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function VR(t){if(t===void 0)return tt("GRPC error has no .code"),b.UNKNOWN;switch(t){case ot.OK:return b.OK;case ot.CANCELLED:return b.CANCELLED;case ot.UNKNOWN:return b.UNKNOWN;case ot.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case ot.INTERNAL:return b.INTERNAL;case ot.UNAVAILABLE:return b.UNAVAILABLE;case ot.UNAUTHENTICATED:return b.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case ot.NOT_FOUND:return b.NOT_FOUND;case ot.ALREADY_EXISTS:return b.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return b.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case ot.ABORTED:return b.ABORTED;case ot.OUT_OF_RANGE:return b.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return b.UNIMPLEMENTED;case ot.DATA_LOSS:return b.DATA_LOSS;default:return K()}}(_e=ot||(ot={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new Ko([4294967295,4294967295],0);function qT(t){const e=FR().encode(t),n=new f2;return n.update(e),new Uint8Array(n.digest())}function WT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ko([n,i],0),new Ko([r,s],0)]}class mv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Cu(`Invalid padding: ${n}`);if(i<0)throw new Cu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Cu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Cu(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ko.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Ko.fromNumber(i)));return r.compare(vF)===1&&(r=new Ko([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=qT(e),[i,r]=WT(n);for(let s=0;s<this.hashCount;s++){const a=this.de(i,r,s);if(!this.Ae(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new mv(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Te===0)return;const n=qT(e),[i,r]=WT(n);for(let s=0;s<this.hashCount;s++){const a=this.de(i,r,s);this.Re(a)}}Re(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new fc(Y.min(),r,new Ne(ae),dn(),ce())}}class pc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new pc(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}}class BR{constructor(e,n){this.targetId=e,this.fe=n}}class zR{constructor(e,n,i=pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class HT{constructor(){this.ge=0,this.pe=KT(),this.ye=pt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ce(),n=ce(),i=ce();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:K()}}),new pc(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=KT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class wF{constructor(e){this.Le=e,this.ke=new Map,this.qe=dn(),this.Qe=GT(),this.Ke=new Ne(ae)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){const n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){const s=r.target;if(kd(s))if(i===0){const a=new q(s.path);this.We(n,a,Me.newNoDocument(a,Y.min()))}else J(i===1);else{const a=this.Ze(n);if(a!==i){const l=this.Xe(e),c=l?this.et(l,e,a):1;if(c!==0){this.He(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,d)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=Or(i).toUint8Array()}catch(c){if(c instanceof cR)return Qn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new mv(a,r,s)}catch(c){return Qn(c instanceof Cu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Te===0?null:l}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Le.nt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.We(n,s,null),r++)}),r}it(e){const n=new Map;this.ke.forEach((s,a)=>{const l=this.Ye(a);if(l){if(s.current&&kd(l.target)){const c=new q(l.target.path);this.qe.get(c)!==null||this.st(a,c)||this.We(a,c,Me.newNoDocument(c,e))}s.De&&(n.set(a,s.ve()),s.Fe())}});let i=ce();this.Qe.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.Ye(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.qe.forEach((s,a)=>a.setReadTime(e));const r=new fc(e,n,this.Ke,this.qe,i);return this.qe=dn(),this.Qe=GT(),this.Ke=new Ne(ae),r}Ue(e,n){if(!this.je(e))return;const i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new HT,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ke(ae),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new HT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function GT(){return new Ne(q.comparator)}function KT(){return new Ne(q.comparator)}const IF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),EF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),TF=(()=>({and:"AND",or:"OR"}))();class PF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function u_(t,e){return t.useProto3Json||uc(e)?e:{value:e}}function fa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SF(t,e){return fa(t,e.toTimestamp())}function nt(t){return J(!!t),Y.fromTimestamp(function(n){const i=Dr(n);return new Ue(i.seconds,i.nanos)}(t))}function gv(t,e){return function(i){return new ye(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function $R(t){const e=ye.fromString(t);return J(YR(e)),e}function Nl(t,e){return gv(t.databaseId,e.path)}function yi(t,e){const n=$R(e);if(n.get(1)!==t.databaseId.projectId)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(qR(n))}function l_(t,e){return gv(t.databaseId,e)}function jR(t){const e=$R(t);return e.length===4?ye.emptyPath():qR(e)}function Dl(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qR(t){return J(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ZT(t,e,n){return{name:Nl(t,e),fields:n.value.mapValue.fields}}function WR(t,e,n){const i=yi(t,e.name),r=nt(e.updateTime),s=e.createTime?nt(e.createTime):Y.min(),a=new bt({mapValue:{fields:e.fields}}),l=Me.newFoundDocument(i,r,s,a);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function AF(t,e){return"found"in e?function(i,r){J(!!r.found),r.found.name,r.found.updateTime;const s=yi(i,r.found.name),a=nt(r.found.updateTime),l=r.found.createTime?nt(r.found.createTime):Y.min(),c=new bt({mapValue:{fields:r.found.fields}});return Me.newFoundDocument(s,a,l,c)}(t,e):"missing"in e?function(i,r){J(!!r.missing),J(!!r.readTime);const s=yi(i,r.missing),a=nt(r.readTime);return Me.newNoDocument(s,a)}(t,e):K()}function RF(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(J(p===void 0||typeof p=="string"),pt.fromBase64String(p||"")):(J(p===void 0||p instanceof Uint8Array),pt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?b.UNKNOWN:VR(d.code);return new V(p,d.message||"")}(a);n=new zR(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=yi(t,i.document.name),s=nt(i.document.updateTime),a=i.document.createTime?nt(i.document.createTime):Y.min(),l=new bt({mapValue:{fields:i.document.fields}}),c=Me.newFoundDocument(r,s,a,l),d=i.targetIds||[],p=i.removedTargetIds||[];n=new Vh(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=yi(t,i.document),s=i.readTime?nt(i.readTime):Y.min(),a=Me.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Vh([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=yi(t,i.document),s=i.removedTargetIds||[];n=new Vh([],s,r,null)}else{if(!("filter"in e))return K();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new yF(r,s),l=i.targetId;n=new BR(l,a)}}return n}function Ol(t,e){let n;if(e instanceof La)n={update:ZT(t,e.key,e.value)};else if(e instanceof Na)n={delete:Nl(t,e.key)};else if(e instanceof Ki)n={update:ZT(t,e.key,e.data),updateMask:NF(e.fieldMask)};else{if(!(e instanceof hv))return K();n={verify:Nl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof ha)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof da)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw K()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:SF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(t,e.precondition)),n}function c_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?ze.updateTime(nt(s.updateTime)):s.exists!==void 0?ze.exists(s.exists):ze.none()}(e.currentDocument):ze.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,l){let c=null;if("setToServerValue"in l)J(l.setToServerValue==="REQUEST_TIME"),c=new ha;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];c=new Bs(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];c=new zs(p)}else"increment"in l?c=new da(a,l.increment):K();const d=Be.fromServerFormat(l.fieldPath);return new dc(d,c)}(t,r)):[];if(e.update){e.update.name;const r=yi(t,e.update.name),s=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const d=c.fieldPaths||[];return new hn(d.map(p=>Be.fromServerFormat(p)))}(e.updateMask);return new Ki(r,s,a,n,i)}return new La(r,s,n,i)}if(e.delete){const r=yi(t,e.delete);return new Na(r,n)}if(e.verify){const r=yi(t,e.verify);return new hv(r,n)}return K()}function CF(t,e){return t&&t.length>0?(J(e!==void 0),t.map(n=>function(r,s){let a=r.updateTime?nt(r.updateTime):nt(s);return a.isEqual(Y.min())&&(a=nt(s)),new mF(a,r.transformResults||[])}(n,e))):[]}function HR(t,e){return{documents:[l_(t,e.path)]}}function GR(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=l_(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=l_(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(c){if(c.length!==0)return QR(Se.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Po(g.field),direction:xF(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=u_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function KR(t){let e=jR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){J(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const _=ZR(g);return _ instanceof Se&&uv(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(S){return new Ll(So(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(g){let _;return _=typeof g=="object"?g.value:g,uc(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,v=g.values||[];return new Fr(v,_)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const _=!g.before,v=g.values||[];return new Fr(v,_)}(n.endAt)),wR(e,r,a,s,l,"F",c,d)}function kF(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=So(n.unaryFilter.field);return pe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=So(n.unaryFilter.field);return pe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=So(n.unaryFilter.field);return pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=So(n.unaryFilter.field);return pe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return pe.create(So(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(i=>ZR(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function xF(t){return IF[t]}function bF(t){return EF[t]}function LF(t){return TF[t]}function Po(t){return{fieldPath:t.canonicalString()}}function So(t){return Be.fromServerFormat(t.fieldPath)}function QR(t){return t instanceof pe?function(n){if(n.op==="=="){if(LT(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NAN"}};if(bT(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LT(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NAN"}};if(bT(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(n.field),op:bF(n.op),value:n.value}}}(t):t instanceof Se?function(n){const i=n.getFilters().map(r=>QR(r));return i.length===1?i[0]:{compositeFilter:{op:LF(n.op),filters:i}}}(t):K()}function NF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,i,r,s=Y.min(),a=Y.min(),l=pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.ut=e}}function DF(t,e){let n;if(e.document)n=WR(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=q.fromSegments(e.noDocument.path),r=$s(e.noDocument.readTime);n=Me.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{const i=q.fromSegments(e.unknownDocument.path),r=$s(e.unknownDocument.version);n=Me.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new Ue(r[0],r[1]);return Y.fromTimestamp(s)}(e.readTime)),n}function QT(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ld(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Nl(s,a.key),fields:a.data.value.mapValue.fields,updateTime:fa(s,a.version.toTimestamp()),createTime:fa(s,a.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Us(e.version)};else{if(!e.isUnknownDocument())return K();i.unknownDocument={path:n.path.toArray(),version:Us(e.version)}}return i}function Ld(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Us(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $s(t){const e=new Ue(t.seconds,t.nanoseconds);return Y.fromTimestamp(e)}function ds(t,e){const n=(e.baseMutations||[]).map(s=>c_(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];a.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>c_(t.ut,s)),r=Ue.fromMillis(e.localWriteTimeMs);return new dv(e.batchId,r,n,i)}function ku(t){const e=$s(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$s(t.lastLimboFreeSnapshotVersion):Y.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return J(s.documents.length===1),Xt(ba(jR(s.documents[0])))}(t.query):function(s){return Xt(KR(s))}(t.query),new Ni(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,pt.fromBase64String(t.resumeToken))}function XR(t,e){const n=Us(e.snapshotVersion),i=Us(e.lastLimboFreeSnapshotVersion);let r;r=kd(e.target)?HR(t.ut,e.target):GR(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function _v(t){const e=KR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bd(e,e.limit,"L"):e}function km(t,e){return new pv(e.largestBatchId,c_(t.ut,e.overlayMutation))}function YT(t,e){const n=e.path.lastSegment();return[t,Jt(e.path.popLast()),n]}function JT(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Us(i.readTime),documentKey:Jt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{getBundleMetadata(e,n){return XT(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:$s(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return XT(e).put(function(r){return{bundleId:r.id,createTime:Us(nt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return e0(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:_v(s.bundledQuery),readTime:$s(s.readTime)}}(i)})}saveNamedQuery(e,n){return e0(e).put(function(r){return{name:r.name,readTime:Us(nt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function XT(t){return Pt(t,"bundles")}function e0(t){return Pt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){const i=n.uid||"";return new Df(e,i)}getOverlay(e,n){return du(e).get(YT(this.userId,n)).next(i=>i?km(this.serializer,i):null)}getOverlays(e,n){const i=fi();return R.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const l=new pv(n,a);r.push(this.lt(e,l))}),R.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(Jt(a.getCollectionPath())));const s=[];return r.forEach(a=>{const l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(du(e).H("collectionPathOverlayIndex",l))}),R.waitFor(s)}getOverlaysForCollection(e,n,i){const r=fi(),s=Jt(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return du(e).W("collectionPathOverlayIndex",a).next(l=>{for(const c of l){const d=km(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=fi();let a;const l=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return du(e).Y({index:"collectionGroupOverlayIndex",range:l},(c,d,p)=>{const g=km(this.serializer,d);s.size()<r||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):p.done()}).next(()=>s)}lt(e,n){return du(e).put(function(r,s,a){const[l,c,d]=YT(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ol(r.ut,a.mutation)}}(this.serializer,this.userId,n))}}function du(t){return Pt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ze(e.integerValue));else if("doubleValue"in e){const i=Ze(e.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),Cl(i)?n.Et(0):n.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(n,20),typeof i=="string"?n.dt(i):(n.dt(`${i.seconds||""}`),n.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Or(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in e?hR(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):K()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const i=e.fields||{};this.Tt(n,55);for(const r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(e,n){const i=e.values||[];this.Tt(n,50);for(const r of i)this.Pt(r,n)}ft(e,n){this.Tt(n,37),q.fromName(e).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}fs.St=new fs;function MF(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function t0(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=MF(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class VF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Dt(i.value),i=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=n.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const n=this.Bt(e),i=t0(n);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}kt(e){const n=this.Bt(e),i=t0(n);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Dt(e){const n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class FF{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class BF{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class fu{constructor(){this.Wt=new VF,this.Gt=new FF(this.Wt),this.zt=new BF(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ps(this.indexId,this.documentKey,this.arrayValue,i)}}function nr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=n0(t.arrayValue,e.arrayValue),n!==0?n:(n=n0(t.directionalValue,e.directionalValue),n!==0?n:q.comparator(t.documentKey,e.documentKey)))}function n0(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this.Jt=new ke((n,i)=>Be.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const i=n;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(J(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=e_(e);if(n!==void 0&&!this.tn(n))return!1;const i=cs(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){const l=this.Jt.getIterator().getNext();if(!r.has(l.field.canonicalString())){const c=i[s];if(!this.nn(l,c)||!this.rn(this.Yt[a++],c))return!1}++s}for(;s<i.length;++s){const l=i[s];if(a>=this.Yt.length||!this.rn(this.Yt[a++],l))return!1}return!0}sn(){if(this.Xt)return null;let e=new ke(Be.comparator);const n=[];for(const i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Lh(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Lh(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Lh(i.field,i.dir==="asc"?0:1)));return new Cd(Cd.UNKNOWN_ID,this.collectionId,n,Rl.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){var e,n;if(J(t instanceof pe||t instanceof Se),t instanceof pe){if(t instanceof vR){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>pe.create(t.field,"==",s)))||[];return Se.create(r,"or")}return t}const i=t.filters.map(r=>eC(r));return Se.create(i,t.op)}function zF(t){if(t.getFilters().length===0)return[];const e=f_(eC(t));return J(tC(e)),h_(e)||d_(e)?[e]:e.getFilters()}function h_(t){return t instanceof pe}function d_(t){return t instanceof Se&&uv(t)}function tC(t){return h_(t)||d_(t)||function(n){if(n instanceof Se&&r_(n)){for(const i of n.getFilters())if(!h_(i)&&!d_(i))return!1;return!0}return!1}(t)}function f_(t){if(J(t instanceof pe||t instanceof Se),t instanceof pe)return t;if(t.filters.length===1)return f_(t.filters[0]);const e=t.filters.map(i=>f_(i));let n=Se.create(e,t.op);return n=Nd(n),tC(n)?n:(J(n instanceof Se),J(ca(n)),J(n.filters.length>1),n.filters.reduce((i,r)=>yv(i,r)))}function yv(t,e){let n;return J(t instanceof pe||t instanceof Se),J(e instanceof pe||e instanceof Se),n=t instanceof pe?e instanceof pe?function(r,s){return Se.create([r,s],"and")}(t,e):r0(t,e):e instanceof pe?r0(e,t):function(r,s){if(J(r.filters.length>0&&s.filters.length>0),ca(r)&&ca(s))return gR(r,s.getFilters());const a=r_(r)?r:s,l=r_(r)?s:r,c=a.filters.map(d=>yv(d,l));return Se.create(c,"or")}(t,e),Nd(n)}function r0(t,e){if(ca(e))return gR(e,t.getFilters());{const n=e.filters.map(i=>yv(t,i));return Se.create(n,"or")}}function Nd(t){if(J(t instanceof pe||t instanceof Se),t instanceof pe)return t;const e=t.getFilters();if(e.length===1)return Nd(e[0]);if(pR(t))return t;const n=e.map(r=>Nd(r)),i=[];return n.forEach(r=>{r instanceof pe?i.push(r):r instanceof Se&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Se.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.on=new vv}addToCollectionParentIndex(e,n){return this.on.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(Tn.min())}updateCollectionGroup(e,n,i){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}}class vv{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ke(ye.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ke(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new Uint8Array(0);class $F{constructor(e,n){this.user=e,this.databaseId=n,this._n=new vv,this.an=new Yr(i=>Fs(i),(i,r)=>lc(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:i,parent:Jt(r)};return s0(e).put(s)}return R.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[XA(n),""],!1,!0);return s0(e).W(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(di(a.parent))}return i})}addFieldIndex(e,n){const i=pu(e),r=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=yo(e);return s.next(l=>{a.put(JT(l,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=pu(e),r=yo(e),s=_o(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=pu(e),i=_o(e),r=yo(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return R.forEach(this.un(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new i0(i).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=_o(e);let r=!0;const s=new Map;return R.forEach(this.un(n),a=>this.cn(e,a).next(l=>{r&&(r=!!l),s.set(a,l)})).next(()=>{if(r){let a=ce();const l=[];return R.forEach(s,(c,d)=>{F("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(c)} to execute ${Fs(n)}`);const p=function(E,x){const O=e_(x);if(O===void 0)return null;for(const z of xd(E,O.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(d,c),g=function(E,x){const O=new Map;for(const z of cs(x))for(const j of xd(E,z.fieldPath))switch(j.op){case"==":case"in":O.set(z.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return O.set(z.fieldPath.canonicalString(),j.value),Array.from(O.values())}return null}(d,c),_=function(E,x){const O=[];let z=!0;for(const j of cs(x)){const Z=j.kind===0?VT(E,j.fieldPath,E.startAt):FT(E,j.fieldPath,E.startAt);O.push(Z.value),z&&(z=Z.inclusive)}return new Fr(O,z)}(d,c),v=function(E,x){const O=[];let z=!0;for(const j of cs(x)){const Z=j.kind===0?FT(E,j.fieldPath,E.endAt):VT(E,j.fieldPath,E.endAt);O.push(Z.value),z&&(z=Z.inclusive)}return new Fr(O,z)}(d,c),S=this.ln(c,d,_),T=this.ln(c,d,v),C=this.hn(c,d,g),I=this.Pn(c.indexId,p,S,_.inclusive,T,v.inclusive,C);return R.forEach(I,w=>i.j(w,n.limit).next(E=>{E.forEach(x=>{const O=q.fromSegments(x.documentKey);a.has(O)||(a=a.add(O),l.push(O))})}))}).next(()=>l)}return R.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=zF(Se.create(e.filters,"and")).map(i=>o_(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,i,r,s,a,l){const c=(n!=null?n.length:1)*Math.max(i.length,s.length),d=c/(n!=null?n.length:1),p=[];for(let g=0;g<c;++g){const _=n?this.In(n[g/d]):ph,v=this.Tn(e,_,i[g%d],r),S=this.En(e,_,s[g%d],a),T=l.map(C=>this.Tn(e,_,C,!0));p.push(...this.createRange(v,S,T))}return p}Tn(e,n,i,r){const s=new ps(e,q.empty(),n,i);return r?s:s.Ht()}En(e,n,i,r){const s=new ps(e,q.empty(),n,i);return r?s.Ht():s}cn(e,n){const i=new i0(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const l of s)i.en(l)&&(!a||l.fields.length>a.fields.length)&&(a=l);return a})}getIndexType(e,n){let i=2;const r=this.un(n);return R.forEach(r,s=>this.cn(e,s).next(a=>{a?i!==0&&a.fields.length<function(c){let d=new ke(Be.comparator),p=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:d=d.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}dn(e,n){const i=new fu;for(const r of cs(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.jt(r.kind);fs.St.ht(s,a)}return i.Ut()}In(e){const n=new fu;return fs.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const i=new fu;return fs.St.ht(Vs(this.databaseId,n),i.jt(function(s){const a=cs(s);return a.length===0?0:a[a.length-1].kind}(e))),i.Ut()}hn(e,n,i){if(i===null)return[];let r=[];r.push(new fu);let s=0;for(const a of cs(e)){const l=i[s++];for(const c of r)if(this.Rn(n,a.fieldPath)&&bl(l))r=this.Vn(r,a,l);else{const d=c.jt(a.kind);fs.St.ht(l,d)}}return this.mn(r)}ln(e,n,i){return this.hn(e,n,i.position)}mn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Ut();return n}Vn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const l of r){const c=new fu;c.seed(l.Ut()),fs.St.ht(a,c.jt(n.kind)),s.push(c)}return s}Rn(e,n){return!!e.filters.find(i=>i instanceof pe&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=pu(e),r=yo(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(s=>{const a=[];return R.forEach(s,l=>r.get([l.indexId,this.uid]).next(c=>{a.push(function(p,g){const _=g?new Rl(g.sequenceNumber,new Tn($s(g.readTime),new q(di(g.documentKey)),g.largestBatchId)):Rl.empty(),v=p.fields.map(([S,T])=>new Lh(Be.fromServerFormat(S),T));return new Cd(p.indexId,p.collectionGroup,v,_)}(l,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ae(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=pu(e),s=yo(e);return this.fn(e).next(a=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>R.forEach(l,c=>s.put(JT(c.indexId,this.user,a,i)))))}updateIndexEntries(e,n){const i=new Map;return R.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?R.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(l=>(i.set(r.collectionGroup,l),R.forEach(l,c=>this.gn(e,r,c).next(d=>{const p=this.pn(s,c);return d.isEqual(p)?R.resolve():this.yn(e,s,c,d,p)}))))})}wn(e,n,i,r){return _o(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,i,r){return _o(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,n.key),n.key.path.toArray()])}gn(e,n,i){const r=_o(e);let s=new ke(nr);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,n)])},(a,l)=>{s=s.add(new ps(i.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>s)}pn(e,n){let i=new ke(nr);const r=this.dn(n,e);if(r==null)return i;const s=e_(n);if(s!=null){const a=e.data.field(s.fieldPath);if(bl(a))for(const l of a.arrayValue.values||[])i=i.add(new ps(n.indexId,e.key,this.In(l),r))}else i=i.add(new ps(n.indexId,e.key,ph,r));return i}yn(e,n,i,r,s){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(c,d,p,g,_){const v=c.getIterator(),S=d.getIterator();let T=go(v),C=go(S);for(;T||C;){let I=!1,w=!1;if(T&&C){const E=p(T,C);E<0?w=!0:E>0&&(I=!0)}else T!=null?w=!0:I=!0;I?(g(C),C=go(S)):w?(_(T),T=go(v)):(T=go(v),C=go(S))}}(r,s,nr,l=>{a.push(this.wn(e,n,i,l))},l=>{a.push(this.Sn(e,n,i,l))}),R.waitFor(a)}fn(e){let n=1;return yo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,l)=>nr(a,l)).filter((a,l,c)=>!l||nr(a,c[l-1])!==0);const r=[];r.push(e);for(const a of i){const l=nr(a,e),c=nr(a,n);if(l===0)r[0]=e.Ht();else if(l>0&&c<0)r.push(a),r.push(a.Ht());else if(c>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.bn(r[a],r[a+1]))return[];const l=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,ph,[]],c=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,ph,[]];s.push(IDBKeyRange.bound(l,c))}return s}bn(e,n){return nr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(o0)}getMinOffset(e,n){return R.mapArray(this.un(n),i=>this.cn(e,i).next(r=>r||K())).next(o0)}}function s0(t){return Pt(t,"collectionParents")}function _o(t){return Pt(t,"indexEntries")}function pu(t){return Pt(t,"indexConfiguration")}function yo(t){return Pt(t,"indexState")}function o0(t){J(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;sv(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Tn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class on{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let l=0;const c=i.Y({range:a},(p,g,_)=>(l++,_.delete()));s.push(c.next(()=>{J(l===1)}));const d=[];for(const p of n.mutations){const g=sR(e,p.key.path,n.batchId);s.push(r.delete(g)),d.push(p.key)}return R.waitFor(s).next(()=>d)}function Dd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw K();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class Of{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,n,i,r){J(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Of(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).Y({index:"userMutationsIndex",range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=Ao(e),a=ir(e);return a.add({}).next(l=>{J(typeof l=="number");const c=new dv(l,n,i,r),d=function(v,S,T){const C=T.baseMutations.map(w=>Ol(v.ut,w)),I=T.mutations.map(w=>Ol(v.ut,w));return{userId:S,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:C,mutations:I}}(this.serializer,this.userId,c),p=[];let g=new ke((_,v)=>ae(_.canonicalString(),v.canonicalString()));for(const _ of r){const v=sR(this.userId,_.key.path,l);g=g.add(_.key.path.popLast()),p.push(a.put(d)),p.push(s.put(v,x2))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[l]=c.keys()}),R.waitFor(p).next(()=>c)})}lookupMutationBatch(e,n){return ir(e).get(n).next(i=>i?(J(i.userId===this.userId),ds(this.serializer,i)):null)}Cn(e,n){return this.Dn[n]?R.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Dn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ir(e).Y({index:"userMutationsIndex",range:r},(a,l,c)=>{l.userId===this.userId&&(J(l.batchId>=i),s=ds(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ir(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).W("userMutationsIndex",n).next(i=>i.map(r=>ds(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Nh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return Ao(e).Y({range:r},(a,l,c)=>{const[d,p,g]=a,_=di(p);if(d===this.userId&&n.path.isEqual(_))return ir(e).get(g).next(v=>{if(!v)throw K();J(v.userId===this.userId),s.push(ds(this.serializer,v))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ke(ae);const r=[];return n.forEach(s=>{const a=Nh(this.userId,s.path),l=IDBKeyRange.lowerBound(a),c=Ao(e).Y({range:l},(d,p,g)=>{const[_,v,S]=d,T=di(v);_===this.userId&&s.path.isEqual(T)?i=i.add(S):g.done()});r.push(c)}),R.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Nh(this.userId,i),a=IDBKeyRange.lowerBound(s);let l=new ke(ae);return Ao(e).Y({range:a},(c,d,p)=>{const[g,_,v]=c,S=di(_);g===this.userId&&i.isPrefixOf(S)?S.length===r&&(l=l.add(v)):p.done()}).next(()=>this.vn(e,l))}vn(e,n){const i=[],r=[];return n.forEach(s=>{r.push(ir(e).get(s).next(a=>{if(a===null)throw K();J(a.userId===this.userId),i.push(ds(this.serializer,a))}))}),R.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return nC(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),R.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Ao(e).Y({range:i},(s,a,l)=>{if(s[0]===this.userId){const c=di(s[1]);r.push(c)}else l.done()}).next(()=>{J(r.length===0)})})}containsKey(e,n){return iC(e,this.userId,n)}Mn(e){return rC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iC(t,e,n){const i=Nh(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Ao(t).Y({range:s,J:!0},(l,c,d)=>{const[p,g,_]=l;p===e&&g===r&&(a=!0),d.done()}).next(()=>a)}function ir(t){return Pt(t,"mutations")}function Ao(t){return Pt(t,"documentMutations")}function rC(t){return Pt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new js(0)}static Nn(){return new js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const i=new js(n.highestTargetId);return n.highestTargetId=i.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Y.fromTimestamp(new Ue(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Ln(e,r)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(n,i),this.Ln(e,i))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vo(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(J(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return vo(e).Y((a,l)=>{const c=ku(l);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>R.waitFor(s)).next(()=>r)}forEachTarget(e,n){return vo(e).Y((i,r)=>{const s=ku(r);n(s)})}Bn(e){return u0(e).get("targetGlobalKey").next(n=>(J(n!==null),n))}Ln(e,n){return u0(e).put("targetGlobalKey",n)}kn(e,n){return vo(e).put(XR(this.serializer,n))}qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Fs(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return vo(e).Y({range:r,index:"queryTargetsIndex"},(a,l,c)=>{const d=ku(l);lc(n,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=cr(e);return n.forEach(a=>{const l=Jt(a.path);r.push(s.put({targetId:i,path:l})),r.push(this.referenceDelegate.addReference(e,i,a))}),R.waitFor(r)}removeMatchingKeys(e,n,i){const r=cr(e);return R.forEach(n,s=>{const a=Jt(s.path);return R.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=cr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=cr(e);let s=ce();return r.Y({range:i,J:!0},(a,l,c)=>{const d=di(a[1]),p=new q(d);s=s.add(p)}).next(()=>s)}containsKey(e,n){const i=Jt(n.path),r=IDBKeyRange.bound([i],[XA(i)],!1,!0);let s=0;return cr(e).Y({index:"documentTargetsIndex",J:!0,range:r},([a,l],c,d)=>{a!==0&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return vo(e).get(n).next(i=>i?ku(i):null)}}function vo(t){return Pt(t,"targets")}function u0(t){return Pt(t,"targetGlobal")}function cr(t){return Pt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0([t,e],[n,i]){const r=ae(t,n);return r===0?ae(e,i):r}class qF{constructor(e){this.Qn=e,this.buffer=new ke(l0),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();l0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WF{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qr(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Zr(n)}await this.Gn(3e5)})}}class HF{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return R.resolve(cn._e);const i=new qF(n);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.zn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(a0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a0):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let i,r,s,a,l,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(e,i,n))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(d=Date.now(),Eo()<=fe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-p}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function GF(t,e){return new HF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,n){this.db=e,this.garbageCollector=GF(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Yn(e){let n=0;return this.Hn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(i,r)=>n(r))}addReference(e,n,i){return mh(e,i)}removeReference(e,n,i){return mh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return mh(e,n)}Xn(e,n){return function(r,s){let a=!1;return rC(r).Z(l=>iC(r,l,s).next(c=>(c&&(a=!0),R.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Zn(e,(a,l)=>{if(l<=n){const c=this.Xn(e,a).next(d=>{if(!d)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,Y.min()),cr(e).delete(function(g){return[0,Jt(g.path)]}(a))))});r.push(c)}}).next(()=>R.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return mh(e,n)}Zn(e,n){const i=cr(e);let r,s=cn._e;return i.Y({index:"documentTargetsIndex"},([a,l],{path:c,sequenceNumber:d})=>{a===0?(s!==cn._e&&n(new q(di(r)),s),s=d,r=c):s=cn._e}).next(()=>{s!==cn._e&&n(new q(di(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mh(t,e){return cr(t).put(function(i,r){return{targetId:0,path:Jt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.changes=new Yr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?R.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return os(e).put(i)}removeEntry(e,n,i){return os(e).delete(function(s,a){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Ld(a),l[l.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.er(e,i)))}getEntry(e,n){let i=Me.newInvalidDocument(n);return os(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(r,s)=>{i=this.tr(n,s)}).next(()=>i)}nr(e,n){let i={size:0,document:Me.newInvalidDocument(n)};return os(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(r,s)=>{i={document:this.tr(n,s),size:Dd(s)}}).next(()=>i)}getEntries(e,n){let i=dn();return this.rr(e,n,(r,s)=>{const a=this.tr(r,s);i=i.insert(r,a)}).next(()=>i)}ir(e,n){let i=dn(),r=new Ne(q.comparator);return this.rr(e,n,(s,a)=>{const l=this.tr(s,a);i=i.insert(s,l),r=r.insert(s,Dd(a))}).next(()=>({documents:i,sr:r}))}rr(e,n,i){if(n.isEmpty())return R.resolve();let r=new ke(d0);n.forEach(c=>r=r.add(c));const s=IDBKeyRange.bound(mu(r.first()),mu(r.last())),a=r.getIterator();let l=a.getNext();return os(e).Y({index:"documentKeyIndex",range:s},(c,d,p)=>{const g=q.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;l&&d0(l,g)<0;)i(l,null),l=a.getNext();l&&l.isEqual(g)&&(i(l,d),l=a.hasNext()?a.getNext():null),l?p.U(mu(l)):p.done()}).next(()=>{for(;l;)i(l,null),l=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,l=[a.popLast().toArray(),a.lastSegment(),Ld(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return os(e).W(IDBKeyRange.bound(l,c,!0)).next(d=>{s==null||s.incrementDocumentReadCount(d.length);let p=dn();for(const g of d){const _=this.tr(q.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(hc(n,_)||r.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,i,r){let s=dn();const a=h0(n,i),l=h0(n,Tn.max());return os(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,l,!0)},(c,d,p)=>{const g=this.tr(q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===r&&p.done()}).next(()=>s)}newChangeBuffer(e){return new QF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return c0(e).get("remoteDocumentGlobalKey").next(n=>(J(!!n),n))}er(e,n){return c0(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const i=DF(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(Y.min())))return i}return Me.newInvalidDocument(e)}}function oC(t){return new ZF(t)}class QF extends sC{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Yr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new ke((s,a)=>ae(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const l=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,l.readTime)),a.isValidDocument()){const c=QT(this._r.serializer,a);r=r.add(s.path.popLast());const d=Dd(c);i+=d-l.size,n.push(this._r.addEntry(e,s,c))}else if(i-=l.size,this.trackRemovals){const c=QT(this._r.serializer,a.convertToNoDocument(Y.min()));n.push(this._r.addEntry(e,s,c))}}),r.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,i)),R.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(i=>(this.ar.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:i,sr:r})=>(r.forEach((s,a)=>{this.ar.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function c0(t){return Pt(t,"remoteDocumentGlobal")}function os(t){return Pt(t,"remoteDocumentsV14")}function mu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function h0(t,e){const n=e.documentKey.path.toArray();return[t,Ld(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function d0(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=ae(n[s],i[s]),r)return r;return r=ae(n.length,i.length),r||(r=ae(n[n.length-2],i[i.length-2]),r||ae(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&qu(i.mutation,r,hn.empty(),Ue.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=fi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=Ru();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=fi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=dn();const a=ju(),l=function(){return ju()}();return n.forEach((c,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Ki)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),qu(p.mutation,d,p.mutation.getFieldMask(),Ue.now())):a.set(d.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var g;return l.set(d,new YF(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const i=ju();let r=new Ne((a,l)=>a-l),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=i.get(c)||hn.empty();p=l.applyToLocalView(d,p),i.set(c,p);const g=(r.get(l.batchId)||ce()).add(c);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,p=c.value,g=AR();p.forEach(_=>{if(!s.has(_)){const v=DR(n.get(_),i.get(_));v!==null&&g.set(_,v),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return R.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):R.resolve(fi());let l=-1,c=s;return a.next(d=>R.forEach(d,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(p)?R.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,ce())).next(p=>({batchId:l,changes:SR(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(i=>{let r=Ru();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Ru();return this.indexManager.getCollectionParents(e,s).next(l=>R.forEach(l,c=>{const d=function(g,_){return new Gi(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((c,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Me.newInvalidDocument(p)))});let l=Ru();return a.forEach((c,d)=>{const p=s.get(c);p!==void 0&&qu(p.mutation,d,hn.empty(),Ue.now()),hc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return R.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:nt(r.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(r){return{name:r.name,query:_v(r.bundledQuery),readTime:nt(r.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.overlays=new Ne(q.comparator),this.lr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){const i=fi();return R.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.lt(e,n,s)}),R.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),R.resolve()}getOverlaysForCollection(e,n,i){const r=fi(),s=n.length+1,a=new q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return R.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ne((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=s.get(d.largestBatchId);p===null&&(p=fi(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=fi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=r)););return R.resolve(l)}lt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new pv(n,i));let s=this.lr.get(n);s===void 0&&(s=ce(),this.lr.set(n,s)),this.lr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.hr=new ke(_t.Pr),this.Ir=new ke(_t.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const i=new _t(e,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.dr(new _t(e,n))}Ar(e,n){e.forEach(i=>this.removeReference(i,n))}Rr(e){const n=new q(new ye([])),i=new _t(n,e),r=new _t(n,e+1),s=[];return this.Ir.forEachInRange([i,r],a=>{this.dr(a),s.push(a.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new q(new ye([])),i=new _t(n,e),r=new _t(n,e+1);let s=ce();return this.Ir.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new _t(e,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class _t{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return q.comparator(e.key,n.key)||ae(e.gr,n.gr)}static Tr(e,n){return ae(e.gr,n.gr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ke(_t.Pr)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dv(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.yr=this.yr.add(new _t(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return R.resolve(a)}lookupMutationBatch(e,n){return R.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Sr(i),s=r<0?0:r;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new _t(n,0),r=new _t(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],a=>{const l=this.wr(a.gr);s.push(l)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ke(ae);return n.forEach(r=>{const s=new _t(r,0),a=new _t(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,a],l=>{i=i.add(l.gr)})}),R.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;q.isDocumentKey(s)||(s=s.child(""));const a=new _t(new q(s),0);let l=new ke(ae);return this.yr.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(l=l.add(c.gr)),!0)},a),R.resolve(this.br(l))}br(e){const n=[];return e.forEach(i=>{const r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){J(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return R.forEach(n.mutations,r=>{const s=new _t(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,n){const i=new _t(n,0),r=this.yr.firstAfterOrEqual(i);return R.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e){this.Cr=e,this.docs=function(){return new Ne(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return R.resolve(i?i.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let i=dn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Me.newInvalidDocument(r))}),R.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=dn();const a=n.path,l=new q(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||sv(tR(p),i)<=0||(r.has(p.key)||hc(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,n,i,r){K()}vr(e,n){return R.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new nB(this)}getSize(e){return R.resolve(this.size)}}class nB extends sC{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),R.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.persistence=e,this.Fr=new Yr(n=>Fs(n),lc),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Mr=0,this.Or=new wv,this.targetCount=0,this.Nr=js.On()}forEachTarget(e,n){return this.Fr.forEach((i,r)=>n(r)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),R.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new js(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.kn(n),R.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Fr.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Fr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),R.waitFor(s).next(()=>r)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){const i=this.Fr.get(n)||null;return R.resolve(i)}addMatchingKeys(e,n,i){return this.Or.Er(n,i),R.resolve()}removeMatchingKeys(e,n,i){this.Or.Ar(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),R.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Or.mr(n);return R.resolve(i)}containsKey(e,n){return R.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new cn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new iB(this),this.indexManager=new UF,this.remoteDocumentCache=function(r){return new tB(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new JR(n),this.Kr=new JF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new eB(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);const r=new rB(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,n){return R.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}}class rB extends iR{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Gr=new wv,this.zr=null}static jr(e){return new Mf(e)}get Hr(){if(this.zr)return this.zr;throw K()}addReference(e,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),R.resolve()}removeReference(e,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Hr,i=>{const r=q.fromPath(i);return this.Jr(e,r).next(s=>{s||n.removeEntry(r,Y.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return R.or([()=>R.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.serializer=e}N(e,n,i,r){const s=new xf("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RT,{unique:!0}),c.createObjectStore("documentMutations")}(e),f0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=R.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),f0(e)),a=a.next(()=>function(c){const d=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(c,d){return d.store("mutations").W().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RT,{unique:!0});const g=d.store("mutations"),_=p.map(v=>g.put(v));return R.waitFor(_)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Zr(s))),i<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(a=a.next(()=>this.ei(s))),i<8&&r>=8&&(a=a.next(()=>this.ti(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ni(s))),i<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(c){const d=c.createObjectStore("documentOverlays",{keyPath:$2});d.createIndex("collectionPathOverlayIndex",j2,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",q2,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(c){const d=c.createObjectStore("remoteDocumentsV14",{keyPath:b2});d.createIndex("documentKeyIndex",L2),d.createIndex("collectionGroupIndex",N2)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.ii(e,s))),i<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:F2}).createIndex("sequenceNumberIndex",B2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:z2}).createIndex("documentKeyIndex",U2,{unique:!1})}(e))),a}Xr(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=Dd(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>R.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",a).next(l=>R.forEach(l,c=>{J(c.userId===s.userId);const d=ds(this.serializer,c);return nC(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Y((a,l)=>{const c=new ye(a),d=function(g){return[0,Jt(g)]}(c);s.push(n.get(d).next(p=>p?R.resolve():(g=>n.put({targetId:0,path:Jt(g),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:V2});const i=n.store("collectionParents"),r=new vv,s=a=>{if(r.add(a)){const l=a.lastSegment(),c=a.popLast();return i.put({collectionId:l,parent:Jt(c)})}};return n.store("remoteDocuments").Y({J:!0},(a,l)=>{const c=new ye(a);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([a,l,c],d)=>{const p=di(l);return s(p.popLast())}))}ni(e){const n=e.store("targets");return n.Y((i,r)=>{const s=ku(r),a=XR(this.serializer,s);return n.put(a)})}ri(e,n){const i=n.store("remoteDocuments"),r=[];return i.Y((s,a)=>{const l=n.store("remoteDocumentsV14"),c=function(g){return g.document?new q(ye.fromString(g.document.name).popFirst(5)):g.noDocument?q.fromSegments(g.noDocument.path):g.unknownDocument?q.fromSegments(g.unknownDocument.path):K()}(a).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(l.put(d))}).next(()=>R.waitFor(r))}ii(e,n){const i=n.store("mutations"),r=oC(this.serializer),s=new uC(Mf.jr,this.serializer.ut);return i.W().next(a=>{const l=new Map;return a.forEach(c=>{var d;let p=(d=l.get(c.userId))!==null&&d!==void 0?d:ce();ds(this.serializer,c).keys().forEach(g=>p=p.add(g)),l.set(c.userId,p)}),R.forEach(l,(c,d)=>{const p=new vt(d),g=Df.ct(this.serializer,p),_=s.getIndexManager(p),v=Of.ct(p,this.serializer,_,s.referenceDelegate);return new aC(r,v,g,_).recalculateAndSaveOverlaysForDocumentKeys(new t_(n,cn._e),c).next()})})}}function f0(t){t.createObjectStore("targetDocuments",{keyPath:O2}).createIndex("documentTargetsIndex",M2,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",D2,{unique:!0}),t.createObjectStore("targetGlobal")}const xm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Iv{constructor(e,n,i,r,s,a,l,c,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.si=s,this.window=a,this.document=l,this.oi=d,this._i=p,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!Iv.D())throw new V(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KF(this,r),this.Ii=n+"main",this.serializer=new JR(c),this.Ti=new Wn(this.Ii,this.ai,new sB(this.serializer)),this.qr=new jF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oC(this.serializer),this.Kr=new OF,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,p===!1&&tt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(b.FAILED_PRECONDITION,xm);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new cn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(async()=>{this.started&&await this.di()}))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Qr(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return gu(e).get("owner").next(n=>R.resolve(this.wi(n)))}Si(e){return gh(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Pt(n,"clientMetadata");return i.W().next(r=>{const s=this.Ci(r,18e5),a=r.filter(l=>s.indexOf(l)===-1);return R.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ei)for(const n of e)this.Ei.removeItem(this.vi(n.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?R.resolve(!0):gu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new V(b.FAILED_PRECONDITION,xm);return!1}}return!(!this.networkEnabled||!this.inForeground)||gh(e).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,l=this.networkEnabled===r.networkEnabled;if(s||a&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new t_(e,cn._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()}Ci(e,n){return e.filter(i=>this.Di(i.updateTimeMs,n)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>gh(e).W().next(n=>this.Ci(n,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Of.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $F(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Df.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,i){F("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?H2:c===14?uR:c===13?aR:c===12?W2:c===11?oR:void K()}(this.ai);let a;return this.Ti.runTransaction(e,r,s,l=>(a=new t_(l,this.Lr?this.Lr.next():cn._e),n==="readwrite-primary"?this.fi(a).next(c=>!!c||this.gi(a)).next(c=>{if(!c)throw tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new V(b.FAILED_PRECONDITION,nR);return i(a)}).next(c=>this.yi(a).next(()=>c)):this.Li(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Li(e){return gu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new V(b.FAILED_PRECONDITION,xm)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put("owner",n)}static D(){return Wn.D()}pi(e){const n=gu(e);return n.get("owner").next(i=>this.wi(i)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Di(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(tt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;DO()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const i=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return tt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){tt("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gu(t){return Pt(t,"owner")}function gh(t){return Pt(t,"clientMetadata")}function Ev(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ki=i,this.qi=r}static Qi(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Tv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.zi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ji(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new oB;return this.Hi(e,n,a).next(l=>{if(s.result=l,this.$i)return this.Ji(e,n,a,l.size)})}).next(()=>s.result)}Ji(e,n,i,r){return i.documentReadCount<this.Ui?(Eo()<=fe.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),R.resolve()):(Eo()<=fe.DEBUG&&F("QueryEngine","Query:",To(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Eo()<=fe.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(n))):R.resolve())}zi(e,n){if(BT(n))return R.resolve(null);let i=Xt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=bd(n,null,"F"),i=Xt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ce(...s);return this.Gi.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.Yi(n,l);return this.Zi(n,d,a,c.readTime)?this.zi(e,bd(n,null,"F")):this.Xi(e,d,n,c)}))})))}ji(e,n,i,r){return BT(n)||r.isEqual(Y.min())?R.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const a=this.Yi(n,s);return this.Zi(n,a,i,r)?R.resolve(null):(Eo()<=fe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),To(n)),this.Xi(e,a,n,eR(r,-1)).next(l=>l))})}Yi(e,n){let i=new ke(TR(e));return n.forEach((r,s)=>{hc(e,s)&&(i=i.add(s))}),i}Zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,n,i){return Eo()<=fe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",To(n)),this.Gi.getDocumentsMatchingQuery(e,n,Tn.min(),i)}Xi(e,n,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,n,i,r){this.persistence=e,this.es=n,this.serializer=r,this.ts=new Ne(ae),this.ns=new Yr(s=>Fs(s),lc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aC(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function cC(t,e,n,i){return new aB(t,e,n,i)}async function hC(t,e){const n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.os(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let c=ce();for(const d of r){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of s){l.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(d=>({_s:d,removedBatchIds:a,addedBatchIds:l}))})})}function uB(t,e){const n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(l,c,d,p){const g=d.batch,_=g.keys();let v=R.resolve();return _.forEach(S=>{v=v.next(()=>p.getEntry(c,S)).next(T=>{const C=d.docVersions.get(S);J(C!==null),T.version.compareTo(C)<0&&(g.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),p.addEntry(T)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function dC(t){const e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function lB(t,e){const n=W(t),i=e.snapshotVersion;let r=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.ss.newChangeBuffer({trackRemovals:!0});r=n.ts;const l=[];e.targetChanges.forEach((p,g)=>{const _=r.get(g);if(!_)return;l.push(n.qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,p.addedDocuments,g)));let v=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(pt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,i)),r=r.insert(g,v),function(T,C,I){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,v,p)&&l.push(n.qr.updateTargetData(s,v))});let c=dn(),d=ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(fC(s,a,e.documentUpdates).next(p=>{c=p.us,d=p.cs})),!i.isEqual(Y.min())){const p=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(p)}return R.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.ts=r,s))}function fC(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=dn();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):F("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{us:a,cs:r}})}function cB(t,e){const n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function pa(t,e){const n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.qr.getTargetData(i,e).next(s=>s?(r=s,R.resolve(r)):n.qr.allocateTargetId(i).next(a=>(r=new Ni(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(i.targetId,i),n.ns.set(e,i.targetId)),i})}async function ma(t,e,n){const i=W(t),r=i.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Qr(a))throw a;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}function Od(t,e,n){const i=W(t);let r=Y.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,p){const g=W(c),_=g.ns.get(p);return _!==void 0?R.resolve(g.ts.get(_)):g.qr.getTargetData(d,p)}(i,a,Xt(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>i.es.getDocumentsMatchingQuery(a,e,n?r:Y.min(),n?s:ce())).next(l=>(gC(i,ER(e),l),{documents:l,ls:s})))}function pC(t,e){const n=W(t),i=W(n.qr),r=n.ts.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(a=>a?a.target:null))}function mC(t,e){const n=W(t),i=n.rs.get(e)||Y.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.ss.getAllFromCollectionGroup(r,e,eR(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(gC(n,e,r),r))}function gC(t,e,n){let i=t.rs.get(e)||Y.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.rs.set(e,i)}async function hB(t,e,n,i){const r=W(t);let s=ce(),a=dn();for(const d of n){const p=e.hs(d.metadata.name);d.document&&(s=s.add(p));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),a=a.insert(p,g)}const l=r.ss.newChangeBuffer({trackRemovals:!0}),c=await pa(r,function(p){return Xt(ba(ye.fromString(`__bundle__/docs/${p}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",d=>fC(d,l,a).next(p=>(l.apply(d),p)).next(p=>r.qr.removeMatchingKeysForTargetId(d,c.targetId).next(()=>r.qr.addMatchingKeys(d,s,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,p.us,p.cs)).next(()=>p.us)))}async function dB(t,e,n=ce()){const i=await pa(t,Xt(_v(e.bundledQuery))),r=W(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=nt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Kr.saveNamedQuery(s,e);const l=i.withResumeToken(pt.EMPTY_BYTE_STRING,a);return r.ts=r.ts.insert(l.targetId,l),r.qr.updateTargetData(s,l).next(()=>r.qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.qr.addMatchingKeys(s,n,i.targetId)).next(()=>r.Kr.saveNamedQuery(s,e))})}function p0(t,e){return`firestore_clients_${t}_${e}`}function m0(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function bm(t,e){return`firestore_targets_${t}_${e}`}class Md{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ts(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new V(r.error.code,r.error.message))),a?new Md(e,n,r.state,s):(tt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wu{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ts(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new V(i.error.code,i.error.message))),s?new Wu(e,i.state,r):(tt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=cv();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=rR(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new Vd(e,s):(tt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Pv{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Pv(n.clientId,n.onlineState):(tt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class p_{constructor(){this.activeTargetIds=cv()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lm{constructor(e,n,i,r,s){this.window=e,this.si=n,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ne(ae),this.started=!1,this.ps=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=p0(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new p_),this.Ss=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const i of e){if(i===this.Rs)continue;const r=this.getItem(p0(this.persistenceKey,i));if(r){const s=Vd.Ts(i,r);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();const n=this.storage.getItem(this.Cs);if(n){const i=this.Ms(n);i&&this.xs(i)}for(const i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,i){this.Ns(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(bm(this.persistenceKey,e));if(i){const r=Wu.Ts(e,i);r&&(n=r.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bm(this.persistenceKey,e))}updateQueryState(e,n,i){this.ks(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return F("SharedClientState","READ",e,n),n}setItem(e,n){F("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const n=e;if(n.storageArea===this.storage){if(F("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){const i=this.Ks(n.key);return this.$s(i,null)}{const i=this.Us(n.key,n.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(n.key)){if(n.newValue!==null){const i=this.Ws(n.key,n.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const i=this.zs(n.key,n.newValue);if(i)return this.js(i)}}else if(n.key===this.Cs){if(n.newValue!==null){const i=this.Ms(n.newValue);if(i)return this.xs(i)}}else if(n.key===this.ws){const i=function(s){let a=cn._e;if(s!=null)try{const l=JSON.parse(s);J(typeof l=="number"),a=l}catch(l){tt("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(n.newValue);i!==cn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.vs){const i=this.Hs(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(n)})}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,i){const r=new Md(this.currentUser,e,n,i),s=m0(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){const n=m0(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){const n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,i){const r=bm(this.persistenceKey,e),s=new Wu(e,n,i);this.setItem(r,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const i=this.Ks(e);return Vd.Ts(i,n)}Ws(e,n){const i=this.bs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Md.Ts(new vt(s),r,n)}zs(e,n){const i=this.Ds.exec(e),r=Number(i[1]);return Wu.Ts(r,n)}Ms(e){return Pv.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const i=n?this.gs.insert(e,n):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),a=[],l=[];return s.forEach(c=>{r.has(c)||a.push(c)}),r.forEach(c=>{s.has(c)||l.push(c)}),this.syncEngine.Xs(a,l).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=cv();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class _C{constructor(){this.eo=new p_,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,i){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new p_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function Nm(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class gB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+n.host,this.fo=`projects/${r}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(n,i,r,s,a){const l=Nm(),c=this.So(n,i);F("RestConnection",`Sending RPC '${n}' ${l}:`,c,r);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,a),this.Do(n,c,d,r).then(p=>(F("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Qn("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",r),p})}Co(n,i,r,s,a,l){return this.wo(n,i,r,s,a)}bo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>n[a]=s),r&&r.headers.forEach((s,a)=>n[a]=s)}So(n,i){const r=pB[n];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,i,r){const s=Nm();return new Promise((a,l)=>{const c=new d2;c.setWithCredentials(!0),c.listenOnce(l2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Cm.NO_ERROR:const p=c.getResponseJson();F(zt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Cm.TIMEOUT:F(zt,`RPC '${e}' ${s} timed out`),l(new V(b.DEADLINE_EXCEEDED,"Request time out"));break;case Cm.HTTP_ERROR:const g=c.getStatus();if(F(zt,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_==null?void 0:_.error;if(v&&v.status&&v.message){const S=function(C){const I=C.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(I)>=0?I:b.UNKNOWN}(v.status);l(new V(S,v.message))}else l(new V(b.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new V(b.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{F(zt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(r);F(zt,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",d,i,15)})}vo(e,n,i){const r=Nm(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=a2(),l=u2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.xmlHttpFactory=new h2({})),this.bo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const p=s.join("");F(zt,`Creating RPC '${e}' stream ${r}: ${p}`,c);const g=a.createWebChannel(p,c);let _=!1,v=!1;const S=new mB({co:C=>{v?F(zt,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(_||(F(zt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),F(zt,`RPC '${e}' stream ${r} sending:`,C),g.send(C))},lo:()=>g.close()}),T=(C,I,w)=>{C.listen(I,E=>{try{w(E)}catch(x){setTimeout(()=>{throw x},0)}})};return T(g,dh.EventType.OPEN,()=>{v||F(zt,`RPC '${e}' stream ${r} transport opened.`)}),T(g,dh.EventType.CLOSE,()=>{v||(v=!0,F(zt,`RPC '${e}' stream ${r} transport closed`),S.Ro())}),T(g,dh.EventType.ERROR,C=>{v||(v=!0,Qn(zt,`RPC '${e}' stream ${r} transport errored:`,C),S.Ro(new V(b.UNAVAILABLE,"The operation could not be completed")))}),T(g,dh.EventType.MESSAGE,C=>{var I;if(!v){const w=C.data[0];J(!!w);const E=w,x=E.error||((I=E[0])===null||I===void 0?void 0:I.error);if(x){F(zt,`RPC '${e}' stream ${r} received error:`,x);const O=x.status;let z=function(Ee){const oe=ot[Ee];if(oe!==void 0)return VR(oe)}(O),j=x.message;z===void 0&&(z=b.INTERNAL,j="Unknown error status: "+O+" with message "+x.message),v=!0,S.Ro(new V(z,j)),g.close()}else F(zt,`RPC '${e}' stream ${r} received:`,w),S.Vo(w)}}),T(l,c2.STAT_EVENT,C=>{C.stat===TT.PROXY?F(zt,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===TT.NOPROXY&&F(zt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.Ao()},0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return typeof window<"u"?window:null}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){return new PF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,i,r,s,a,l,c){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Sv(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(tt(n.toString()),tt("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===n&&this.s_(i,r)},i=>{e(()=>{const r=new V(b.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,n){const i=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _B extends vC{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=RF(this.serializer,e),i=function(s){if(!("targetChange"in s))return Y.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Y.min():a.readTime?nt(a.readTime):Y.min()}(e);return this.listener.a_(n,i)}u_(e){const n={};n.database=Dl(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=kd(c)?{documents:HR(s,c)}:{query:GR(s,c)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=UR(s,a.resumeToken);const d=u_(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(Y.min())>0){l.readTime=fa(s,a.snapshotVersion.toTimestamp());const d=u_(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const i=kF(this.serializer,e);i&&(n.labels=i),this.e_(n)}c_(e){const n={};n.database=Dl(this.serializer),n.removeTarget=e,this.e_(n)}}class yB extends vC{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=CF(e.writeResults,e.commitTime),i=nt(e.commitTime);return this.listener.I_(i,n)}return J(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Dl(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Ol(this.serializer,i))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new V(b.UNKNOWN,r.toString())})}Co(e,n,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,n,i,s,a,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(b.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class wB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(tt(n),this.f_=!1):F("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{i.enqueueAndForget(async()=>{Jr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=W(c);d.C_.add(4),await Da(d),d.M_.set("Unknown"),d.C_.delete(4),await gc(d)}(this))})}),this.M_=new wB(i,r)}}async function gc(t){if(Jr(t))for(const e of t.v_)await e(!0)}async function Da(t){for(const e of t.v_)await e(!1)}function Vf(t,e){const n=W(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Cv(n)?Rv(n):Ma(n).Ho()&&Av(n,e))}function Ml(t,e){const n=W(t),i=Ma(n);n.D_.delete(e),i.Ho()&&wC(n,e),n.D_.size===0&&(i.Ho()?i.Zo():Jr(n)&&n.M_.set("Unknown"))}function Av(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ma(t).u_(e)}function wC(t,e){t.x_.Oe(e),Ma(t).c_(e)}function Rv(t){t.x_=new wF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ma(t).start(),t.M_.g_()}function Cv(t){return Jr(t)&&!Ma(t).jo()&&t.D_.size>0}function Jr(t){return W(t).C_.size===0}function IC(t){t.x_=void 0}async function EB(t){t.D_.forEach((e,n)=>{Av(t,e)})}async function TB(t,e){IC(t),Cv(t)?(t.M_.w_(e),Rv(t)):t.M_.set("Unknown")}async function PB(t,e,n){if(t.M_.set("Online"),e instanceof zR&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.D_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.D_.delete(l),r.x_.removeTarget(l))}(t,e)}catch(i){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fd(t,i)}else if(e instanceof Vh?t.x_.$e(e):e instanceof BR?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Y.min()))try{const i=await dC(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.x_.it(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.D_.get(d);p&&s.D_.set(d,p.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const p=s.D_.get(c);if(!p)return;s.D_.set(c,p.withResumeToken(pt.EMPTY_BYTE_STRING,p.snapshotVersion)),wC(s,c);const g=new Ni(p.target,c,d,p.sequenceNumber);Av(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){F("RemoteStore","Failed to raise snapshot:",i),await Fd(t,i)}}async function Fd(t,e,n){if(!Qr(e))throw e;t.C_.add(1),await Da(t),t.M_.set("Offline"),n||(n=()=>dC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await gc(t)})}function EC(t,e){return e().catch(n=>Fd(t,n,e))}async function Oa(t){const e=W(t),n=Br(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;SB(e);)try{const r=await cB(e.localStore,i);if(r===null){e.b_.length===0&&n.Zo();break}i=r.batchId,AB(e,r)}catch(r){await Fd(e,r)}TC(e)&&PC(e)}function SB(t){return Jr(t)&&t.b_.length<10}function AB(t,e){t.b_.push(e);const n=Br(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function TC(t){return Jr(t)&&!Br(t).jo()&&t.b_.length>0}function PC(t){Br(t).start()}async function RB(t){Br(t).E_()}async function CB(t){const e=Br(t);for(const n of t.b_)e.P_(n.mutations)}async function kB(t,e,n){const i=t.b_.shift(),r=fv.from(i,e,n);await EC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Oa(t)}async function xB(t,e){e&&Br(t).h_&&await async function(i,r){if(function(a){return MR(a)&&a!==b.ABORTED}(r.code)){const s=i.b_.shift();Br(i).Yo(),await EC(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Oa(i)}}(t,e),TC(t)&&PC(t)}async function _0(t,e){const n=W(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const i=Jr(n);n.C_.add(3),await Da(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await gc(n)}async function m_(t,e){const n=W(t);e?(n.C_.delete(2),await gc(n)):e||(n.C_.add(2),await Da(n),n.M_.set("Unknown"))}function Ma(t){return t.O_||(t.O_=function(n,i,r){const s=W(n);return s.A_(),new _B(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{ho:EB.bind(null,t),Io:TB.bind(null,t),a_:PB.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),Cv(t)?Rv(t):t.M_.set("Unknown")):(await t.O_.stop(),IC(t))})),t.O_}function Br(t){return t.N_||(t.N_=function(n,i,r){const s=W(n);return s.A_(),new yB(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{ho:RB.bind(null,t),Io:xB.bind(null,t),T_:CB.bind(null,t),I_:kB.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await Oa(t)):(await t.N_.stop(),t.b_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new kv(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Va(t,e){if(tt("AsyncQueue",`${e}: ${t}`),Qr(t))return new V(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||q.comparator(n.key,i.key):(n,i)=>q.comparator(n.key,i.key),this.keyedMap=Ru(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.B_=new Ne(q.comparator)}track(e){const n=e.doc.key,i=this.B_.get(n);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(n,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(n):e.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):K():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ga{constructor(e,n,i,r,s,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ga(e,n,Qo.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(){this.k_=void 0,this.listeners=[]}}class LB{constructor(){this.queries=new Yr(e=>IR(e),cc),this.onlineState="Unknown",this.q_=new Set}}async function xv(t,e){const n=W(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new bB),r)try{s.k_=await n.onListen(i)}catch(a){const l=Va(a,`Initialization of query '${To(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&Lv(n)}async function bv(t,e){const n=W(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function NB(t,e){const n=W(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.listeners)l.K_(r)&&(i=!0);a.k_=r}}i&&Lv(n)}function DB(t,e,n){const i=W(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function Lv(t){t.q_.forEach(e=>{e.next()})}class Nv{constructor(e,n,i){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ga(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.J_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.serializer=e}hs(e){return yi(this.serializer,e)}Ps(e){return e.metadata.exists?WR(this.serializer,e.document,!1):Me.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return nt(e)}}class MB{constructor(e,n,i){this.X_=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SC(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const i=ye.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,i=new v0(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.hs(r.metadata.name);for(const a of r.metadata.queries){const l=(n.get(a)||ce()).add(s);n.set(a,l)}}return n}async complete(){const e=await hB(this.localStore,new v0(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(const i of this.queries)await dB(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function SC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.key=e}}class RC{constructor(e){this.key=e}}class CC{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ce(),this.mutatedKeys=ce(),this._a=TR(e),this.aa=new Qo(this._a)}get ua(){return this.ia}ca(e,n){const i=n?n.la:new y0,r=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,g)=>{const _=r.get(p),v=hc(this.query,g)?g:null,S=!!_&&this.mutatedKeys.has(_.key),T=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;_&&v?_.data.isEqual(v.data)?S!==T&&(i.track({type:3,doc:v}),C=!0):this.ha(_,v)||(i.track({type:2,doc:v}),C=!0,(c&&this._a(v,c)>0||d&&this._a(v,d)<0)&&(l=!0)):!_&&v?(i.track({type:0,doc:v}),C=!0):_&&!v&&(i.track({type:1,doc:_}),C=!0,(c||d)&&(l=!0)),C&&(v?(a=a.add(v),s=T?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{aa:a,la:i,Zi:l,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((d,p)=>function(_,v){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return S(_)-S(v)}(d.type,p.type)||this._a(d.doc,p.doc)),this.Pa(i);const a=n?this.Ia():[],l=this.oa.size===0&&this.current?1:0,c=l!==this.sa;return this.sa=l,s.length!==0||c?{snapshot:new ga(this.query,e.aa,r,s,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new y0,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ce(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const n=[];return e.forEach(i=>{this.oa.has(i)||n.push(new RC(i))}),this.oa.forEach(i=>{e.has(i)||n.push(new AC(i))}),n}da(e){this.ia=e.ls,this.oa=ce();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return ga.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class VB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class FB{constructor(e){this.key=e,this.Ra=!1}}class BB{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Va={},this.ma=new Yr(l=>IR(l),cc),this.fa=new Map,this.ga=new Set,this.pa=new Ne(q.comparator),this.ya=new Map,this.wa=new wv,this.Sa={},this.ba=new Map,this.Da=js.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function zB(t,e){const n=Fv(t);let i,r;const s=n.ma.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{const a=await pa(n.localStore,Xt(e)),l=n.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=await Dv(n,e,i,l==="current",a.resumeToken),n.isPrimaryClient&&Vf(n.remoteStore,a)}return r}async function Dv(t,e,n,i,r){t.va=(g,_,v)=>async function(T,C,I,w){let E=C.view.ca(I);E.Zi&&(E=await Od(T.localStore,C.query,!1).then(({documents:z})=>C.view.ca(z,E)));const x=w&&w.targetChanges.get(C.targetId),O=C.view.applyChanges(E,T.isPrimaryClient,x);return g_(T,C.targetId,O.Ta),O.snapshot}(t,g,_,v);const s=await Od(t.localStore,e,!0),a=new CC(e,s.ls),l=a.ca(s.documents),c=pc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(l,t.isPrimaryClient,c);g_(t,n,d.Ta);const p=new VB(e,n,a);return t.ma.set(e,p),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}async function UB(t,e){const n=W(t),i=n.ma.get(e),r=n.fa.get(i.targetId);if(r.length>1)return n.fa.set(i.targetId,r.filter(s=>!cc(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await ma(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Ml(n.remoteStore,i.targetId),_a(n,i.targetId)}).catch(Zr)):(_a(n,i.targetId),await ma(n.localStore,i.targetId,!0))}async function $B(t,e,n){const i=Bv(t);try{const r=await function(a,l){const c=W(a),d=Ue.now(),p=l.reduce((v,S)=>v.add(S.key),ce());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=dn(),T=ce();return c.ss.getEntries(v,p).next(C=>{S=C,S.forEach((I,w)=>{w.isValidDocument()||(T=T.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,S)).next(C=>{g=C;const I=[];for(const w of l){const E=_F(w,g.get(w.key).overlayedDocument);E!=null&&I.push(new Ki(w.key,E,dR(E.value.mapValue),ze.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,I,l)}).next(C=>{_=C;const I=C.applyToLocalDocumentSet(g,T);return c.documentOverlayCache.saveOverlays(v,C.batchId,I)})}).then(()=>({batchId:_.batchId,changes:SR(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let d=a.Sa[a.currentUser.toKey()];d||(d=new Ne(ae)),d=d.insert(l,c),a.Sa[a.currentUser.toKey()]=d}(i,r.batchId,n),await Zi(i,r.changes),await Oa(i.remoteStore)}catch(r){const s=Va(r,"Failed to persist write");n.reject(s)}}async function kC(t,e){const n=W(t);try{const i=await lB(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.ya.get(s);a&&(J(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ra=!0:r.modifiedDocuments.size>0?J(a.Ra):r.removedDocuments.size>0&&(J(a.Ra),a.Ra=!1))}),await Zi(n,i,e)}catch(i){await Zr(i)}}function w0(t,e,n){const i=W(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ma.forEach((s,a)=>{const l=a.view.Q_(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=W(a);c.onlineState=l;let d=!1;c.queries.forEach((p,g)=>{for(const _ of g.listeners)_.Q_(l)&&(d=!0)}),d&&Lv(c)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function jB(t,e,n){const i=W(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.ya.get(e),s=r&&r.key;if(s){let a=new Ne(q.comparator);a=a.insert(s,Me.newNoDocument(s,Y.min()));const l=ce().add(s),c=new fc(Y.min(),new Map,new Ne(ae),a,l);await kC(i,c),i.pa=i.pa.remove(s),i.ya.delete(e),Vv(i)}else await ma(i.localStore,e,!1).then(()=>_a(i,e,n)).catch(Zr)}async function qB(t,e){const n=W(t),i=e.batch.batchId;try{const r=await uB(n.localStore,e);Mv(n,i,null),Ov(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zi(n,r)}catch(r){await Zr(r)}}async function WB(t,e,n){const i=W(t);try{const r=await function(a,l){const c=W(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,l).next(g=>(J(g!==null),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(i.localStore,e);Mv(i,e,n),Ov(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zi(i,r)}catch(r){await Zr(r)}}async function HB(t,e){const n=W(t);Jr(n.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const l=W(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();const r=n.ba.get(i)||[];r.push(e),n.ba.set(i,r)}catch(i){const r=Va(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function Ov(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function Mv(t,e,n){const i=W(t);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function _a(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.fa.get(e))t.ma.delete(i),n&&t.Va.Fa(i,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(i=>{t.wa.containsKey(i)||xC(t,i)})}function xC(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(Ml(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),Vv(t))}function g_(t,e,n){for(const i of n)i instanceof AC?(t.wa.addReference(i.key,e),GB(t,i)):i instanceof RC?(F("SyncEngine","Document no longer in limbo: "+i.key),t.wa.removeReference(i.key,e),t.wa.containsKey(i.key)||xC(t,i.key)):K()}function GB(t,e){const n=e.key,i=n.path.canonicalString();t.pa.get(n)||t.ga.has(i)||(F("SyncEngine","New document in limbo: "+n),t.ga.add(i),Vv(t))}function Vv(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new q(ye.fromString(e)),i=t.Da.next();t.ya.set(i,new FB(n)),t.pa=t.pa.insert(n,i),Vf(t.remoteStore,new Ni(Xt(ba(n.path)),i,"TargetPurposeLimboResolution",cn._e))}}async function Zi(t,e,n){const i=W(t),r=[],s=[],a=[];i.ma.isEmpty()||(i.ma.forEach((l,c)=>{a.push(i.va(c,e,n).then(d=>{if((d||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,d!=null&&d.fromCache?"not-current":"current"),d){r.push(d);const p=Tv.Qi(c.targetId,d);s.push(p)}}))}),await Promise.all(a),i.Va.a_(r),await async function(c,d){const p=W(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>R.forEach(d,_=>R.forEach(_.ki,v=>p.persistence.referenceDelegate.addReference(g,_.targetId,v)).next(()=>R.forEach(_.qi,v=>p.persistence.referenceDelegate.removeReference(g,_.targetId,v)))))}catch(g){if(!Qr(g))throw g;F("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const v=p.ts.get(_),S=v.snapshotVersion,T=v.withLastLimboFreeSnapshotVersion(S);p.ts=p.ts.insert(_,T)}}}(i.localStore,s))}async function KB(t,e){const n=W(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const i=await hC(n.localStore,e);n.currentUser=e,function(s,a){s.ba.forEach(l=>{l.forEach(c=>{c.reject(new V(b.CANCELLED,a))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zi(n,i._s)}}function ZB(t,e){const n=W(t),i=n.ya.get(e);if(i&&i.Ra)return ce().add(i.key);{let r=ce();const s=n.fa.get(e);if(!s)return r;for(const a of s){const l=n.ma.get(a);r=r.unionWith(l.view.ua)}return r}}async function QB(t,e){const n=W(t),i=await Od(n.localStore,e.query,!0),r=e.view.da(i);return n.isPrimaryClient&&g_(n,e.targetId,r.Ta),r}async function YB(t,e){const n=W(t);return mC(n.localStore,e).then(i=>Zi(n,i))}async function JB(t,e,n,i){const r=W(t),s=await function(l,c){const d=W(l),p=W(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Cn(g,c).next(_=>_?d.localDocuments.getDocuments(g,_):R.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Oa(r.remoteStore):n==="acknowledged"||n==="rejected"?(Mv(r,e,i||null),Ov(r,e),function(l,c){W(W(l).mutationQueue).Fn(c)}(r.localStore,e)):K(),await Zi(r,s)):F("SyncEngine","Cannot apply mutation batch with id: "+e)}async function XB(t,e){const n=W(t);if(Fv(n),Bv(n),e===!0&&n.Ca!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await I0(n,i.toArray());n.Ca=!0,await m_(n.remoteStore,!0);for(const s of r)Vf(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){const i=[];let r=Promise.resolve();n.fa.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(_a(n,a),ma(n.localStore,a,!0))),Ml(n.remoteStore,a)}),await r,await I0(n,i),function(a){const l=W(a);l.ya.forEach((c,d)=>{Ml(l.remoteStore,d)}),l.wa.Vr(),l.ya=new Map,l.pa=new Ne(q.comparator)}(n),n.Ca=!1,await m_(n.remoteStore,!1)}}async function I0(t,e,n){const i=W(t),r=[],s=[];for(const a of e){let l;const c=i.fa.get(a);if(c&&c.length!==0){l=await pa(i.localStore,Xt(c[0]));for(const d of c){const p=i.ma.get(d),g=await QB(i,p);g.snapshot&&s.push(g.snapshot)}}else{const d=await pC(i.localStore,a);l=await pa(i.localStore,d),await Dv(i,bC(d),a,!1,l.resumeToken)}r.push(l)}return i.Va.a_(s),r}function bC(t){return wR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ez(t){return function(n){return W(W(n).persistence).Bi()}(W(t).localStore)}async function tz(t,e,n,i){const r=W(t);if(r.Ca)return void F("SyncEngine","Ignoring unexpected query state notification.");const s=r.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await mC(r.localStore,ER(s[0])),l=fc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",pt.EMPTY_BYTE_STRING);await Zi(r,a,l);break}case"rejected":await ma(r.localStore,e,!0),_a(r,e,i);break;default:K()}}async function nz(t,e,n){const i=Fv(t);if(i.Ca){for(const r of e){if(i.fa.has(r)){F("SyncEngine","Adding an already active target "+r);continue}const s=await pC(i.localStore,r),a=await pa(i.localStore,s);await Dv(i,bC(s),a.targetId,!1,a.resumeToken),Vf(i.remoteStore,a)}for(const r of n)i.fa.has(r)&&await ma(i.localStore,r,!1).then(()=>{Ml(i.remoteStore,r),_a(i,r)}).catch(Zr)}}function Fv(t){const e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jB.bind(null,e),e.Va.a_=NB.bind(null,e.eventManager),e.Va.Fa=DB.bind(null,e.eventManager),e}function Bv(t){const e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WB.bind(null,e),e}function iz(t,e,n){const i=W(t);(async function(s,a,l){try{const c=await a.getMetadata();if(await function(v,S){const T=W(v),C=nt(S.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",I=>T.Kr.getBundleMetadata(I,S.id)).then(I=>!!I&&I.createTime.compareTo(C)>=0)}(s.localStore,c))return await a.close(),l._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);l._updateProgress(SC(c));const d=new MB(c,s.localStore,a.serializer);let p=await a.Ma();for(;p;){const _=await d.ea(p);_&&l._updateProgress(_),p=await a.Ma()}const g=await d.complete();return await Zi(s,g.ra,void 0),await function(v,S){const T=W(v);return T.persistence.runTransaction("Save bundle","readwrite",C=>T.Kr.saveBundleMetadata(C,S))}(s.localStore,c),l._completeWith(g.progress),Promise.resolve(g.na)}catch(c){return Qn("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class __{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=mc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return cC(this.persistence,new lC,e.initialUser,this.serializer)}createPersistence(e){return new uC(Mf.jr,this.serializer)}createSharedClientState(e){return new _C}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class LC extends __{constructor(e,n,i){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await Bv(this.xa.syncEngine),await Oa(this.xa.remoteStore),await this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return cC(this.persistence,new lC,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new WF(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new C2(n,this.persistence);return new R2(e.asyncQueue,i)}createPersistence(e){const n=Ev(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Iv(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,yC(),Fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _C}}class rz extends LC{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xa.syncEngine;this.sharedClientState instanceof Lm&&(this.sharedClientState.syncEngine={Ys:JB.bind(null,n),Zs:tz.bind(null,n),Xs:nz.bind(null,n),Bi:ez.bind(null,n),Js:YB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.mi(async i=>{await XB(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=yC();if(!Lm.D(n))throw new V(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ev(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lm(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class zv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>w0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KB.bind(null,this.syncEngine),await m_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LB}()}createDatastore(e){const n=mc(e.databaseInfo.databaseId),i=function(s){return new gB(s)}(e.databaseInfo);return function(s,a,l,c){return new vB(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new IB(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>w0(this.syncEngine,n,0),function(){return g0.D()?new g0:new fB}())}createSyncEngine(e,n){return function(r,s,a,l,c,d,p){const g=new BB(r,s,a,l,c,d);return p&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const i=W(n);F("RemoteStore","RemoteStore shutting down."),i.C_.add(5),await Da(i),i.F_.shutdown(),i.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):tt("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new It,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(e===null)return null;const n=this.La.decode(e),i=Number(n);isNaN(i)&&this.Qa(`length string (${n}) is not valid number`);const r=await this.Ka(i);return new OB(JSON.parse(r),e.length+i)}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(this.buffer.length===0)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ua(){const e=await this.Ba.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new V(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,s){const a=W(r),l=Dl(a.serializer)+"/documents",c={documents:s.map(_=>Nl(a.serializer,_))},d=await a.Co("BatchGetDocuments",l,c,s.length),p=new Map;d.forEach(_=>{const v=AF(a.serializer,_);p.set(v.key.toString(),v)});const g=[];return s.forEach(_=>{const v=p.get(_.toString());J(!!v),g.push(v)}),g}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Na(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=q.fromPath(i);this.mutations.push(new hv(r,this.precondition(r)))}),await async function(i,r){const s=W(i),a=Dl(s.serializer)+"/documents",l={writes:r.map(c=>Ol(s.serializer,c))};await s.wo("Commit",a,l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw K();n=Y.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new V(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Y.min())?ze.exists(!1):ze.updateTime(n):ze.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Y.min()))throw new V(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(n)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new Sv(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(async()=>{const e=new oz(this.datastore),n=this.za(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})})}za(e){try{const n=this.updateFunction(e);return!uc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!MR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=vt.UNAUTHENTICATED,this.clientId=JA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{F("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Va(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Bh(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await hC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function y_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Uv(t);F("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>_0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_0(e.remoteStore,s)),t._onlineComponents=e}function NC(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Uv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!NC(n))throw n;Qn("Error using user provided cache. Falling back to memory cache: "+n),await Bh(t,new __)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await Bh(t,new __);return t._offlineComponents}async function Bf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await y_(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await y_(t,new zv))),t._onlineComponents}function DC(t){return Uv(t).then(e=>e.persistence)}function $v(t){return Uv(t).then(e=>e.localStore)}function OC(t){return Bf(t).then(e=>e.remoteStore)}function jv(t){return Bf(t).then(e=>e.syncEngine)}function lz(t){return Bf(t).then(e=>e.datastore)}async function ya(t){const e=await Bf(t),n=e.eventManager;return n.onListen=zB.bind(null,e.syncEngine),n.onUnlisten=UB.bind(null,e.syncEngine),n}function cz(t){return t.asyncQueue.enqueue(async()=>{const e=await DC(t),n=await OC(t);return e.setNetworkEnabled(!0),function(r){const s=W(r);return s.C_.delete(0),gc(s)}(n)})}function hz(t){return t.asyncQueue.enqueue(async()=>{const e=await DC(t),n=await OC(t);return e.setNetworkEnabled(!1),async function(r){const s=W(r);s.C_.add(0),await Da(s),s.M_.set("Offline")}(n)})}function dz(t,e){const n=new It;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const l=await function(d,p){const g=W(d);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,p))}(r,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new V(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Va(l,`Failed to get document '${s} from cache`);a.reject(c)}}(await $v(t),e,n)),n.promise}function MC(t,e,n={}){const i=new It;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const p=new Ff({next:_=>{a.enqueueAndForget(()=>bv(s,g));const v=_.docs.has(l);!v&&_.fromCache?d.reject(new V(b.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&c.source==="server"?d.reject(new V(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Nv(ba(l.path),p,{includeMetadataChanges:!0,J_:!0});return xv(s,g)}(await ya(t),t.asyncQueue,e,n,i)),i.promise}function fz(t,e){const n=new It;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const l=await Od(r,s,!0),c=new CC(s,l.ls),d=c.ca(l.documents),p=c.applyChanges(d,!1);a.resolve(p.snapshot)}catch(l){const c=Va(l,`Failed to execute query '${s} against cache`);a.reject(c)}}(await $v(t),e,n)),n.promise}function VC(t,e,n={}){const i=new It;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const p=new Ff({next:_=>{a.enqueueAndForget(()=>bv(s,g)),_.fromCache&&c.source==="server"?d.reject(new V(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Nv(l,p,{includeMetadataChanges:!0,J_:!0});return xv(s,g)}(await ya(t),t.asyncQueue,e,n,i)),i.promise}function pz(t,e){const n=new Ff(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){W(r).q_.add(s),s.next()}(await ya(t),n)),()=>{n.Na(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){W(r).q_.delete(s)}(await ya(t),n))}}function mz(t,e,n,i){const r=function(a,l){let c;return c=typeof a=="string"?FR().encode(a):a,function(p,g){return new sz(p,g)}(function(p,g){if(p instanceof Uint8Array)return E0(p,g);if(p instanceof ArrayBuffer)return E0(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),l)}(n,mc(e));t.asyncQueue.enqueueAndForget(async()=>{iz(await jv(t),r,i)})}function gz(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=W(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Kr.getNamedQuery(a,r))}(await $v(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e,n){if(!n)throw new V(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BC(t,e,n,i){if(e===!0&&i===!0)throw new V(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function P0(t){if(!q.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S0(t){if(q.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(t);throw new V(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function zC(t,e){if(e<=0)throw new V(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new V(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _c{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new g2;switch(i.type){case"firstParty":return new w2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new V(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=T0.get(n);i&&(F("ComponentProvider","Removing Datastore"),T0.delete(n),i.terminate())}(this),Promise.resolve()}}function _z(t,e,n,i={}){var r;const s=(t=Ie(t,_c))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let l,c;if(typeof i.mockUserToken=="string")l=i.mockUserToken,c=vt.MOCK_USER;else{l=bO(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new V(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new vt(d)}t._authCredentials=new _2(new YA(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class UC{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new UC(this.firestore,e,this._query)}},We=class $C{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $C(this.firestore,e,this._key)}},Rr=class jC extends en{constructor(e,n,i){super(e,n,ba(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new q(e))}withConverter(e){return new jC(this.firestore,e,this._path)}};function qC(t,e,...n){if(t=te(t),qv("collection","path",e),t instanceof _c){const i=ye.fromString(e,...n);return S0(i),new Rr(t,null,i)}{if(!(t instanceof We||t instanceof Rr))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ye.fromString(e,...n));return S0(i),new Rr(t.firestore,null,i)}}function yz(t,e){if(t=Ie(t,_c),qv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new en(t,null,function(i){return new Gi(ye.emptyPath(),i)}(e))}function Bd(t,e,...n){if(t=te(t),arguments.length===1&&(e=JA.newId()),qv("doc","path",e),t instanceof _c){const i=ye.fromString(e,...n);return P0(i),new We(t,null,new q(i))}{if(!(t instanceof We||t instanceof Rr))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ye.fromString(e,...n));return P0(i),new We(t.firestore,t instanceof Rr?t.converter:null,new q(i))}}function WC(t,e){return t=te(t),e=te(e),(t instanceof We||t instanceof Rr)&&(e instanceof We||e instanceof Rr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function HC(t,e){return t=te(t),e=te(e),t instanceof en&&e instanceof en&&t.firestore===e.firestore&&cc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Sv(this,"async_queue_retry"),this.iu=()=>{const n=Fh();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Fh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new It;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Qr(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw tt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);const r=kv.createAndSchedule(this,e,n,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&K()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function v_(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wz{constructor(){this._progressObserver={},this._taskCompletionResolver=new It,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=-1;let Ye=class extends _c{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new vz}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||GC(this),this._firestoreClient.terminate()}};function St(t){return t._firestoreClient||GC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function GC(t){var e,n,i;const r=t._freezeSettings(),s=function(l,c,d,p){return new Z2(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,FC(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new uz(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function Ez(t,e){ZC(t=Ie(t,Ye));const n=St(t);if(n._uninitializedComponentsProvider)throw new V(b.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new zv;return KC(n,r,new LC(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Tz(t){ZC(t=Ie(t,Ye));const e=St(t);if(e._uninitializedComponentsProvider)throw new V(b.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new zv;return KC(e,i,new rz(i,n.cacheSizeBytes))}function KC(t,e,n){const i=new It;return t.asyncQueue.enqueue(async()=>{try{await Bh(t,n),await y_(t,e),i.resolve()}catch(r){const s=r;if(!NC(s))throw s;Qn("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}}).then(()=>i.promise)}function Pz(t){if(t._initialized&&!t._terminated)throw new V(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new It;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Wn.D())return Promise.resolve();const r=i+"main";await Wn.delete(r)}(Ev(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Sz(t){return function(n){const i=new It;return n.asyncQueue.enqueueAndForget(async()=>HB(await jv(n),i)),i.promise}(St(t=Ie(t,Ye)))}function Az(t){return cz(St(t=Ie(t,Ye)))}function Rz(t){return hz(St(t=Ie(t,Ye)))}function Cz(t,e){const n=St(t=Ie(t,Ye)),i=new wz;return mz(n,t._databaseId,e,i),i}function kz(t,e){return gz(St(t=Ie(t,Ye)),e).then(n=>n?new en(t,null,n.query):null)}function ZC(t){if(t._initialized||t._terminated)throw new V(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ii(pt.fromBase64String(e))}catch(n){throw new V(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ii(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=/^__.*__$/;class bz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new La(e,this.data,n,this.fieldTransforms)}}class QC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class $f{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new $f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return zd(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(YC(this.Iu)&&xz.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Lz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||mc(e)}pu(e,n,i,r=!1){return new $f({Iu:e,methodName:n,gu:i,path:Be.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eo(t){const e=t._freezeSettings(),n=mc(t._databaseId);return new Lz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jf(t,e,n,i,r,s={}){const a=t.pu(s.merge||s.mergeFields?2:0,e,n,r);Kv("Data must be an object, but it was:",a,i);const l=ek(i,a);let c,d;if(s.merge)c=new hn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=w_(e,g,n);if(!a.contains(_))throw new V(b.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);nk(p,_)||p.push(_)}c=new hn(p),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new bz(new bt(l),c,d)}class yc extends Xs{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yc}}function JC(t,e,n){return new $f({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wv extends Xs{_toFieldTransform(e){return new dc(e.path,new ha)}isEqual(e){return e instanceof Wv}}class Nz extends Xs{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=JC(this,e,!0),i=this.yu.map(s=>to(s,n)),r=new Bs(i);return new dc(e.path,r)}isEqual(e){return this===e}}class Dz extends Xs{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=JC(this,e,!0),i=this.yu.map(s=>to(s,n)),r=new zs(i);return new dc(e.path,r)}isEqual(e){return this===e}}class Oz extends Xs{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new da(e.serializer,kR(e.serializer,this.wu));return new dc(e.path,n)}isEqual(e){return this===e}}function Hv(t,e,n,i){const r=t.pu(1,e,n);Kv("Data must be an object, but it was:",r,i);const s=[],a=bt.empty();Js(i,(c,d)=>{const p=Zv(e,c,n);d=te(d);const g=r.Ru(p);if(d instanceof yc)s.push(p);else{const _=to(d,g);_!=null&&(s.push(p),a.set(p,_))}});const l=new hn(s);return new QC(a,l,r.fieldTransforms)}function Gv(t,e,n,i,r,s){const a=t.pu(1,e,n),l=[w_(e,i,n)],c=[r];if(s.length%2!=0)throw new V(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)l.push(w_(e,s[_])),c.push(s[_+1]);const d=[],p=bt.empty();for(let _=l.length-1;_>=0;--_)if(!nk(d,l[_])){const v=l[_];let S=c[_];S=te(S);const T=a.Ru(v);if(S instanceof yc)d.push(v);else{const C=to(S,T);C!=null&&(d.push(v),p.set(v,C))}}const g=new hn(d);return new QC(p,g,a.fieldTransforms)}function XC(t,e,n,i=!1){return to(n,t.pu(i?4:3,e))}function to(t,e){if(tk(t=te(t)))return Kv("Unsupported field value:",e,t),ek(t,e);if(t instanceof Xs)return function(i,r){if(!YC(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let c=to(l,r.Vu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=te(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ue.fromDate(i);return{timestampValue:fa(r.serializer,s)}}if(i instanceof Ue){const s=new Ue(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:fa(r.serializer,s)}}if(i instanceof Uf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ii)return{bytesValue:UR(r.serializer,i._byteString)};if(i instanceof We){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gv(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${zf(i)}`)}(t,e)}function ek(t,e){const n={};return lR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,(i,r)=>{const s=to(r,e.Eu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function tk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Uf||t instanceof Ii||t instanceof We||t instanceof Xs)}function Kv(t,e,n){if(!tk(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=zf(n);throw i==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function w_(t,e,n){if((e=te(e))instanceof zr)return e._internalPath;if(typeof e=="string")return Zv(t,e);throw zd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Mz=new RegExp("[~\\*/\\[\\]]");function Zv(t,e,n){if(e.search(Mz)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zr(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zd(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new V(b.INVALID_ARGUMENT,l+t+c)}function nk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Vz extends Vl{data(){return super.data()}}function qf(t,e){return typeof e=="string"?Zv(t,e):e instanceof zr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qv{}class vc extends Qv{}function rr(t,e,...n){let i=[];e instanceof Qv&&i.push(e),i=i.concat(n),function(s){const a=s.filter(c=>c instanceof Yv).length,l=s.filter(c=>c instanceof Wf).length;if(a>1||a>0&&l>0)throw new V(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Wf extends vc{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Wf(e,n,i)}_apply(e){const n=this._parse(e);return sk(e._query,n),new en(e.firestore,e.converter,a_(e._query,n))}_parse(e){const n=eo(e.firestore);return function(s,a,l,c,d,p,g){let _;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new V(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){C0(g,p);const v=[];for(const S of g)v.push(R0(c,s,S));_={arrayValue:{values:v}}}else _=R0(c,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||C0(g,p),_=XC(l,a,g,p==="in"||p==="not-in");return pe.create(d,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fz(t,e,n){const i=e,r=qf("where",t);return Wf._create(r,i,n)}class Yv extends Qv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yv(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const c of l)sk(a,c),a=a_(a,c)}(e._query,n),new en(e.firestore,e.converter,a_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jv extends vc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jv(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new V(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new V(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ll(s,a)}(e._query,this._field,this._direction);return new en(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Gi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Bz(t,e="asc"){const n=e,i=qf("orderBy",t);return Jv._create(i,n)}class Hf extends vc{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Hf(e,n,i)}_apply(e){return new en(e.firestore,e.converter,bd(e._query,this._limit,this._limitType))}}function zz(t){return zC("limit",t),Hf._create("limit",t,"F")}function Uz(t){return zC("limitToLast",t),Hf._create("limitToLast",t,"L")}class Gf extends vc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Gf(e,n,i)}_apply(e){const n=rk(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(r,s){return new Gi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function $z(...t){return Gf._create("startAt",t,!0)}function jz(...t){return Gf._create("startAfter",t,!1)}class Kf extends vc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Kf(e,n,i)}_apply(e){const n=rk(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(r,s){return new Gi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function qz(...t){return Kf._create("endBefore",t,!1)}function Wz(...t){return Kf._create("endAt",t,!0)}function rk(t,e,n,i){if(n[0]=te(n[0]),n[0]instanceof Vl)return function(s,a,l,c,d){if(!c)throw new V(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const p=[];for(const g of Zo(s))if(g.field.isKeyField())p.push(Vs(a,c.key));else{const _=c.data.field(g.field);if(bf(_))throw new V(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const v=g.field.canonicalString();throw new V(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}p.push(_)}return new Fr(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=eo(t.firestore);return function(a,l,c,d,p,g){const _=a.explicitOrderBy;if(p.length>_.length)throw new V(b.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let S=0;S<p.length;S++){const T=p[S];if(_[S].field.isKeyField()){if(typeof T!="string")throw new V(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof T}`);if(!lv(a)&&T.indexOf("/")!==-1)throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${T}' contains a slash.`);const C=a.path.child(ye.fromString(T));if(!q.isDocumentKey(C))throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const I=new q(C);v.push(Vs(l,I))}else{const C=XC(c,d,T);v.push(C)}}return new Fr(v,g)}(t._query,t.firestore._databaseId,r,e,n,i)}}function R0(t,e,n){if(typeof(n=te(n))=="string"){if(n==="")throw new V(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lv(e)&&n.indexOf("/")!==-1)throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ye.fromString(n));if(!q.isDocumentKey(i))throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vs(t,new q(i))}if(n instanceof We)return Vs(t,n._key);throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function C0(t,e){if(!Array.isArray(t)||t.length===0)throw new V(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sk(t,e){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Xv{convertValue(e,n="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Js(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Uf(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=av(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ye.fromString(e);J(YR(i));const r=new Mr(i.get(1),i.get(3)),s=new q(i.popFirst(5));return r.isEqual(n)||tt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Hz extends Xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let qi=class extends Vl{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(qf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Hu=class extends qi{data(e={}){return super.data(e)}},Ur=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Is(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Hu(this._firestore,this._userDataWriter,i.key,i,new Is(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new Hu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Is(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Hu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Is(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:Gz(l.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Gz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function ok(t,e){return t instanceof qi&&e instanceof qi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ur&&e instanceof Ur&&t._firestore===e._firestore&&HC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(t){t=Ie(t,We);const e=Ie(t.firestore,Ye);return MC(St(e),t._key).then(n=>ew(e,t,n))}class no extends Xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function Zz(t){t=Ie(t,We);const e=Ie(t.firestore,Ye),n=St(e),i=new no(e);return dz(n,t._key).then(r=>new qi(e,i,t._key,r,new Is(r!==null&&r.hasLocalMutations,!0),t.converter))}function Qz(t){t=Ie(t,We);const e=Ie(t.firestore,Ye);return MC(St(e),t._key,{source:"server"}).then(n=>ew(e,t,n))}function Yz(t){t=Ie(t,en);const e=Ie(t.firestore,Ye),n=St(e),i=new no(e);return ik(t._query),VC(n,t._query).then(r=>new Ur(e,i,t,r))}function Jz(t){t=Ie(t,en);const e=Ie(t.firestore,Ye),n=St(e),i=new no(e);return fz(n,t._query).then(r=>new Ur(e,i,t,r))}function Xz(t){t=Ie(t,en);const e=Ie(t.firestore,Ye),n=St(e),i=new no(e);return VC(n,t._query,{source:"server"}).then(r=>new Ur(e,i,t,r))}function k0(t,e,n){t=Ie(t,We);const i=Ie(t.firestore,Ye),r=Zf(t.converter,e,n);return wc(i,[jf(eo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,ze.none())])}function x0(t,e,n,...i){t=Ie(t,We);const r=Ie(t.firestore,Ye),s=eo(r);let a;return a=typeof(e=te(e))=="string"||e instanceof zr?Gv(s,"updateDoc",t._key,e,n,i):Hv(s,"updateDoc",t._key,e),wc(r,[a.toMutation(t._key,ze.exists(!0))])}function eU(t){return wc(Ie(t.firestore,Ye),[new Na(t._key,ze.none())])}function tU(t,e){const n=Ie(t.firestore,Ye),i=Bd(t),r=Zf(t.converter,e);return wc(n,[jf(eo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,ze.exists(!1))]).then(()=>i)}function ak(t,...e){var n,i,r;t=te(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||v_(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges};if(v_(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let c,d,p;if(t instanceof We)d=Ie(t.firestore,Ye),p=ba(t._key.path),c={next:g=>{e[a]&&e[a](ew(d,t,g))},error:e[a+1],complete:e[a+2]};else{const g=Ie(t,en);d=Ie(g.firestore,Ye),p=g._query;const _=new no(d);c={next:v=>{e[a]&&e[a](new Ur(d,_,g,v))},error:e[a+1],complete:e[a+2]},ik(t._query)}return function(_,v,S,T){const C=new Ff(T),I=new Nv(v,C,S);return _.asyncQueue.enqueueAndForget(async()=>xv(await ya(_),I)),()=>{C.Na(),_.asyncQueue.enqueueAndForget(async()=>bv(await ya(_),I))}}(St(d),p,l,c)}function nU(t,e){return pz(St(t=Ie(t,Ye)),v_(e)?e:{next:e})}function wc(t,e){return function(i,r){const s=new It;return i.asyncQueue.enqueueAndForget(async()=>$B(await jv(i),r,s)),s.promise}(St(t),e)}function ew(t,e,n){const i=n.docs.get(e._key),r=new no(t);return new qi(t,r,e._key,i,new Is(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rU=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=eo(e)}set(e,n,i){this._verifyNotCommitted();const r=hr(e,this._firestore),s=Zf(r.converter,n,i),a=jf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,ze.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=hr(e,this._firestore);let a;return a=typeof(n=te(n))=="string"||n instanceof zr?Gv(this._dataReader,"WriteBatch.update",s._key,n,i,r):Hv(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hr(e,this._firestore);return this._mutations=this._mutations.concat(new Na(n._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function hr(t,e){if((t=te(t)).firestore!==e)throw new V(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sU=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=eo(n)}get(n){const i=hr(n,this._firestore),r=new Hz(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return K();const a=s[0];if(a.isFoundDocument())return new Vl(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new Vl(this._firestore,r,i._key,null,i.converter);throw K()})}set(n,i,r){const s=hr(n,this._firestore),a=Zf(s.converter,i,r),l=jf(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,r);return this._transaction.set(s._key,l),this}update(n,i,r,...s){const a=hr(n,this._firestore);let l;return l=typeof(i=te(i))=="string"||i instanceof zr?Gv(this._dataReader,"Transaction.update",a._key,i,r,s):Hv(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,l),this}delete(n){const i=hr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=hr(e,this._firestore),i=new no(this._firestore);return super.get(e).then(r=>new qi(this._firestore,i,n._key,r._document,new Is(!1,!1),n.converter))}};function oU(t,e,n){t=Ie(t,Ye);const i=Object.assign(Object.assign({},iU),n);return function(s){if(s.maxAttempts<1)throw new V(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const c=new It;return s.asyncQueue.enqueueAndForget(async()=>{const d=await lz(s);new az(s.asyncQueue,d,l,a,c).run()}),c.promise}(St(t),r=>e(new sU(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(){return new yc("deleteField")}function uU(){return new Wv("serverTimestamp")}function lU(...t){return new Nz("arrayUnion",t)}function cU(...t){return new Dz("arrayRemove",t)}function hU(t){return new Oz("increment",t)}(function(e,n=!0){(function(r){xa=r})(Hr),Lr(new vi("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Ye(new y2(i.getProvider("auth-internal")),new E2(i.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new V(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mr(d.options.projectId,p)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),_i(PT,"4.3.2",e),_i(PT,"4.3.2","esm2017")})();const dU="@firebase/firestore-compat",fU="0.3.21";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function L0(){if(!G2())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Fl{constructor(e){this._delegate=e}static fromBase64String(e){return L0(),new Fl(Ii.fromBase64String(e))}static fromUint8Array(e){return b0(),new Fl(Ii.fromUint8Array(e))}toBase64(){return L0(),this._delegate.toBase64()}toUint8Array(){return b0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){return pU(t,["next","error","complete"])}function pU(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{enableIndexedDbPersistence(e,n){return Ez(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Tz(e._delegate)}clearIndexedDbPersistence(e){return Pz(e._delegate)}}class uk{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){_z(this._delegate,e,n,i)}enableNetwork(){return Az(this._delegate)}disableNetwork(){return Rz(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,BC("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Sz(this._delegate)}onSnapshotsInSync(e){return nU(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new va(this,qC(this._delegate,e))}catch(n){throw Kt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Dn(this,Bd(this._delegate,e))}catch(n){throw Kt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gt(this,yz(this._delegate,e))}catch(n){throw Kt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return oU(this._delegate,n=>e(new lk(this,n)))}batch(){return St(this._delegate),new ck(new rU(this._delegate,e=>wc(this._delegate,e)))}loadBundle(e){return Cz(this._delegate,e)}namedQuery(e){return kz(this._delegate,e).then(n=>n?new Gt(this,n):null)}}class Qf extends Xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fl(new Ii(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Dn.forKey(n,this.firestore,null)}}function gU(t){p2(t)}class lk{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Qf(e)}get(e){const n=Es(e);return this._delegate.get(n).then(i=>new Bl(this._firestore,new qi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=Es(e);return i?(tw("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Es(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Es(e);return this._delegate.delete(n),this}}class ck{constructor(e){this._delegate=e}set(e,n,i){const r=Es(e);return i?(tw("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Es(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Es(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class qs{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Hu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zl(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=qs.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new qs(e,new Qf(e),n),r.set(n,s)),s}}qs.INSTANCES=new WeakMap;class Dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Qf(e)}static forPath(e,n,i){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dn(n,new We(n._delegate,i,new q(e)))}static forKey(e,n,i){return new Dn(n,new We(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new va(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new va(this.firestore,qC(this._delegate,e))}catch(n){throw Kt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=te(e),e instanceof We?WC(this._delegate,e):!1}set(e,n){n=tw("DocumentReference.set",n);try{return n?k0(this._delegate,e,n):k0(this._delegate,e)}catch(i){throw Kt(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?x0(this._delegate,e):x0(this._delegate,e,n,...i)}catch(r){throw Kt(r,"updateDoc()","DocumentReference.update()")}}delete(){return eU(this._delegate)}onSnapshot(...e){const n=hk(e),i=dk(e,r=>new Bl(this.firestore,new qi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return ak(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Zz(this._delegate):(e==null?void 0:e.source)==="server"?n=Qz(this._delegate):n=Kz(this._delegate),n.then(i=>new Bl(this.firestore,new qi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Kt(t,e,n){return t.message=t.message.replace(e,n),t}function hk(t){for(const e of t)if(typeof e=="object"&&!I_(e))return e;return{}}function dk(t,e){var n,i;let r;return I_(t[0])?r=t[0]:I_(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:s=>{r.next&&r.next(e(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class Bl{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ok(this._delegate,e._delegate)}}class zl extends Bl{data(e){const n=this._delegate.data(e);return m2(n!==void 0),n}}class Gt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Qf(e)}where(e,n,i){try{return new Gt(this.firestore,rr(this._delegate,Fz(e,n,i)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Gt(this.firestore,rr(this._delegate,Bz(e,n)))}catch(i){throw Kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gt(this.firestore,rr(this._delegate,zz(e)))}catch(n){throw Kt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Gt(this.firestore,rr(this._delegate,Uz(e)))}catch(n){throw Kt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gt(this.firestore,rr(this._delegate,$z(...e)))}catch(n){throw Kt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gt(this.firestore,rr(this._delegate,jz(...e)))}catch(n){throw Kt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gt(this.firestore,rr(this._delegate,qz(...e)))}catch(n){throw Kt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gt(this.firestore,rr(this._delegate,Wz(...e)))}catch(n){throw Kt(n,"endAt()","Query.endAt()")}}isEqual(e){return HC(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Jz(this._delegate):(e==null?void 0:e.source)==="server"?n=Xz(this._delegate):n=Yz(this._delegate),n.then(i=>new E_(this.firestore,new Ur(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=hk(e),i=dk(e,r=>new E_(this.firestore,new Ur(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return ak(this._delegate,n,i)}withConverter(e){return new Gt(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class _U{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new zl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class E_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Gt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new _U(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new zl(this._firestore,i))})}isEqual(e){return ok(this._delegate,e._delegate)}}class va extends Gt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dn(this.firestore,e):null}doc(e){try{return e===void 0?new Dn(this.firestore,Bd(this._delegate)):new Dn(this.firestore,Bd(this._delegate,e))}catch(n){throw Kt(n,"doc()","CollectionReference.doc()")}}add(e){return tU(this._delegate,e).then(n=>new Dn(this.firestore,n))}isEqual(e){return WC(this._delegate,e._delegate)}withConverter(e){return new va(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Es(t){return Ie(t,We)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(...e){this._delegate=new zr(...e)}static documentId(){return new nw(Be.keyField().canonicalString())}isEqual(e){return e=te(e),e instanceof zr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._delegate=e}static serverTimestamp(){const e=uU();return e._methodName="FieldValue.serverTimestamp",new ms(e)}static delete(){const e=aU();return e._methodName="FieldValue.delete",new ms(e)}static arrayUnion(...e){const n=lU(...e);return n._methodName="FieldValue.arrayUnion",new ms(n)}static arrayRemove(...e){const n=cU(...e);return n._methodName="FieldValue.arrayRemove",new ms(n)}static increment(e){const n=hU(e);return n._methodName="FieldValue.increment",new ms(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={Firestore:uk,GeoPoint:Uf,Timestamp:Ue,Blob:Fl,Transaction:lk,WriteBatch:ck,DocumentReference:Dn,DocumentSnapshot:Bl,Query:Gt,QueryDocumentSnapshot:zl,QuerySnapshot:E_,CollectionReference:va,FieldPath:nw,FieldValue:ms,setLogLevel:gU,CACHE_SIZE_UNLIMITED:Iz};function vU(t,e){t.INTERNAL.registerComponent(new vi("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},yU)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){vU(t,(e,n)=>new uk(e,n,new mU)),t.registerVersion(dU,fU)}wU(Nt);const IU={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Nt.initializeApp(IU);const EU=()=>{const{roomId:t}=v1(),[e,n]=N.useState(null),[i,r]=N.useState(null),[s,a]=N.useState(null),[l,c]=N.useState([49.190199,16.593468]),[d,p]=N.useState(2e3);N.useEffect(()=>{if(navigator.geolocation){const S=navigator.geolocation.watchPosition(T=>{n([T.coords.latitude,T.coords.longitude])});return()=>{navigator.geolocation.clearWatch(S)}}else console.log("Геолока не надана")},[]),N.useEffect(()=>{v()},[]),N.useEffect(()=>{e&&_()},[e]);function g(S,T,C,I){const w=Math.PI*S/180,E=Math.PI*C/180,x=E-w,O=(Math.PI*I-Math.PI*T)/180,z=Math.sin(x/2)*Math.sin(x/2)+Math.cos(w)*Math.cos(E)*Math.sin(O/2)*Math.sin(O/2);return 6371*(2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z)))}N.useEffect(()=>{if(e&&i){let S=null,T=1/0;i.forEach(C=>{const I=g(e[0],e[1],C[0],C[1]);I<T&&(T=I,S=C)}),S&&T<.2?a(S):a(null)}},[e,i]);const _=()=>{g(e[0],e[1],l[0],l[1])>d/1e3&&console.log("ВИ НЕ В ЗОНІ")},v=()=>{const C=Nt.firestore().collection("rooms").doc(t).onSnapshot(I=>{if(I.exists){var w=[];I.data().users.map(E=>{var x=E.location;w.push([x.latitude,x.longitude])}),r(w)}else console.log("Документ не існує")});return()=>{C()}};return ee.jsx("div",{children:e?ee.jsxs(vO,{center:e,zoom:13,style:{height:"400px",width:"100%"},children:[ee.jsx(wO,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),ee.jsx(YE,{position:e,children:ee.jsxs(JE,{children:["Your Location",e==null?void 0:e.map(S=>ee.jsx("div",{children:S},S))]})}),i==null?void 0:i.map((S,T)=>s&&S===s&&ee.jsx(QE,{center:S,radius:200,children:ee.jsxs(JE,{children:["Position ",S.map(C=>ee.jsx("div",{children:C},C))]})},T)),i==null?void 0:i.map((S,T)=>ee.jsx(YE,{position:S},T)),ee.jsx(QE,{center:l,radius:d,className:"field_circle"})]}):ee.jsx("p",{children:"Loading map..."})})},TU="_home_page_container_o2ho8_1",PU={home_page_container:TU},SU="_button_n4u3e_1",AU={button:SU},zh=({children:t,...e})=>ee.jsx("button",{...e,className:AU.button,children:t}),RU="_myModal_1sefv_1",CU="_myModalContent_1sefv_11",kU="_active_1sefv_18",Dm={myModal:RU,myModalContent:CU,active:kU},xU=({children:t,visible:e,setVisible:n})=>{const i=[Dm.myModal];return e&&i.push(Dm.active),ee.jsx("div",{className:i.join(" "),onClick:()=>n(!1),children:ee.jsx("div",{className:Dm.myModalContent,onClick:r=>r.stopPropagation(),children:t})})},bU="_room_1xiem_1",LU={room:bU};function iw(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}const _u={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},wo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function fk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DU=NU,OU=fk,pk=new Qs("auth","Firebase",fk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new pf("@firebase/auth");function MU(t,...e){Ud.logLevel<=fe.WARN&&Ud.warn(`Auth (${Hr}): ${t}`,...e)}function Uh(t,...e){Ud.logLevel<=fe.ERROR&&Ud.error(`Auth (${Hr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t,...e){throw rw(t,...e)}function Ot(t,...e){return rw(t,...e)}function mk(t,e,n){const i=Object.assign(Object.assign({},OU()),{[e]:n});return new Qs("auth","Firebase",i).create(e,{appName:t.name})}function Fa(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Vt(t,"argument-error"),mk(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rw(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return pk.create(t,...e)}function U(t,e,...n){if(!t)throw rw(e,...n)}function pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uh(e),new Error(e)}function Yn(t,e){t||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sw(){return N0()==="http:"||N0()==="https:"}function N0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sw()||O1()||"connection"in navigator)?navigator.onLine:!0}function FU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=LO()||Ly()}get(){return VU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=new Ic(3e4,6e4);function it(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ct(t,e,n,i,r={}){return _k(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=Ra(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),gk.fetch()(yk(t,t.config.apiHost,n,l),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function _k(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},BU),e);try{const r=new $U(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw xu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw xu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw xu(t,"user-disabled",a);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw mk(t,p,d);Vt(t,p)}}catch(r){if(r instanceof Yt)throw r;Vt(t,"network-request-failed",{message:String(r)})}}async function Qi(t,e,n,i,r={}){const s=await ct(t,e,n,i,r);return"mfaPendingCredential"in s&&Vt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function yk(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ow(t.config,r):`${t.config.apiScheme}://${r}`}function UU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $U{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ot(this.auth,"network-request-failed")),zU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ot(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){return t!==void 0&&t.getResponse!==void 0}function O0(t){return t!==void 0&&t.enterprise!==void 0}class jU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return UU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t){return(await ct(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function WU(t,e){return ct(t,"GET","/v2/recaptchaConfig",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(t,e){return ct(t,"POST","/v1/accounts:delete",e)}async function GU(t,e){return ct(t,"POST","/v1/accounts:update",e)}async function KU(t,e){return ct(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZU(t,e=!1){const n=te(t),i=await n.getIdToken(e),r=Yf(i);U(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Gu(Om(r.auth_time)),issuedAtTime:Gu(Om(r.iat)),expirationTime:Gu(Om(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Om(t){return Number(t)*1e3}function Yf(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{const r=N1(n);return r?JSON.parse(r):(Uh("Failed to decode base64 JWT payload"),null)}catch(r){return Uh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function QU(t){const e=Yf(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Yt&&YU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function YU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Wi(t,KU(n,{idToken:i}));U(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?t$(s.providerUserInfo):[],l=e$(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new vk(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function XU(t){const e=te(t);await $l(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e$(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function t$(t){return t.map(e=>{var{providerId:n}=e,i=iw(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n$(t,e){const n=await _k(t,{},async()=>{const i=Ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=yk(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",gk.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return U(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await n$(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new jl;return i&&(U(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(U(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(U(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rs{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=iw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vk(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wi(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZU(this,e)}reload(){return XU(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await $l(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wi(this,HU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,l,c,d,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,T=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:E,emailVerified:x,isAnonymous:O,providerData:z,stsTokenManager:j}=n;U(E&&j,e,"internal-error");const Z=jl.fromJSON(this.name,j);U(typeof E=="string",e,"internal-error"),sr(g,e.name),sr(_,e.name),U(typeof x=="boolean",e,"internal-error"),U(typeof O=="boolean",e,"internal-error"),sr(v,e.name),sr(S,e.name),sr(T,e.name),sr(C,e.name),sr(I,e.name),sr(w,e.name);const Ee=new Rs({uid:E,auth:e,email:_,emailVerified:x,displayName:g,isAnonymous:O,photoURL:S,phoneNumber:v,tenantId:T,stsTokenManager:Z,createdAt:I,lastLoginAt:w});return z&&Array.isArray(z)&&(Ee.providerData=z.map(oe=>Object.assign({},oe))),C&&(Ee._redirectEventId=C),Ee}static async _fromIdTokenResponse(e,n,i=!1){const r=new jl;r.updateFromServerResponse(n);const s=new Rs({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await $l(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;function vn(t){Yn(t instanceof Function,"Expected a class definition");let e=M0.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wk.type="NONE";const wa=wk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,e,n){return`firebase:${t}:${e}:${n}`}class Yo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Cs(this.userKey,r.apiKey,s),this.fullPersistenceKey=Cs("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Yo(vn(wa),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||vn(wa);const a=Cs(i,e.config.apiKey,e.name);let l=null;for(const d of n)try{const p=await d._get(a);if(p){const g=Rs._fromJSON(e,p);d!==s&&(l=g),s=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Yo(s,e,i):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Yo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ik(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pk(e))return"Blackberry";if(Sk(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||Ek(e))&&!e.includes("edge/"))return"Chrome";if(Ec(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Ik(t=Ge()){return/firefox\//i.test(t)}function aw(t=Ge()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ek(t=Ge()){return/crios\//i.test(t)}function Tk(t=Ge()){return/iemobile/i.test(t)}function Ec(t=Ge()){return/android/i.test(t)}function Pk(t=Ge()){return/blackberry/i.test(t)}function Sk(t=Ge()){return/webos/i.test(t)}function Ba(t=Ge()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function i$(t=Ge()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function r$(t=Ge()){var e;return Ba(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s$(){return M1()&&document.documentMode===10}function Ak(t=Ge()){return Ba(t)||Ec(t)||Sk(t)||Pk(t)||/windows phone/i.test(t)||Tk(t)}function o$(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e=[]){let n;switch(t){case"Browser":n=V0(Ge());break;case"Worker":n=`${V0(Ge())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u$(t,e={}){return ct(t,"GET","/v2/passwordPolicy",it(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=6;class c${constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:l$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F0(this),this.idTokenSubscription=new F0(this),this.beforeStateQueue=new a$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Yo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $l(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?te(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u$(this),n=new c$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vn(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Je(t){return te(t)}class F0{constructor(e){this.auth=e,this.observer=null,this.addObserver=V1(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function uw(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Ot("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",d$().appendChild(i)})}function Ck(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const f$="https://www.google.com/recaptcha/enterprise.js?render=",p$="recaptcha-enterprise",m$="NO_RECAPTCHA";class g${constructor(e){this.type=p$,this.auth=Je(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{WU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new jU(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function r(s,a,l){const c=window.grecaptcha;O0(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(m$)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&O0(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}uw(f$+l).then(()=>{r(l,s,a)}).catch(c=>{a(c)})}}).catch(l=>{a(l)})})}}async function B0(t,e,n,i=!1){const r=new g$(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jf(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await B0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await B0(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(s)})}function _$(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function y$(t,e,n){const i=Je(t);U(i._canInitEmulator,i,"emulator-config-failed"),U(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=kk(e),{host:a,port:l}=v$(e),c=l===null?"":`:${l}`;i.config.emulator={url:`${s}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||w$()}function kk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function v$(t){const e=kk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:z0(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:z0(a)}}}function z0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function w$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e){return ct(t,"POST","/v1/accounts:resetPassword",it(t,e))}async function bk(t,e){return ct(t,"POST","/v1/accounts:update",e)}async function I$(t,e){return ct(t,"POST","/v1/accounts:update",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E$(t,e){return Qi(t,"POST","/v1/accounts:signInWithPassword",it(t,e))}async function Xf(t,e){return ct(t,"POST","/v1/accounts:sendOobCode",it(t,e))}async function T$(t,e){return Xf(t,e)}async function P$(t,e){return Xf(t,e)}async function S$(t,e){return Xf(t,e)}async function A$(t,e){return Xf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R$(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",it(t,e))}async function C$(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends za{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ql(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ql(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jf(e,n,"signInWithPassword",E$);case"emailLink":return R$(e,{email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return bk(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return C$(e,{idToken:n,email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e){return Qi(t,"POST","/v1/accounts:signInWithIdp",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$="http://localhost";class Ei extends za{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=iw(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Ei(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}buildRequest(){const e={requestUri:k$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ra(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x$(t,e){return ct(t,"POST","/v1/accounts:sendVerificationCode",it(t,e))}async function b$(t,e){return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",it(t,e))}async function L$(t,e){const n=await Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",it(t,e));if(n.temporaryProof)throw xu(t,"account-exists-with-different-credential",n);return n}const N$={USER_NOT_FOUND:"user-not-found"};async function D$(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",it(t,n),N$)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends za{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ks({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ks({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return b$(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return L$(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return D$(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new ks({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M$(t){const e=Bo(Pu(t)).link,n=e?Bo(Pu(e)).deep_link_id:null,i=Bo(Pu(t)).deep_link_id;return(i?Bo(Pu(i)).link:null)||i||n||e||t}class ep{constructor(e){var n,i,r,s,a,l;const c=Bo(Pu(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(i=c.oobCode)!==null&&i!==void 0?i:null,g=O$((r=c.mode)!==null&&r!==void 0?r:null);U(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=M$(e);try{return new ep(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.providerId=Xr.PROVIDER_ID}static credential(e,n){return ql._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ep.parseLink(n);return U(i,"argument-error"),ql._fromEmailAndCode(e,i.code,i.tenantId)}}Xr.PROVIDER_ID="password";Xr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Jo extends Ua{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return U("providerId"in n&&"signInMethod"in n,"argument-error"),Ei._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return U(e.idToken||e.accessToken,"argument-error"),Ei._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Jo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Jo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:l}=e;if(!i&&!r&&!n&&!s||!l)return null;try{return new Jo(l)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Ua{constructor(){super("facebook.com")}static credential(e){return Ei._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ei._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ai.credential(n,i)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Ua{constructor(){super("github.com")}static credential(e){return Ei._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$="http://localhost";class Ia extends za{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new Ia(i,s)}static _create(e,n){return new Ia(e,n)}buildRequest(){return{requestUri:V$,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$="saml.";class $d extends Yi{constructor(e){U(e.startsWith(F$),"argument-error"),super(e)}static credentialFromResult(e){return $d.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return $d.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ia.fromJSON(e);return U(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Ia._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Ua{constructor(){super("twitter.com")}static credential(e,n){return Ei._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return li.credential(n,i)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e){return Qi(t,"POST","/v1/accounts:signUp",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Rs._fromIdTokenResponse(e,i,r),a=U0(i);return new Fn({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=U0(i);return new Fn({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function U0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B$(t){var e;const n=Je(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Fn({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Lk(n,{returnSecureToken:!0}),r=await Fn._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Yt{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new jd(e,n,i,r)}}function Nk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z$(t,e){const n=te(t);await tp(!0,n,e);const{providerUserInfo:i}=await GU(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=Dk(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function lw(t,e,n=!1){const i=await Wi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fn._forOperation(t,"link",i)}async function tp(t,e,n){await $l(e);const i=Dk(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";U(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Wi(t,Nk(i,r,e,t),n);U(s.idToken,i,"internal-error");const a=Yf(s.idToken);U(a,i,"internal-error");const{sub:l}=a;return U(t.uid===l,i,"user-mismatch"),Fn._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e,n=!1){const i="signIn",r=await Nk(t,i,e),s=await Fn._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function np(t,e){return Mk(Je(t),e)}async function Vk(t,e){const n=te(t);return await tp(!1,n,e.providerId),lw(n,e)}async function Fk(t,e){return Ok(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U$(t,e){return Qi(t,"POST","/v1/accounts:signInWithCustomToken",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $$(t,e){const n=Je(t),i=await U$(n,{token:e,returnSecureToken:!0}),r=await Fn._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?cw._fromServerResponse(e,n):"totpInfo"in n?hw._fromServerResponse(e,n):Vt(e,"internal-error")}}class cw extends Tc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new cw(n)}}class hw extends Tc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new hw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e,n){var i;U(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),U(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(U(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(U(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(t){const e=Je(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j$(t,e,n){const i=Je(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&ip(i,r,n),await Jf(i,r,"getOobCode",P$)}async function q$(t,e,n){await xk(te(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dw(t),i})}async function W$(t,e){await I$(te(t),{oobCode:e})}async function Bk(t,e){const n=te(t),i=await xk(n,{oobCode:e}),r=i.requestType;switch(U(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(i.mfaInfo,n,"internal-error");default:U(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=Tc._fromServerResponse(Je(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function H$(t,e){const{data:n}=await Bk(te(t),e);return n.email}async function G$(t,e,n){const i=Je(t),a=await Jf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&dw(t),c}),l=await Fn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function K$(t,e,n){return np(te(t),Xr.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dw(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z$(t,e,n){const i=Je(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,l){U(l.handleCodeInApp,i,"argument-error"),l&&ip(i,a,l)}s(r,n),await Jf(i,r,"getOobCode",S$)}function Q$(t,e){const n=ep.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Y$(t,e,n){const i=te(t),r=Xr.credentialWithLink(e,n||Ul());return U(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),np(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J$(t,e){return ct(t,"POST","/v1/accounts:createAuthUri",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$(t,e){const n=sw()?Ul():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await J$(te(t),i);return r||[]}async function e4(t,e){const n=te(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ip(n.auth,r,e);const{email:s}=await T$(n.auth,r);s!==t.email&&await t.reload()}async function t4(t,e,n){const i=te(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ip(i.auth,s,n);const{email:a}=await A$(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t,e){return ct(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=te(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Wi(i,n4(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function r4(t,e){return zk(te(t),e,null)}function s4(t,e){return zk(te(t),null,e)}async function zk(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Wi(t,bk(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const a=(n=(e=Yf(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(a){const l=a!=="anonymous"&&a!=="custom"?a:null;return new Xo(s,l)}}if(!i)return null;switch(i){case"facebook.com":return new a4(s,r);case"github.com":return new u4(s,r);case"google.com":return new l4(s,r);case"twitter.com":return new c4(s,r,t.screenName||null);case"custom":case"anonymous":return new Xo(s,null);default:return new Xo(s,i,r)}}class Xo{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class Uk extends Xo{constructor(e,n,i,r){super(e,n,i),this.username=r}}class a4 extends Xo{constructor(e,n){super(e,"facebook.com",n)}}class u4 extends Uk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class l4 extends Xo{constructor(e,n){super(e,"google.com",n)}}class c4 extends Uk{constructor(e,n,i){super(e,"twitter.com",n,i)}}function h4(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:o4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new Ts("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ts("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ts._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return Ts._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=Je(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(l=>Tc._fromServerResponse(i,l));U(r.mfaPendingCredential,i,"internal-error");const a=Ts._fromMfaPendingCredential(r.mfaPendingCredential);return new fw(a,s,async l=>{const c=await l._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const d=Object.assign(Object.assign({},r),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const p=await Fn._fromIdTokenResponse(i,n.operationType,d);return await i._updateCurrentUser(p.user),p;case"reauthenticate":return U(n.user,i,"internal-error"),Fn._forOperation(n.user,n.operationType,d);default:Vt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function d4(t,e){var n;const i=te(t),r=e;return U(e.customData.operationType,i,"argument-error"),U((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),fw._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t,e){return ct(t,"POST","/v2/accounts/mfaEnrollment:start",it(t,e))}function p4(t,e){return ct(t,"POST","/v2/accounts/mfaEnrollment:finalize",it(t,e))}function m4(t,e){return ct(t,"POST","/v2/accounts/mfaEnrollment:withdraw",it(t,e))}class pw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Tc._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new pw(e)}async getSession(){return Ts._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Wi(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Wi(this.user,m4(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const Mm=new WeakMap;function g4(t){const e=te(t);return Mm.has(e)||Mm.set(e,pw._fromUser(e)),Mm.get(e)}const qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(){const t=Ge();return aw(t)||Ba(t)}const y4=1e3,v4=10;class jk extends $k{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_4()&&o$(),this.fallbackToPolling=Ak(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);s$()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,v4):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},y4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jk.type="LOCAL";const mw=jk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk extends $k{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qk.type="SESSION";const Ws=qk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new rp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async d=>d(n.origin,s)),c=await w4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const d=Pc("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return window}function E4(t){at().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return typeof at().WorkerGlobalScope<"u"&&typeof at().importScripts=="function"}async function T4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function S4(){return gw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="firebaseLocalStorageDb",A4=1,Wd="firebaseLocalStorage",Hk="fbase_key";class Sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sp(t,e){return t.transaction([Wd],e?"readwrite":"readonly").objectStore(Wd)}function R4(){const t=indexedDB.deleteDatabase(Wk);return new Sc(t).toPromise()}function T_(){const t=indexedDB.open(Wk,A4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Wd,{keyPath:Hk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Wd)?e(i):(i.close(),await R4(),e(await T_()))})})}async function $0(t,e,n){const i=sp(t,!0).put({[Hk]:e,value:n});return new Sc(i).toPromise()}async function C4(t,e){const n=sp(t,!1).get(e),i=await new Sc(n).toPromise();return i===void 0?null:i.value}function j0(t,e){const n=sp(t,!0).delete(e);return new Sc(n).toPromise()}const k4=800,x4=3;class Gk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>x4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rp._getInstance(S4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await T4(),!this.activeServiceWorker)return;this.sender=new I4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await T_();return await $0(e,qd,"1"),await j0(e,qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>$0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>C4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>j0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=sp(r,!1).getAll();return new Sc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gk.type="LOCAL";const Wl=Gk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t,e){return ct(t,"POST","/v2/accounts/mfaSignIn:start",it(t,e))}function L4(t,e){return ct(t,"POST","/v2/accounts/mfaSignIn:finalize",it(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=500,D4=6e4,yh=1e12;class O4{constructor(e){this.auth=e,this.counter=yh,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new M4(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||yh;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||yh;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||yh;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class M4{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;U(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=V4(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},D4)},N4))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function V4(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=Ck("rcb"),F4=new Ic(3e4,6e4),B4="https://www.google.com/recaptcha/api.js?";class z4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=at().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return U(U4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&D0(at().grecaptcha)?Promise.resolve(at().grecaptcha):new Promise((i,r)=>{const s=at().setTimeout(()=>{r(Ot(e,"network-request-failed"))},F4.get());at()[Vm]=()=>{at().clearTimeout(s),delete at()[Vm];const l=at().grecaptcha;if(!l||!D0(l)){r(Ot(e,"internal-error"));return}const c=l.render;l.render=(d,p)=>{const g=c(d,p);return this.counter++,g},this.hostLanguage=n,i(l)};const a=`${B4}?${Ra({onload:Vm,render:"explicit",hl:n})}`;uw(a).catch(()=>{clearTimeout(s),r(Ot(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=at().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function U4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class $4{async load(e){return new O4(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="recaptcha",j4={theme:"light",type:"image"};let q4=class{constructor(e,n,i=Object.assign({},j4)){this.parameters=i,this.type=Kk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Je(e),this.isInvisible=this.parameters.size==="invisible",U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;U(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $4:new z4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=at()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){U(sw()&&!gw(),this.auth,"internal-error"),await W4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await qU(this.auth);U(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function W4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ks._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function H4(t,e,n){const i=Je(t),r=await op(i,e,te(n));return new _w(r,s=>np(i,s))}async function G4(t,e,n){const i=te(t);await tp(!1,i,"phone");const r=await op(i.auth,e,te(n));return new _w(r,s=>Vk(i,s))}async function K4(t,e,n){const i=te(t),r=await op(i.auth,e,te(n));return new _w(r,s=>Fk(i,s))}async function op(t,e,n){var i;const r=await n.verify();try{U(typeof r=="string",t,"argument-error"),U(n.type===Kk,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return U(a.type==="enroll",t,"internal-error"),(await f4(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{U(a.type==="signin",t,"internal-error");const l=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return U(l,t,"missing-multi-factor-info"),(await b4(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await x$(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return a}}finally{n._reset()}}async function Z4(t,e){await lw(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hs=class $h{constructor(e){this.providerId=$h.PROVIDER_ID,this.auth=Je(e)}verifyPhoneNumber(e,n){return op(this.auth,e,te(n))}static credential(e,n){return ks._fromVerification(e,n)}static credentialFromResult(e){const n=e;return $h.credentialFromTaggedObject(n)}static credentialFromError(e){return $h.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?ks._fromTokenResponse(n,i):null}};Hs.PROVIDER_ID="phone";Hs.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t,e){return e?vn(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends za{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q4(t){return Mk(t.auth,new yw(t),t.bypassAuthState)}function Y4(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),Ok(n,new yw(t),t.bypassAuthState)}async function J4(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),lw(n,new yw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q4;case"linkViaPopup":case"linkViaRedirect":return J4;case"reauthViaPopup":case"reauthViaRedirect":return Y4;default:Vt(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new Ic(2e3,1e4);async function e3(t,e,n){const i=Je(t);Fa(t,e,Yi);const r=io(i,n);return new Di(i,"signInViaPopup",e,r).executeNotNull()}async function t3(t,e,n){const i=te(t);Fa(i.auth,e,Yi);const r=io(i.auth,n);return new Di(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function n3(t,e,n){const i=te(t);Fa(i.auth,e,Yi);const r=io(i.auth,n);return new Di(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class Di extends Zk{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return U(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=Pc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X4.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="pendingRedirect",Ku=new Map;class r3 extends Zk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const i=await s3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s3(t,e){const n=Yk(e),i=Qk(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function vw(t,e){return Qk(t)._set(Yk(e),"true")}function o3(){Ku.clear()}function ww(t,e){Ku.set(t._key(),e)}function Qk(t){return vn(t._redirectPersistence)}function Yk(t){return Cs(i3,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t,e,n){return u3(t,e,n)}async function u3(t,e,n){const i=Je(t);Fa(t,e,Yi),await i._initializationPromise;const r=io(i,n);return await vw(r,i),r._openRedirect(i,e,"signInViaRedirect")}function l3(t,e,n){return c3(t,e,n)}async function c3(t,e,n){const i=te(t);Fa(i.auth,e,Yi),await i.auth._initializationPromise;const r=io(i.auth,n);await vw(r,i.auth);const s=await Jk(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function h3(t,e,n){return d3(t,e,n)}async function d3(t,e,n){const i=te(t);Fa(i.auth,e,Yi),await i.auth._initializationPromise;const r=io(i.auth,n);await tp(!1,i,e.providerId),await vw(r,i.auth);const s=await Jk(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function f3(t,e){return await Je(t)._initializationPromise,ap(t,e,!1)}async function ap(t,e,n=!1){const i=Je(t),r=io(i,e),a=await new r3(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function Jk(t){const e=Pc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=10*60*1e3;class Xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!ex(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ot(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=p3&&this.cachedEventUids.clear(),this.cachedEventUids.has(q0(e))}saveEventToCache(e){this.cachedEventUids.add(q0(e)),this.lastProcessedEventTime=Date.now()}}function q0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ex({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function m3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ex(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(t,e={}){return ct(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_3=/^https?/;async function y3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tx(t);for(const n of e)try{if(v3(n))return}catch{}Vt(t,"unauthorized-domain")}function v3(t){const e=Ul(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!_3.test(n))return!1;if(g3.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=new Ic(3e4,6e4);function W0(){const t=at().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function I3(t){return new Promise((e,n)=>{var i,r,s;function a(){W0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W0(),n(Ot(t,"network-request-failed"))},timeout:w3.get()})}if(!((r=(i=at().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=at().gapi)===null||s===void 0)&&s.load)a();else{const l=Ck("iframefcb");return at()[l]=()=>{gapi.load?a():n(Ot(t,"network-request-failed"))},uw(`https://apis.google.com/js/api.js?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw jh=null,e})}let jh=null;function E3(t){return jh=jh||I3(t),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=new Ic(5e3,15e3),P3="__/auth/iframe",S3="emulator/auth/iframe",A3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C3(t){const e=t.config;U(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ow(e,S3):`https://${t.config.authDomain}/${P3}`,i={apiKey:e.apiKey,appName:t.name,v:Hr},r=R3.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ra(i).slice(1)}`}async function k3(t){const e=await E3(t),n=at().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:C3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A3,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Ot(t,"network-request-failed"),l=at().setTimeout(()=>{s(a)},T3.get());function c(){at().clearTimeout(l),r(i)}i.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b3=500,L3=600,N3="_blank",D3="http://localhost";class H0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O3(t,e,n,i=b3,r=L3){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},x3),{width:i.toString(),height:r.toString(),top:s,left:a}),d=Ge().toLowerCase();n&&(l=Ek(d)?N3:n),Ik(d)&&(e=e||D3,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[v,S])=>`${_}${v}=${S},`,"");if(r$(d)&&l!=="_self")return M3(e||"",l),new H0(null);const g=window.open(e||"",l,p);U(g,t,"popup-blocked");try{g.focus()}catch{}return new H0(g)}function M3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="__/auth/handler",F3="emulator/auth/handler",B3=encodeURIComponent("fac");async function P_(t,e,n,i,r,s){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Hr,eventId:r};if(e instanceof Yi){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",BO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries(s||{}))a[p]=g}if(e instanceof Ua){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),d=c?`#${B3}=${encodeURIComponent(c)}`:"";return`${z3(t)}?${Ra(l).slice(1)}${d}`}function z3({config:t}){return t.emulator?ow(t,F3):`https://${t.authDomain}/${V3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="webStorageSupport";class U3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=ap,this._overrideRedirectResult=ww}async _openPopup(e,n,i,r){var s;Yn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await P_(e,n,i,Ul(),r);return O3(e,a,Pc())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await P_(e,n,i,Ul(),r);return E4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Yn(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await k3(e),i=new Xk(e);return n.register("authEvent",r=>(U(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fm,{type:Fm},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Fm];a!==void 0&&n(!!a),Vt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=y3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ak()||aw()||Ba()}}const $3=U3;class j3{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return pi("unexpected MultiFactorSessionType")}}}class Iw extends j3{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Iw(e)}_finalizeEnroll(e,n,i){return p4(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return L4(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nx{constructor(){}static assertion(e){return Iw._fromCredential(e)}}nx.FACTOR_ID="phone";var G0="@firebase/auth",K0="1.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function H3(t){Lr(new vi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;U(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rk(t)},d=new h$(i,r,s,c);return _$(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Lr(new vi("auth-internal",e=>{const n=Je(e.getProvider("auth").getImmediate());return(i=>new q3(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(G0,K0,W3(t)),_i(G0,K0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=5*60;kO("authIdTokenMaxAge");H3("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=2e3;async function Z3(t,e,n){var i;const{BuildInfo:r}=Gs();Yn(e.sessionId,"AuthEvent did not contain a session ID");const s=await ej(e.sessionId),a={};return Ba()?a.ibi=r.packageName:Ec()?a.apn=r.packageName:Vt(t,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=s,P_(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,a)}async function Q3(t){const{BuildInfo:e}=Gs(),n={};Ba()?n.iosBundleId=e.packageName:Ec()?n.androidPackageName=e.packageName:Vt(t,"operation-not-supported-in-this-environment"),await tx(t,n)}function Y3(t){const{cordova:e}=Gs();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,i$()?"_blank":"_system","location=yes"),n(r)})})}async function J3(t,e,n){const{cordova:i}=Gs();let r=()=>{};try{await new Promise((s,a)=>{let l=null;function c(){var g;s();const _=(g=i.plugins.browsertab)===null||g===void 0?void 0:g.close;typeof _=="function"&&_(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function d(){l||(l=window.setTimeout(()=>{a(Ot(t,"redirect-cancelled-by-user"))},K3))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&d()}e.addPassiveListener(c),document.addEventListener("resume",d,!1),Ec()&&document.addEventListener("visibilitychange",p,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",d,!1),document.removeEventListener("visibilitychange",p,!1),l&&window.clearTimeout(l)}})}finally{r()}}function X3(t){var e,n,i,r,s,a,l,c,d,p;const g=Gs();U(typeof((e=g==null?void 0:g.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof((n=g==null?void 0:g.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U(typeof((s=(r=(i=g==null?void 0:g.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((c=(l=(a=g==null?void 0:g.cordova)===null||a===void 0?void 0:a.plugins)===null||l===void 0?void 0:l.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((p=(d=g==null?void 0:g.cordova)===null||d===void 0?void 0:d.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function ej(t){const e=tj(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function tj(t){if(Yn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=20;class ij extends Xk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function rj(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:aj(),postBody:null,tenantId:t.tenantId,error:Ot(t,"no-auth-event")}}function sj(t,e){return S_()._set(A_(t),e)}async function Z0(t){const e=await S_()._get(A_(t));return e&&await S_()._remove(A_(t)),e}function oj(t,e){var n,i;const r=lj(e);if(r.includes("/__/auth/callback")){const s=qh(r),a=s.firebaseError?uj(decodeURIComponent(s.firebaseError)):null,l=(i=(n=a==null?void 0:a.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],c=l?Ot(l):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function aj(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<nj;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function S_(){return vn(mw)}function A_(t){return Cs("authEvent",t.config.apiKey,t.name)}function uj(t){try{return JSON.parse(t)}catch{return null}}function lj(t){const e=qh(t),n=e.link?decodeURIComponent(e.link):void 0,i=qh(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return qh(r).link||r||i||n||t}function qh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Bo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=500;class hj{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ap,this._overrideRedirectResult=ww}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new ij(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Vt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){X3(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),o3(),await this._originValidation(e);const a=rj(e,i,r);await sj(e,a);const l=await Z3(e,a,n),c=await Y3(l);return J3(e,s,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q3(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=Gs(),a=setTimeout(async()=>{await Z0(e),n.onEvent(Q0())},cj),l=async p=>{clearTimeout(a);const g=await Z0(e);let _=null;g&&(p!=null&&p.url)&&(_=oj(g,p.url)),n.onEvent(_||Q0())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,l);const c=r,d=`${s.packageName.toLowerCase()}://`;Gs().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(d)&&l({url:p}),typeof c=="function")try{c(p)}catch(g){console.error(g)}}}}const dj=hj;function Q0(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ot("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e){Je(t)._logFramework(e)}var pj="@firebase/auth-compat",mj="0.4.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=1e3;function Zu(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function _j(){return Zu()==="http:"||Zu()==="https:"}function ix(t=Ge()){return!!((Zu()==="file:"||Zu()==="ionic:"||Zu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yj(){return Ly()||by()}function vj(){return M1()&&(document==null?void 0:document.documentMode)===11}function wj(t=Ge()){return/Edge\/\d+/.test(t)}function Ij(t=Ge()){return vj()||wj(t)}function rx(){try{const t=self.localStorage,e=Pc();if(t)return t.setItem(e,"1"),t.removeItem(e),Ij()?ml():!0}catch{return Ew()&&ml()}return!1}function Ew(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bm(){return(_j()||O1()||ix())&&!yj()&&rx()&&!Ew()}function sx(){return ix()&&typeof document<"u"}async function Ej(){return sx()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},gj);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Tj(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n={LOCAL:"local",NONE:"none",SESSION:"session"},yu=U,ox="persistence";function Pj(t,e){if(yu(Object.values(_n).includes(e),t,"invalid-persistence-type"),Ly()){yu(e!==_n.SESSION,t,"unsupported-persistence-type");return}if(by()){yu(e===_n.NONE,t,"unsupported-persistence-type");return}if(Ew()){yu(e===_n.NONE||e===_n.LOCAL&&ml(),t,"unsupported-persistence-type");return}yu(e===_n.NONE||rx(),t,"unsupported-persistence-type")}async function R_(t){await t._initializationPromise;const e=ax(),n=Cs(ox,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function Sj(t,e){const n=ax();if(!n)return[];const i=Cs(ox,t,e);switch(n.getItem(i)){case _n.NONE:return[wa];case _n.LOCAL:return[Wl,Ws];case _n.SESSION:return[Ws];default:return[]}}function ax(){var t;try{return((t=Tj())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=U;class gr{constructor(){this.browserResolver=vn($3),this.cordovaResolver=vn(dj),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=ap,this._overrideRedirectResult=ww}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sx()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Aj(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Ej();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){return t.unwrap()}function Rj(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){return lx(t)}function kj(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new xj(t,d4(t,e))}else if(i){const r=lx(e),s=e;r&&(s.credential=r,s.tenantId=i.tenantId||void 0,s.email=i.email||void 0,s.phoneNumber=i.phoneNumber||void 0)}}function lx(t){const{_tokenResponse:e}=t instanceof Yt?t.customData:t;if(!e)return null;if(!(t instanceof Yt)&&"temporaryProof"in e&&"phoneNumber"in e)return Hs.credentialFromResult(t);const n=e.providerId;if(!n||n===_u.PASSWORD)return null;let i;switch(n){case _u.GOOGLE:i=ai;break;case _u.FACEBOOK:i=oi;break;case _u.GITHUB:i=ui;break;case _u.TWITTER:i=li;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:l,nonce:c}=e;return!s&&!a&&!r&&!l?null:l?n.startsWith("saml.")?Ia._create(n,l):Ei._fromParams({providerId:n,signInMethod:n,pendingToken:l,idToken:r,accessToken:s}):new Jo(n).credential({idToken:r,accessToken:s,rawNonce:c})}return t instanceof Yt?i.credentialFromError(t):i.credentialFromResult(t)}function an(t,e){return e.catch(n=>{throw n instanceof Yt&&kj(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:Cj(n),additionalUserInfo:h4(n),user:Oi.getOrCreate(r)}})}async function C_(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>an(t,n.confirm(i))}}class xj{constructor(e,n){this.resolver=n,this.auth=Rj(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return an(ux(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this._delegate=e,this.multiFactor=g4(e)}static getOrCreate(e){return Oi.USER_MAP.has(e)||Oi.USER_MAP.set(e,new Oi(e)),Oi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return an(this.auth,Vk(this._delegate,e))}async linkWithPhoneNumber(e,n){return C_(this.auth,G4(this._delegate,e,n))}async linkWithPopup(e){return an(this.auth,n3(this._delegate,e,gr))}async linkWithRedirect(e){return await R_(Je(this.auth)),h3(this._delegate,e,gr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return an(this.auth,Fk(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return C_(this.auth,K4(this._delegate,e,n))}reauthenticateWithPopup(e){return an(this.auth,t3(this._delegate,e,gr))}async reauthenticateWithRedirect(e){return await R_(Je(this.auth)),l3(this._delegate,e,gr)}sendEmailVerification(e){return e4(this._delegate,e)}async unlink(e){return await z$(this._delegate,e),this}updateEmail(e){return r4(this._delegate,e)}updatePassword(e){return s4(this._delegate,e)}updatePhoneNumber(e){return Z4(this._delegate,e)}updateProfile(e){return i4(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return t4(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=U;class k_{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;vu(i,"invalid-api-key",{appName:e.name}),vu(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?gr:void 0;this._delegate=n.initialize({options:{persistence:bj(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(DU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){y$(this._delegate,e,n)}applyActionCode(e){return W$(this._delegate,e)}checkActionCode(e){return Bk(this._delegate,e)}confirmPasswordReset(e,n){return q$(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return an(this._delegate,G$(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return X$(this._delegate,e)}isSignInWithEmailLink(e){return Q$(this._delegate,e)}async getRedirectResult(){vu(Bm(),this._delegate,"operation-not-supported-in-this-environment");const e=await f3(this._delegate,gr);return e?an(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){fj(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=Y0(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=Y0(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return Z$(this._delegate,e,n)}sendPasswordResetEmail(e,n){return j$(this._delegate,e,n||void 0)}async setPersistence(e){Pj(this._delegate,e);let n;switch(e){case _n.SESSION:n=Ws;break;case _n.LOCAL:n=await vn(Wl)._isAvailable()?Wl:mw;break;case _n.NONE:n=wa;break;default:return Vt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return an(this._delegate,B$(this._delegate))}signInWithCredential(e){return an(this._delegate,np(this._delegate,e))}signInWithCustomToken(e){return an(this._delegate,$$(this._delegate,e))}signInWithEmailAndPassword(e,n){return an(this._delegate,K$(this._delegate,e,n))}signInWithEmailLink(e,n){return an(this._delegate,Y$(this._delegate,e,n))}signInWithPhoneNumber(e,n){return C_(this._delegate,H4(this._delegate,e,n))}async signInWithPopup(e){return vu(Bm(),this._delegate,"operation-not-supported-in-this-environment"),an(this._delegate,e3(this._delegate,e,gr))}async signInWithRedirect(e){return vu(Bm(),this._delegate,"operation-not-supported-in-this-environment"),await R_(this._delegate),a3(this._delegate,e,gr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return H$(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}k_.Persistence=_n;function Y0(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&Oi.getOrCreate(a)),error:e,complete:n}}function bj(t,e){const n=Sj(t,e);if(typeof self<"u"&&!n.includes(Wl)&&n.push(Wl),typeof window<"u")for(const i of[mw,Ws])n.includes(i)||n.push(i);return n.includes(wa)||n.push(wa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.providerId="phone",this._delegate=new Hs(ux(Nt.auth()))}static credential(e,n){return Hs.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Tw.PHONE_SIGN_IN_METHOD=Hs.PHONE_SIGN_IN_METHOD;Tw.PROVIDER_ID=Hs.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=U;class Nj{constructor(e,n,i=Nt.app()){var r;Lj((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new q4(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="auth-compat";function Oj(t){t.INTERNAL.registerComponent(new vi(Dj,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new k_(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:wo.EMAIL_SIGNIN,PASSWORD_RESET:wo.PASSWORD_RESET,RECOVER_EMAIL:wo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:wo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:wo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:wo.VERIFY_EMAIL}},EmailAuthProvider:Xr,FacebookAuthProvider:oi,GithubAuthProvider:ui,GoogleAuthProvider:ai,OAuthProvider:Jo,SAMLAuthProvider:$d,PhoneAuthProvider:Tw,PhoneMultiFactorGenerator:nx,RecaptchaVerifier:Nj,TwitterAuthProvider:li,Auth:k_,AuthCredential:za,Error:Yt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(pj,mj)}Oj(Nt);const Mj={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Nt.initializeApp(Mj);const Vj=()=>{const[t,e]=N.useState([]);N.useEffect(()=>{n()},[]);const n=()=>{const r=Nt.firestore().collection("rooms").onSnapshot(s=>{const a=[];s.forEach(l=>{a.push(l.id)}),e(a)});return()=>{r()}};return ee.jsx(ee.Fragment,{children:t.map(i=>ee.jsx(T1,{to:`/room/${i}`,className:LU.room,children:i},i))})},Fj={},Bj=({children:t,...e})=>ee.jsx("input",{...e,className:Fj.input,type:"text",placeholder:t}),zj={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Nt.initializeApp(zj);const Uj=()=>{const[t,e]=N.useState(!1),[n,i]=N.useState(""),[r,s]=N.useState([]),a=Ry(),l=()=>{a(`/room/${n}`)};N.useEffect(()=>{console.log(r)},[r]);const c=()=>{const p=new Nt.auth.GoogleAuthProvider;Nt.auth().signInWithPopup(p).then(g=>{const _=g.user;s(_)}).catch(g=>{const _=g.code,v=g.message;console.log(_,v)})},d=()=>{Nt.auth().signInAnonymously().then(p=>{const g=p.user;s(g)}).catch(p=>{console.error(p)})};return ee.jsxs("div",{className:PU.home_page_container,children:[ee.jsx(zh,{style:{background:"#C7B8EA"},children:"Створити кімнату"}),ee.jsx(zh,{onClick:()=>e(!t),children:"Підʼєднатися до кімнати"}),ee.jsxs(xU,{visible:t,setVisible:e,children:[ee.jsx(Bj,{children:"ID Кімнати",value:n,onChange:p=>{i(p.target.value)}}),ee.jsx(zh,{onClick:l,style:{background:"#C7B8EA"},children:"Підʼєднатися"}),ee.jsx(Vj,{})]}),ee.jsx("button",{onClick:c,children:"Google"}),ee.jsx("button",{onClick:d,children:"Anon"})]})},$j="_room_page_container_1m61b_1",jj="_back_icon_1m61b_9",qj="_users_list_container_1m61b_14",Wj="_users_list_1m61b_14",Hj="_user_1m61b_14",Gj="_ready_point_1m61b_35",Io={room_page_container:$j,back_icon:jj,users_list_container:qj,users_list:Wj,user:Hj,ready_point:Gj},Kj={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Nt.initializeApp(Kj);const Zj=()=>{var v;const{roomId:t}=v1(),[e,n]=N.useState([]),[i,r]=N.useState([]);N.useState([]);const[s,a]=N.useState(!1),l=Ry(),c=Nt.firestore();N.useEffect(()=>{Nt.auth().onAuthStateChanged(S=>{S&&r(S)})},[]),N.useEffect(()=>{d()},[]);const d=()=>{const T=c.collection("rooms").doc(t).onSnapshot(C=>{C.exists?n(C.data()):console.log("Документ не існує")});return()=>{T()}};N.useEffect(()=>{e.length!=0&&p()},[e]);const p=()=>{if(i.uid)if(e.users.some(T=>T.id===i.uid))console.log("Є");else{const T={id:i.uid,location:{latitude:49.186284,longitude:16.579003},ready:!1,color:"#20a7f5"};c.collection("rooms").doc(t).update({users:Nt.firestore.FieldValue.arrayUnion(T)})}else console.log("Не зареєстровані")},g=()=>{const S=c.collection("rooms").doc(t);s?S.get().then(T=>{if(T.exists){const w=T.data().users.map(E=>E.id===i.uid?{...E,ready:!1}:E);S.update({users:w}),a(!1)}}):s||S.get().then(T=>{if(T.exists){const w=T.data().users.map(E=>E.id===i.uid?{...E,ready:!0}:E);S.update({users:w}),a(!0)}})},_=()=>{l(-1)};return ee.jsxs("div",{className:Io.room_page_container,children:[ee.jsx("svg",{onClick:_,className:Io.back_icon,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:ee.jsx("path",{d:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"})}),ee.jsxs("div",{className:Io.users_list_container,children:[ee.jsx("h3",{children:"Список гравців:"}),ee.jsx("div",{className:Io.users_list,children:(v=e==null?void 0:e.users)==null?void 0:v.map(S=>ee.jsxs("div",{className:Io.user,children:[ee.jsx("div",{className:Io.ready_point,style:S.ready?{background:"#62FF48"}:{background:"#FD3A3A"}}),ee.jsx("p",{children:S.id})]},S.id))})]}),ee.jsx(zh,{onClick:g,style:{background:"#C7B8EA"},children:"Готовий"}),ee.jsx("p",{children:"ID Кімнати:"}),ee.jsx("div",{children:t}),ee.jsx(T1,{to:`/map/seeking/${t}`,children:"Map"})]})};function Qj(){return ee.jsx("div",{className:"App",children:ee.jsx(tO,{basename:"/fantqhns",children:ee.jsxs(ZD,{children:[ee.jsx(bh,{index:!0,element:ee.jsx(Uj,{})}),ee.jsx(bh,{path:"/room/:roomId",element:ee.jsx(Zj,{})}),ee.jsx(bh,{path:"/map/seeking/:roomId",element:ee.jsx(EU,{})})]})})})}zm.createRoot(document.getElementById("root")).render(ee.jsx(Qu.StrictMode,{children:ee.jsx(Qj,{})}));
