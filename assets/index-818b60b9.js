function Fb(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nP={exports:{}},Zd={},iP={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu=Symbol.for("react.element"),Ub=Symbol.for("react.portal"),$b=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),qb=Symbol.for("react.profiler"),Wb=Symbol.for("react.provider"),Hb=Symbol.for("react.context"),Gb=Symbol.for("react.forward_ref"),Kb=Symbol.for("react.suspense"),Zb=Symbol.for("react.memo"),Qb=Symbol.for("react.lazy"),zI=Symbol.iterator;function Yb(t){return t===null||typeof t!="object"?null:(t=zI&&t[zI]||t["@@iterator"],typeof t=="function"?t:null)}var rP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sP=Object.assign,oP={};function Pa(t,e,n){this.props=t,this.context=e,this.refs=oP,this.updater=n||rP}Pa.prototype.isReactComponent={};Pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aP(){}aP.prototype=Pa.prototype;function M_(t,e,n){this.props=t,this.context=e,this.refs=oP,this.updater=n||rP}var V_=M_.prototype=new aP;V_.constructor=M_;sP(V_,Pa.prototype);V_.isPureReactComponent=!0;var UI=Array.isArray,lP=Object.prototype.hasOwnProperty,F_={current:null},uP={key:!0,ref:!0,__self:!0,__source:!0};function cP(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)lP.call(e,i)&&!uP.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Zu,type:t,key:s,ref:a,props:r,_owner:F_.current}}function Jb(t,e){return{$$typeof:Zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function B_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zu}function Xb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $I=/\/+/g;function Hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xb(""+t.key):e.toString(36)}function Th(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zu:case Ub:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Hp(a,0):i,UI(r)?(n="",t!=null&&(n=t.replace($I,"$&/")+"/"),Th(r,e,n,"",function(d){return d})):r!=null&&(B_(r)&&(r=Jb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace($I,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",UI(t))for(var u=0;u<t.length;u++){s=t[u];var c=i+Hp(s,u);a+=Th(s,e,n,c,r)}else if(c=Yb(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=i+Hp(s,u++),a+=Th(s,e,n,c,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zc(t,e,n){if(t==null)return t;var i=[],r=0;return Th(t,i,"","",function(s){return e.call(n,s,r++)}),i}function eL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Ph={transition:null},tL={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:F_};ge.Children={map:Zc,forEach:function(t,e,n){Zc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zc(t,function(){e++}),e},toArray:function(t){return Zc(t,function(e){return e})||[]},only:function(t){if(!B_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Pa;ge.Fragment=$b;ge.Profiler=qb;ge.PureComponent=M_;ge.StrictMode=jb;ge.Suspense=Kb;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tL;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=sP({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=F_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)lP.call(e,c)&&!uP.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:Zu,type:t.type,key:r,ref:s,props:i,_owner:a}};ge.createContext=function(t){return t={$$typeof:Hb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wb,_context:t},t.Consumer=t};ge.createElement=cP;ge.createFactory=function(t){var e=cP.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:Gb,render:t}};ge.isValidElement=B_;ge.lazy=function(t){return{$$typeof:Qb,_payload:{_status:-1,_result:t},_init:eL}};ge.memo=function(t,e){return{$$typeof:Zb,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Ph.transition;Ph.transition={};try{t()}finally{Ph.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return tn.current.useCallback(t,e)};ge.useContext=function(t){return tn.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};ge.useEffect=function(t,e){return tn.current.useEffect(t,e)};ge.useId=function(){return tn.current.useId()};ge.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return tn.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};ge.useRef=function(t){return tn.current.useRef(t)};ge.useState=function(t){return tn.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return tn.current.useTransition()};ge.version="18.2.0";iP.exports=ge;var N=iP.exports;const Xl=zb(N),nL=Fb({__proto__:null,default:Xl},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iL=N,rL=Symbol.for("react.element"),sL=Symbol.for("react.fragment"),oL=Object.prototype.hasOwnProperty,aL=iL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lL={key:!0,ref:!0,__self:!0,__source:!0};function hP(t,e,n){var i,r={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)oL.call(e,i)&&!lL.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:rL,type:t,key:s,ref:a,props:r,_owner:aL.current}}Zd.Fragment=sL;Zd.jsx=hP;Zd.jsxs=hP;nP.exports=Zd;var q=nP.exports,jm={},dP={exports:{}},Sn={},fP={exports:{}},pP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,oe){var j=M.length;M.push(oe);e:for(;0<j;){var re=j-1>>>1,we=M[re];if(0<r(we,oe))M[re]=oe,M[j]=we,j=re;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var oe=M[0],j=M.pop();if(j!==oe){M[0]=j;e:for(var re=0,we=M.length,ft=we>>>1;re<ft;){var ke=2*(re+1)-1,Te=M[ke],le=ke+1,rn=M[le];if(0>r(Te,j))le<we&&0>r(rn,Te)?(M[re]=rn,M[le]=j,re=le):(M[re]=Te,M[ke]=j,re=ke);else if(le<we&&0>r(rn,j))M[re]=rn,M[le]=j,re=le;else break e}}return oe}function r(M,oe){var j=M.sortIndex-oe.sortIndex;return j!==0?j:M.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],d=[],p=1,g=null,_=3,w=!1,S=!1,P=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(M){for(var oe=n(d);oe!==null;){if(oe.callback===null)i(d);else if(oe.startTime<=M)i(d),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=n(d)}}function A(M){if(P=!1,I(M),!S)if(n(c)!==null)S=!0,Rt(D);else{var oe=n(d);oe!==null&&Ti(A,oe.startTime-M)}}function D(M,oe){S=!1,P&&(P=!1,E(K),K=-1),w=!0;var j=_;try{for(I(oe),g=n(c);g!==null&&(!(g.expirationTime>oe)||M&&!Se());){var re=g.callback;if(typeof re=="function"){g.callback=null,_=g.priorityLevel;var we=re(g.expirationTime<=oe);oe=t.unstable_now(),typeof we=="function"?g.callback=we:g===n(c)&&i(c),I(oe)}else i(c);g=n(c)}if(g!==null)var ft=!0;else{var ke=n(d);ke!==null&&Ti(A,ke.startTime-oe),ft=!1}return ft}finally{g=null,_=j,w=!1}}var O=!1,z=null,K=-1,de=5,ne=-1;function Se(){return!(t.unstable_now()-ne<de)}function et(){if(z!==null){var M=t.unstable_now();ne=M;var oe=!0;try{oe=z(!0,M)}finally{oe?Ji():(O=!1,z=null)}}else O=!1}var Ji;if(typeof y=="function")Ji=function(){y(et)};else if(typeof MessageChannel<"u"){var gn=new MessageChannel,kc=gn.port2;gn.port1.onmessage=et,Ji=function(){kc.postMessage(null)}}else Ji=function(){k(et,0)};function Rt(M){z=M,O||(O=!0,Ji())}function Ti(M,oe){K=k(function(){M(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,Rt(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var j=_;_=oe;try{return M()}finally{_=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,oe){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var j=_;_=M;try{return oe()}finally{_=j}},t.unstable_scheduleCallback=function(M,oe,j){var re=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?re+j:re):j=re,M){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=j+we,M={id:p++,callback:oe,priorityLevel:M,startTime:j,expirationTime:we,sortIndex:-1},j>re?(M.sortIndex=j,e(d,M),n(c)===null&&M===n(d)&&(P?(E(K),K=-1):P=!0,Ti(A,j-re))):(M.sortIndex=we,e(c,M),S||w||(S=!0,Rt(D))),M},t.unstable_shouldYield=Se,t.unstable_wrapCallback=function(M){var oe=_;return function(){var j=_;_=oe;try{return M.apply(this,arguments)}finally{_=j}}}})(pP);fP.exports=pP;var uL=fP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP=N,En=uL;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gP=new Set,eu={};function Ks(t,e){na(t,e),na(t+"Capture",e)}function na(t,e){for(eu[t]=e,t=0;t<e.length;t++)gP.add(e[t])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qm=Object.prototype.hasOwnProperty,cL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jI={},qI={};function hL(t){return qm.call(qI,t)?!0:qm.call(jI,t)?!1:cL.test(t)?qI[t]=!0:(jI[t]=!0,!1)}function dL(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fL(t,e,n,i){if(e===null||typeof e>"u"||dL(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var z_=/[\-:]([a-z])/g;function U_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(z_,U_);Mt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(z_,U_);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(z_,U_);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $_(t,e,n,i){var r=Mt.hasOwnProperty(e)?Mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fL(e,n,r,i)&&(n=null),i||r===null?hL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Hi=mP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qc=Symbol.for("react.element"),Co=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),j_=Symbol.for("react.strict_mode"),Wm=Symbol.for("react.profiler"),_P=Symbol.for("react.provider"),vP=Symbol.for("react.context"),q_=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Gm=Symbol.for("react.suspense_list"),W_=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),yP=Symbol.for("react.offscreen"),WI=Symbol.iterator;function rl(t){return t===null||typeof t!="object"?null:(t=WI&&t[WI]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Gp;function Tl(t){if(Gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gp=e&&e[1]||""}return`
`+Gp+t}var Kp=!1;function Zp(t,e){if(!t||Kp)return"";Kp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,u=s.length-1;1<=a&&0<=u&&r[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==s[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{Kp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tl(t):""}function pL(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=Zp(t.type,!1),t;case 11:return t=Zp(t.type.render,!1),t;case 1:return t=Zp(t.type,!0),t;default:return""}}function Km(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ko:return"Fragment";case Co:return"Portal";case Wm:return"Profiler";case j_:return"StrictMode";case Hm:return"Suspense";case Gm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vP:return(t.displayName||"Context")+".Consumer";case _P:return(t._context.displayName||"Context")+".Provider";case q_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case W_:return e=t.displayName||null,e!==null?e:Km(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Km(t(e))}catch{}}return null}function mL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Km(e);case 8:return e===j_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gL(t){var e=wP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yc(t){t._valueTracker||(t._valueTracker=gL(t))}function IP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=wP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zm(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function HI(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function EP(t,e){e=e.checked,e!=null&&$_(t,"checked",e,!1)}function Qm(t,e){EP(t,e);var n=kr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ym(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function GI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ym(t,e,n){(e!=="number"||Kh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pl=Array.isArray;function $o(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Jm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Pl(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function TP(t,e){var n=kr(e.value),i=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function ZI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jc,SP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_L=["Webkit","ms","Moz","O"];Object.keys(Dl).forEach(function(t){_L.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dl[e]=Dl[t]})});function AP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dl.hasOwnProperty(t)&&Dl[t]?(""+e).trim():e+"px"}function RP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=AP(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var vL=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eg(t,e){if(e){if(vL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function tg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ng=null;function H_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ig=null,jo=null,qo=null;function QI(t){if(t=Ju(t)){if(typeof ig!="function")throw Error(U(280));var e=t.stateNode;e&&(e=ef(e),ig(t.stateNode,t.type,e))}}function CP(t){jo?qo?qo.push(t):qo=[t]:jo=t}function kP(){if(jo){var t=jo,e=qo;if(qo=jo=null,QI(t),e)for(t=0;t<e.length;t++)QI(e[t])}}function xP(t,e){return t(e)}function bP(){}var Qp=!1;function LP(t,e,n){if(Qp)return t(e,n);Qp=!0;try{return xP(t,e,n)}finally{Qp=!1,(jo!==null||qo!==null)&&(bP(),kP())}}function nu(t,e){var n=t.stateNode;if(n===null)return null;var i=ef(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var rg=!1;if(Bi)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){rg=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{rg=!1}function yL(t,e,n,i,r,s,a,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Ol=!1,Zh=null,Qh=!1,sg=null,wL={onError:function(t){Ol=!0,Zh=t}};function IL(t,e,n,i,r,s,a,u,c){Ol=!1,Zh=null,yL.apply(wL,arguments)}function EL(t,e,n,i,r,s,a,u,c){if(IL.apply(this,arguments),Ol){if(Ol){var d=Zh;Ol=!1,Zh=null}else throw Error(U(198));Qh||(Qh=!0,sg=d)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function NP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function YI(t){if(Zs(t)!==t)throw Error(U(188))}function TL(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return YI(r),t;if(s===i)return YI(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=s;break}if(u===i){a=!0,i=r,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,i=r;break}if(u===i){a=!0,i=s,n=r;break}u=u.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function DP(t){return t=TL(t),t!==null?OP(t):null}function OP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OP(t);if(e!==null)return e;t=t.sibling}return null}var MP=En.unstable_scheduleCallback,JI=En.unstable_cancelCallback,PL=En.unstable_shouldYield,SL=En.unstable_requestPaint,nt=En.unstable_now,AL=En.unstable_getCurrentPriorityLevel,G_=En.unstable_ImmediatePriority,VP=En.unstable_UserBlockingPriority,Yh=En.unstable_NormalPriority,RL=En.unstable_LowPriority,FP=En.unstable_IdlePriority,Qd=null,mi=null;function CL(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(Qd,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:bL,kL=Math.log,xL=Math.LN2;function bL(t){return t>>>=0,t===0?32:31-(kL(t)/xL|0)|0}var Xc=64,eh=4194304;function Sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Sl(u):(s&=a,s!==0&&(i=Sl(s)))}else a=n&~r,a!==0?i=Sl(a):s!==0&&(i=Sl(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Hn(e),r=1<<n,i|=t[n],e&=~r;return i}function LL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NL(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Hn(s),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=LL(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function og(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BP(){var t=Xc;return Xc<<=1,!(Xc&4194240)&&(Xc=64),t}function Yp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function DL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Hn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function K_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Hn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Re=0;function zP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UP,Z_,$P,jP,qP,ag=!1,th=[],vr=null,yr=null,wr=null,iu=new Map,ru=new Map,ur=[],OL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XI(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":iu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(e.pointerId)}}function ol(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ju(e),e!==null&&Z_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ML(t,e,n,i,r){switch(e){case"focusin":return vr=ol(vr,t,e,n,i,r),!0;case"dragenter":return yr=ol(yr,t,e,n,i,r),!0;case"mouseover":return wr=ol(wr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return iu.set(s,ol(iu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ru.set(s,ol(ru.get(s)||null,t,e,n,i,r)),!0}return!1}function WP(t){var e=gs(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=NP(n),e!==null){t.blockedOn=e,qP(t.priority,function(){$P(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ng=i,n.target.dispatchEvent(i),ng=null}else return e=Ju(n),e!==null&&Z_(e),t.blockedOn=n,!1;e.shift()}return!0}function eE(t,e,n){Sh(t)&&n.delete(e)}function VL(){ag=!1,vr!==null&&Sh(vr)&&(vr=null),yr!==null&&Sh(yr)&&(yr=null),wr!==null&&Sh(wr)&&(wr=null),iu.forEach(eE),ru.forEach(eE)}function al(t,e){t.blockedOn===e&&(t.blockedOn=null,ag||(ag=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,VL)))}function su(t){function e(r){return al(r,t)}if(0<th.length){al(th[0],t);for(var n=1;n<th.length;n++){var i=th[n];i.blockedOn===t&&(i.blockedOn=null)}}for(vr!==null&&al(vr,t),yr!==null&&al(yr,t),wr!==null&&al(wr,t),iu.forEach(e),ru.forEach(e),n=0;n<ur.length;n++)i=ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)WP(n),n.blockedOn===null&&ur.shift()}var Wo=Hi.ReactCurrentBatchConfig,Xh=!0;function FL(t,e,n,i){var r=Re,s=Wo.transition;Wo.transition=null;try{Re=1,Q_(t,e,n,i)}finally{Re=r,Wo.transition=s}}function BL(t,e,n,i){var r=Re,s=Wo.transition;Wo.transition=null;try{Re=4,Q_(t,e,n,i)}finally{Re=r,Wo.transition=s}}function Q_(t,e,n,i){if(Xh){var r=lg(t,e,n,i);if(r===null)am(t,e,i,ed,n),XI(t,i);else if(ML(r,t,e,n,i))i.stopPropagation();else if(XI(t,i),e&4&&-1<OL.indexOf(t)){for(;r!==null;){var s=Ju(r);if(s!==null&&UP(s),s=lg(t,e,n,i),s===null&&am(t,e,i,ed,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else am(t,e,i,null,n)}}var ed=null;function lg(t,e,n,i){if(ed=null,t=H_(i),t=gs(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=NP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ed=t,null}function HP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AL()){case G_:return 1;case VP:return 4;case Yh:case RL:return 16;case FP:return 536870912;default:return 16}default:return 16}}var fr=null,Y_=null,Ah=null;function GP(){if(Ah)return Ah;var t,e=Y_,n=e.length,i,r="value"in fr?fr.value:fr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Ah=r.slice(t,1<i?1-i:void 0)}function Rh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nh(){return!0}function tE(){return!1}function An(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nh:tE,this.isPropagationStopped=tE,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),e}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},J_=An(Sa),Yu=Ge({},Sa,{view:0,detail:0}),zL=An(Yu),Jp,Xp,ll,Yd=Ge({},Yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ll&&(ll&&t.type==="mousemove"?(Jp=t.screenX-ll.screenX,Xp=t.screenY-ll.screenY):Xp=Jp=0,ll=t),Jp)},movementY:function(t){return"movementY"in t?t.movementY:Xp}}),nE=An(Yd),UL=Ge({},Yd,{dataTransfer:0}),$L=An(UL),jL=Ge({},Yu,{relatedTarget:0}),em=An(jL),qL=Ge({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),WL=An(qL),HL=Ge({},Sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GL=An(HL),KL=Ge({},Sa,{data:0}),iE=An(KL),ZL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YL[t])?!!e[t]:!1}function X_(){return JL}var XL=Ge({},Yu,{key:function(t){if(t.key){var e=ZL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X_,charCode:function(t){return t.type==="keypress"?Rh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eN=An(XL),tN=Ge({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rE=An(tN),nN=Ge({},Yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X_}),iN=An(nN),rN=Ge({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),sN=An(rN),oN=Ge({},Yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aN=An(oN),lN=[9,13,27,32],ev=Bi&&"CompositionEvent"in window,Ml=null;Bi&&"documentMode"in document&&(Ml=document.documentMode);var uN=Bi&&"TextEvent"in window&&!Ml,KP=Bi&&(!ev||Ml&&8<Ml&&11>=Ml),sE=String.fromCharCode(32),oE=!1;function ZP(t,e){switch(t){case"keyup":return lN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xo=!1;function cN(t,e){switch(t){case"compositionend":return QP(e);case"keypress":return e.which!==32?null:(oE=!0,sE);case"textInput":return t=e.data,t===sE&&oE?null:t;default:return null}}function hN(t,e){if(xo)return t==="compositionend"||!ev&&ZP(t,e)?(t=GP(),Ah=Y_=fr=null,xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KP&&e.locale!=="ko"?null:e.data;default:return null}}var dN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dN[t.type]:e==="textarea"}function YP(t,e,n,i){CP(i),e=td(e,"onChange"),0<e.length&&(n=new J_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Vl=null,ou=null;function fN(t){lS(t,0)}function Jd(t){var e=No(t);if(IP(e))return t}function pN(t,e){if(t==="change")return e}var JP=!1;if(Bi){var tm;if(Bi){var nm="oninput"in document;if(!nm){var lE=document.createElement("div");lE.setAttribute("oninput","return;"),nm=typeof lE.oninput=="function"}tm=nm}else tm=!1;JP=tm&&(!document.documentMode||9<document.documentMode)}function uE(){Vl&&(Vl.detachEvent("onpropertychange",XP),ou=Vl=null)}function XP(t){if(t.propertyName==="value"&&Jd(ou)){var e=[];YP(e,ou,t,H_(t)),LP(fN,e)}}function mN(t,e,n){t==="focusin"?(uE(),Vl=e,ou=n,Vl.attachEvent("onpropertychange",XP)):t==="focusout"&&uE()}function gN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jd(ou)}function _N(t,e){if(t==="click")return Jd(e)}function vN(t,e){if(t==="input"||t==="change")return Jd(e)}function yN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:yN;function au(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!qm.call(e,r)||!Kn(t[r],e[r]))return!1}return!0}function cE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hE(t,e){var n=cE(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cE(n)}}function eS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tS(){for(var t=window,e=Kh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kh(t.document)}return e}function tv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wN(t){var e=tS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eS(n.ownerDocument.documentElement,n)){if(i!==null&&tv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=hE(n,s);var a=hE(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IN=Bi&&"documentMode"in document&&11>=document.documentMode,bo=null,ug=null,Fl=null,cg=!1;function dE(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cg||bo==null||bo!==Kh(i)||(i=bo,"selectionStart"in i&&tv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fl&&au(Fl,i)||(Fl=i,i=td(ug,"onSelect"),0<i.length&&(e=new J_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=bo)))}function ih(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lo={animationend:ih("Animation","AnimationEnd"),animationiteration:ih("Animation","AnimationIteration"),animationstart:ih("Animation","AnimationStart"),transitionend:ih("Transition","TransitionEnd")},im={},nS={};Bi&&(nS=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Xd(t){if(im[t])return im[t];if(!Lo[t])return t;var e=Lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nS)return im[t]=e[n];return t}var iS=Xd("animationend"),rS=Xd("animationiteration"),sS=Xd("animationstart"),oS=Xd("transitionend"),aS=new Map,fE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(t,e){aS.set(t,e),Ks(e,[t])}for(var rm=0;rm<fE.length;rm++){var sm=fE[rm],EN=sm.toLowerCase(),TN=sm[0].toUpperCase()+sm.slice(1);jr(EN,"on"+TN)}jr(iS,"onAnimationEnd");jr(rS,"onAnimationIteration");jr(sS,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(oS,"onTransitionEnd");na("onMouseEnter",["mouseout","mouseover"]);na("onMouseLeave",["mouseout","mouseover"]);na("onPointerEnter",["pointerout","pointerover"]);na("onPointerLeave",["pointerout","pointerover"]);Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function pE(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,EL(i,e,void 0,t),t.currentTarget=null}function lS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==s&&r.isPropagationStopped())break e;pE(r,u,d),s=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,d=u.currentTarget,u=u.listener,c!==s&&r.isPropagationStopped())break e;pE(r,u,d),s=c}}}if(Qh)throw t=sg,Qh=!1,sg=null,t}function De(t,e){var n=e[mg];n===void 0&&(n=e[mg]=new Set);var i=t+"__bubble";n.has(i)||(uS(e,t,2,!1),n.add(i))}function om(t,e,n){var i=0;e&&(i|=4),uS(n,t,i,e)}var rh="_reactListening"+Math.random().toString(36).slice(2);function lu(t){if(!t[rh]){t[rh]=!0,gP.forEach(function(n){n!=="selectionchange"&&(PN.has(n)||om(n,!1,t),om(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rh]||(e[rh]=!0,om("selectionchange",!1,e))}}function uS(t,e,n,i){switch(HP(e)){case 1:var r=FL;break;case 4:r=BL;break;default:r=Q_}n=r.bind(null,e,n,t),r=void 0,!rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function am(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=gs(u),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}u=u.parentNode}}i=i.return}LP(function(){var d=s,p=H_(n),g=[];e:{var _=aS.get(t);if(_!==void 0){var w=J_,S=t;switch(t){case"keypress":if(Rh(n)===0)break e;case"keydown":case"keyup":w=eN;break;case"focusin":S="focus",w=em;break;case"focusout":S="blur",w=em;break;case"beforeblur":case"afterblur":w=em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=nE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=$L;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=iN;break;case iS:case rS:case sS:w=WL;break;case oS:w=sN;break;case"scroll":w=zL;break;case"wheel":w=aN;break;case"copy":case"cut":case"paste":w=GL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=rE}var P=(e&4)!==0,k=!P&&t==="scroll",E=P?_!==null?_+"Capture":null:_;P=[];for(var y=d,I;y!==null;){I=y;var A=I.stateNode;if(I.tag===5&&A!==null&&(I=A,E!==null&&(A=nu(y,E),A!=null&&P.push(uu(y,A,I)))),k)break;y=y.return}0<P.length&&(_=new w(_,S,null,n,p),g.push({event:_,listeners:P}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",_&&n!==ng&&(S=n.relatedTarget||n.fromElement)&&(gs(S)||S[zi]))break e;if((w||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=d,S=S?gs(S):null,S!==null&&(k=Zs(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=d),w!==S)){if(P=nE,A="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(P=rE,A="onPointerLeave",E="onPointerEnter",y="pointer"),k=w==null?_:No(w),I=S==null?_:No(S),_=new P(A,y+"leave",w,n,p),_.target=k,_.relatedTarget=I,A=null,gs(p)===d&&(P=new P(E,y+"enter",S,n,p),P.target=I,P.relatedTarget=k,A=P),k=A,w&&S)t:{for(P=w,E=S,y=0,I=P;I;I=po(I))y++;for(I=0,A=E;A;A=po(A))I++;for(;0<y-I;)P=po(P),y--;for(;0<I-y;)E=po(E),I--;for(;y--;){if(P===E||E!==null&&P===E.alternate)break t;P=po(P),E=po(E)}P=null}else P=null;w!==null&&mE(g,_,w,P,!1),S!==null&&k!==null&&mE(g,k,S,P,!0)}}e:{if(_=d?No(d):window,w=_.nodeName&&_.nodeName.toLowerCase(),w==="select"||w==="input"&&_.type==="file")var D=pN;else if(aE(_))if(JP)D=vN;else{D=gN;var O=mN}else(w=_.nodeName)&&w.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(D=_N);if(D&&(D=D(t,d))){YP(g,D,n,p);break e}O&&O(t,_,d),t==="focusout"&&(O=_._wrapperState)&&O.controlled&&_.type==="number"&&Ym(_,"number",_.value)}switch(O=d?No(d):window,t){case"focusin":(aE(O)||O.contentEditable==="true")&&(bo=O,ug=d,Fl=null);break;case"focusout":Fl=ug=bo=null;break;case"mousedown":cg=!0;break;case"contextmenu":case"mouseup":case"dragend":cg=!1,dE(g,n,p);break;case"selectionchange":if(IN)break;case"keydown":case"keyup":dE(g,n,p)}var z;if(ev)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else xo?ZP(t,n)&&(K="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(KP&&n.locale!=="ko"&&(xo||K!=="onCompositionStart"?K==="onCompositionEnd"&&xo&&(z=GP()):(fr=p,Y_="value"in fr?fr.value:fr.textContent,xo=!0)),O=td(d,K),0<O.length&&(K=new iE(K,t,null,n,p),g.push({event:K,listeners:O}),z?K.data=z:(z=QP(n),z!==null&&(K.data=z)))),(z=uN?cN(t,n):hN(t,n))&&(d=td(d,"onBeforeInput"),0<d.length&&(p=new iE("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=z))}lS(g,e)})}function uu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function td(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=nu(t,n),s!=null&&i.unshift(uu(t,s,r)),s=nu(t,e),s!=null&&i.push(uu(t,s,r))),t=t.return}return i}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mE(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&d!==null&&(u=d,r?(c=nu(n,s),c!=null&&a.unshift(uu(n,c,u))):r||(c=nu(n,s),c!=null&&a.push(uu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var SN=/\r\n?/g,AN=/\u0000|\uFFFD/g;function gE(t){return(typeof t=="string"?t:""+t).replace(SN,`
`).replace(AN,"")}function sh(t,e,n){if(e=gE(e),gE(t)!==e&&n)throw Error(U(425))}function nd(){}var hg=null,dg=null;function fg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pg=typeof setTimeout=="function"?setTimeout:void 0,RN=typeof clearTimeout=="function"?clearTimeout:void 0,_E=typeof Promise=="function"?Promise:void 0,CN=typeof queueMicrotask=="function"?queueMicrotask:typeof _E<"u"?function(t){return _E.resolve(null).then(t).catch(kN)}:pg;function kN(t){setTimeout(function(){throw t})}function lm(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),su(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);su(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Aa=Math.random().toString(36).slice(2),ri="__reactFiber$"+Aa,cu="__reactProps$"+Aa,zi="__reactContainer$"+Aa,mg="__reactEvents$"+Aa,xN="__reactListeners$"+Aa,bN="__reactHandles$"+Aa;function gs(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zi]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vE(t);t!==null;){if(n=t[ri])return n;t=vE(t)}return e}t=n,n=t.parentNode}return null}function Ju(t){return t=t[ri]||t[zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function No(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function ef(t){return t[cu]||null}var gg=[],Do=-1;function qr(t){return{current:t}}function Ve(t){0>Do||(t.current=gg[Do],gg[Do]=null,Do--)}function Le(t,e){Do++,gg[Do]=t.current,t.current=e}var xr={},qt=qr(xr),fn=qr(!1),xs=xr;function ia(t,e){var n=t.type.contextTypes;if(!n)return xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function pn(t){return t=t.childContextTypes,t!=null}function id(){Ve(fn),Ve(qt)}function yE(t,e,n){if(qt.current!==xr)throw Error(U(168));Le(qt,e),Le(fn,n)}function cS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,mL(t)||"Unknown",r));return Ge({},n,i)}function rd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,xs=qt.current,Le(qt,t),Le(fn,fn.current),!0}function wE(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=cS(t,e,xs),i.__reactInternalMemoizedMergedChildContext=t,Ve(fn),Ve(qt),Le(qt,t)):Ve(fn),Le(fn,n)}var ki=null,tf=!1,um=!1;function hS(t){ki===null?ki=[t]:ki.push(t)}function LN(t){tf=!0,hS(t)}function Wr(){if(!um&&ki!==null){um=!0;var t=0,e=Re;try{var n=ki;for(Re=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ki=null,tf=!1}catch(r){throw ki!==null&&(ki=ki.slice(t+1)),MP(G_,Wr),r}finally{Re=e,um=!1}}return null}var Oo=[],Mo=0,sd=null,od=0,xn=[],bn=0,bs=null,xi=1,bi="";function as(t,e){Oo[Mo++]=od,Oo[Mo++]=sd,sd=t,od=e}function dS(t,e,n){xn[bn++]=xi,xn[bn++]=bi,xn[bn++]=bs,bs=t;var i=xi;t=bi;var r=32-Hn(i)-1;i&=~(1<<r),n+=1;var s=32-Hn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,xi=1<<32-Hn(e)+r|n<<r|i,bi=s+t}else xi=1<<s|n<<r|i,bi=t}function nv(t){t.return!==null&&(as(t,1),dS(t,1,0))}function iv(t){for(;t===sd;)sd=Oo[--Mo],Oo[Mo]=null,od=Oo[--Mo],Oo[Mo]=null;for(;t===bs;)bs=xn[--bn],xn[bn]=null,bi=xn[--bn],xn[bn]=null,xi=xn[--bn],xn[bn]=null}var In=null,yn=null,Fe=!1,qn=null;function fS(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function IE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,In=t,yn=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,In=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:xi,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,In=t,yn=null,!0):!1;default:return!1}}function _g(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vg(t){if(Fe){var e=yn;if(e){var n=e;if(!IE(t,e)){if(_g(t))throw Error(U(418));e=Ir(n.nextSibling);var i=In;e&&IE(t,e)?fS(i,n):(t.flags=t.flags&-4097|2,Fe=!1,In=t)}}else{if(_g(t))throw Error(U(418));t.flags=t.flags&-4097|2,Fe=!1,In=t}}}function EE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;In=t}function oh(t){if(t!==In)return!1;if(!Fe)return EE(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fg(t.type,t.memoizedProps)),e&&(e=yn)){if(_g(t))throw pS(),Error(U(418));for(;e;)fS(t,e),e=Ir(e.nextSibling)}if(EE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=In?Ir(t.stateNode.nextSibling):null;return!0}function pS(){for(var t=yn;t;)t=Ir(t.nextSibling)}function ra(){yn=In=null,Fe=!1}function rv(t){qn===null?qn=[t]:qn.push(t)}var NN=Hi.ReactCurrentBatchConfig;function $n(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ad=qr(null),ld=null,Vo=null,sv=null;function ov(){sv=Vo=ld=null}function av(t){var e=ad.current;Ve(ad),t._currentValue=e}function yg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){ld=t,sv=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(sv!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(ld===null)throw Error(U(308));Vo=t,ld.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var _s=null;function lv(t){_s===null?_s=[t]:_s.push(t)}function mS(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,lv(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ui(t,i)}function Ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function uv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ie&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ui(t,n)}return r=i.interleaved,r===null?(e.next=e,lv(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ui(t,n)}function Ch(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,K_(t,n)}}function TE(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ud(t,e,n,i){var r=t.updateQueue;lr=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==a&&(u===null?p.firstBaseUpdate=d:u.next=d,p.lastBaseUpdate=c))}if(s!==null){var g=r.baseState;a=0,p=d=c=null,u=s;do{var _=u.lane,w=u.eventTime;if((i&_)===_){p!==null&&(p=p.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,P=u;switch(_=e,w=n,P.tag){case 1:if(S=P.payload,typeof S=="function"){g=S.call(w,g,_);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=P.payload,_=typeof S=="function"?S.call(w,g,_):S,_==null)break e;g=Ge({},g,_);break e;case 2:lr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else w={eventTime:w,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(d=p=w,c=g):p=p.next=w,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(1);if(p===null&&(c=g),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ns|=a,t.lanes=a,t.memoizedState=g}}function PE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var _S=new mP.Component().refs;function wg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nf={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Qt(),r=Pr(t),s=Mi(i,r);s.payload=e,n!=null&&(s.callback=n),e=Er(t,s,r),e!==null&&(Gn(e,t,r,i),Ch(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Qt(),r=Pr(t),s=Mi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Er(t,s,r),e!==null&&(Gn(e,t,r,i),Ch(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),i=Pr(t),r=Mi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Er(t,r,i),e!==null&&(Gn(e,t,i,n),Ch(e,t,i))}};function SE(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!au(n,i)||!au(r,s):!0}function vS(t,e,n){var i=!1,r=xr,s=e.contextType;return typeof s=="object"&&s!==null?s=Mn(s):(r=pn(e)?xs:qt.current,i=e.contextTypes,s=(i=i!=null)?ia(t,r):xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function AE(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&nf.enqueueReplaceState(e,e.state,null)}function Ig(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=_S,uv(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Mn(s):(s=pn(e)?xs:qt.current,r.context=ia(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wg(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&nf.enqueueReplaceState(r,r.state,null),ud(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ul(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=r.refs;u===_S&&(u=r.refs={}),a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function ah(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function RE(t){var e=t._init;return e(t._payload)}function yS(t){function e(E,y){if(t){var I=E.deletions;I===null?(E.deletions=[y],E.flags|=16):I.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function i(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function r(E,y){return E=Sr(E,y),E.index=0,E.sibling=null,E}function s(E,y,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<y?(E.flags|=2,y):I):(E.flags|=2,y)):(E.flags|=1048576,y)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function u(E,y,I,A){return y===null||y.tag!==6?(y=gm(I,E.mode,A),y.return=E,y):(y=r(y,I),y.return=E,y)}function c(E,y,I,A){var D=I.type;return D===ko?p(E,y,I.props.children,A,I.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&RE(D)===y.type)?(A=r(y,I.props),A.ref=ul(E,y,I),A.return=E,A):(A=Dh(I.type,I.key,I.props,null,E.mode,A),A.ref=ul(E,y,I),A.return=E,A)}function d(E,y,I,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==I.containerInfo||y.stateNode.implementation!==I.implementation?(y=_m(I,E.mode,A),y.return=E,y):(y=r(y,I.children||[]),y.return=E,y)}function p(E,y,I,A,D){return y===null||y.tag!==7?(y=Ss(I,E.mode,A,D),y.return=E,y):(y=r(y,I),y.return=E,y)}function g(E,y,I){if(typeof y=="string"&&y!==""||typeof y=="number")return y=gm(""+y,E.mode,I),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qc:return I=Dh(y.type,y.key,y.props,null,E.mode,I),I.ref=ul(E,null,y),I.return=E,I;case Co:return y=_m(y,E.mode,I),y.return=E,y;case ar:var A=y._init;return g(E,A(y._payload),I)}if(Pl(y)||rl(y))return y=Ss(y,E.mode,I,null),y.return=E,y;ah(E,y)}return null}function _(E,y,I,A){var D=y!==null?y.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return D!==null?null:u(E,y,""+I,A);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Qc:return I.key===D?c(E,y,I,A):null;case Co:return I.key===D?d(E,y,I,A):null;case ar:return D=I._init,_(E,y,D(I._payload),A)}if(Pl(I)||rl(I))return D!==null?null:p(E,y,I,A,null);ah(E,I)}return null}function w(E,y,I,A,D){if(typeof A=="string"&&A!==""||typeof A=="number")return E=E.get(I)||null,u(y,E,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Qc:return E=E.get(A.key===null?I:A.key)||null,c(y,E,A,D);case Co:return E=E.get(A.key===null?I:A.key)||null,d(y,E,A,D);case ar:var O=A._init;return w(E,y,I,O(A._payload),D)}if(Pl(A)||rl(A))return E=E.get(I)||null,p(y,E,A,D,null);ah(y,A)}return null}function S(E,y,I,A){for(var D=null,O=null,z=y,K=y=0,de=null;z!==null&&K<I.length;K++){z.index>K?(de=z,z=null):de=z.sibling;var ne=_(E,z,I[K],A);if(ne===null){z===null&&(z=de);break}t&&z&&ne.alternate===null&&e(E,z),y=s(ne,y,K),O===null?D=ne:O.sibling=ne,O=ne,z=de}if(K===I.length)return n(E,z),Fe&&as(E,K),D;if(z===null){for(;K<I.length;K++)z=g(E,I[K],A),z!==null&&(y=s(z,y,K),O===null?D=z:O.sibling=z,O=z);return Fe&&as(E,K),D}for(z=i(E,z);K<I.length;K++)de=w(z,E,K,I[K],A),de!==null&&(t&&de.alternate!==null&&z.delete(de.key===null?K:de.key),y=s(de,y,K),O===null?D=de:O.sibling=de,O=de);return t&&z.forEach(function(Se){return e(E,Se)}),Fe&&as(E,K),D}function P(E,y,I,A){var D=rl(I);if(typeof D!="function")throw Error(U(150));if(I=D.call(I),I==null)throw Error(U(151));for(var O=D=null,z=y,K=y=0,de=null,ne=I.next();z!==null&&!ne.done;K++,ne=I.next()){z.index>K?(de=z,z=null):de=z.sibling;var Se=_(E,z,ne.value,A);if(Se===null){z===null&&(z=de);break}t&&z&&Se.alternate===null&&e(E,z),y=s(Se,y,K),O===null?D=Se:O.sibling=Se,O=Se,z=de}if(ne.done)return n(E,z),Fe&&as(E,K),D;if(z===null){for(;!ne.done;K++,ne=I.next())ne=g(E,ne.value,A),ne!==null&&(y=s(ne,y,K),O===null?D=ne:O.sibling=ne,O=ne);return Fe&&as(E,K),D}for(z=i(E,z);!ne.done;K++,ne=I.next())ne=w(z,E,K,ne.value,A),ne!==null&&(t&&ne.alternate!==null&&z.delete(ne.key===null?K:ne.key),y=s(ne,y,K),O===null?D=ne:O.sibling=ne,O=ne);return t&&z.forEach(function(et){return e(E,et)}),Fe&&as(E,K),D}function k(E,y,I,A){if(typeof I=="object"&&I!==null&&I.type===ko&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Qc:e:{for(var D=I.key,O=y;O!==null;){if(O.key===D){if(D=I.type,D===ko){if(O.tag===7){n(E,O.sibling),y=r(O,I.props.children),y.return=E,E=y;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&RE(D)===O.type){n(E,O.sibling),y=r(O,I.props),y.ref=ul(E,O,I),y.return=E,E=y;break e}n(E,O);break}else e(E,O);O=O.sibling}I.type===ko?(y=Ss(I.props.children,E.mode,A,I.key),y.return=E,E=y):(A=Dh(I.type,I.key,I.props,null,E.mode,A),A.ref=ul(E,y,I),A.return=E,E=A)}return a(E);case Co:e:{for(O=I.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===I.containerInfo&&y.stateNode.implementation===I.implementation){n(E,y.sibling),y=r(y,I.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=_m(I,E.mode,A),y.return=E,E=y}return a(E);case ar:return O=I._init,k(E,y,O(I._payload),A)}if(Pl(I))return S(E,y,I,A);if(rl(I))return P(E,y,I,A);ah(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,y!==null&&y.tag===6?(n(E,y.sibling),y=r(y,I),y.return=E,E=y):(n(E,y),y=gm(I,E.mode,A),y.return=E,E=y),a(E)):n(E,y)}return k}var sa=yS(!0),wS=yS(!1),Xu={},gi=qr(Xu),hu=qr(Xu),du=qr(Xu);function vs(t){if(t===Xu)throw Error(U(174));return t}function cv(t,e){switch(Le(du,e),Le(hu,t),Le(gi,Xu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xm(e,t)}Ve(gi),Le(gi,e)}function oa(){Ve(gi),Ve(hu),Ve(du)}function IS(t){vs(du.current);var e=vs(gi.current),n=Xm(e,t.type);e!==n&&(Le(hu,t),Le(gi,n))}function hv(t){hu.current===t&&(Ve(gi),Ve(hu))}var qe=qr(0);function cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cm=[];function dv(){for(var t=0;t<cm.length;t++)cm[t]._workInProgressVersionPrimary=null;cm.length=0}var kh=Hi.ReactCurrentDispatcher,hm=Hi.ReactCurrentBatchConfig,Ls=0,We=null,pt=null,yt=null,hd=!1,Bl=!1,fu=0,DN=0;function Ft(){throw Error(U(321))}function fv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function pv(t,e,n,i,r,s){if(Ls=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kh.current=t===null||t.memoizedState===null?FN:BN,t=n(i,r),Bl){s=0;do{if(Bl=!1,fu=0,25<=s)throw Error(U(301));s+=1,yt=pt=null,e.updateQueue=null,kh.current=zN,t=n(i,r)}while(Bl)}if(kh.current=dd,e=pt!==null&&pt.next!==null,Ls=0,yt=pt=We=null,hd=!1,e)throw Error(U(300));return t}function mv(){var t=fu!==0;return fu=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?We.memoizedState=yt=t:yt=yt.next=t,yt}function Vn(){if(pt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=yt===null?We.memoizedState:yt.next;if(e!==null)yt=e,pt=t;else{if(t===null)throw Error(U(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},yt===null?We.memoizedState=yt=t:yt=yt.next=t}return yt}function pu(t,e){return typeof e=="function"?e(t):e}function dm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=pt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var u=a=null,c=null,d=s;do{var p=d.lane;if((Ls&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,We.lanes|=p,Ns|=p}d=d.next}while(d!==null&&d!==s);c===null?a=i:c.next=u,Kn(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,We.lanes|=s,Ns|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Kn(s,e.memoizedState)||(un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ES(){}function TS(t,e){var n=We,i=Vn(),r=e(),s=!Kn(i.memoizedState,r);if(s&&(i.memoizedState=r,un=!0),i=i.queue,gv(AS.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,mu(9,SS.bind(null,n,i,r,e),void 0,null),It===null)throw Error(U(349));Ls&30||PS(n,e,r)}return r}function PS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SS(t,e,n,i){e.value=n,e.getSnapshot=i,RS(e)&&CS(t)}function AS(t,e,n){return n(function(){RS(e)&&CS(t)})}function RS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function CS(t){var e=Ui(t,1);e!==null&&Gn(e,t,1,-1)}function CE(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:t},e.queue=t,t=t.dispatch=VN.bind(null,We,t),[e.memoizedState,t]}function mu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function kS(){return Vn().memoizedState}function xh(t,e,n,i){var r=ii();We.flags|=t,r.memoizedState=mu(1|e,n,void 0,i===void 0?null:i)}function rf(t,e,n,i){var r=Vn();i=i===void 0?null:i;var s=void 0;if(pt!==null){var a=pt.memoizedState;if(s=a.destroy,i!==null&&fv(i,a.deps)){r.memoizedState=mu(e,n,s,i);return}}We.flags|=t,r.memoizedState=mu(1|e,n,s,i)}function kE(t,e){return xh(8390656,8,t,e)}function gv(t,e){return rf(2048,8,t,e)}function xS(t,e){return rf(4,2,t,e)}function bS(t,e){return rf(4,4,t,e)}function LS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NS(t,e,n){return n=n!=null?n.concat([t]):null,rf(4,4,LS.bind(null,e,t),n)}function _v(){}function DS(t,e){var n=Vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fv(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function OS(t,e){var n=Vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fv(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function MS(t,e,n){return Ls&21?(Kn(n,e)||(n=BP(),We.lanes|=n,Ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function ON(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var i=hm.transition;hm.transition={};try{t(!1),e()}finally{Re=n,hm.transition=i}}function VS(){return Vn().memoizedState}function MN(t,e,n){var i=Pr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},FS(t))BS(e,n);else if(n=mS(t,e,n,i),n!==null){var r=Qt();Gn(n,t,i,r),zS(n,e,i)}}function VN(t,e,n){var i=Pr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(FS(t))BS(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(r.hasEagerState=!0,r.eagerState=u,Kn(u,a)){var c=e.interleaved;c===null?(r.next=r,lv(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=mS(t,e,r,i),n!==null&&(r=Qt(),Gn(n,t,i,r),zS(n,e,i))}}function FS(t){var e=t.alternate;return t===We||e!==null&&e===We}function BS(t,e){Bl=hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,K_(t,n)}}var dd={readContext:Mn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},FN={readContext:Mn,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:kE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xh(4194308,4,LS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return xh(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ii();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=MN.bind(null,We,t),[i.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:CE,useDebugValue:_v,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=CE(!1),e=t[0];return t=ON.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=We,r=ii();if(Fe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),It===null)throw Error(U(349));Ls&30||PS(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,kE(AS.bind(null,i,s,t),[t]),i.flags|=2048,mu(9,SS.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=ii(),e=It.identifierPrefix;if(Fe){var n=bi,i=xi;n=(i&~(1<<32-Hn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BN={readContext:Mn,useCallback:DS,useContext:Mn,useEffect:gv,useImperativeHandle:NS,useInsertionEffect:xS,useLayoutEffect:bS,useMemo:OS,useReducer:dm,useRef:kS,useState:function(){return dm(pu)},useDebugValue:_v,useDeferredValue:function(t){var e=Vn();return MS(e,pt.memoizedState,t)},useTransition:function(){var t=dm(pu)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:VS,unstable_isNewReconciler:!1},zN={readContext:Mn,useCallback:DS,useContext:Mn,useEffect:gv,useImperativeHandle:NS,useInsertionEffect:xS,useLayoutEffect:bS,useMemo:OS,useReducer:fm,useRef:kS,useState:function(){return fm(pu)},useDebugValue:_v,useDeferredValue:function(t){var e=Vn();return pt===null?e.memoizedState=t:MS(e,pt.memoizedState,t)},useTransition:function(){var t=fm(pu)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:VS,unstable_isNewReconciler:!1};function aa(t,e){try{var n="",i=e;do n+=pL(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Eg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UN=typeof WeakMap=="function"?WeakMap:Map;function US(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){pd||(pd=!0,Lg=i),Eg(t,e)},n}function $S(t,e,n){n=Mi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Eg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Eg(t,e),typeof i!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function xE(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new UN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=tD.bind(null,t,e,n),e.then(t,t))}function bE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LE(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,Er(n,e,1))),n.lanes|=1),t)}var $N=Hi.ReactCurrentOwner,un=!1;function Ht(t,e,n,i){e.child=t===null?wS(e,null,n,i):sa(e,t.child,n,i)}function NE(t,e,n,i,r){n=n.render;var s=e.ref;return Ho(e,r),i=pv(t,e,n,i,s,r),n=mv(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$i(t,e,r)):(Fe&&n&&nv(e),e.flags|=1,Ht(t,e,i,r),e.child)}function DE(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Sv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jS(t,e,s,i,r)):(t=Dh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:au,n(a,i)&&t.ref===e.ref)return $i(t,e,r)}return e.flags|=1,t=Sr(s,i),t.ref=e.ref,t.return=e,e.child=t}function jS(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(au(s,i)&&t.ref===e.ref)if(un=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,$i(t,e,r)}return Tg(t,e,n,i,r)}function qS(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Bo,_n),_n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Bo,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Le(Bo,_n),_n|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Le(Bo,_n),_n|=i;return Ht(t,e,r,n),e.child}function WS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tg(t,e,n,i,r){var s=pn(n)?xs:qt.current;return s=ia(e,s),Ho(e,r),n=pv(t,e,n,i,s,r),i=mv(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$i(t,e,r)):(Fe&&i&&nv(e),e.flags|=1,Ht(t,e,n,r),e.child)}function OE(t,e,n,i,r){if(pn(n)){var s=!0;rd(e)}else s=!1;if(Ho(e,r),e.stateNode===null)bh(t,e),vS(e,n,i),Ig(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mn(d):(d=pn(n)?xs:qt.current,d=ia(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==d)&&AE(e,a,i,d),lr=!1;var _=e.memoizedState;a.state=_,ud(e,i,a,r),c=e.memoizedState,u!==i||_!==c||fn.current||lr?(typeof p=="function"&&(wg(e,n,p,i),c=e.memoizedState),(u=lr||SE(e,n,u,i,_,c,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=d,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,gS(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:$n(e.type,u),a.props=d,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=pn(n)?xs:qt.current,c=ia(e,c));var w=n.getDerivedStateFromProps;(p=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==c)&&AE(e,a,i,c),lr=!1,_=e.memoizedState,a.state=_,ud(e,i,a,r);var S=e.memoizedState;u!==g||_!==S||fn.current||lr?(typeof w=="function"&&(wg(e,n,w,i),S=e.memoizedState),(d=lr||SE(e,n,d,i,_,S,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,S,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,S,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=S),a.props=i,a.state=S,a.context=c,i=d):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Pg(t,e,n,i,s,r)}function Pg(t,e,n,i,r,s){WS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&wE(e,n,!1),$i(t,e,s);i=e.stateNode,$N.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=sa(e,t.child,null,s),e.child=sa(e,null,u,s)):Ht(t,e,u,s),e.memoizedState=i.state,r&&wE(e,n,!0),e.child}function HS(t){var e=t.stateNode;e.pendingContext?yE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yE(t,e.context,!1),cv(t,e.containerInfo)}function ME(t,e,n,i,r){return ra(),rv(r),e.flags|=256,Ht(t,e,n,i),e.child}var Sg={dehydrated:null,treeContext:null,retryLane:0};function Ag(t){return{baseLanes:t,cachePool:null,transitions:null}}function GS(t,e,n){var i=e.pendingProps,r=qe.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Le(qe,r&1),t===null)return vg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=af(a,i,0,null),t=Ss(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ag(n),e.memoizedState=Sg,t):vv(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return jN(t,e,a,i,u,r,n);if(s){s=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Sr(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?s=Sr(u,s):(s=Ss(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?Ag(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Sg,i}return s=t.child,t=s.sibling,i=Sr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function vv(t,e){return e=af({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lh(t,e,n,i){return i!==null&&rv(i),sa(e,t.child,null,n),t=vv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jN(t,e,n,i,r,s,a){if(n)return e.flags&256?(e.flags&=-257,i=pm(Error(U(422))),lh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=af({mode:"visible",children:i.children},r,0,null),s=Ss(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&sa(e,t.child,null,a),e.child.memoizedState=Ag(a),e.memoizedState=Sg,s);if(!(e.mode&1))return lh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,s=Error(U(419)),i=pm(s,i,void 0),lh(t,e,a,i)}if(u=(a&t.childLanes)!==0,un||u){if(i=It,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ui(t,r),Gn(i,t,r,-1))}return Pv(),i=pm(Error(U(421))),lh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=nD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,yn=Ir(r.nextSibling),In=e,Fe=!0,qn=null,t!==null&&(xn[bn++]=xi,xn[bn++]=bi,xn[bn++]=bs,xi=t.id,bi=t.overflow,bs=e),e=vv(e,i.children),e.flags|=4096,e)}function VE(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),yg(t.return,e,n)}function mm(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function KS(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ht(t,e,i.children,n),i=qe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&VE(t,n,e);else if(t.tag===19)VE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Le(qe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),mm(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}mm(e,!0,n,null,s);break;case"together":mm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qN(t,e,n){switch(e.tag){case 3:HS(e),ra();break;case 5:IS(e);break;case 1:pn(e.type)&&rd(e);break;case 4:cv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Le(ad,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Le(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?GS(t,e,n):(Le(qe,qe.current&1),t=$i(t,e,n),t!==null?t.sibling:null);Le(qe,qe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return KS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Le(qe,qe.current),i)break;return null;case 22:case 23:return e.lanes=0,qS(t,e,n)}return $i(t,e,n)}var ZS,Rg,QS,YS;ZS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rg=function(){};QS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,vs(gi.current);var s=null;switch(n){case"input":r=Zm(t,r),i=Zm(t,i),s=[];break;case"select":r=Ge({},r,{value:void 0}),i=Ge({},i,{value:void 0}),s=[];break;case"textarea":r=Jm(t,r),i=Jm(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=nd)}eg(n,i);var a;n=null;for(d in r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(eu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var c=i[d];if(u=r!=null?r[d]:void 0,i.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(eu.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",t),s||u===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};YS=function(t,e,n,i){n!==i&&(e.flags|=4)};function cl(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function WN(t,e,n){var i=e.pendingProps;switch(iv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(e),null;case 1:return pn(e.type)&&id(),Bt(e),null;case 3:return i=e.stateNode,oa(),Ve(fn),Ve(qt),dv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(Og(qn),qn=null))),Rg(t,e),Bt(e),null;case 5:hv(e);var r=vs(du.current);if(n=e.type,t!==null&&e.stateNode!=null)QS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Bt(e),null}if(t=vs(gi.current),oh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[ri]=e,i[cu]=s,t=(e.mode&1)!==0,n){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(r=0;r<Al.length;r++)De(Al[r],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":HI(i,s),De("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},De("invalid",i);break;case"textarea":KI(i,s),De("invalid",i)}eg(n,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?i.textContent!==u&&(s.suppressHydrationWarning!==!0&&sh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&sh(i.textContent,u,t),r=["children",""+u]):eu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&De("scroll",i)}switch(n){case"input":Yc(i),GI(i,s,!0);break;case"textarea":Yc(i),ZI(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=nd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ri]=e,t[cu]=i,ZS(t,e,!1,!1),e.stateNode=t;e:{switch(a=tg(n,i),n){case"dialog":De("cancel",t),De("close",t),r=i;break;case"iframe":case"object":case"embed":De("load",t),r=i;break;case"video":case"audio":for(r=0;r<Al.length;r++)De(Al[r],t);r=i;break;case"source":De("error",t),r=i;break;case"img":case"image":case"link":De("error",t),De("load",t),r=i;break;case"details":De("toggle",t),r=i;break;case"input":HI(t,i),r=Zm(t,i),De("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ge({},i,{value:void 0}),De("invalid",t);break;case"textarea":KI(t,i),r=Jm(t,i),De("invalid",t);break;default:r=i}eg(n,r),u=r;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?RP(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&SP(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&tu(t,c):typeof c=="number"&&tu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&De("scroll",t):c!=null&&$_(t,s,c,a))}switch(n){case"input":Yc(t),GI(t,i,!1);break;case"textarea":Yc(t),ZI(t);break;case"option":i.value!=null&&t.setAttribute("value",""+kr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?$o(t,!!i.multiple,s,!1):i.defaultValue!=null&&$o(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bt(e),null;case 6:if(t&&e.stateNode!=null)YS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=vs(du.current),vs(gi.current),oh(e)){if(i=e.stateNode,n=e.memoizedProps,i[ri]=e,(s=i.nodeValue!==n)&&(t=In,t!==null))switch(t.tag){case 3:sh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sh(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ri]=e,e.stateNode=i}return Bt(e),null;case 13:if(Ve(qe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&yn!==null&&e.mode&1&&!(e.flags&128))pS(),ra(),e.flags|=98560,s=!1;else if(s=oh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[ri]=e}else ra(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bt(e),s=!1}else qn!==null&&(Og(qn),qn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?mt===0&&(mt=3):Pv())),e.updateQueue!==null&&(e.flags|=4),Bt(e),null);case 4:return oa(),Rg(t,e),t===null&&lu(e.stateNode.containerInfo),Bt(e),null;case 10:return av(e.type._context),Bt(e),null;case 17:return pn(e.type)&&id(),Bt(e),null;case 19:if(Ve(qe),s=e.memoizedState,s===null)return Bt(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)cl(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cd(t),a!==null){for(e.flags|=128,cl(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&nt()>la&&(e.flags|=128,i=!0,cl(s,!1),e.lanes=4194304)}else{if(!i)if(t=cd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Fe)return Bt(e),null}else 2*nt()-s.renderingStartTime>la&&n!==1073741824&&(e.flags|=128,i=!0,cl(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,n=qe.current,Le(qe,i?n&1|2:n&1),e):(Bt(e),null);case 22:case 23:return Tv(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?_n&1073741824&&(Bt(e),e.subtreeFlags&6&&(e.flags|=8192)):Bt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function HN(t,e){switch(iv(e),e.tag){case 1:return pn(e.type)&&id(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oa(),Ve(fn),Ve(qt),dv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hv(e),null;case 13:if(Ve(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ra()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(qe),null;case 4:return oa(),null;case 10:return av(e.type._context),null;case 22:case 23:return Tv(),null;case 24:return null;default:return null}}var uh=!1,Ut=!1,GN=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Fo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ze(t,e,i)}else n.current=null}function Cg(t,e,n){try{n()}catch(i){Ze(t,e,i)}}var FE=!1;function KN(t,e){if(hg=Xh,t=tS(),tv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,d=0,p=0,g=t,_=null;t:for(;;){for(var w;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==s||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(w=g.firstChild)!==null;)_=g,g=w;for(;;){if(g===t)break t;if(_===n&&++d===r&&(u=a),_===s&&++p===i&&(c=a),(w=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=w}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(dg={focusedElem:t,selectionRange:n},Xh=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var P=S.memoizedProps,k=S.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:$n(e.type,P),k);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(A){Ze(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return S=FE,FE=!1,S}function zl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Cg(e,n,s)}r=r.next}while(r!==i)}}function sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function kg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JS(t){var e=t.alternate;e!==null&&(t.alternate=null,JS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[cu],delete e[mg],delete e[xN],delete e[bN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XS(t){return t.tag===5||t.tag===3||t.tag===4}function BE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nd));else if(i!==4&&(t=t.child,t!==null))for(xg(t,e,n),t=t.sibling;t!==null;)xg(t,e,n),t=t.sibling}function bg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(bg(t,e,n),t=t.sibling;t!==null;)bg(t,e,n),t=t.sibling}var kt=null,jn=!1;function nr(t,e,n){for(n=n.child;n!==null;)e1(t,e,n),n=n.sibling}function e1(t,e,n){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(Qd,n)}catch{}switch(n.tag){case 5:Ut||Fo(n,e);case 6:var i=kt,r=jn;kt=null,nr(t,e,n),kt=i,jn=r,kt!==null&&(jn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(jn?(t=kt,n=n.stateNode,t.nodeType===8?lm(t.parentNode,n):t.nodeType===1&&lm(t,n),su(t)):lm(kt,n.stateNode));break;case 4:i=kt,r=jn,kt=n.stateNode.containerInfo,jn=!0,nr(t,e,n),kt=i,jn=r;break;case 0:case 11:case 14:case 15:if(!Ut&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Cg(n,e,a),r=r.next}while(r!==i)}nr(t,e,n);break;case 1:if(!Ut&&(Fo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){Ze(n,e,u)}nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:n.mode&1?(Ut=(i=Ut)||n.memoizedState!==null,nr(t,e,n),Ut=i):nr(t,e,n);break;default:nr(t,e,n)}}function zE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GN),e.forEach(function(i){var r=iD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:kt=u.stateNode,jn=!1;break e;case 3:kt=u.stateNode.containerInfo,jn=!0;break e;case 4:kt=u.stateNode.containerInfo,jn=!0;break e}u=u.return}if(kt===null)throw Error(U(160));e1(s,a,r),kt=null,jn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ze(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t1(e,t),e=e.sibling}function t1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),ni(t),i&4){try{zl(3,t,t.return),sf(3,t)}catch(P){Ze(t,t.return,P)}try{zl(5,t,t.return)}catch(P){Ze(t,t.return,P)}}break;case 1:Un(e,t),ni(t),i&512&&n!==null&&Fo(n,n.return);break;case 5:if(Un(e,t),ni(t),i&512&&n!==null&&Fo(n,n.return),t.flags&32){var r=t.stateNode;try{tu(r,"")}catch(P){Ze(t,t.return,P)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&EP(r,s),tg(u,a);var d=tg(u,s);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?RP(r,g):p==="dangerouslySetInnerHTML"?SP(r,g):p==="children"?tu(r,g):$_(r,p,g,d)}switch(u){case"input":Qm(r,s);break;case"textarea":TP(r,s);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?$o(r,!!s.multiple,w,!1):_!==!!s.multiple&&(s.defaultValue!=null?$o(r,!!s.multiple,s.defaultValue,!0):$o(r,!!s.multiple,s.multiple?[]:"",!1))}r[cu]=s}catch(P){Ze(t,t.return,P)}}break;case 6:if(Un(e,t),ni(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(P){Ze(t,t.return,P)}}break;case 3:if(Un(e,t),ni(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{su(e.containerInfo)}catch(P){Ze(t,t.return,P)}break;case 4:Un(e,t),ni(t);break;case 13:Un(e,t),ni(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Iv=nt())),i&4&&zE(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||p,Un(e,t),Ut=d):Un(e,t),ni(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(g=Y=p;Y!==null;){switch(_=Y,w=_.child,_.tag){case 0:case 11:case 14:case 15:zl(4,_,_.return);break;case 1:Fo(_,_.return);var S=_.stateNode;if(typeof S.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(P){Ze(i,n,P)}}break;case 5:Fo(_,_.return);break;case 22:if(_.memoizedState!==null){$E(g);continue}}w!==null?(w.return=_,Y=w):$E(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{r=g.stateNode,d?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=AP("display",a))}catch(P){Ze(t,t.return,P)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(P){Ze(t,t.return,P)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Un(e,t),ni(t),i&4&&zE(t);break;case 21:break;default:Un(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XS(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(tu(r,""),i.flags&=-33);var s=BE(t);bg(t,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=BE(t);xg(t,u,a);break;default:throw Error(U(161))}}catch(c){Ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZN(t,e,n){Y=t,n1(t)}function n1(t,e,n){for(var i=(t.mode&1)!==0;Y!==null;){var r=Y,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||uh;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Ut;u=uh;var d=Ut;if(uh=a,(Ut=c)&&!d)for(Y=r;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?jE(r):c!==null?(c.return=a,Y=c):jE(r);for(;s!==null;)Y=s,n1(s),s=s.sibling;Y=r,uh=u,Ut=d}UE(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Y=s):UE(t)}}function UE(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||sf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ut)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PE(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PE(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&su(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ut||e.flags&512&&kg(e)}catch(_){Ze(e,e.return,_)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function $E(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function jE(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sf(4,e)}catch(c){Ze(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){Ze(e,r,c)}}var s=e.return;try{kg(e)}catch(c){Ze(e,s,c)}break;case 5:var a=e.return;try{kg(e)}catch(c){Ze(e,a,c)}}}catch(c){Ze(e,e.return,c)}if(e===t){Y=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Y=u;break}Y=e.return}}var QN=Math.ceil,fd=Hi.ReactCurrentDispatcher,yv=Hi.ReactCurrentOwner,On=Hi.ReactCurrentBatchConfig,Ie=0,It=null,ct=null,Nt=0,_n=0,Bo=qr(0),mt=0,gu=null,Ns=0,of=0,wv=0,Ul=null,ln=null,Iv=0,la=1/0,Ci=null,pd=!1,Lg=null,Tr=null,ch=!1,pr=null,md=0,$l=0,Ng=null,Lh=-1,Nh=0;function Qt(){return Ie&6?nt():Lh!==-1?Lh:Lh=nt()}function Pr(t){return t.mode&1?Ie&2&&Nt!==0?Nt&-Nt:NN.transition!==null?(Nh===0&&(Nh=BP()),Nh):(t=Re,t!==0||(t=window.event,t=t===void 0?16:HP(t.type)),t):1}function Gn(t,e,n,i){if(50<$l)throw $l=0,Ng=null,Error(U(185));Qu(t,n,i),(!(Ie&2)||t!==It)&&(t===It&&(!(Ie&2)&&(of|=n),mt===4&&cr(t,Nt)),mn(t,i),n===1&&Ie===0&&!(e.mode&1)&&(la=nt()+500,tf&&Wr()))}function mn(t,e){var n=t.callbackNode;NL(t,e);var i=Jh(t,t===It?Nt:0);if(i===0)n!==null&&JI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&JI(n),e===1)t.tag===0?LN(qE.bind(null,t)):hS(qE.bind(null,t)),CN(function(){!(Ie&6)&&Wr()}),n=null;else{switch(zP(i)){case 1:n=G_;break;case 4:n=VP;break;case 16:n=Yh;break;case 536870912:n=FP;break;default:n=Yh}n=c1(n,i1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function i1(t,e){if(Lh=-1,Nh=0,Ie&6)throw Error(U(327));var n=t.callbackNode;if(Go()&&t.callbackNode!==n)return null;var i=Jh(t,t===It?Nt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=gd(t,i);else{e=i;var r=Ie;Ie|=2;var s=s1();(It!==t||Nt!==e)&&(Ci=null,la=nt()+500,Ps(t,e));do try{XN();break}catch(u){r1(t,u)}while(1);ov(),fd.current=s,Ie=r,ct!==null?e=0:(It=null,Nt=0,e=mt)}if(e!==0){if(e===2&&(r=og(t),r!==0&&(i=r,e=Dg(t,r))),e===1)throw n=gu,Ps(t,0),cr(t,i),mn(t,nt()),n;if(e===6)cr(t,i);else{if(r=t.current.alternate,!(i&30)&&!YN(r)&&(e=gd(t,i),e===2&&(s=og(t),s!==0&&(i=s,e=Dg(t,s))),e===1))throw n=gu,Ps(t,0),cr(t,i),mn(t,nt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:ls(t,ln,Ci);break;case 3:if(cr(t,i),(i&130023424)===i&&(e=Iv+500-nt(),10<e)){if(Jh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Qt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=pg(ls.bind(null,t,ln,Ci),e);break}ls(t,ln,Ci);break;case 4:if(cr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-Hn(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*QN(i/1960))-i,10<i){t.timeoutHandle=pg(ls.bind(null,t,ln,Ci),i);break}ls(t,ln,Ci);break;case 5:ls(t,ln,Ci);break;default:throw Error(U(329))}}}return mn(t,nt()),t.callbackNode===n?i1.bind(null,t):null}function Dg(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(Ps(t,e).flags|=256),t=gd(t,e),t!==2&&(e=ln,ln=n,e!==null&&Og(e)),t}function Og(t){ln===null?ln=t:ln.push.apply(ln,t)}function YN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Kn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~wv,e&=~of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),i=1<<n;t[n]=-1,e&=~i}}function qE(t){if(Ie&6)throw Error(U(327));Go();var e=Jh(t,0);if(!(e&1))return mn(t,nt()),null;var n=gd(t,e);if(t.tag!==0&&n===2){var i=og(t);i!==0&&(e=i,n=Dg(t,i))}if(n===1)throw n=gu,Ps(t,0),cr(t,e),mn(t,nt()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ls(t,ln,Ci),mn(t,nt()),null}function Ev(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(la=nt()+500,tf&&Wr())}}function Ds(t){pr!==null&&pr.tag===0&&!(Ie&6)&&Go();var e=Ie;Ie|=1;var n=On.transition,i=Re;try{if(On.transition=null,Re=1,t)return t()}finally{Re=i,On.transition=n,Ie=e,!(Ie&6)&&Wr()}}function Tv(){_n=Bo.current,Ve(Bo)}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RN(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(iv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&id();break;case 3:oa(),Ve(fn),Ve(qt),dv();break;case 5:hv(i);break;case 4:oa();break;case 13:Ve(qe);break;case 19:Ve(qe);break;case 10:av(i.type._context);break;case 22:case 23:Tv()}n=n.return}if(It=t,ct=t=Sr(t.current,null),Nt=_n=e,mt=0,gu=null,wv=of=Ns=0,ln=Ul=null,_s!==null){for(e=0;e<_s.length;e++)if(n=_s[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}n.pending=i}_s=null}return t}function r1(t,e){do{var n=ct;try{if(ov(),kh.current=dd,hd){for(var i=We.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}hd=!1}if(Ls=0,yt=pt=We=null,Bl=!1,fu=0,yv.current=null,n===null||n.return===null){mt=1,gu=e,ct=null;break}e:{var s=t,a=n.return,u=n,c=e;if(e=Nt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=u,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=bE(a);if(w!==null){w.flags&=-257,LE(w,a,u,s,e),w.mode&1&&xE(s,d,e),e=w,c=d;var S=e.updateQueue;if(S===null){var P=new Set;P.add(c),e.updateQueue=P}else S.add(c);break e}else{if(!(e&1)){xE(s,d,e),Pv();break e}c=Error(U(426))}}else if(Fe&&u.mode&1){var k=bE(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),LE(k,a,u,s,e),rv(aa(c,u));break e}}s=c=aa(c,u),mt!==4&&(mt=2),Ul===null?Ul=[s]:Ul.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=US(s,c,e);TE(s,E);break e;case 1:u=c;var y=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Tr===null||!Tr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=$S(s,u,e);TE(s,A);break e}}s=s.return}while(s!==null)}a1(n)}catch(D){e=D,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(1)}function s1(){var t=fd.current;return fd.current=dd,t===null?dd:t}function Pv(){(mt===0||mt===3||mt===2)&&(mt=4),It===null||!(Ns&268435455)&&!(of&268435455)||cr(It,Nt)}function gd(t,e){var n=Ie;Ie|=2;var i=s1();(It!==t||Nt!==e)&&(Ci=null,Ps(t,e));do try{JN();break}catch(r){r1(t,r)}while(1);if(ov(),Ie=n,fd.current=i,ct!==null)throw Error(U(261));return It=null,Nt=0,mt}function JN(){for(;ct!==null;)o1(ct)}function XN(){for(;ct!==null&&!PL();)o1(ct)}function o1(t){var e=u1(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?a1(t):ct=e,yv.current=null}function a1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HN(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ct=null;return}}else if(n=WN(n,e,_n),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);mt===0&&(mt=5)}function ls(t,e,n){var i=Re,r=On.transition;try{On.transition=null,Re=1,eD(t,e,n,i)}finally{On.transition=r,Re=i}return null}function eD(t,e,n,i){do Go();while(pr!==null);if(Ie&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DL(t,s),t===It&&(ct=It=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ch||(ch=!0,c1(Yh,function(){return Go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=On.transition,On.transition=null;var a=Re;Re=1;var u=Ie;Ie|=4,yv.current=null,KN(t,n),t1(n,t),wN(dg),Xh=!!hg,dg=hg=null,t.current=n,ZN(n),SL(),Ie=u,Re=a,On.transition=s}else t.current=n;if(ch&&(ch=!1,pr=t,md=r),s=t.pendingLanes,s===0&&(Tr=null),CL(n.stateNode),mn(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(pd)throw pd=!1,t=Lg,Lg=null,t;return md&1&&t.tag!==0&&Go(),s=t.pendingLanes,s&1?t===Ng?$l++:($l=0,Ng=t):$l=0,Wr(),null}function Go(){if(pr!==null){var t=zP(md),e=On.transition,n=Re;try{if(On.transition=null,Re=16>t?16:t,pr===null)var i=!1;else{if(t=pr,pr=null,md=0,Ie&6)throw Error(U(331));var r=Ie;for(Ie|=4,Y=t.current;Y!==null;){var s=Y,a=s.child;if(Y.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:zl(8,p,s)}var g=p.child;if(g!==null)g.return=p,Y=g;else for(;Y!==null;){p=Y;var _=p.sibling,w=p.return;if(JS(p),p===d){Y=null;break}if(_!==null){_.return=w,Y=_;break}Y=w}}}var S=s.alternate;if(S!==null){var P=S.child;if(P!==null){S.child=null;do{var k=P.sibling;P.sibling=null,P=k}while(P!==null)}}Y=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zl(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,Y=E;break e}Y=s.return}}var y=t.current;for(Y=y;Y!==null;){a=Y;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,Y=I;else e:for(a=y;Y!==null;){if(u=Y,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:sf(9,u)}}catch(D){Ze(u,u.return,D)}if(u===a){Y=null;break e}var A=u.sibling;if(A!==null){A.return=u.return,Y=A;break e}Y=u.return}}if(Ie=r,Wr(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(Qd,t)}catch{}i=!0}return i}finally{Re=n,On.transition=e}}return!1}function WE(t,e,n){e=aa(n,e),e=US(t,e,1),t=Er(t,e,1),e=Qt(),t!==null&&(Qu(t,1,e),mn(t,e))}function Ze(t,e,n){if(t.tag===3)WE(t,t,n);else for(;e!==null;){if(e.tag===3){WE(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Tr===null||!Tr.has(i))){t=aa(n,t),t=$S(e,t,1),e=Er(e,t,1),t=Qt(),e!==null&&(Qu(e,1,t),mn(e,t));break}}e=e.return}}function tD(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Nt&n)===n&&(mt===4||mt===3&&(Nt&130023424)===Nt&&500>nt()-Iv?Ps(t,0):wv|=n),mn(t,e)}function l1(t,e){e===0&&(t.mode&1?(e=eh,eh<<=1,!(eh&130023424)&&(eh=4194304)):e=1);var n=Qt();t=Ui(t,e),t!==null&&(Qu(t,e,n),mn(t,n))}function nD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),l1(t,n)}function iD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),l1(t,n)}var u1;u1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,qN(t,e,n);un=!!(t.flags&131072)}else un=!1,Fe&&e.flags&1048576&&dS(e,od,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;bh(t,e),t=e.pendingProps;var r=ia(e,qt.current);Ho(e,n),r=pv(null,e,i,t,r,n);var s=mv();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(i)?(s=!0,rd(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,uv(e),r.updater=nf,e.stateNode=r,r._reactInternals=e,Ig(e,i,t,n),e=Pg(null,e,i,!0,s,n)):(e.tag=0,Fe&&s&&nv(e),Ht(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(bh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=sD(i),t=$n(i,t),r){case 0:e=Tg(null,e,i,t,n);break e;case 1:e=OE(null,e,i,t,n);break e;case 11:e=NE(null,e,i,t,n);break e;case 14:e=DE(null,e,i,$n(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),Tg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),OE(t,e,i,r,n);case 3:e:{if(HS(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,gS(t,e),ud(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=aa(Error(U(423)),e),e=ME(t,e,i,n,r);break e}else if(i!==r){r=aa(Error(U(424)),e),e=ME(t,e,i,n,r);break e}else for(yn=Ir(e.stateNode.containerInfo.firstChild),In=e,Fe=!0,qn=null,n=wS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ra(),i===r){e=$i(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 5:return IS(e),t===null&&vg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,fg(i,r)?a=null:s!==null&&fg(i,s)&&(e.flags|=32),WS(t,e),Ht(t,e,a,n),e.child;case 6:return t===null&&vg(e),null;case 13:return GS(t,e,n);case 4:return cv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=sa(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),NE(t,e,i,r,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Le(ad,i._currentValue),i._currentValue=a,s!==null)if(Kn(s.value,a)){if(s.children===r.children&&!fn.current){e=$i(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Mi(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),yg(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),yg(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ht(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ho(e,n),r=Mn(r),i=i(r),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return i=e.type,r=$n(i,e.pendingProps),r=$n(i.type,r),DE(t,e,i,r,n);case 15:return jS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$n(i,r),bh(t,e),e.tag=1,pn(i)?(t=!0,rd(e)):t=!1,Ho(e,n),vS(e,i,r),Ig(e,i,r,n),Pg(null,e,i,!0,t,n);case 19:return KS(t,e,n);case 22:return qS(t,e,n)}throw Error(U(156,e.tag))};function c1(t,e){return MP(t,e)}function rD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,i){return new rD(t,e,n,i)}function Sv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sD(t){if(typeof t=="function")return Sv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===q_)return 11;if(t===W_)return 14}return 2}function Sr(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dh(t,e,n,i,r,s){var a=2;if(i=t,typeof t=="function")Sv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ko:return Ss(n.children,r,s,e);case j_:a=8,r|=8;break;case Wm:return t=Nn(12,n,e,r|2),t.elementType=Wm,t.lanes=s,t;case Hm:return t=Nn(13,n,e,r),t.elementType=Hm,t.lanes=s,t;case Gm:return t=Nn(19,n,e,r),t.elementType=Gm,t.lanes=s,t;case yP:return af(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _P:a=10;break e;case vP:a=9;break e;case q_:a=11;break e;case W_:a=14;break e;case ar:a=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Nn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ss(t,e,n,i){return t=Nn(7,t,i,e),t.lanes=n,t}function af(t,e,n,i){return t=Nn(22,t,i,e),t.elementType=yP,t.lanes=n,t.stateNode={isHidden:!1},t}function gm(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function _m(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yp(0),this.expirationTimes=Yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Av(t,e,n,i,r,s,a,u,c){return t=new oD(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uv(s),t}function aD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function h1(t){if(!t)return xr;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(pn(n))return cS(t,n,e)}return e}function d1(t,e,n,i,r,s,a,u,c){return t=Av(n,i,!0,t,r,s,a,u,c),t.context=h1(null),n=t.current,i=Qt(),r=Pr(n),s=Mi(i,r),s.callback=e??null,Er(n,s,r),t.current.lanes=r,Qu(t,r,i),mn(t,i),t}function lf(t,e,n,i){var r=e.current,s=Qt(),a=Pr(r);return n=h1(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Er(r,e,a),t!==null&&(Gn(t,r,a,s),Ch(t,r,a)),a}function _d(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function HE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rv(t,e){HE(t,e),(t=t.alternate)&&HE(t,e)}function lD(){return null}var f1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cv(t){this._internalRoot=t}uf.prototype.render=Cv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));lf(t,e,null,null)};uf.prototype.unmount=Cv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ds(function(){lf(null,t,null,null)}),e[zi]=null}};function uf(t){this._internalRoot=t}uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=jP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&WP(t)}};function kv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function GE(){}function uD(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var d=_d(a);s.call(d)}}var a=d1(e,i,t,0,null,!1,!1,"",GE);return t._reactRootContainer=a,t[zi]=a.current,lu(t.nodeType===8?t.parentNode:t),Ds(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var d=_d(c);u.call(d)}}var c=Av(t,0,!1,null,null,!1,!1,"",GE);return t._reactRootContainer=c,t[zi]=c.current,lu(t.nodeType===8?t.parentNode:t),Ds(function(){lf(e,c,n,i)}),c}function hf(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var u=r;r=function(){var c=_d(a);u.call(c)}}lf(e,a,t,r)}else a=uD(n,e,t,r,i);return _d(a)}UP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sl(e.pendingLanes);n!==0&&(K_(e,n|1),mn(e,nt()),!(Ie&6)&&(la=nt()+500,Wr()))}break;case 13:Ds(function(){var i=Ui(t,1);if(i!==null){var r=Qt();Gn(i,t,1,r)}}),Rv(t,1)}};Z_=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var n=Qt();Gn(e,t,134217728,n)}Rv(t,134217728)}};$P=function(t){if(t.tag===13){var e=Pr(t),n=Ui(t,e);if(n!==null){var i=Qt();Gn(n,t,e,i)}Rv(t,e)}};jP=function(){return Re};qP=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};ig=function(t,e,n){switch(e){case"input":if(Qm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=ef(i);if(!r)throw Error(U(90));IP(i),Qm(i,r)}}}break;case"textarea":TP(t,n);break;case"select":e=n.value,e!=null&&$o(t,!!n.multiple,e,!1)}};xP=Ev;bP=Ds;var cD={usingClientEntryPoint:!1,Events:[Ju,No,ef,CP,kP,Ev]},hl={findFiberByHostInstance:gs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},hD={bundleType:hl.bundleType,version:hl.version,rendererPackageName:hl.rendererPackageName,rendererConfig:hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DP(t),t===null?null:t.stateNode},findFiberByHostInstance:hl.findFiberByHostInstance||lD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{Qd=hh.inject(hD),mi=hh}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cD;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kv(e))throw Error(U(200));return aD(t,e,null,n)};Sn.createRoot=function(t,e){if(!kv(t))throw Error(U(299));var n=!1,i="",r=f1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Av(t,1,!1,null,null,n,!1,i,r),t[zi]=e.current,lu(t.nodeType===8?t.parentNode:t),new Cv(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=DP(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Ds(t)};Sn.hydrate=function(t,e,n){if(!cf(e))throw Error(U(200));return hf(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!kv(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",a=f1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=d1(e,null,t,1,n??null,r,!1,s,a),t[zi]=e.current,lu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new uf(e)};Sn.render=function(t,e,n){if(!cf(e))throw Error(U(200));return hf(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!cf(t))throw Error(U(40));return t._reactRootContainer?(Ds(function(){hf(null,null,t,!1,function(){t._reactRootContainer=null,t[zi]=null})}),!0):!1};Sn.unstable_batchedUpdates=Ev;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!cf(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return hf(t,e,n,!1,i)};Sn.version="18.2.0-next-9e3b772b8-20220608";function p1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p1)}catch(t){console.error(t)}}p1(),dP.exports=Sn;var m1=dP.exports,KE=m1;jm.createRoot=KE.createRoot,jm.hydrateRoot=KE.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_u.apply(this,arguments)}var mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mr||(mr={}));const ZE="popstate";function dD(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:a,hash:u}=i.location;return Mg("",{pathname:s,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:vd(r)}return pD(e,n,null,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fD(){return Math.random().toString(36).substr(2,8)}function QE(t,e){return{usr:t.state,key:t.key,idx:e}}function Mg(t,e,n,i){return n===void 0&&(n=null),_u({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ra(e):e,{state:n,key:e&&e.key||i||fD()})}function vd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function pD(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,u=mr.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(_u({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function g(){u=mr.Pop;let k=p(),E=k==null?null:k-d;d=k,c&&c({action:u,location:P.location,delta:E})}function _(k,E){u=mr.Push;let y=Mg(P.location,k,E);n&&n(y,k),d=p()+1;let I=QE(y,d),A=P.createHref(y);try{a.pushState(I,"",A)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(A)}s&&c&&c({action:u,location:P.location,delta:1})}function w(k,E){u=mr.Replace;let y=Mg(P.location,k,E);n&&n(y,k),d=p();let I=QE(y,d),A=P.createHref(y);a.replaceState(I,"",A),s&&c&&c({action:u,location:P.location,delta:0})}function S(k){let E=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof k=="string"?k:vd(k);return ht(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let P={get action(){return u},get location(){return t(r,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(ZE,g),c=k,()=>{r.removeEventListener(ZE,g),c=null}},createHref(k){return e(r,k)},createURL:S,encodeLocation(k){let E=S(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:_,replace:w,go(k){return a.go(k)}};return P}var YE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(YE||(YE={}));function mD(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Ra(e):e,r=bv(i.pathname||"/",n);if(r==null)return null;let s=g1(t);gD(s);let a=null;for(let u=0;a==null&&u<s.length;++u)a=SD(s[u],CD(r));return a}function g1(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let d=Ar([i,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(ht(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),g1(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:TD(d,s.index),routesMeta:p})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))r(s,a);else for(let c of _1(s.path))r(s,a,c)}),e}function _1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=_1(i.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function gD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PD(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const _D=/^:\w+$/,vD=3,yD=2,wD=1,ID=10,ED=-2,JE=t=>t==="*";function TD(t,e){let n=t.split("/"),i=n.length;return n.some(JE)&&(i+=ED),e&&(i+=yD),n.filter(r=>!JE(r)).reduce((r,s)=>r+(_D.test(s)?vD:s===""?wD:ID),i)}function PD(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function SD(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let a=0;a<n.length;++a){let u=n[a],c=a===n.length-1,d=r==="/"?e:e.slice(r.length)||"/",p=AD({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d);if(!p)return null;Object.assign(i,p.params);let g=u.route;s.push({params:i,pathname:Ar([r,p.pathname]),pathnameBase:LD(Ar([r,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(r=Ar([r,p.pathnameBase]))}return s}function AD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=RD(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((d,p,g)=>{let{paramName:_,isOptional:w}=p;if(_==="*"){let P=u[g]||"";a=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const S=u[g];return w&&!S?d[_]=void 0:d[_]=kD(S||"",_),d},{}),pathname:s,pathnameBase:a,pattern:t}}function RD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(a,u,c)=>(i.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function CD(t){try{return decodeURI(t)}catch(e){return xv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kD(t,e){try{return decodeURIComponent(t)}catch(n){return xv(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function bv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function xD(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ra(t):t;return{pathname:n?n.startsWith("/")?n:bD(n,e):e,search:ND(i),hash:DD(r)}}function bD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function vm(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function v1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function y1(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ra(t):(r=_u({},t),ht(!r.pathname||!r.pathname.includes("?"),vm("?","pathname","search",r)),ht(!r.pathname||!r.pathname.includes("#"),vm("#","pathname","hash",r)),ht(!r.search||!r.search.includes("#"),vm("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,u;if(i||a==null)u=n;else{let g=e.length-1;if(a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let c=xD(r,u),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const Ar=t=>t.join("/").replace(/\/\/+/g,"/"),LD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ND=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const w1=["post","put","patch","delete"];new Set(w1);const MD=["get",...w1];new Set(MD);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yd.apply(this,arguments)}const Lv=N.createContext(null),VD=N.createContext(null),Ca=N.createContext(null),df=N.createContext(null),Hr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),I1=N.createContext(null);function FD(t,e){let{relative:n}=e===void 0?{}:e;ec()||ht(!1);let{basename:i,navigator:r}=N.useContext(Ca),{hash:s,pathname:a,search:u}=T1(t,{relative:n}),c=a;return i!=="/"&&(c=a==="/"?i:Ar([i,a])),r.createHref({pathname:c,search:u,hash:s})}function ec(){return N.useContext(df)!=null}function ff(){return ec()||ht(!1),N.useContext(df).location}function E1(t){N.useContext(Ca).static||N.useLayoutEffect(t)}function pf(){let{isDataRoute:t}=N.useContext(Hr);return t?YD():BD()}function BD(){ec()||ht(!1);let t=N.useContext(Lv),{basename:e,navigator:n}=N.useContext(Ca),{matches:i}=N.useContext(Hr),{pathname:r}=ff(),s=JSON.stringify(v1(i).map(c=>c.pathnameBase)),a=N.useRef(!1);return E1(()=>{a.current=!0}),N.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let p=y1(c,JSON.parse(s),r,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ar([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,s,r,t])}function Nv(){let{matches:t}=N.useContext(Hr),e=t[t.length-1];return e?e.params:{}}function T1(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=N.useContext(Hr),{pathname:r}=ff(),s=JSON.stringify(v1(i).map(a=>a.pathnameBase));return N.useMemo(()=>y1(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function zD(t,e){return UD(t,e)}function UD(t,e,n){ec()||ht(!1);let{navigator:i}=N.useContext(Ca),{matches:r}=N.useContext(Hr),s=r[r.length-1],a=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let c=ff(),d;if(e){var p;let P=typeof e=="string"?Ra(e):e;u==="/"||(p=P.pathname)!=null&&p.startsWith(u)||ht(!1),d=P}else d=c;let g=d.pathname||"/",_=u==="/"?g:g.slice(u.length)||"/",w=mD(t,{pathname:_}),S=HD(w&&w.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:Ar([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:Ar([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),r,n);return e&&S?N.createElement(df.Provider,{value:{location:yd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:mr.Pop}},S):S}function $D(){let t=QD(),e=OD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:r},n):null,s)}const jD=N.createElement($D,null);class qD extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?N.createElement(Hr.Provider,{value:this.props.routeContext},N.createElement(I1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WD(t){let{routeContext:e,match:n,children:i}=t,r=N.useContext(Lv);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Hr.Provider,{value:e},i)}function HD(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));u>=0||ht(!1),s=s.slice(0,Math.min(s.length,u+1))}return s.reduceRight((u,c,d)=>{let p=c.route.id?a==null?void 0:a[c.route.id]:null,g=null;n&&(g=c.route.errorElement||jD);let _=e.concat(s.slice(0,d+1)),w=()=>{let S;return p?S=g:c.route.Component?S=N.createElement(c.route.Component,null):c.route.element?S=c.route.element:S=u,N.createElement(WD,{match:c,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:S})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?N.createElement(qD,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var P1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(P1||{}),wd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wd||{});function GD(t){let e=N.useContext(Lv);return e||ht(!1),e}function KD(t){let e=N.useContext(VD);return e||ht(!1),e}function ZD(t){let e=N.useContext(Hr);return e||ht(!1),e}function S1(t){let e=ZD(),n=e.matches[e.matches.length-1];return n.route.id||ht(!1),n.route.id}function QD(){var t;let e=N.useContext(I1),n=KD(wd.UseRouteError),i=S1(wd.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function YD(){let{router:t}=GD(P1.UseNavigateStable),e=S1(wd.UseNavigateStable),n=N.useRef(!1);return E1(()=>{n.current=!0}),N.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,yd({fromRouteId:e},s)))},[t,e])}function Eo(t){ht(!1)}function JD(t){let{basename:e="/",children:n=null,location:i,navigationType:r=mr.Pop,navigator:s,static:a=!1}=t;ec()&&ht(!1);let u=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:u,navigator:s,static:a}),[u,s,a]);typeof i=="string"&&(i=Ra(i));let{pathname:d="/",search:p="",hash:g="",state:_=null,key:w="default"}=i,S=N.useMemo(()=>{let P=bv(d,u);return P==null?null:{location:{pathname:P,search:p,hash:g,state:_,key:w},navigationType:r}},[u,d,p,g,_,w,r]);return S==null?null:N.createElement(Ca.Provider,{value:c},N.createElement(df.Provider,{children:n,value:S}))}function XD(t){let{children:e,location:n}=t;return zD(Vg(e),n)}new Promise(()=>{});function Vg(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(i,r)=>{if(!N.isValidElement(i))return;let s=[...e,r];if(i.type===N.Fragment){n.push.apply(n,Vg(i.props.children,s));return}i.type!==Eo&&ht(!1),!i.props.index||!i.props.children||ht(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Vg(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fg(){return Fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fg.apply(this,arguments)}function eO(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function tO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nO(t,e){return t.button===0&&(!e||e==="_self")&&!tO(t)}const iO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],rO="startTransition",XE=nL[rO];function sO(t){let{basename:e,children:n,future:i,window:r}=t,s=N.useRef();s.current==null&&(s.current=dD({window:r,v5Compat:!0}));let a=s.current,[u,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:d}=i||{},p=N.useCallback(g=>{d&&XE?XE(()=>c(g)):c(g)},[c,d]);return N.useLayoutEffect(()=>a.listen(p),[a,p]),N.createElement(JD,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a})}const oO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bg=N.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:u,target:c,to:d,preventScrollReset:p,unstable_viewTransition:g}=e,_=eO(e,iO),{basename:w}=N.useContext(Ca),S,P=!1;if(typeof d=="string"&&aO.test(d)&&(S=d,oO))try{let I=new URL(window.location.href),A=d.startsWith("//")?new URL(I.protocol+d):new URL(d),D=bv(A.pathname,w);A.origin===I.origin&&D!=null?d=D+A.search+A.hash:P=!0}catch{}let k=FD(d,{relative:r}),E=lO(d,{replace:a,state:u,target:c,preventScrollReset:p,relative:r,unstable_viewTransition:g});function y(I){i&&i(I),I.defaultPrevented||E(I)}return N.createElement("a",Fg({},_,{href:S||k,onClick:P||s?i:y,ref:n,target:c}))});var e0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(e0||(e0={}));var t0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(t0||(t0={}));function lO(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:u}=e===void 0?{}:e,c=pf(),d=ff(),p=T1(t,{relative:a});return N.useCallback(g=>{if(nO(g,n)){g.preventDefault();let _=i!==void 0?i:vd(d)===vd(p);c(t,{replace:_,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:u})}},[d,c,p,i,r,n,t,s,a,u])}const uO="_home_page_container_1821l_1",cO="_buttons_container_1821l_9",n0={home_page_container:uO,buttons_container:cO},hO="_button_l9um6_1",dO={button:hO},Ko=({children:t,...e})=>q.jsx("button",{...e,className:dO.button,children:t}),fO="_myModal_1sefv_1",pO="_myModalContent_1sefv_11",mO="_active_1sefv_18",ym={myModal:fO,myModalContent:pO,active:mO},gO=({children:t,visible:e,setVisible:n})=>{const i=[ym.myModal];return e&&i.push(ym.active),q.jsx("div",{className:i.join(" "),onClick:()=>n(!1),children:q.jsx("div",{className:ym.myModalContent,onClick:r=>r.stopPropagation(),children:t})})},_O="_room_1xiem_1",vO={room:_O};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},yO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},R1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let _=(u&15)<<2|d>>6,w=d&63;c||(w=64,a||(_=64)),i.push(n[p],n[g],n[_],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(A1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||u==null||d==null||g==null)throw new wO;const _=s<<2|u>>4;if(i.push(_),d!==64){const w=u<<4&240|d>>2;if(i.push(w),g!==64){const S=d<<6&192|g;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IO=function(t){const e=A1(t);return R1.encodeByteArray(e,!0)},Id=function(t){return IO(t).replace(/\./g,"")},C1=function(t){try{return R1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ed(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!EO(n)||(t[n]=Ed(t[n],e[n]));return t}function EO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=()=>TO().__FIREBASE_DEFAULTS__,SO=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&C1(t[1]);return e&&JSON.parse(e)},Dv=()=>{try{return PO()||SO()||AO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},k1=()=>{var t;return(t=Dv())===null||t===void 0?void 0:t.config},RO=t=>{var e;return(e=Dv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Id(JSON.stringify(n)),Id(JSON.stringify(a)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Ov(){var t;const e=(t=Dv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bO(){return typeof self=="object"&&self.self===self}function x1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Mv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b1(){const t=Ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LO(){return!Ov()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vu(){try{return typeof indexedDB=="object"}catch{return!1}}function NO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="FirebaseError";class Yt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=DO,Object.setPrototypeOf(this,Yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?OO(s,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Yt(r,u,i)}}function OO(t,e){return t.replace(MO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const MO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function VO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zg(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(r0(s)&&r0(a)){if(!zg(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function r0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Rl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function L1(t,e){const n=new FO(t,e);return n.subscribe.bind(n)}class FO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");BO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=wm),r.error===void 0&&(r.error=wm),r.complete===void 0&&(r.complete=wm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t){return t&&t._delegate?t._delegate:t}class yi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new CO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($O(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:UO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UO(t){return t===us?void 0:t}function $O(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=[];var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const N1={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},qO=pe.INFO,WO={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},HO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=WO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mf{constructor(e){this.name=e,this._logLevel=qO,this._logHandler=HO,this._userLogHandler=null,Vv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}function GO(t){Vv.forEach(e=>{e.setLogLevel(t)})}function KO(t,e){for(const n of Vv){let i=null;e&&e.level&&(i=N1[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const u=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(i??r.logLevel)&&t({level:pe[s].toLowerCase(),message:u,args:a,type:r.name})}}}const ZO=(t,e)=>e.some(n=>t instanceof n);let s0,o0;function QO(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YO(){return o0||(o0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D1=new WeakMap,Ug=new WeakMap,O1=new WeakMap,Im=new WeakMap,Fv=new WeakMap;function JO(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Rr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&D1.set(n,t)}).catch(()=>{}),Fv.set(e,t),e}function XO(t){if(Ug.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Ug.set(t,e)}let $g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ug.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eM(t){$g=t($g)}function tM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Em(this),e,...n);return O1.set(i,e.sort?e.sort():[e]),Rr(i)}:YO().includes(t)?function(...e){return t.apply(Em(this),e),Rr(D1.get(this))}:function(...e){return Rr(t.apply(Em(this),e))}}function nM(t){return typeof t=="function"?tM(t):(t instanceof IDBTransaction&&XO(t),ZO(t,QO())?new Proxy(t,$g):t)}function Rr(t){if(t instanceof IDBRequest)return JO(t);if(Im.has(t))return Im.get(t);const e=nM(t);return e!==t&&(Im.set(t,e),Fv.set(e,t)),e}const Em=t=>Fv.get(t);function iM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),u=Rr(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Rr(a.result),c.oldVersion,c.newVersion,Rr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const rM=["get","getKey","getAll","getAllKeys","count"],sM=["put","add","delete","clear"],Tm=new Map;function a0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tm.get(e))return Tm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=sM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||rM.includes(n)))return;const s=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&c.done]))[0]};return Tm.set(e,s),s}eM(t=>({...t,get:(e,n,i)=>a0(e,n)||t.get(e,n,i),has:(e,n)=>!!a0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function aM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jg="@firebase/app",l0="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new mf("@firebase/app"),lM="@firebase/app-compat",uM="@firebase/analytics-compat",cM="@firebase/analytics",hM="@firebase/app-check-compat",dM="@firebase/app-check",fM="@firebase/auth",pM="@firebase/auth-compat",mM="@firebase/database",gM="@firebase/database-compat",_M="@firebase/functions",vM="@firebase/functions-compat",yM="@firebase/installations",wM="@firebase/installations-compat",IM="@firebase/messaging",EM="@firebase/messaging-compat",TM="@firebase/performance",PM="@firebase/performance-compat",SM="@firebase/remote-config",AM="@firebase/remote-config-compat",RM="@firebase/storage",CM="@firebase/storage-compat",kM="@firebase/firestore",xM="@firebase/firestore-compat",bM="firebase",LM="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]",NM={[jg]:"fire-core",[lM]:"fire-core-compat",[cM]:"fire-analytics",[uM]:"fire-analytics-compat",[dM]:"fire-app-check",[hM]:"fire-app-check-compat",[fM]:"fire-auth",[pM]:"fire-auth-compat",[mM]:"fire-rtdb",[gM]:"fire-rtdb-compat",[_M]:"fire-fn",[vM]:"fire-fn-compat",[yM]:"fire-iid",[wM]:"fire-iid-compat",[IM]:"fire-fcm",[EM]:"fire-fcm-compat",[TM]:"fire-perf",[PM]:"fire-perf-compat",[SM]:"fire-rc",[AM]:"fire-rc-compat",[RM]:"fire-gcs",[CM]:"fire-gcs-compat",[kM]:"fire-fst",[xM]:"fire-fst-compat","fire-js":"fire-js",[bM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Map,yu=new Map;function Td(t,e){try{t.container.addComponent(e)}catch(n){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function M1(t,e){t.container.addOrOverwriteComponent(e)}function Nr(t){const e=t.name;if(yu.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;yu.set(e,t);for(const n of Lr.values())Td(n,t);return!0}function V1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function DM(t,e,n=br){V1(t,e).clearInstance(n)}function OM(){yu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Vi=new Qs("app","Firebase",MM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VM=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=LM;function Bv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:br,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Vi.create("bad-app-name",{appName:String(r)});if(n||(n=k1()),!n)throw Vi.create("no-options");const s=Lr.get(r);if(s){if(zg(n,s.options)&&zg(i,s.config))return s;throw Vi.create("duplicate-app",{appName:r})}const a=new jO(r);for(const c of yu.values())a.addComponent(c);const u=new VM(n,i,a);return Lr.set(r,u),u}function FM(t=br){const e=Lr.get(t);if(!e&&t===br&&k1())return Bv();if(!e)throw Vi.create("no-app",{appName:t});return e}function BM(){return Array.from(Lr.values())}async function F1(t){const e=t.name;Lr.has(e)&&(Lr.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function _i(t,e,n){var i;let r=(i=NM[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${r}" with version "${e}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(u.join(" "));return}Nr(new yi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function B1(t,e){if(t!==null&&typeof t!="function")throw Vi.create("invalid-log-argument");KO(t,e)}function z1(t){GO(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="firebase-heartbeat-database",UM=1,wu="firebase-heartbeat-store";let Pm=null;function U1(){return Pm||(Pm=iM(zM,UM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wu)}}}).catch(t=>{throw Vi.create("idb-open",{originalErrorMessage:t.message})})),Pm}async function $M(t){try{return await(await U1()).transaction(wu).objectStore(wu).get($1(t))}catch(e){if(e instanceof Yt)Os.warn(e.message);else{const n=Vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Os.warn(n.message)}}}async function u0(t,e){try{const i=(await U1()).transaction(wu,"readwrite");await i.objectStore(wu).put(e,$1(t)),await i.done}catch(n){if(n instanceof Yt)Os.warn(n.message);else{const i=Vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Os.warn(i.message)}}}function $1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=1024,qM=30*24*60*60*1e3;class WM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=c0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=qM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=c0(),{heartbeatsToSend:n,unsentEntries:i}=HM(this._heartbeatsCache.heartbeats),r=Id(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function c0(){return new Date().toISOString().substring(0,10)}function HM(t,e=jM){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),h0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),h0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class GM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vu()?NO().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await $M(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return u0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return u0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function h0(t){return Id(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){Nr(new yi("platform-logger",e=>new oM(e),"PRIVATE")),Nr(new yi("heartbeat",e=>new WM(e),"PRIVATE")),_i(jg,l0,t),_i(jg,l0,"esm2017"),_i("fire-js","")}KM("");const ZM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Yt,SDK_VERSION:Gr,_DEFAULT_ENTRY_NAME:br,_addComponent:Td,_addOrOverwriteComponent:M1,_apps:Lr,_clearComponents:OM,_components:yu,_getProvider:V1,_registerComponent:Nr,_removeServiceInstance:DM,deleteApp:F1,getApp:FM,getApps:BM,initializeApp:Bv,onLog:B1,registerVersion:_i,setLogLevel:z1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n){this._delegate=e,this.firebase=n,Td(e,new yi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),F1(this._delegate)))}_getService(e,n=br){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=br){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Td(this._delegate,e)}_addOrOverwriteComponent(e){M1(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},d0=new Qs("app-compat","Firebase",YM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:_i,setLogLevel:z1,onLog:B1,apps:null,SDK_VERSION:Gr,INTERNAL:{registerComponent:u,removeApp:i,useAsService:c,modularAPIs:ZM}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(d){delete e[d]}function r(d){if(d=d||br,!i0(e,d))throw d0.create("no-app",{appName:d});return e[d]}r.App=t;function s(d,p={}){const g=Bv(d,p);if(i0(e,g.name))return e[g.name];const _=new t(g,n);return e[g.name]=_,_}function a(){return Object.keys(e).map(d=>e[d])}function u(d){const p=d.name,g=p.replace("-compat","");if(Nr(d)&&d.type==="PUBLIC"){const _=(w=r())=>{if(typeof w[g]!="function")throw d0.create("invalid-app-argument",{appName:p});return w[g]()};d.serviceProps!==void 0&&Ed(_,d.serviceProps),n[g]=_,t.prototype[g]=function(...w){return this._getService.bind(this,p).apply(this,d.multipleInstances?w:[])}}return d.type==="PUBLIC"?n[g]:null}function c(d,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){const t=JM(QM);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:j1,extendNamespace:e,createSubscribe:L1,ErrorFactory:Qs,deepExtend:Ed});function e(n){Ed(t,n)}return t}const XM=j1();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new mf("@firebase/app-compat"),eV="@firebase/app-compat",tV="0.2.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){_i(eV,tV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(bO()&&self.firebase!==void 0){f0.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&f0.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Ue=XM;nV();var iV="firebase",rV="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ue.registerVersion(iV,rV,"app-compat");var sV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G,zv=zv||{},se=sV||self;function gf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function tc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function oV(t){return Object.prototype.hasOwnProperty.call(t,Sm)&&t[Sm]||(t[Sm]=++aV)}var Sm="closure_uid_"+(1e9*Math.random()>>>0),aV=0;function lV(t,e,n){return t.call.apply(t.bind,arguments)}function uV(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=lV:$t=uV,$t.apply(null,arguments)}function dh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Pt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var a=Array(arguments.length-2),u=2;u<arguments.length;u++)a[u-2]=arguments[u];return e.prototype[r].apply(i,a)}}function Kr(){this.s=this.s,this.o=this.o}var cV=0;Kr.prototype.s=!1;Kr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),cV!=0)&&oV(this)};Kr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const q1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Uv(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function p0(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(gf(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let a=0;a<s;a++)t[r+a]=i[a]}else t.push(i)}}function jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var hV=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{se.addEventListener("test",()=>{},e),se.removeEventListener("test",()=>{},e)}catch{}return t}();function Iu(t){return/^[\s\xa0]*$/.test(t)}function _f(){var t=se.navigator;return t&&(t=t.userAgent)?t:""}function si(t){return _f().indexOf(t)!=-1}function $v(t){return $v[" "](t),t}$v[" "]=function(){};function dV(t,e){var n=r2;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var fV=si("Opera"),ua=si("Trident")||si("MSIE"),W1=si("Edge"),qg=W1||ua,H1=si("Gecko")&&!(_f().toLowerCase().indexOf("webkit")!=-1&&!si("Edge"))&&!(si("Trident")||si("MSIE"))&&!si("Edge"),pV=_f().toLowerCase().indexOf("webkit")!=-1&&!si("Edge");function G1(){var t=se.document;return t?t.documentMode:void 0}var Wg;e:{var Am="",Rm=function(){var t=_f();if(H1)return/rv:([^\);]+)(\)|;)/.exec(t);if(W1)return/Edge\/([\d\.]+)/.exec(t);if(ua)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(pV)return/WebKit\/(\S+)/.exec(t);if(fV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Rm&&(Am=Rm?Rm[1]:""),ua){var Cm=G1();if(Cm!=null&&Cm>parseFloat(Am)){Wg=String(Cm);break e}}Wg=Am}var Hg;if(se.document&&ua){var m0=G1();Hg=m0||parseInt(Wg,10)||void 0}else Hg=void 0;var mV=Hg;function Eu(t,e){if(jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(H1){e:{try{$v(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:gV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Eu.$.h.call(this)}}Pt(Eu,jt);var gV={2:"touch",3:"pen",4:"mouse"};Eu.prototype.h=function(){Eu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var nc="closure_listenable_"+(1e6*Math.random()|0),_V=0;function vV(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++_V,this.fa=this.ia=!1}function vf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function jv(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function yV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function K1(t){const e={};for(const n in t)e[n]=t[n];return e}const g0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z1(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<g0.length;s++)n=g0[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function yf(t){this.src=t,this.g={},this.h=0}yf.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=Kg(t,e,i,r);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new vV(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function Gg(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=q1(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(vf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Kg(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var qv="closure_lm_"+(1e6*Math.random()|0),km={};function Q1(t,e,n,i,r){if(i&&i.once)return J1(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Q1(t,e[s],n,i,r);return null}return n=Gv(n),t&&t[nc]?t.O(e,n,tc(i)?!!i.capture:!!i,r):Y1(t,e,n,!1,i,r)}function Y1(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=tc(r)?!!r.capture:!!r,u=Hv(t);if(u||(t[qv]=u=new yf(t)),n=u.add(e,n,i,a,s),n.proxy)return n;if(i=wV(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)hV||(r=a),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(eA(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wV(){function t(n){return e.call(t.src,t.listener,n)}const e=IV;return t}function J1(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)J1(t,e[s],n,i,r);return null}return n=Gv(n),t&&t[nc]?t.P(e,n,tc(i)?!!i.capture:!!i,r):Y1(t,e,n,!0,i,r)}function X1(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)X1(t,e[s],n,i,r);else i=tc(i)?!!i.capture:!!i,n=Gv(n),t&&t[nc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Kg(s,n,i,r),-1<n&&(vf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Hv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Kg(e,n,i,r)),(n=-1<t?e[t]:null)&&Wv(n))}function Wv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[nc])Gg(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(eA(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Hv(e))?(Gg(n,t),n.h==0&&(n.src=null,e[qv]=null)):vf(t)}}}function eA(t){return t in km?km[t]:km[t]="on"+t}function IV(t,e){if(t.fa)t=!0;else{e=new Eu(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Wv(t),t=n.call(i,e)}return t}function Hv(t){return t=t[qv],t instanceof yf?t:null}var xm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gv(t){return typeof t=="function"?t:(t[xm]||(t[xm]=function(e){return t.handleEvent(e)}),t[xm])}function Tt(){Kr.call(this),this.i=new yf(this),this.S=this,this.J=null}Pt(Tt,Kr);Tt.prototype[nc]=!0;Tt.prototype.removeEventListener=function(t,e,n,i){X1(this,t,e,n,i)};function Dt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new jt(e,t);else if(e instanceof jt)e.target=e.target||t;else{var r=e;e=new jt(i,t),Z1(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];r=fh(a,i,!0,e)&&r}if(a=e.g=t,r=fh(a,i,!0,e)&&r,r=fh(a,i,!1,e)&&r,n)for(s=0;s<n.length;s++)a=e.g=n[s],r=fh(a,i,!1,e)&&r}Tt.prototype.N=function(){if(Tt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)vf(n[i]);delete t.g[e],t.h--}}this.J=null};Tt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Tt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function fh(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==n){var u=a.listener,c=a.la||a.src;a.ia&&Gg(t.i,a),r=u.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Kv=se.JSON.stringify;class EV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function TV(){var t=Zv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class PV{constructor(){this.h=this.g=null}add(e,n){const i=tA.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var tA=new EV(()=>new SV,t=>t.reset());class SV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function AV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function RV(t){se.setTimeout(()=>{throw t},0)}let Tu,Pu=!1,Zv=new PV,nA=()=>{const t=se.Promise.resolve(void 0);Tu=()=>{t.then(CV)}};var CV=()=>{for(var t;t=TV();){try{t.h.call(t.g)}catch(n){RV(n)}var e=tA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pu=!1};function wf(t,e){Tt.call(this),this.h=t||1,this.g=e||se,this.j=$t(this.qb,this),this.l=Date.now()}Pt(wf,Tt);G=wf.prototype;G.ga=!1;G.T=null;G.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dt(this,"tick"),this.ga&&(Qv(this),this.start()))}};G.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Qv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}G.N=function(){wf.$.N.call(this),Qv(this),delete this.g};function Yv(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:se.setTimeout(t,e||0)}function iA(t){t.g=Yv(()=>{t.g=null,t.i&&(t.i=!1,iA(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class kV extends Kr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iA(this)}N(){super.N(),this.g&&(se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Su(t){Kr.call(this),this.h=t,this.g={}}Pt(Su,Kr);var _0=[];function rA(t,e,n,i){Array.isArray(n)||(n&&(_0[0]=n.toString()),n=_0);for(var r=0;r<n.length;r++){var s=Q1(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function sA(t){jv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Wv(e)},t),t.g={}}Su.prototype.N=function(){Su.$.N.call(this),sA(this)};Su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function If(){this.g=!0}If.prototype.Ea=function(){this.g=!1};function xV(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var a="",u=s.split("&"),c=0;c<u.length;c++){var d=u[c].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");a=2<=g.length&&g[1]=="type"?a+(p+"="+d+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+a})}function bV(t,e,n,i,r,s,a){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+a})}function Uo(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+NV(t,n)+(i?" "+i:"")})}function LV(t,e){t.info(function(){return"TIMEOUT: "+e})}If.prototype.info=function(){};function NV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<r.length;a++)r[a]=""}}}}return Kv(n)}catch{return e}}var Ys={},v0=null;function Ef(){return v0=v0||new Tt}Ys.Ta="serverreachability";function oA(t){jt.call(this,Ys.Ta,t)}Pt(oA,jt);function Au(t){const e=Ef();Dt(e,new oA(e))}Ys.STAT_EVENT="statevent";function aA(t,e){jt.call(this,Ys.STAT_EVENT,t),this.stat=e}Pt(aA,jt);function Zt(t){const e=Ef();Dt(e,new aA(e,t))}Ys.Ua="timingevent";function lA(t,e){jt.call(this,Ys.Ua,t),this.size=e}Pt(lA,jt);function ic(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){t()},e)}var Tf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jv(){}Jv.prototype.h=null;function y0(t){return t.h||(t.h=t.i())}function cA(){}var rc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xv(){jt.call(this,"d")}Pt(Xv,jt);function ey(){jt.call(this,"c")}Pt(ey,jt);var Zg;function Pf(){}Pt(Pf,Jv);Pf.prototype.g=function(){return new XMLHttpRequest};Pf.prototype.i=function(){return{}};Zg=new Pf;function sc(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Su(this),this.P=DV,t=qg?125:void 0,this.V=new wf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new hA}function hA(){this.i=null,this.g="",this.h=!1}var DV=45e3,Qg={},Pd={};G=sc.prototype;G.setTimeout=function(t){this.P=t};function Yg(t,e,n){t.L=1,t.v=Af(ji(e)),t.s=n,t.S=!0,dA(t,null)}function dA(t,e){t.G=Date.now(),oc(t),t.A=ji(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),wA(n.i,"t",i),t.C=0,n=t.l.J,t.h=new hA,t.g=UA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new kV($t(t.Pa,t,t.g),t.O)),rA(t.U,t.g,"readystatechange",t.nb),e=t.I?K1(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Au(),xV(t.j,t.u,t.A,t.m,t.W,t.s)}G.nb=function(t){t=t.target;const e=this.M;e&&ci(t)==3?e.l():this.Pa(t)};G.Pa=function(t){try{if(t==this.g)e:{const p=ci(this.g);var e=this.g.Ia();const g=this.g.da();if(!(3>p)&&(p!=3||qg||this.g&&(this.h.h||this.g.ja()||T0(this.g)))){this.J||p!=4||e==7||(e==8||0>=g?Au(3):Au(2)),Sf(this);var n=this.g.da();this.ca=n;t:if(fA(this)){var i=T0(this.g);t="";var r=i.length,s=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ys(this),jl(this);var a="";break t}this.h.i=new se.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,bV(this.j,this.u,this.A,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Iu(u)){var d=u;break t}}d=null}if(n=d)Uo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jg(this,n);else{this.i=!1,this.o=3,Zt(12),ys(this),jl(this);break e}}this.S?(pA(this,p,a),qg&&this.i&&p==3&&(rA(this.U,this.V,"tick",this.mb),this.V.start())):(Uo(this.j,this.m,a,null),Jg(this,a)),p==4&&ys(this),this.i&&!this.J&&(p==4?VA(this.l,this):(this.i=!1,oc(this)))}else t2(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),ys(this),jl(this)}}}catch{}finally{}};function fA(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function pA(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=OV(t,n),r==Pd){e==4&&(t.o=4,Zt(14),i=!1),Uo(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Qg){t.o=4,Zt(15),Uo(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Uo(t.j,t.m,r,null),Jg(t,r);fA(t)&&r!=Pd&&r!=Qg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Zt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),oy(e),e.M=!0,Zt(11))):(Uo(t.j,t.m,n,"[Invalid Chunked Response]"),ys(t),jl(t))}G.mb=function(){if(this.g){var t=ci(this.g),e=this.g.ja();this.C<e.length&&(Sf(this),pA(this,t,e),this.i&&t!=4&&oc(this))}};function OV(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Pd:(n=Number(e.substring(n,i)),isNaN(n)?Qg:(i+=1,i+n>e.length?Pd:(e=e.slice(i,i+n),t.C=i+n,e)))}G.cancel=function(){this.J=!0,ys(this)};function oc(t){t.Y=Date.now()+t.P,mA(t,t.P)}function mA(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ic($t(t.lb,t),e)}function Sf(t){t.B&&(se.clearTimeout(t.B),t.B=null)}G.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(LV(this.j,this.A),this.L!=2&&(Au(),Zt(17)),ys(this),this.o=2,jl(this)):mA(this,this.Y-t)};function jl(t){t.l.H==0||t.J||VA(t.l,t)}function ys(t){Sf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Qv(t.V),sA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Jg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Xg(n.i,t))){if(!t.K&&Xg(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Rd(n),kf(n);else break e;sy(n),Zt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=ic($t(n.ib,n),6e3));if(1>=TA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ws(n,11)}else if((t.K||n.g==t)&&Rd(n),!Iu(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let d=r[e];if(n.V=d[0],d=d[1],n.H==2)if(d[0]=="c"){n.K=d[1],n.pa=d[2];const p=d[3];p!=null&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];g!=null&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];_!=null&&typeof _=="number"&&0<_&&(i=1.5*_,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const w=t.g;if(w){const S=w.g?w.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var s=i.i;s.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(ty(s,s.h),s.h=null))}if(i.F){const P=w.g?w.g.getResponseHeader("X-HTTP-Session-Id"):null;P&&(i.Da=P,Oe(i.I,i.F,P))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var a=t;if(i.wa=zA(i,i.J?i.pa:null,i.Y),a.K){PA(i.i,a);var u=a,c=i.L;c&&u.setTimeout(c),u.B&&(Sf(u),oc(u)),i.g=a}else OA(i);0<n.j.length&&xf(n)}else d[0]!="stop"&&d[0]!="close"||ws(n,7);else n.H==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?ws(n,7):ry(n):d[0]!="noop"&&n.h&&n.h.Aa(d),n.A=0)}}Au(4)}catch{}}function MV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(gf(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function VV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(gf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function gA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(gf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=VV(t),i=MV(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var _A=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function As(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof As){this.h=t.h,Sd(this,t.j),this.s=t.s,this.g=t.g,Ad(this,t.m),this.l=t.l;var e=t.i,n=new Ru;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),w0(this,n),this.o=t.o}else t&&(e=String(t).match(_A))?(this.h=!1,Sd(this,e[1]||"",!0),this.s=Cl(e[2]||""),this.g=Cl(e[3]||"",!0),Ad(this,e[4]),this.l=Cl(e[5]||"",!0),w0(this,e[6]||"",!0),this.o=Cl(e[7]||"")):(this.h=!1,this.i=new Ru(null,this.h))}As.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kl(e,I0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kl(e,I0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(kl(n,n.charAt(0)=="/"?UV:zV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kl(n,jV)),t.join("")};function ji(t){return new As(t)}function Sd(t,e,n){t.j=n?Cl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ad(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function w0(t,e,n){e instanceof Ru?(t.i=e,qV(t.i,t.h)):(n||(e=kl(e,$V)),t.i=new Ru(e,t.h))}function Oe(t,e,n){t.i.set(e,n)}function Af(t){return Oe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Cl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,BV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function BV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var I0=/[#\/\?@]/g,zV=/[#\?:]/g,UV=/[#\?]/g,$V=/[#\?@]/g,jV=/#/g;function Ru(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zr(t){t.g||(t.g=new Map,t.h=0,t.i&&FV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}G=Ru.prototype;G.add=function(t,e){Zr(this),this.i=null,t=xa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function vA(t,e){Zr(t),e=xa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function yA(t,e){return Zr(t),e=xa(t,e),t.g.has(e)}G.forEach=function(t,e){Zr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};G.ta=function(){Zr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};G.Z=function(t){Zr(this);let e=[];if(typeof t=="string")yA(this,t)&&(e=e.concat(this.g.get(xa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};G.set=function(t,e){return Zr(this),this.i=null,t=xa(this,t),yA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};G.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function wA(t,e,n){vA(t,e),0<n.length&&(t.i=null,t.g.set(xa(t,e),Uv(n)),t.h+=n.length)}G.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=s;a[i]!==""&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")};function xa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function qV(t,e){e&&!t.j&&(Zr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(vA(this,i),wA(this,r,n))},t)),t.j=e}var WV=class{constructor(t,e){this.g=t,this.map=e}};function IA(t){this.l=t||HV,se.PerformanceNavigationTiming?(t=se.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(se.g&&se.g.Ka&&se.g.Ka()&&se.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HV=10;function EA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function TA(t){return t.h?1:t.g?t.g.size:0}function Xg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ty(t,e){t.g?t.g.add(e):t.h=e}function PA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}IA.prototype.cancel=function(){if(this.i=SA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function SA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Uv(t.i)}var GV=class{stringify(t){return se.JSON.stringify(t,void 0)}parse(t){return se.JSON.parse(t,void 0)}};function KV(){this.g=new GV}function ZV(t,e,n){const i=n||"";try{gA(t,function(r,s){let a=r;tc(r)&&(a=Kv(r)),e.push(i+s+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function QV(t,e){const n=new If;if(se.Image){const i=new Image;i.onload=dh(ph,n,i,"TestLoadImage: loaded",!0,e),i.onerror=dh(ph,n,i,"TestLoadImage: error",!1,e),i.onabort=dh(ph,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=dh(ph,n,i,"TestLoadImage: timeout",!1,e),se.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function ph(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function ac(t){this.l=t.ec||null,this.j=t.ob||!1}Pt(ac,Jv);ac.prototype.g=function(){return new Rf(this.l,this.j)};ac.prototype.i=function(t){return function(){return t}}({});function Rf(t,e){Tt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ny,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pt(Rf,Tt);var ny=0;G=Rf.prototype;G.open=function(t,e){if(this.readyState!=ny)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cu(this)};G.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||se).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};G.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lc(this)),this.readyState=ny};G.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof se.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;AA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function AA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}G.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?lc(this):Cu(this),this.readyState==3&&AA(this)}};G.Za=function(t){this.g&&(this.response=this.responseText=t,lc(this))};G.Ya=function(t){this.g&&(this.response=t,lc(this))};G.ka=function(){this.g&&lc(this)};function lc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cu(t)}G.setRequestHeader=function(t,e){this.v.append(t,e)};G.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};G.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Cu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Rf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var YV=se.JSON.parse;function Ye(t){Tt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=RA,this.L=this.M=!1}Pt(Ye,Tt);var RA="",JV=/^https?$/i,XV=["POST","PUT"];G=Ye.prototype;G.Oa=function(t){this.M=t};G.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zg.g(),this.C=this.u?y0(this.u):y0(Zg),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){E0(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=se.FormData&&t instanceof se.FormData,!(0<=q1(XV,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xA(this),0<this.B&&((this.L=e2(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=Yv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){E0(this,s)}};function e2(t){return ua&&typeof t.timeout=="number"&&t.ontimeout!==void 0}G.ua=function(){typeof zv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dt(this,"timeout"),this.abort(8))};function E0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,CA(t),Cf(t)}function CA(t){t.F||(t.F=!0,Dt(t,"complete"),Dt(t,"error"))}G.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dt(this,"complete"),Dt(this,"abort"),Cf(this))};G.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cf(this,!0)),Ye.$.N.call(this)};G.La=function(){this.s||(this.G||this.v||this.l?kA(this):this.kb())};G.kb=function(){kA(this)};function kA(t){if(t.h&&typeof zv<"u"&&(!t.C[1]||ci(t)!=4||t.da()!=2)){if(t.v&&ci(t)==4)Yv(t.La,0,t);else if(Dt(t,"readystatechange"),ci(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.I).match(_A)[1]||null;!r&&se.self&&se.self.location&&(r=se.self.location.protocol.slice(0,-1)),i=!JV.test(r?r.toLowerCase():"")}n=i}if(n)Dt(t,"complete"),Dt(t,"success");else{t.m=6;try{var s=2<ci(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",CA(t)}}finally{Cf(t)}}}}function Cf(t,e){if(t.g){xA(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dt(t,"ready");try{n.onreadystatechange=i}catch{}}}function xA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(se.clearTimeout(t.A),t.A=null)}G.isActive=function(){return!!this.g};function ci(t){return t.g?t.g.readyState:0}G.da=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}};G.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};G.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),YV(e)}};function T0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case RA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function t2(t){const e={};t=(t.g&&2<=ci(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Iu(t[i]))continue;var n=AV(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}yV(e,function(i){return i.join(", ")})}G.Ia=function(){return this.m};G.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function bA(t){let e="";return jv(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function iy(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=bA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Oe(t,e,n))}function dl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function LA(t){this.Ga=0,this.j=[],this.l=new If,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=dl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=dl("baseRetryDelayMs",5e3,t),this.hb=dl("retryDelaySeedMs",1e4,t),this.eb=dl("forwardChannelMaxRetries",2,t),this.xa=dl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new IA(t&&t.concurrentRequestLimit),this.Ja=new KV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}G=LA.prototype;G.ra=8;G.H=1;function ry(t){if(NA(t),t.H==3){var e=t.W++,n=ji(t.I);if(Oe(n,"SID",t.K),Oe(n,"RID",e),Oe(n,"TYPE","terminate"),uc(t,n),e=new sc(t,t.l,e),e.L=2,e.v=Af(ji(n)),n=!1,se.navigator&&se.navigator.sendBeacon)try{n=se.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&se.Image&&(new Image().src=e.v,n=!0),n||(e.g=UA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),oc(e)}BA(t)}function kf(t){t.g&&(oy(t),t.g.cancel(),t.g=null)}function NA(t){kf(t),t.u&&(se.clearTimeout(t.u),t.u=null),Rd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&se.clearTimeout(t.m),t.m=null)}function xf(t){if(!EA(t.i)&&!t.m){t.m=!0;var e=t.Na;Tu||nA(),Pu||(Tu(),Pu=!0),Zv.add(e,t),t.C=0}}function n2(t,e){return TA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ic($t(t.Na,t,e),FA(t,t.C)),t.C++,!0)}G.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new sc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=K1(s),Z1(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=DA(this,r,e),n=ji(this.I),Oe(n,"RID",t),Oe(n,"CVER",22),this.F&&Oe(n,"X-HTTP-Session-Id",this.F),uc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(bA(s)))+"&"+e:this.o&&iy(n,this.o,s)),ty(this.i,r),this.bb&&Oe(n,"TYPE","init"),this.P?(Oe(n,"$req",e),Oe(n,"SID","null"),r.aa=!0,Yg(r,n,null)):Yg(r,n,e),this.H=2}}else this.H==3&&(t?P0(this,t):this.j.length==0||EA(this.i)||P0(this))};function P0(t,e){var n;e?n=e.m:n=t.W++;const i=ji(t.I);Oe(i,"SID",t.K),Oe(i,"RID",n),Oe(i,"AID",t.V),uc(t,i),t.o&&t.s&&iy(i,t.o,t.s),n=new sc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=DA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ty(t.i,n),Yg(n,i,e)}function uc(t,e){t.na&&jv(t.na,function(n,i){Oe(e,i,n)}),t.h&&gA({},function(n,i){Oe(e,i,n)})}function DA(t,e,n){n=Math.min(t.j.length,n);var i=t.h?$t(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){const a=["count="+n];s==-1?0<n?(s=r[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let u=!0;for(let c=0;c<n;c++){let d=r[c].g;const p=r[c].map;if(d-=s,0>d)s=Math.max(0,r[c].g-100),u=!1;else try{ZV(p,a,"req"+d+"_")}catch{i&&i(p)}}if(u){i=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function OA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Tu||nA(),Pu||(Tu(),Pu=!0),Zv.add(e,t),t.A=0}}function sy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ic($t(t.Ma,t),FA(t,t.A)),t.A++,!0)}G.Ma=function(){if(this.u=null,MA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ic($t(this.jb,this),t)}};G.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zt(10),kf(this),MA(this))};function oy(t){t.B!=null&&(se.clearTimeout(t.B),t.B=null)}function MA(t){t.g=new sc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ji(t.wa);Oe(e,"RID","rpc"),Oe(e,"SID",t.K),Oe(e,"AID",t.V),Oe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Oe(e,"TO",t.qa),Oe(e,"TYPE","xmlhttp"),uc(t,e),t.o&&t.s&&iy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Af(ji(e)),n.s=null,n.S=!0,dA(n,t)}G.ib=function(){this.v!=null&&(this.v=null,kf(this),sy(this),Zt(19))};function Rd(t){t.v!=null&&(se.clearTimeout(t.v),t.v=null)}function VA(t,e){var n=null;if(t.g==e){Rd(t),oy(t),t.g=null;var i=2}else if(Xg(t.i,e))n=e.F,PA(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=Ef(),Dt(i,new lA(i,n)),xf(t)}else OA(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&n2(t,e)||i==2&&sy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:ws(t,5);break;case 4:ws(t,10);break;case 3:ws(t,6);break;default:ws(t,2)}}}function FA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ws(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=$t(t.pb,t);n||(n=new As("//www.google.com/images/cleardot.gif"),se.location&&se.location.protocol=="http"||Sd(n,"https"),Af(n)),QV(n.toString(),i)}else Zt(2);t.H=0,t.h&&t.h.za(e),BA(t),NA(t)}G.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Zt(2)):(this.l.info("Failed to ping google.com"),Zt(1))};function BA(t){if(t.H=0,t.ma=[],t.h){const e=SA(t.i);(e.length!=0||t.j.length!=0)&&(p0(t.ma,e),p0(t.ma,t.j),t.i.i.length=0,Uv(t.j),t.j.length=0),t.h.ya()}}function zA(t,e,n){var i=n instanceof As?ji(n):new As(n);if(i.g!="")e&&(i.g=e+"."+i.g),Ad(i,i.m);else{var r=se.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new As(null);i&&Sd(s,i),e&&(s.g=e),r&&Ad(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Oe(i,n,e),Oe(i,"VER",t.ra),uc(t,i),i}function UA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ye(new ac({ob:!0})):new Ye(t.va),e.Oa(t.J),e}G.isActive=function(){return!!this.h&&this.h.isActive(this)};function $A(){}G=$A.prototype;G.Ba=function(){};G.Aa=function(){};G.za=function(){};G.ya=function(){};G.isActive=function(){return!0};G.Va=function(){};function Cd(){if(ua&&!(10<=Number(mV)))throw Error("Environmental error: no available transport.")}Cd.prototype.g=function(t,e){return new Tn(t,e)};function Tn(t,e){Tt.call(this),this.g=new LA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Iu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Iu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ba(this)}Pt(Tn,Tt);Tn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Zt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=zA(t,null,t.Y),xf(t)};Tn.prototype.close=function(){ry(this.g)};Tn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Kv(t),t=n);e.j.push(new WV(e.fb++,t)),e.H==3&&xf(e)};Tn.prototype.N=function(){this.g.h=null,delete this.j,ry(this.g),delete this.g,Tn.$.N.call(this)};function jA(t){Xv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Pt(jA,Xv);function qA(){ey.call(this),this.status=1}Pt(qA,ey);function ba(t){this.g=t}Pt(ba,$A);ba.prototype.Ba=function(){Dt(this.g,"a")};ba.prototype.Aa=function(t){Dt(this.g,new jA(t))};ba.prototype.za=function(t){Dt(this.g,new qA)};ba.prototype.ya=function(){Dt(this.g,"b")};function i2(){this.blockSize=-1}function Zn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Pt(Zn,i2);Zn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function bm(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],a=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Zn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)bm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){bm(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){bm(this,i),r=0;break}}this.h=r,this.i+=e};Zn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Ce(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var r2={};function ay(t){return-128<=t&&128>t?dV(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function hi(t){if(isNaN(t)||!isFinite(t))return Zo;if(0>t)return bt(hi(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=e_;return new Ce(e,0)}function WA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bt(WA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=hi(Math.pow(e,8)),i=Zo,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),a=parseInt(t.substring(r,r+s),e);8>s?(s=hi(Math.pow(e,s)),i=i.R(s).add(hi(a))):(i=i.R(n),i=i.add(hi(a)))}return i}var e_=4294967296,Zo=ay(0),t_=ay(1),S0=ay(16777216);G=Ce.prototype;G.ea=function(){if(Ln(this))return-bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:e_+i)*e,e*=e_}return t};G.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Li(this))return"0";if(Ln(this))return"-"+bt(this).toString(t);for(var e=hi(Math.pow(t,6)),n=this,i="";;){var r=xd(n,e).g;n=kd(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Li(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};G.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Li(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ln(t){return t.h==-1}G.X=function(t){return t=kd(this,t),Ln(t)?-1:Li(t)?0:1};function bt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Ce(n,~t.h).add(t_)}G.abs=function(){return Ln(this)?bt(this):this};G.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),a=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=a>>>16,s&=65535,a&=65535,n[r]=a<<16|s}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function kd(t,e){return t.add(bt(e))}G.R=function(t){if(Li(this)||Li(t))return Zo;if(Ln(this))return Ln(t)?bt(this).R(bt(t)):bt(bt(this).R(t));if(Ln(t))return bt(this.R(bt(t)));if(0>this.X(S0)&&0>t.X(S0))return hi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,a=this.D(i)&65535,u=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=a*c,mh(n,2*i+2*r),n[2*i+2*r+1]+=s*c,mh(n,2*i+2*r+1),n[2*i+2*r+1]+=a*u,mh(n,2*i+2*r+1),n[2*i+2*r+2]+=s*u,mh(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Ce(n,0)};function mh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function fl(t,e){this.g=t,this.h=e}function xd(t,e){if(Li(e))throw Error("division by zero");if(Li(t))return new fl(Zo,Zo);if(Ln(t))return e=xd(bt(t),e),new fl(bt(e.g),bt(e.h));if(Ln(e))return e=xd(t,bt(e)),new fl(bt(e.g),e.h);if(30<t.g.length){if(Ln(t)||Ln(e))throw Error("slowDivide_ only works with positive integers.");for(var n=t_,i=e;0>=i.X(t);)n=A0(n),i=A0(i);var r=mo(n,1),s=mo(i,1);for(i=mo(i,2),n=mo(n,2);!Li(i);){var a=s.add(i);0>=a.X(t)&&(r=r.add(n),s=a),i=mo(i,1),n=mo(n,1)}return e=kd(t,r.R(e)),new fl(r,e)}for(r=Zo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=hi(n),a=s.R(e);Ln(a)||0<a.X(t);)n-=i,s=hi(n),a=s.R(e);Li(s)&&(s=t_),r=r.add(s),t=kd(t,a)}return new fl(r,t)}G.gb=function(t){return xd(this,t).h};G.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Ce(n,this.h&t.h)};G.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Ce(n,this.h|t.h)};G.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Ce(n,this.h^t.h)};function A0(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Ce(n,t.h)}function mo(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ce(r,t.h)}Cd.prototype.createWebChannel=Cd.prototype.g;Tn.prototype.send=Tn.prototype.u;Tn.prototype.open=Tn.prototype.m;Tn.prototype.close=Tn.prototype.close;Tf.NO_ERROR=0;Tf.TIMEOUT=8;Tf.HTTP_ERROR=6;uA.COMPLETE="complete";cA.EventType=rc;rc.OPEN="a";rc.CLOSE="b";rc.ERROR="c";rc.MESSAGE="d";Tt.prototype.listen=Tt.prototype.O;Ye.prototype.listenOnce=Ye.prototype.P;Ye.prototype.getLastError=Ye.prototype.Sa;Ye.prototype.getLastErrorCode=Ye.prototype.Ia;Ye.prototype.getStatus=Ye.prototype.da;Ye.prototype.getResponseJson=Ye.prototype.Wa;Ye.prototype.getResponseText=Ye.prototype.ja;Ye.prototype.send=Ye.prototype.ha;Ye.prototype.setWithCredentials=Ye.prototype.Oa;Zn.prototype.digest=Zn.prototype.l;Zn.prototype.reset=Zn.prototype.reset;Zn.prototype.update=Zn.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=hi;Ce.fromString=WA;var s2=function(){return new Cd},o2=function(){return Ef()},Lm=Tf,a2=uA,l2=Ys,R0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},u2=ac,gh=cA,c2=Ye,h2=Zn,Qo=Ce;const C0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new mf("@firebase/firestore");function To(){return Dr.logLevel}function d2(t){Dr.setLogLevel(t)}function B(t,...e){if(Dr.logLevel<=pe.DEBUG){const n=e.map(ly);Dr.debug(`Firestore (${La}): ${t}`,...n)}}function it(t,...e){if(Dr.logLevel<=pe.ERROR){const n=e.map(ly);Dr.error(`Firestore (${La}): ${t}`,...n)}}function Qn(t,...e){if(Dr.logLevel<=pe.WARN){const n=e.map(ly);Dr.warn(`Firestore (${La}): ${t}`,...n)}}function ly(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: `+t;throw it(e),new Error(e)}function X(t,e){t||Q()}function f2(t,e){t||Q()}function H(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends Yt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class m2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class g2{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Et,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Et)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(X(typeof i.accessToken=="string"),new HA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string"),new wt(e)}}class _2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class v2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new _2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string"),this.R=n.token,new y2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=I2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ae(t,e){return t<e?-1:t>e?1:0}function ca(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function KA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new $e(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new $e(0,0))}static max(){return new J(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,i){n===void 0?n=0:n>e.length&&Q(),i===void 0?i=e.length-n:i>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ku.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ku?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),a=n.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends ku{construct(e,n,i){return new ye(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new F(b.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const E2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends ku{construct(e,n,i){return new Be(e,n,i)}static isValidIdentifier(e){return E2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new F(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new F(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(s(),r++)}if(s(),a)throw new F(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ye.fromString(e))}static fromName(e){return new W(ye.fromString(e).popFirst(5))}static empty(){return new W(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function n_(t){return t.fields.find(e=>e.kind===2)}function cs(t){return t.fields.filter(e=>e.kind!==2)}bd.UNKNOWN_ID=-1;class Oh{constructor(e,n){this.fieldPath=e,this.kind=n}}class xu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new xu(0,Pn.min())}}function ZA(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new $e(n+1,0):new $e(n,i));return new Pn(r,W.empty(),e)}function QA(t){return new Pn(t.readTime,t.key,-1)}class Pn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Pn(J.min(),W.empty(),-1)}static max(){return new Pn(J.max(),W.empty(),-1)}}function uy(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qr(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==YA)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,i)=>{n(e)})}static reject(e){return new C((n,i)=>{i(e)})}static waitFor(e){return new C((n,i)=>{let r=0,s=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++s,a&&s===r&&n()},c=>i(c))}),a=!0,s===r&&n()})}static or(e){let n=C.resolve(!1);for(const i of e)n=n.next(r=>r?C.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new C((i,r)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(p=>{a[d]=p,++u,u===s&&i(a)},p=>r(p))}})}static doWhile(e,n){return new C((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Et,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ql(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=cy(i.target.error);this.V.reject(new ql(e,r))}}static open(e,n,i,r){try{return new bf(n,e.transaction(r,i))}catch(s){throw new ql(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(B("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new P2(n)}}class Wn{constructor(e,n,i){this.name=e,this.version=n,this.p=i,Wn.S(Ke())===12.2&&it("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return B("SimpleDb","Removing database:",e),hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vu())return!1;if(Wn.C())return!0;const e=Ke(),n=Wn.S(e),i=0<n&&n<10,r=Wn.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async O(e){return this.db||(B("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new ql(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new F(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new F(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new ql(e,a))},r.onupgradeneeded=s=>{B("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.N(a,r.transaction,s.oldVersion,this.version).next(()=>{B("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.O(e);const u=bf.open(this.db,e,s?"readonly":"readwrite",i),c=r(u).next(d=>(u.g(),d)).catch(d=>(u.abort(d),C.reject(d))).toPromise();return c.catch(()=>{}),await u.m,c}catch(u){const c=u,d=c.name!=="FirebaseError"&&a<3;if(B("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class T2{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return hs(this.k.delete())}}class ql extends F{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Yr(t){return t.name==="IndexedDbTransactionError"}class P2{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(B("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(B("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),hs(i)}add(e){return B("SimpleDb","ADD",this.store.name,e,e),hs(this.store.add(e))}get(e){return hs(this.store.get(e)).next(n=>(n===void 0&&(n=null),B("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return B("SimpleDb","DELETE",this.store.name,e),hs(this.store.delete(e))}count(){return B("SimpleDb","COUNT",this.store.name),hs(this.store.count())}W(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const r=this.cursor(i),s=[];return this.G(r,(a,u)=>{s.push(u)}).next(()=>s)}{const r=this.store.getAll(i.range);return new C((s,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}}j(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new C((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}H(e,n){B("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.J=!1;const r=this.cursor(i);return this.G(r,(s,a,u)=>u.delete())}Y(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.G(r,n)}Z(e){const n=this.cursor({});return new C((i,r)=>{n.onerror=s=>{const a=cy(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(u=>{u?a.continue():i()}):i()}})}G(e,n){const i=[];return new C((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void r();const c=new T2(u),d=n(u.primaryKey,u.value,c);if(d instanceof C){const p=d.catch(g=>(c.done(),C.reject(g)));i.push(p)}c.isDone?r():c.$===null?u.continue():u.continue(c.$)}}).next(()=>C.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function hs(t){return new C((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=cy(i.target.error);n(r)}})}let k0=!1;function cy(t){const e=Wn.S(Ke());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k0||(k0=!0,setTimeout(()=>{throw i},0)),i}}return t}class S2{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){B("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{B("IndexBackiller",`Documents written: ${await this.X.te()}`)}catch(n){Yr(n)?B("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Qr(n)}await this.ee(6e4)})}}class A2{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const i=new Set;let r=n,s=!0;return C.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return B("IndexBackiller",`Processing collection: ${a}`),this.re(e,a,r).next(u=>{r-=u,i.add(a)});s=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.ie(r,s)).next(u=>(B("IndexBackiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>a.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=QA(s);uy(a,i)>0&&(i=a)}),new Pn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.se(i),this.oe=i=>n.writeSequenceNumber(i))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}cn._e=-1;function cc(t){return t==null}function bu(t){return t===0&&1/t==-1/0}function XA(t){return typeof t=="number"&&Number.isInteger(t)&&!bu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=x0(e)),e=R2(t.get(n),e);return x0(e)}function R2(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function x0(t){return t+""}function di(t){const e=t.length;if(X(e>=2),e===2)return X(t.charAt(0)===""&&t.charAt(1)===""),ye.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>n)&&Q(),t.charAt(a+1)){case"":const u=t.substring(s,a);let c;r.length===0?c=u:(r+=u,c=r,r=""),i.push(c);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:Q()}s=a+2}return new ye(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t,e){return[t,Jt(e)]}function eR(t,e,n){return[t,Jt(e),n]}const C2={},k2=["prefixPath","collectionGroup","readTime","documentId"],x2=["prefixPath","collectionGroup","documentId"],b2=["collectionGroup","readTime","prefixPath","documentId"],L2=["canonicalId","targetId"],N2=["targetId","path"],D2=["path","targetId"],O2=["collectionId","parent"],M2=["indexId","uid"],V2=["uid","sequenceNumber"],F2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],B2=["indexId","uid","orderedDocumentKey"],z2=["userId","collectionPath","documentId"],U2=["userId","collectionPath","largestBatchId"],$2=["userId","collectionGroup","largestBatchId"],tR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],j2=[...tR,"documentOverlays"],nR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iR=nR,q2=[...iR,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends JA{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function St(t,e){const n=H(t);return Wn.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _h(this.root,e,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _h(this.root,e,this.comparator,!0)}}class _h{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??xt.RED,this.left=r??xt.EMPTY,this.right=s??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new xt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return xt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,i,r,s){return this}insert(e,n,i){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xe(this.comparator);return n.data=e,n}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function go(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new hn([])}unionWith(e){let n=new xe(Be.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sR("Invalid base64 string: "+s):s}}(e);return new gt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const H2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(X(!!t),typeof t=="string"){let e=0;const n=H2.exec(t);if(X(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hy(t){const e=t.mapValue.fields.__previous_value__;return Lf(e)?hy(e):e}function Lu(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n,i,r,s,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Vr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vh={nullValue:"NULL_VALUE"};function Ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lf(t)?4:oR(t)?9007199254740991:10:Q()}function wi(t,e){if(t===e)return!0;const n=Ms(t);if(n!==Ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lu(t).isEqual(Lu(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Or(r.timestampValue),u=Or(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Mr(r.bytesValue).isEqual(Mr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Qe(r.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(r.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Qe(r.integerValue)===Qe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Qe(r.doubleValue),u=Qe(s.doubleValue);return a===u?bu(a)===bu(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return ca(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:return function(r,s){const a=r.mapValue.fields||{},u=s.mapValue.fields||{};if(L0(a)!==L0(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!wi(a[c],u[c])))return!1;return!0}(t,e);default:return Q()}}function Nu(t,e){return(t.values||[]).find(n=>wi(n,e))!==void 0}function Fr(t,e){if(t===e)return 0;const n=Ms(t),i=Ms(e);if(n!==i)return ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,a){const u=Qe(s.integerValue||s.doubleValue),c=Qe(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return D0(t.timestampValue,e.timestampValue);case 4:return D0(Lu(t),Lu(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(s,a){const u=Mr(s),c=Mr(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let d=0;d<u.length&&d<c.length;d++){const p=ae(u[d],c[d]);if(p!==0)return p}return ae(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const u=ae(Qe(s.latitude),Qe(a.latitude));return u!==0?u:ae(Qe(s.longitude),Qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const u=s.values||[],c=a.values||[];for(let d=0;d<u.length&&d<c.length;++d){const p=Fr(u[d],c[d]);if(p)return p}return ae(u.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===gr.mapValue&&a===gr.mapValue)return 0;if(s===gr.mapValue)return 1;if(a===gr.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),d=a.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=ae(c[g],p[g]);if(_!==0)return _;const w=Fr(u[c[g]],d[p[g]]);if(w!==0)return w}return ae(c.length,p.length)}(t.mapValue,e.mapValue);default:throw Q()}}function D0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Or(t),i=Or(e),r=ae(n.seconds,i.seconds);return r!==0?r:ae(n.nanos,i.nanos)}function ha(t){return r_(t)}function r_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Or(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=r_(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${r_(n.fields[a])}`;return r+"}"}(t.mapValue):Q()}function Vs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function s_(t){return!!t&&"integerValue"in t}function Du(t){return!!t&&"arrayValue"in t}function O0(t){return!!t&&"nullValue"in t}function M0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fh(t){return!!t&&"mapValue"in t}function Wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Wl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function K2(t){return"nullValue"in t?Vh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vs(Vr.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Q()}function Z2(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vs(Vr.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?gr:Q()}function V0(t,e){const n=Fr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function F0(t,e){const n=Fr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(n)}setAll(e){let n=Be.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Wl(a):r.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Js(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Lt(Wl(this.value))}}function aR(t){const e=[];return Js(t.fields,(n,i)=>{const r=new Be([n]);if(Fh(i)){const s=aR(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n,i,r,s,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Me(e,0,J.min(),J.min(),J.min(),Lt.empty(),0)}static newFoundDocument(e,n,i,r){return new Me(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new Me(e,2,n,J.min(),J.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new Me(e,3,n,J.min(),J.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.position=e,this.inclusive=n}}function B0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=W.comparator(W.fromName(a.referenceValue),n.key):i=Fr(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function z0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{}class me extends lR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Y2(e,n,i):n==="array-contains"?new eF(e,i):n==="in"?new pR(e,i):n==="not-in"?new tF(e,i):n==="array-contains-any"?new nF(e,i):new me(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new J2(e,i):new X2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fr(n,this.value)):n!==null&&Ms(this.value)===Ms(n)&&this.matchesComparison(Fr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ae extends lR{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ae(e,n)}matches(e){return da(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function da(t){return t.op==="and"}function o_(t){return t.op==="or"}function dy(t){return uR(t)&&da(t)}function uR(t){for(const e of t.filters)if(e instanceof Ae)return!1;return!0}function a_(t){if(t instanceof me)return t.field.canonicalString()+t.op.toString()+ha(t.value);if(dy(t))return t.filters.map(e=>a_(e)).join(",");{const e=t.filters.map(n=>a_(n)).join(",");return`${t.op}(${e})`}}function cR(t,e){return t instanceof me?function(i,r){return r instanceof me&&i.op===r.op&&i.field.isEqual(r.field)&&wi(i.value,r.value)}(t,e):t instanceof Ae?function(i,r){return r instanceof Ae&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,u)=>s&&cR(a,r.filters[u]),!0):!1}(t,e):void Q()}function hR(t,e){const n=t.filters.concat(e);return Ae.create(n,t.op)}function dR(t){return t instanceof me?function(n){return`${n.field.canonicalString()} ${n.op} ${ha(n.value)}`}(t):t instanceof Ae?function(n){return n.op.toString()+" {"+n.getFilters().map(dR).join(" ,")+"}"}(t):"Filter"}class Y2 extends me{constructor(e,n,i){super(e,n,i),this.key=W.fromName(i.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class J2 extends me{constructor(e,n){super(e,"in",n),this.keys=fR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X2 extends me{constructor(e,n){super(e,"not-in",n),this.keys=fR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>W.fromName(i.referenceValue))}class eF extends me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Du(n)&&Nu(n.arrayValue,this.value)}}class pR extends me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class tF extends me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Nu(this.value.arrayValue,n)}}class nF extends me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Nu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n=null,i=[],r=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=u,this.ce=null}}function l_(t,e=null,n=[],i=[],r=null,s=null,a=null){return new iF(t,e,n,i,r,s,a)}function Fs(t){const e=H(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>a_(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),cc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ha(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ha(i)).join(",")),e.ce=n}return e.ce}function hc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!z0(t.startAt,e.startAt)&&z0(t.endAt,e.endAt)}function Ld(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Nd(t,e){return t.filters.filter(n=>n instanceof me&&n.field.isEqual(e))}function U0(t,e,n){let i=Vh,r=!0;for(const s of Nd(t,e)){let a=Vh,u=!0;switch(s.op){case"<":case"<=":a=K2(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=Vh}V0({value:i,inclusive:r},{value:a,inclusive:u})<0&&(i=a,r=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];V0({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function $0(t,e,n){let i=gr,r=!0;for(const s of Nd(t,e)){let a=gr,u=!0;switch(s.op){case">=":case">":a=Z2(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=gr}F0({value:i,inclusive:r},{value:a,inclusive:u})>0&&(i=a,r=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];F0({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n=null,i=[],r=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function mR(t,e,n,i,r,s,a,u){return new Gi(t,e,n,i,r,s,a,u)}function Na(t){return new Gi(t)}function j0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fy(t){return t.collectionGroup!==null}function Yo(t){const e=H(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new xe(Be.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ou(s,i))}),n.has(Be.keyField().canonicalString())||e.le.push(new Ou(Be.keyField(),i))}return e.le}function Xt(t){const e=H(t);return e.he||(e.he=rF(e,Yo(t))),e.he}function rF(t,e){if(t.limitType==="F")return l_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ou(r.field,s)});const n=t.endAt?new Br(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Br(t.startAt.position,t.startAt.inclusive):null;return l_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function u_(t,e){const n=t.filters.concat([e]);return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dd(t,e,n){return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dc(t,e){return hc(Xt(t),Xt(e))&&t.limitType===e.limitType}function gR(t){return`${Fs(Xt(t))}|lt:${t.limitType}`}function Po(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>dR(r)).join(", ")}]`),cc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ha(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ha(r)).join(",")),`Target(${i})`}(Xt(t))}; limitType=${t.limitType})`}function fc(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):W.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Yo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const d=B0(a,u,c);return a.inclusive?d<=0:d<0}(i.startAt,Yo(i),r)||i.endAt&&!function(a,u,c){const d=B0(a,u,c);return a.inclusive?d>=0:d>0}(i.endAt,Yo(i),r))}(t,e)}function _R(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vR(t){return(e,n)=>{let i=!1;for(const r of Yo(t)){const s=sF(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function sF(t,e,n){const i=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,a,u){const c=a.data.field(s),d=u.data.field(s);return c!==null&&d!==null?Fr(c,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return rR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=new Ne(W.comparator);function dn(){return oF}const yR=new Ne(W.comparator);function xl(...t){let e=yR;for(const n of t)e=e.insert(n.key,n);return e}function wR(t){let e=yR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function fi(){return Hl()}function IR(){return Hl()}function Hl(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const aF=new Ne(W.comparator),lF=new xe(W.comparator);function ce(...t){let e=lF;for(const n of t)e=e.add(n);return e}const uF=new xe(ae);function py(){return uF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function TR(t){return{integerValue:""+t}}function PR(t,e){return XA(e)?TR(e):ER(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function cF(t,e,n){return t instanceof fa?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Lf(s)&&(s=hy(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Bs?AR(t,e):t instanceof zs?RR(t,e):function(r,s){const a=SR(r,s),u=q0(a)+q0(r.Ie);return s_(a)&&s_(r.Ie)?TR(u):ER(r.serializer,u)}(t,e)}function hF(t,e,n){return t instanceof Bs?AR(t,e):t instanceof zs?RR(t,e):n}function SR(t,e){return t instanceof pa?function(i){return s_(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class fa extends Nf{}class Bs extends Nf{constructor(e){super(),this.elements=e}}function AR(t,e){const n=CR(e);for(const i of t.elements)n.some(r=>wi(r,i))||n.push(i);return{arrayValue:{values:n}}}class zs extends Nf{constructor(e){super(),this.elements=e}}function RR(t,e){let n=CR(e);for(const i of t.elements)n=n.filter(r=>!wi(r,i));return{arrayValue:{values:n}}}class pa extends Nf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function q0(t){return Qe(t.integerValue||t.doubleValue)}function CR(t){return Du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.field=e,this.transform=n}}function dF(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Bs&&r instanceof Bs||i instanceof zs&&r instanceof zs?ca(i.elements,r.elements,wi):i instanceof pa&&r instanceof pa?wi(i.Ie,r.Ie):i instanceof fa&&r instanceof fa}(t.transform,e.transform)}class fF{constructor(e,n){this.version=e,this.transformResults=n}}class ze{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ze}static exists(e){return new ze(void 0,e)}static updateTime(e){return new ze(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Df{}function kR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oa(t.key,ze.none()):new Da(t.key,t.data,ze.none());{const n=t.data,i=Lt.empty();let r=new xe(Be.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Ki(t.key,i,new hn(r.toArray()),ze.none())}}function pF(t,e,n){t instanceof Da?function(r,s,a){const u=r.value.clone(),c=H0(r.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Ki?function(r,s,a){if(!Bh(r.precondition,s))return void s.convertToUnknownDocument(a.version);const u=H0(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(xR(r)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Gl(t,e,n,i){return t instanceof Da?function(s,a,u,c){if(!Bh(s.precondition,a))return u;const d=s.value.clone(),p=G0(s.fieldTransforms,c,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ki?function(s,a,u,c){if(!Bh(s.precondition,a))return u;const d=G0(s.fieldTransforms,c,a),p=a.data;return p.setAll(xR(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,a,u){return Bh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function mF(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=SR(i.transform,r||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(i.field,s))}return n||null}function W0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ca(i,r,(s,a)=>dF(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Da extends Df{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ki extends Df{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function H0(t,e,n){const i=new Map;X(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,u=e.data.field(s.field);i.set(s.field,hF(a,u,n[r]))}return i}function G0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,cF(s,a,e))}return i}class Oa extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class my extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&pF(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Gl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Gl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=IR();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(r.key)?null:u;const c=kR(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,(n,i)=>W0(n,i))&&ca(this.baseMutations,e.baseMutations,(n,i)=>W0(n,i))}}class _y{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){X(e.mutations.length===i.length);let r=function(){return aF}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new _y(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,ve;function bR(t){switch(t){default:return Q();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function LR(t){if(t===void 0)return it("GRPC error has no .code"),b.UNKNOWN;switch(t){case lt.OK:return b.OK;case lt.CANCELLED:return b.CANCELLED;case lt.UNKNOWN:return b.UNKNOWN;case lt.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case lt.INTERNAL:return b.INTERNAL;case lt.UNAVAILABLE:return b.UNAVAILABLE;case lt.UNAUTHENTICATED:return b.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case lt.NOT_FOUND:return b.NOT_FOUND;case lt.ALREADY_EXISTS:return b.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return b.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case lt.ABORTED:return b.ABORTED;case lt.OUT_OF_RANGE:return b.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return b.UNIMPLEMENTED;case lt.DATA_LOSS:return b.DATA_LOSS;default:return Q()}}(ve=lt||(lt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=new Qo([4294967295,4294967295],0);function K0(t){const e=NR().encode(t),n=new h2;return n.update(e),new Uint8Array(n.digest())}function Z0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qo([n,i],0),new Qo([r,s],0)]}class yy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new bl(`Invalid padding: ${n}`);if(i<0)throw new bl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new bl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Qo.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Qo.fromNumber(i)));return r.compare(_F)===1&&(r=new Qo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=K0(e),[i,r]=Z0(n);for(let s=0;s<this.hashCount;s++){const a=this.de(i,r,s);if(!this.Ae(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new yy(s,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Te===0)return;const n=K0(e),[i,r]=Z0(n);for(let s=0;s<this.hashCount;s++){const a=this.de(i,r,s);this.Re(a)}}Re(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new mc(J.min(),r,new Ne(ae),dn(),ce())}}class gc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new gc(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}}class DR{constructor(e,n){this.targetId=e,this.fe=n}}class OR{constructor(e,n,i=gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Q0{constructor(){this.ge=0,this.pe=J0(),this.ye=gt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ce(),n=ce(),i=ce();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Q()}}),new gc(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=J0()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class vF{constructor(e){this.Le=e,this.ke=new Map,this.qe=dn(),this.Qe=Y0(),this.Ke=new Ne(ae)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){const n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){const s=r.target;if(Ld(s))if(i===0){const a=new W(s.path);this.We(n,a,Me.newNoDocument(a,J.min()))}else X(i===1);else{const a=this.Ze(n);if(a!==i){const u=this.Xe(e),c=u?this.et(u,e,a):1;if(c!==0){this.He(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,d)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,u;try{a=Mr(i).toUint8Array()}catch(c){if(c instanceof sR)return Qn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new yy(a,r,s)}catch(c){return Qn(c instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Te===0?null:u}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Le.nt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.We(n,s,null),r++)}),r}it(e){const n=new Map;this.ke.forEach((s,a)=>{const u=this.Ye(a);if(u){if(s.current&&Ld(u.target)){const c=new W(u.target.path);this.qe.get(c)!==null||this.st(a,c)||this.We(a,c,Me.newNoDocument(c,e))}s.De&&(n.set(a,s.ve()),s.Fe())}});let i=ce();this.Qe.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const d=this.Ye(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(s))}),this.qe.forEach((s,a)=>a.setReadTime(e));const r=new mc(e,n,this.Ke,this.qe,i);return this.qe=dn(),this.Qe=Y0(),this.Ke=new Ne(ae),r}Ue(e,n){if(!this.je(e))return;const i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Q0,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new xe(ae),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Q0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Y0(){return new Ne(W.comparator)}function J0(){return new Ne(W.comparator)}const yF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),wF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),IF=(()=>({and:"AND",or:"OR"}))();class EF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function c_(t,e){return t.useProto3Json||cc(e)?e:{value:e}}function ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TF(t,e){return ma(t,e.toTimestamp())}function rt(t){return X(!!t),J.fromTimestamp(function(n){const i=Or(n);return new $e(i.seconds,i.nanos)}(t))}function wy(t,e){return function(i){return new ye(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function VR(t){const e=ye.fromString(t);return X(HR(e)),e}function Mu(t,e){return wy(t.databaseId,e.path)}function vi(t,e){const n=VR(e);if(n.get(1)!==t.databaseId.projectId)throw new F(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(BR(n))}function h_(t,e){return wy(t.databaseId,e)}function FR(t){const e=VR(t);return e.length===4?ye.emptyPath():BR(e)}function Vu(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BR(t){return X(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function X0(t,e,n){return{name:Mu(t,e),fields:n.value.mapValue.fields}}function zR(t,e,n){const i=vi(t,e.name),r=rt(e.updateTime),s=e.createTime?rt(e.createTime):J.min(),a=new Lt({mapValue:{fields:e.fields}}),u=Me.newFoundDocument(i,r,s,a);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function PF(t,e){return"found"in e?function(i,r){X(!!r.found),r.found.name,r.found.updateTime;const s=vi(i,r.found.name),a=rt(r.found.updateTime),u=r.found.createTime?rt(r.found.createTime):J.min(),c=new Lt({mapValue:{fields:r.found.fields}});return Me.newFoundDocument(s,a,u,c)}(t,e):"missing"in e?function(i,r){X(!!r.missing),X(!!r.readTime);const s=vi(i,r.missing),a=rt(r.readTime);return Me.newNoDocument(s,a)}(t,e):Q()}function SF(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(X(p===void 0||typeof p=="string"),gt.fromBase64String(p||"")):(X(p===void 0||p instanceof Uint8Array),gt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){const p=d.code===void 0?b.UNKNOWN:LR(d.code);return new F(p,d.message||"")}(a);n=new OR(i,r,s,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=vi(t,i.document.name),s=rt(i.document.updateTime),a=i.document.createTime?rt(i.document.createTime):J.min(),u=new Lt({mapValue:{fields:i.document.fields}}),c=Me.newFoundDocument(r,s,a,u),d=i.targetIds||[],p=i.removedTargetIds||[];n=new zh(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=vi(t,i.document),s=i.readTime?rt(i.readTime):J.min(),a=Me.newNoDocument(r,s),u=i.removedTargetIds||[];n=new zh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=vi(t,i.document),s=i.removedTargetIds||[];n=new zh([],s,r,null)}else{if(!("filter"in e))return Q();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new gF(r,s),u=i.targetId;n=new DR(u,a)}}return n}function Fu(t,e){let n;if(e instanceof Da)n={update:X0(t,e.key,e.value)};else if(e instanceof Oa)n={delete:Mu(t,e.key)};else if(e instanceof Ki)n={update:X0(t,e.key,e.data),updateMask:bF(e.fieldMask)};else{if(!(e instanceof my))return Q();n={verify:Mu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const u=a.transform;if(u instanceof fa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Bs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof zs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof pa)return{fieldPath:a.field.canonicalString(),increment:u.Ie};throw Q()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:TF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function d_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?ze.updateTime(rt(s.updateTime)):s.exists!==void 0?ze.exists(s.exists):ze.none()}(e.currentDocument):ze.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,u){let c=null;if("setToServerValue"in u)X(u.setToServerValue==="REQUEST_TIME"),c=new fa;else if("appendMissingElements"in u){const p=u.appendMissingElements.values||[];c=new Bs(p)}else if("removeAllFromArray"in u){const p=u.removeAllFromArray.values||[];c=new zs(p)}else"increment"in u?c=new pa(a,u.increment):Q();const d=Be.fromServerFormat(u.fieldPath);return new pc(d,c)}(t,r)):[];if(e.update){e.update.name;const r=vi(t,e.update.name),s=new Lt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const d=c.fieldPaths||[];return new hn(d.map(p=>Be.fromServerFormat(p)))}(e.updateMask);return new Ki(r,s,a,n,i)}return new Da(r,s,n,i)}if(e.delete){const r=vi(t,e.delete);return new Oa(r,n)}if(e.verify){const r=vi(t,e.verify);return new my(r,n)}return Q()}function AF(t,e){return t&&t.length>0?(X(e!==void 0),t.map(n=>function(r,s){let a=r.updateTime?rt(r.updateTime):rt(s);return a.isEqual(J.min())&&(a=rt(s)),new fF(a,r.transformResults||[])}(n,e))):[]}function UR(t,e){return{documents:[h_(t,e.path)]}}function $R(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=h_(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=h_(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(c){if(c.length!==0)return WR(Ae.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:So(g.field),direction:CF(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=c_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function jR(t){let e=FR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){X(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const _=qR(g);return _ instanceof Ae&&dy(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(S){return new Ou(Ao(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,cc(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,w=g.values||[];return new Br(w,_)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const _=!g.before,w=g.values||[];return new Br(w,_)}(n.endAt)),mR(e,r,a,s,u,"F",c,d)}function RF(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ao(n.unaryFilter.field);return me.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ao(n.unaryFilter.field);return me.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ao(n.unaryFilter.field);return me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ao(n.unaryFilter.field);return me.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return me.create(Ao(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ae.create(n.compositeFilter.filters.map(i=>qR(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function CF(t){return yF[t]}function kF(t){return wF[t]}function xF(t){return IF[t]}function So(t){return{fieldPath:t.canonicalString()}}function Ao(t){return Be.fromServerFormat(t.fieldPath)}function WR(t){return t instanceof me?function(n){if(n.op==="=="){if(M0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(O0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(O0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:kF(n.op),value:n.value}}}(t):t instanceof Ae?function(n){const i=n.getFilters().map(r=>WR(r));return i.length===1?i[0]:{compositeFilter:{op:xF(n.op),filters:i}}}(t):Q()}function bF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,i,r,s=J.min(),a=J.min(),u=gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.ut=e}}function LF(t,e){let n;if(e.document)n=zR(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=W.fromSegments(e.noDocument.path),r=$s(e.noDocument.readTime);n=Me.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{const i=W.fromSegments(e.unknownDocument.path),r=$s(e.unknownDocument.version);n=Me.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new $e(r[0],r[1]);return J.fromTimestamp(s)}(e.readTime)),n}function eT(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Od(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Mu(s,a.key),fields:a.data.value.mapValue.fields,updateTime:ma(s,a.version.toTimestamp()),createTime:ma(s,a.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Us(e.version)};else{if(!e.isUnknownDocument())return Q();i.unknownDocument={path:n.path.toArray(),version:Us(e.version)}}return i}function Od(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Us(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $s(t){const e=new $e(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function ds(t,e){const n=(e.baseMutations||[]).map(s=>d_(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>d_(t.ut,s)),r=$e.fromMillis(e.localWriteTimeMs);return new gy(e.batchId,r,n,i)}function Ll(t){const e=$s(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$s(t.lastLimboFreeSnapshotVersion):J.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return X(s.documents.length===1),Xt(Na(FR(s.documents[0])))}(t.query):function(s){return Xt(jR(s))}(t.query),new Ni(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,gt.fromBase64String(t.resumeToken))}function KR(t,e){const n=Us(e.snapshotVersion),i=Us(e.lastLimboFreeSnapshotVersion);let r;r=Ld(e.target)?UR(t.ut,e.target):$R(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Iy(t){const e=jR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dd(e,e.limit,"L"):e}function Nm(t,e){return new vy(e.largestBatchId,d_(t.ut,e.overlayMutation))}function tT(t,e){const n=e.path.lastSegment();return[t,Jt(e.path.popLast()),n]}function nT(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Us(i.readTime),documentKey:Jt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{getBundleMetadata(e,n){return iT(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:$s(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return iT(e).put(function(r){return{bundleId:r.id,createTime:Us(rt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return rT(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Iy(s.bundledQuery),readTime:$s(s.readTime)}}(i)})}saveNamedQuery(e,n){return rT(e).put(function(r){return{name:r.name,readTime:Us(rt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function iT(t){return St(t,"bundles")}function rT(t){return St(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){const i=n.uid||"";return new Of(e,i)}getOverlay(e,n){return pl(e).get(tT(this.userId,n)).next(i=>i?Nm(this.serializer,i):null)}getOverlays(e,n){const i=fi();return C.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const u=new vy(n,a);r.push(this.lt(e,u))}),C.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(Jt(a.getCollectionPath())));const s=[];return r.forEach(a=>{const u=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(pl(e).H("collectionPathOverlayIndex",u))}),C.waitFor(s)}getOverlaysForCollection(e,n,i){const r=fi(),s=Jt(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return pl(e).W("collectionPathOverlayIndex",a).next(u=>{for(const c of u){const d=Nm(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=fi();let a;const u=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return pl(e).Y({index:"collectionGroupOverlayIndex",range:u},(c,d,p)=>{const g=Nm(this.serializer,d);s.size()<r||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):p.done()}).next(()=>s)}lt(e,n){return pl(e).put(function(r,s,a){const[u,c,d]=tT(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Fu(r.ut,a.mutation)}}(this.serializer,this.userId,n))}}function pl(t){return St(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Qe(e.integerValue));else if("doubleValue"in e){const i=Qe(e.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),bu(i)?n.Et(0):n.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(n,20),typeof i=="string"?n.dt(i):(n.dt(`${i.seconds||""}`),n.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Mr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in e?oR(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Q()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const i=e.fields||{};this.Tt(n,55);for(const r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(e,n){const i=e.values||[];this.Tt(n,50);for(const r of i)this.Pt(r,n)}ft(e,n){this.Tt(n,37),W.fromName(e).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}fs.St=new fs;function DF(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function sT(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=DF(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class OF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Dt(i.value),i=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=n.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const n=this.Bt(e),i=sT(n);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}kt(e){const n=this.Bt(e),i=sT(n);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Dt(e){const n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class MF{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class VF{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class ml{constructor(){this.Wt=new OF,this.Gt=new MF(this.Wt),this.zt=new VF(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ps(this.indexId,this.documentKey,this.arrayValue,i)}}function ir(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=oT(t.arrayValue,e.arrayValue),n!==0?n:(n=oT(t.directionalValue,e.directionalValue),n!==0?n:W.comparator(t.documentKey,e.documentKey)))}function oT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.Jt=new xe((n,i)=>Be.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const i=n;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(X(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=n_(e);if(n!==void 0&&!this.tn(n))return!1;const i=cs(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){const u=this.Jt.getIterator().getNext();if(!r.has(u.field.canonicalString())){const c=i[s];if(!this.nn(u,c)||!this.rn(this.Yt[a++],c))return!1}++s}for(;s<i.length;++s){const u=i[s];if(a>=this.Yt.length||!this.rn(this.Yt[a++],u))return!1}return!0}sn(){if(this.Xt)return null;let e=new xe(Be.comparator);const n=[];for(const i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Oh(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Oh(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Oh(i.field,i.dir==="asc"?0:1)));return new bd(bd.UNKNOWN_ID,this.collectionId,n,xu.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){var e,n;if(X(t instanceof me||t instanceof Ae),t instanceof me){if(t instanceof pR){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>me.create(t.field,"==",s)))||[];return Ae.create(r,"or")}return t}const i=t.filters.map(r=>ZR(r));return Ae.create(i,t.op)}function FF(t){if(t.getFilters().length===0)return[];const e=m_(ZR(t));return X(QR(e)),f_(e)||p_(e)?[e]:e.getFilters()}function f_(t){return t instanceof me}function p_(t){return t instanceof Ae&&dy(t)}function QR(t){return f_(t)||p_(t)||function(n){if(n instanceof Ae&&o_(n)){for(const i of n.getFilters())if(!f_(i)&&!p_(i))return!1;return!0}return!1}(t)}function m_(t){if(X(t instanceof me||t instanceof Ae),t instanceof me)return t;if(t.filters.length===1)return m_(t.filters[0]);const e=t.filters.map(i=>m_(i));let n=Ae.create(e,t.op);return n=Md(n),QR(n)?n:(X(n instanceof Ae),X(da(n)),X(n.filters.length>1),n.filters.reduce((i,r)=>Ey(i,r)))}function Ey(t,e){let n;return X(t instanceof me||t instanceof Ae),X(e instanceof me||e instanceof Ae),n=t instanceof me?e instanceof me?function(r,s){return Ae.create([r,s],"and")}(t,e):lT(t,e):e instanceof me?lT(e,t):function(r,s){if(X(r.filters.length>0&&s.filters.length>0),da(r)&&da(s))return hR(r,s.getFilters());const a=o_(r)?r:s,u=o_(r)?s:r,c=a.filters.map(d=>Ey(d,u));return Ae.create(c,"or")}(t,e),Md(n)}function lT(t,e){if(da(e))return hR(e,t.getFilters());{const n=e.filters.map(i=>Ey(t,i));return Ae.create(n,"or")}}function Md(t){if(X(t instanceof me||t instanceof Ae),t instanceof me)return t;const e=t.getFilters();if(e.length===1)return Md(e[0]);if(uR(t))return t;const n=e.map(r=>Md(r)),i=[];return n.forEach(r=>{r instanceof me?i.push(r):r instanceof Ae&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ae.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(){this.on=new Ty}addToCollectionParentIndex(e,n){return this.on.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return C.resolve()}deleteFieldIndex(e,n){return C.resolve()}deleteAllFieldIndexes(e){return C.resolve()}createTargetIndexes(e,n){return C.resolve()}getDocumentsMatchingTarget(e,n){return C.resolve(null)}getIndexType(e,n){return C.resolve(0)}getFieldIndexes(e,n){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,n){return C.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,n){return C.resolve(Pn.min())}updateCollectionGroup(e,n,i){return C.resolve()}updateIndexEntries(e,n){return C.resolve()}}class Ty{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new xe(ye.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new xe(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Uint8Array(0);class zF{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Ty,this.an=new Jr(i=>Fs(i),(i,r)=>hc(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:i,parent:Jt(r)};return uT(e).put(s)}return C.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[KA(n),""],!1,!0);return uT(e).W(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(di(a.parent))}return i})}addFieldIndex(e,n){const i=gl(e),r=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=vo(e);return s.next(u=>{a.put(nT(u,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=gl(e),r=vo(e),s=_o(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=gl(e),i=_o(e),r=vo(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return C.forEach(this.un(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new aT(i).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=_o(e);let r=!0;const s=new Map;return C.forEach(this.un(n),a=>this.cn(e,a).next(u=>{r&&(r=!!u),s.set(a,u)})).next(()=>{if(r){let a=ce();const u=[];return C.forEach(s,(c,d)=>{B("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`}(c)} to execute ${Fs(n)}`);const p=function(I,A){const D=n_(A);if(D===void 0)return null;for(const O of Nd(I,D.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(d,c),g=function(I,A){const D=new Map;for(const O of cs(A))for(const z of Nd(I,O.fieldPath))switch(z.op){case"==":case"in":D.set(O.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return D.set(O.fieldPath.canonicalString(),z.value),Array.from(D.values())}return null}(d,c),_=function(I,A){const D=[];let O=!0;for(const z of cs(A)){const K=z.kind===0?U0(I,z.fieldPath,I.startAt):$0(I,z.fieldPath,I.startAt);D.push(K.value),O&&(O=K.inclusive)}return new Br(D,O)}(d,c),w=function(I,A){const D=[];let O=!0;for(const z of cs(A)){const K=z.kind===0?$0(I,z.fieldPath,I.endAt):U0(I,z.fieldPath,I.endAt);D.push(K.value),O&&(O=K.inclusive)}return new Br(D,O)}(d,c),S=this.ln(c,d,_),P=this.ln(c,d,w),k=this.hn(c,d,g),E=this.Pn(c.indexId,p,S,_.inclusive,P,w.inclusive,k);return C.forEach(E,y=>i.j(y,n.limit).next(I=>{I.forEach(A=>{const D=W.fromSegments(A.documentKey);a.has(D)||(a=a.add(D),u.push(D))})}))}).next(()=>u)}return C.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=FF(Ae.create(e.filters,"and")).map(i=>l_(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,i,r,s,a,u){const c=(n!=null?n.length:1)*Math.max(i.length,s.length),d=c/(n!=null?n.length:1),p=[];for(let g=0;g<c;++g){const _=n?this.In(n[g/d]):vh,w=this.Tn(e,_,i[g%d],r),S=this.En(e,_,s[g%d],a),P=u.map(k=>this.Tn(e,_,k,!0));p.push(...this.createRange(w,S,P))}return p}Tn(e,n,i,r){const s=new ps(e,W.empty(),n,i);return r?s:s.Ht()}En(e,n,i,r){const s=new ps(e,W.empty(),n,i);return r?s.Ht():s}cn(e,n){const i=new aT(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const u of s)i.en(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a})}getIndexType(e,n){let i=2;const r=this.un(n);return C.forEach(r,s=>this.cn(e,s).next(a=>{a?i!==0&&a.fields.length<function(c){let d=new xe(Be.comparator),p=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:d=d.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}dn(e,n){const i=new ml;for(const r of cs(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.jt(r.kind);fs.St.ht(s,a)}return i.Ut()}In(e){const n=new ml;return fs.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const i=new ml;return fs.St.ht(Vs(this.databaseId,n),i.jt(function(s){const a=cs(s);return a.length===0?0:a[a.length-1].kind}(e))),i.Ut()}hn(e,n,i){if(i===null)return[];let r=[];r.push(new ml);let s=0;for(const a of cs(e)){const u=i[s++];for(const c of r)if(this.Rn(n,a.fieldPath)&&Du(u))r=this.Vn(r,a,u);else{const d=c.jt(a.kind);fs.St.ht(u,d)}}return this.mn(r)}ln(e,n,i){return this.hn(e,n,i.position)}mn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Ut();return n}Vn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const u of r){const c=new ml;c.seed(u.Ut()),fs.St.ht(a,c.jt(n.kind)),s.push(c)}return s}Rn(e,n){return!!e.filters.find(i=>i instanceof me&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=gl(e),r=vo(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(s=>{const a=[];return C.forEach(s,u=>r.get([u.indexId,this.uid]).next(c=>{a.push(function(p,g){const _=g?new xu(g.sequenceNumber,new Pn($s(g.readTime),new W(di(g.documentKey)),g.largestBatchId)):xu.empty(),w=p.fields.map(([S,P])=>new Oh(Be.fromServerFormat(S),P));return new bd(p.indexId,p.collectionGroup,w,_)}(u,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ae(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=gl(e),s=vo(e);return this.fn(e).next(a=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(u=>C.forEach(u,c=>s.put(nT(c.indexId,this.user,a,i)))))}updateIndexEntries(e,n){const i=new Map;return C.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?C.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(u=>(i.set(r.collectionGroup,u),C.forEach(u,c=>this.gn(e,r,c).next(d=>{const p=this.pn(s,c);return d.isEqual(p)?C.resolve():this.yn(e,s,c,d,p)}))))})}wn(e,n,i,r){return _o(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,i,r){return _o(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,n.key),n.key.path.toArray()])}gn(e,n,i){const r=_o(e);let s=new xe(ir);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,n)])},(a,u)=>{s=s.add(new ps(i.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>s)}pn(e,n){let i=new xe(ir);const r=this.dn(n,e);if(r==null)return i;const s=n_(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Du(a))for(const u of a.arrayValue.values||[])i=i.add(new ps(n.indexId,e.key,this.In(u),r))}else i=i.add(new ps(n.indexId,e.key,vh,r));return i}yn(e,n,i,r,s){B("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(c,d,p,g,_){const w=c.getIterator(),S=d.getIterator();let P=go(w),k=go(S);for(;P||k;){let E=!1,y=!1;if(P&&k){const I=p(P,k);I<0?y=!0:I>0&&(E=!0)}else P!=null?y=!0:E=!0;E?(g(k),k=go(S)):y?(_(P),P=go(w)):(P=go(w),k=go(S))}}(r,s,ir,u=>{a.push(this.wn(e,n,i,u))},u=>{a.push(this.Sn(e,n,i,u))}),C.waitFor(a)}fn(e){let n=1;return vo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,u)=>ir(a,u)).filter((a,u,c)=>!u||ir(a,c[u-1])!==0);const r=[];r.push(e);for(const a of i){const u=ir(a,e),c=ir(a,n);if(u===0)r[0]=e.Ht();else if(u>0&&c<0)r.push(a),r.push(a.Ht());else if(c>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.bn(r[a],r[a+1]))return[];const u=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,vh,[]],c=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,vh,[]];s.push(IDBKeyRange.bound(u,c))}return s}bn(e,n){return ir(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(cT)}getMinOffset(e,n){return C.mapArray(this.un(n),i=>this.cn(e,i).next(r=>r||Q())).next(cT)}}function uT(t){return St(t,"collectionParents")}function _o(t){return St(t,"indexEntries")}function gl(t){return St(t,"indexConfiguration")}function vo(t){return St(t,"indexState")}function cT(t){X(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;uy(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Pn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class on{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let u=0;const c=i.Y({range:a},(p,g,_)=>(u++,_.delete()));s.push(c.next(()=>{X(u===1)}));const d=[];for(const p of n.mutations){const g=eR(e,p.key.path,n.batchId);s.push(r.delete(g)),d.push(p.key)}return C.waitFor(s).next(()=>d)}function Vd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class Mf{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,n,i,r){X(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Mf(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rr(e).Y({index:"userMutationsIndex",range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=Ro(e),a=rr(e);return a.add({}).next(u=>{X(typeof u=="number");const c=new gy(u,n,i,r),d=function(w,S,P){const k=P.baseMutations.map(y=>Fu(w.ut,y)),E=P.mutations.map(y=>Fu(w.ut,y));return{userId:S,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:k,mutations:E}}(this.serializer,this.userId,c),p=[];let g=new xe((_,w)=>ae(_.canonicalString(),w.canonicalString()));for(const _ of r){const w=eR(this.userId,_.key.path,u);g=g.add(_.key.path.popLast()),p.push(a.put(d)),p.push(s.put(w,C2))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[u]=c.keys()}),C.waitFor(p).next(()=>c)})}lookupMutationBatch(e,n){return rr(e).get(n).next(i=>i?(X(i.userId===this.userId),ds(this.serializer,i)):null)}Cn(e,n){return this.Dn[n]?C.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Dn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return rr(e).Y({index:"userMutationsIndex",range:r},(a,u,c)=>{u.userId===this.userId&&(X(u.batchId>=i),s=ds(this.serializer,u)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return rr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rr(e).W("userMutationsIndex",n).next(i=>i.map(r=>ds(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Mh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return Ro(e).Y({range:r},(a,u,c)=>{const[d,p,g]=a,_=di(p);if(d===this.userId&&n.path.isEqual(_))return rr(e).get(g).next(w=>{if(!w)throw Q();X(w.userId===this.userId),s.push(ds(this.serializer,w))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xe(ae);const r=[];return n.forEach(s=>{const a=Mh(this.userId,s.path),u=IDBKeyRange.lowerBound(a),c=Ro(e).Y({range:u},(d,p,g)=>{const[_,w,S]=d,P=di(w);_===this.userId&&s.path.isEqual(P)?i=i.add(S):g.done()});r.push(c)}),C.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Mh(this.userId,i),a=IDBKeyRange.lowerBound(s);let u=new xe(ae);return Ro(e).Y({range:a},(c,d,p)=>{const[g,_,w]=c,S=di(_);g===this.userId&&i.isPrefixOf(S)?S.length===r&&(u=u.add(w)):p.done()}).next(()=>this.vn(e,u))}vn(e,n){const i=[],r=[];return n.forEach(s=>{r.push(rr(e).get(s).next(a=>{if(a===null)throw Q();X(a.userId===this.userId),i.push(ds(this.serializer,a))}))}),C.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return YR(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),C.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return C.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Ro(e).Y({range:i},(s,a,u)=>{if(s[0]===this.userId){const c=di(s[1]);r.push(c)}else u.done()}).next(()=>{X(r.length===0)})})}containsKey(e,n){return JR(e,this.userId,n)}Mn(e){return XR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JR(t,e,n){const i=Mh(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Ro(t).Y({range:s,J:!0},(u,c,d)=>{const[p,g,_]=u;p===e&&g===r&&(a=!0),d.done()}).next(()=>a)}function rr(t){return St(t,"mutations")}function Ro(t){return St(t,"documentMutations")}function XR(t){return St(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new js(0)}static Nn(){return new js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const i=new js(n.highestTargetId);return n.highestTargetId=i.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>J.fromTimestamp(new $e(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Ln(e,r)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(n,i),this.Ln(e,i))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>yo(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(X(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return yo(e).Y((a,u)=>{const c=Ll(u);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>C.waitFor(s)).next(()=>r)}forEachTarget(e,n){return yo(e).Y((i,r)=>{const s=Ll(r);n(s)})}Bn(e){return dT(e).get("targetGlobalKey").next(n=>(X(n!==null),n))}Ln(e,n){return dT(e).put("targetGlobalKey",n)}kn(e,n){return yo(e).put(KR(this.serializer,n))}qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Fs(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return yo(e).Y({range:r,index:"queryTargetsIndex"},(a,u,c)=>{const d=Ll(u);hc(n,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=hr(e);return n.forEach(a=>{const u=Jt(a.path);r.push(s.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,a))}),C.waitFor(r)}removeMatchingKeys(e,n,i){const r=hr(e);return C.forEach(n,s=>{const a=Jt(s.path);return C.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=hr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=hr(e);let s=ce();return r.Y({range:i,J:!0},(a,u,c)=>{const d=di(a[1]),p=new W(d);s=s.add(p)}).next(()=>s)}containsKey(e,n){const i=Jt(n.path),r=IDBKeyRange.bound([i],[KA(i)],!1,!0);let s=0;return hr(e).Y({index:"documentTargetsIndex",J:!0,range:r},([a,u],c,d)=>{a!==0&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return yo(e).get(n).next(i=>i?Ll(i):null)}}function yo(t){return St(t,"targets")}function dT(t){return St(t,"targetGlobal")}function hr(t){return St(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT([t,e],[n,i]){const r=ae(t,n);return r===0?ae(e,i):r}class $F{constructor(e){this.Qn=e,this.buffer=new xe(fT),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();fT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jF{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){B("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yr(n)?B("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Qr(n)}await this.Gn(3e5)})}}class qF{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return C.resolve(cn._e);const i=new $F(n);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.zn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(hT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hT):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let i,r,s,a,u,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(d=Date.now(),To()<=pe.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-p}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function WF(t,e){return new qF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n){this.db=e,this.garbageCollector=WF(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Yn(e){let n=0;return this.Hn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(i,r)=>n(r))}addReference(e,n,i){return yh(e,i)}removeReference(e,n,i){return yh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return yh(e,n)}Xn(e,n){return function(r,s){let a=!1;return XR(r).Z(u=>JR(r,u,s).next(c=>(c&&(a=!0),C.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Zn(e,(a,u)=>{if(u<=n){const c=this.Xn(e,a).next(d=>{if(!d)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,J.min()),hr(e).delete(function(g){return[0,Jt(g.path)]}(a))))});r.push(c)}}).next(()=>C.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return yh(e,n)}Zn(e,n){const i=hr(e);let r,s=cn._e;return i.Y({index:"documentTargetsIndex"},([a,u],{path:c,sequenceNumber:d})=>{a===0?(s!==cn._e&&n(new W(di(r)),s),s=d,r=c):s=cn._e}).next(()=>{s!==cn._e&&n(new W(di(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yh(t,e){return hr(t).put(function(i,r){return{targetId:0,path:Jt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?C.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return os(e).put(i)}removeEntry(e,n,i){return os(e).delete(function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Od(a),u[u.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.er(e,i)))}getEntry(e,n){let i=Me.newInvalidDocument(n);return os(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_l(n))},(r,s)=>{i=this.tr(n,s)}).next(()=>i)}nr(e,n){let i={size:0,document:Me.newInvalidDocument(n)};return os(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_l(n))},(r,s)=>{i={document:this.tr(n,s),size:Vd(s)}}).next(()=>i)}getEntries(e,n){let i=dn();return this.rr(e,n,(r,s)=>{const a=this.tr(r,s);i=i.insert(r,a)}).next(()=>i)}ir(e,n){let i=dn(),r=new Ne(W.comparator);return this.rr(e,n,(s,a)=>{const u=this.tr(s,a);i=i.insert(s,u),r=r.insert(s,Vd(a))}).next(()=>({documents:i,sr:r}))}rr(e,n,i){if(n.isEmpty())return C.resolve();let r=new xe(gT);n.forEach(c=>r=r.add(c));const s=IDBKeyRange.bound(_l(r.first()),_l(r.last())),a=r.getIterator();let u=a.getNext();return os(e).Y({index:"documentKeyIndex",range:s},(c,d,p)=>{const g=W.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;u&&gT(u,g)<0;)i(u,null),u=a.getNext();u&&u.isEqual(g)&&(i(u,d),u=a.hasNext()?a.getNext():null),u?p.U(_l(u)):p.done()}).next(()=>{for(;u;)i(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,u=[a.popLast().toArray(),a.lastSegment(),Od(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return os(e).W(IDBKeyRange.bound(u,c,!0)).next(d=>{s==null||s.incrementDocumentReadCount(d.length);let p=dn();for(const g of d){const _=this.tr(W.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(fc(n,_)||r.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,i,r){let s=dn();const a=mT(n,i),u=mT(n,Pn.max());return os(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,u,!0)},(c,d,p)=>{const g=this.tr(W.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===r&&p.done()}).next(()=>s)}newChangeBuffer(e){return new KF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return pT(e).get("remoteDocumentGlobalKey").next(n=>(X(!!n),n))}er(e,n){return pT(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const i=LF(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(J.min())))return i}return Me.newInvalidDocument(e)}}function tC(t){return new GF(t)}class KF extends eC{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Jr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new xe((s,a)=>ae(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const u=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,u.readTime)),a.isValidDocument()){const c=eT(this._r.serializer,a);r=r.add(s.path.popLast());const d=Vd(c);i+=d-u.size,n.push(this._r.addEntry(e,s,c))}else if(i-=u.size,this.trackRemovals){const c=eT(this._r.serializer,a.convertToNoDocument(J.min()));n.push(this._r.addEntry(e,s,c))}}),r.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,i)),C.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(i=>(this.ar.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:i,sr:r})=>(r.forEach((s,a)=>{this.ar.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function pT(t){return St(t,"remoteDocumentGlobal")}function os(t){return St(t,"remoteDocumentsV14")}function _l(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mT(t,e){const n=e.documentKey.path.toArray();return[t,Od(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function gT(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=ae(n[s],i[s]),r)return r;return r=ae(n.length,i.length),r||(r=ae(n[n.length-2],i[i.length-2]),r||ae(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Gl(i.mutation,r,hn.empty(),$e.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=fi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=xl();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=fi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let s=dn();const a=Hl(),u=function(){return Hl()}();return n.forEach((c,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Ki)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Gl(p.mutation,d,p.mutation.getFieldMask(),$e.now())):a.set(d.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var g;return u.set(d,new ZF(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=Hl();let r=new Ne((a,u)=>a-u),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=i.get(c)||hn.empty();p=u.applyToLocalView(d,p),i.set(c,p);const g=(r.get(u.batchId)||ce()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,p=c.value,g=IR();p.forEach(_=>{if(!s.has(_)){const w=kR(n.get(_),i.get(_));w!==null&&g.set(_,w),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return C.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return W.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):C.resolve(fi());let u=-1,c=s;return a.next(d=>C.forEach(d,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?C.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,ce())).next(p=>({batchId:u,changes:wR(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(i=>{let r=xl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=xl();return this.indexManager.getCollectionParents(e,s).next(u=>C.forEach(u,c=>{const d=function(g,_){return new Gi(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((c,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Me.newInvalidDocument(p)))});let u=xl();return a.forEach((c,d)=>{const p=s.get(c);p!==void 0&&Gl(p.mutation,d,hn.empty(),$e.now()),fc(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return C.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:rt(r.createTime)}}(n)),C.resolve()}getNamedQuery(e,n){return C.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(r){return{name:r.name,query:Iy(r.bundledQuery),readTime:rt(r.readTime)}}(n)),C.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.overlays=new Ne(W.comparator),this.lr=new Map}getOverlay(e,n){return C.resolve(this.overlays.get(n))}getOverlays(e,n){const i=fi();return C.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.lt(e,n,s)}),C.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),C.resolve()}getOverlaysForCollection(e,n,i){const r=fi(),s=n.length+1,a=new W(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return C.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ne((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=s.get(d.largestBatchId);p===null&&(p=fi(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=fi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=r)););return C.resolve(u)}lt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new vy(n,i));let s=this.lr.get(n);s===void 0&&(s=ce(),this.lr.set(n,s)),this.lr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.hr=new xe(vt.Pr),this.Ir=new xe(vt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const i=new vt(e,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.dr(new vt(e,n))}Ar(e,n){e.forEach(i=>this.removeReference(i,n))}Rr(e){const n=new W(new ye([])),i=new vt(n,e),r=new vt(n,e+1),s=[];return this.Ir.forEachInRange([i,r],a=>{this.dr(a),s.push(a.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new W(new ye([])),i=new vt(n,e),r=new vt(n,e+1);let s=ce();return this.Ir.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new vt(e,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class vt{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return W.comparator(e.key,n.key)||ae(e.gr,n.gr)}static Tr(e,n){return ae(e.gr,n.gr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new xe(vt.Pr)}checkEmpty(e){return C.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new gy(s,n,i,r);this.mutationQueue.push(a);for(const u of r)this.yr=this.yr.add(new vt(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return C.resolve(a)}lookupMutationBatch(e,n){return C.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Sr(i),s=r<0?0:r;return C.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new vt(n,0),r=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],a=>{const u=this.wr(a.gr);s.push(u)}),C.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xe(ae);return n.forEach(r=>{const s=new vt(r,0),a=new vt(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,a],u=>{i=i.add(u.gr)})}),C.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;W.isDocumentKey(s)||(s=s.child(""));const a=new vt(new W(s),0);let u=new xe(ae);return this.yr.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(c.gr)),!0)},a),C.resolve(this.br(u))}br(e){const n=[];return e.forEach(i=>{const r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){X(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return C.forEach(n.mutations,r=>{const s=new vt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,n){const i=new vt(n,0),r=this.yr.firstAfterOrEqual(i);return C.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,C.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.Cr=e,this.docs=function(){return new Ne(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return C.resolve(i?i.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let i=dn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Me.newInvalidDocument(r))}),C.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=dn();const a=n.path,u=new W(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||uy(QA(p),i)<=0||(r.has(p.key)||fc(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return C.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Q()}vr(e,n){return C.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new eB(this)}getSize(e){return C.resolve(this.size)}}class eB extends eC{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),C.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e){this.persistence=e,this.Fr=new Jr(n=>Fs(n),hc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Py,this.targetCount=0,this.Nr=js.On()}forEachTarget(e,n){return this.Fr.forEach((i,r)=>n(r)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),C.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new js(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.kn(n),C.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Fr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Fr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),C.waitFor(s).next(()=>r)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){const i=this.Fr.get(n)||null;return C.resolve(i)}addMatchingKeys(e,n,i){return this.Or.Er(n,i),C.resolve()}removeMatchingKeys(e,n,i){this.Or.Ar(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),C.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),C.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Or.mr(n);return C.resolve(i)}containsKey(e,n){return C.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new cn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new tB(this),this.indexManager=new BF,this.remoteDocumentCache=function(r){return new XF(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new GR(n),this.Kr=new QF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new JF(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,i){B("MemoryPersistence","Starting transaction:",e);const r=new nB(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,n){return C.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}}class nB extends JA{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Gr=new Py,this.zr=null}static jr(e){return new Vf(e)}get Hr(){if(this.zr)return this.zr;throw Q()}addReference(e,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),C.resolve()}removeReference(e,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),C.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Hr,i=>{const r=W.fromPath(i);return this.Jr(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return C.or([()=>C.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.serializer=e}N(e,n,i,r){const s=new bf("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b0,{unique:!0}),c.createObjectStore("documentMutations")}(e),_T(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=C.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),_T(e)),a=a.next(()=>function(c){const d=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(c,d){return d.store("mutations").W().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b0,{unique:!0});const g=d.store("mutations"),_=p.map(w=>g.put(w));return C.waitFor(_)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Zr(s))),i<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(a=a.next(()=>this.ei(s))),i<8&&r>=8&&(a=a.next(()=>this.ti(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ni(s))),i<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(c){const d=c.createObjectStore("documentOverlays",{keyPath:z2});d.createIndex("collectionPathOverlayIndex",U2,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",$2,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(c){const d=c.createObjectStore("remoteDocumentsV14",{keyPath:k2});d.createIndex("documentKeyIndex",x2),d.createIndex("collectionGroupIndex",b2)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.ii(e,s))),i<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:M2}).createIndex("sequenceNumberIndex",V2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:F2}).createIndex("documentKeyIndex",B2,{unique:!1})}(e))),a}Xr(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=Vd(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>C.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",a).next(u=>C.forEach(u,c=>{X(c.userId===s.userId);const d=ds(this.serializer,c);return YR(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Y((a,u)=>{const c=new ye(a),d=function(g){return[0,Jt(g)]}(c);s.push(n.get(d).next(p=>p?C.resolve():(g=>n.put({targetId:0,path:Jt(g),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>C.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:O2});const i=n.store("collectionParents"),r=new Ty,s=a=>{if(r.add(a)){const u=a.lastSegment(),c=a.popLast();return i.put({collectionId:u,parent:Jt(c)})}};return n.store("remoteDocuments").Y({J:!0},(a,u)=>{const c=new ye(a);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([a,u,c],d)=>{const p=di(u);return s(p.popLast())}))}ni(e){const n=e.store("targets");return n.Y((i,r)=>{const s=Ll(r),a=KR(this.serializer,s);return n.put(a)})}ri(e,n){const i=n.store("remoteDocuments"),r=[];return i.Y((s,a)=>{const u=n.store("remoteDocumentsV14"),c=function(g){return g.document?new W(ye.fromString(g.document.name).popFirst(5)):g.noDocument?W.fromSegments(g.noDocument.path):g.unknownDocument?W.fromSegments(g.unknownDocument.path):Q()}(a).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(u.put(d))}).next(()=>C.waitFor(r))}ii(e,n){const i=n.store("mutations"),r=tC(this.serializer),s=new iC(Vf.jr,this.serializer.ut);return i.W().next(a=>{const u=new Map;return a.forEach(c=>{var d;let p=(d=u.get(c.userId))!==null&&d!==void 0?d:ce();ds(this.serializer,c).keys().forEach(g=>p=p.add(g)),u.set(c.userId,p)}),C.forEach(u,(c,d)=>{const p=new wt(d),g=Of.ct(this.serializer,p),_=s.getIndexManager(p),w=Mf.ct(p,this.serializer,_,s.referenceDelegate);return new nC(r,w,g,_).recalculateAndSaveOverlaysForDocumentKeys(new i_(n,cn._e),c).next()})})}}function _T(t){t.createObjectStore("targetDocuments",{keyPath:N2}).createIndex("documentTargetsIndex",D2,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",L2,{unique:!0}),t.createObjectStore("targetGlobal")}const Dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sy{constructor(e,n,i,r,s,a,u,c,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.si=s,this.window=a,this.document=u,this.oi=d,this._i=p,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!Sy.D())throw new F(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HF(this,r),this.Ii=n+"main",this.serializer=new GR(c),this.Ti=new Wn(this.Ii,this.ai,new iB(this.serializer)),this.qr=new UF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tC(this.serializer),this.Kr=new NF,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,p===!1&&it("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(b.FAILED_PRECONDITION,Dm);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new cn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(async()=>{this.started&&await this.di()}))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Yr(e))return B("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return vl(e).get("owner").next(n=>C.resolve(this.wi(n)))}Si(e){return wh(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=St(n,"clientMetadata");return i.W().next(r=>{const s=this.Ci(r,18e5),a=r.filter(u=>s.indexOf(u)===-1);return C.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ei)for(const n of e)this.Ei.removeItem(this.vi(n.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?C.resolve(!0):vl(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new F(b.FAILED_PRECONDITION,Dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||wh(e).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,u=this.networkEnabled===r.networkEnabled;if(s||a&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new i_(e,cn._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()}Ci(e,n){return e.filter(i=>this.Di(i.updateTimeMs,n)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>wh(e).W().next(n=>this.Ci(n,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Mf.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zF(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Of.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,i){B("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?q2:c===14?iR:c===13?nR:c===12?j2:c===11?tR:void Q()}(this.ai);let a;return this.Ti.runTransaction(e,r,s,u=>(a=new i_(u,this.Lr?this.Lr.next():cn._e),n==="readwrite-primary"?this.fi(a).next(c=>!!c||this.gi(a)).next(c=>{if(!c)throw it(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new F(b.FAILED_PRECONDITION,YA);return i(a)}).next(c=>this.yi(a).next(()=>c)):this.Li(a).next(()=>i(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}Li(e){return vl(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(b.FAILED_PRECONDITION,Dm)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vl(e).put("owner",n)}static D(){return Wn.D()}pi(e){const n=vl(e);return n.get("owner").next(i=>this.wi(i)?(B("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):C.resolve())}Di(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(it(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;LO()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const i=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return B("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return it("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){it("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vl(t){return St(t,"owner")}function wh(t){return St(t,"clientMetadata")}function Ay(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ki=i,this.qi=r}static Qi(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ry(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.zi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ji(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new rB;return this.Hi(e,n,a).next(u=>{if(s.result=u,this.$i)return this.Ji(e,n,a,u.size)})}).next(()=>s.result)}Ji(e,n,i,r){return i.documentReadCount<this.Ui?(To()<=pe.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),C.resolve()):(To()<=pe.DEBUG&&B("QueryEngine","Query:",Po(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(To()<=pe.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(n))):C.resolve())}zi(e,n){if(j0(n))return C.resolve(null);let i=Xt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Dd(n,null,"F"),i=Xt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ce(...s);return this.Gi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.Yi(n,u);return this.Zi(n,d,a,c.readTime)?this.zi(e,Dd(n,null,"F")):this.Xi(e,d,n,c)}))})))}ji(e,n,i,r){return j0(n)||r.isEqual(J.min())?C.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const a=this.Yi(n,s);return this.Zi(n,a,i,r)?C.resolve(null):(To()<=pe.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Po(n)),this.Xi(e,a,n,ZA(r,-1)).next(u=>u))})}Yi(e,n){let i=new xe(vR(e));return n.forEach((r,s)=>{fc(e,s)&&(i=i.add(s))}),i}Zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,n,i){return To()<=pe.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Po(n)),this.Gi.getDocumentsMatchingQuery(e,n,Pn.min(),i)}Xi(e,n,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,n,i,r){this.persistence=e,this.es=n,this.serializer=r,this.ts=new Ne(ae),this.ns=new Jr(s=>Fs(s),hc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nC(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function sC(t,e,n,i){return new sB(t,e,n,i)}async function oC(t,e){const n=H(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.os(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],u=[];let c=ce();for(const d of r){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of s){u.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(d=>({_s:d,removedBatchIds:a,addedBatchIds:u}))})})}function oB(t,e){const n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(u,c,d,p){const g=d.batch,_=g.keys();let w=C.resolve();return _.forEach(S=>{w=w.next(()=>p.getEntry(c,S)).next(P=>{const k=d.docVersions.get(S);X(k!==null),P.version.compareTo(k)<0&&(g.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),p.addEntry(P)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=ce();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function aC(t){const e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function aB(t,e){const n=H(t),i=e.snapshotVersion;let r=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.ss.newChangeBuffer({trackRemovals:!0});r=n.ts;const u=[];e.targetChanges.forEach((p,g)=>{const _=r.get(g);if(!_)return;u.push(n.qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,p.addedDocuments,g)));let w=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(gt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,i)),r=r.insert(g,w),function(P,k,E){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(_,w,p)&&u.push(n.qr.updateTargetData(s,w))});let c=dn(),d=ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(lC(s,a,e.documentUpdates).next(p=>{c=p.us,d=p.cs})),!i.isEqual(J.min())){const p=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));u.push(p)}return C.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.ts=r,s))}function lC(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=dn();return n.forEach((u,c)=>{const d=s.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):B("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{us:a,cs:r}})}function lB(t,e){const n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ga(t,e){const n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.qr.getTargetData(i,e).next(s=>s?(r=s,C.resolve(r)):n.qr.allocateTargetId(i).next(a=>(r=new Ni(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(i.targetId,i),n.ns.set(e,i.targetId)),i})}async function _a(t,e,n){const i=H(t),r=i.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Yr(a))throw a;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}function Fd(t,e,n){const i=H(t);let r=J.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,p){const g=H(c),_=g.ns.get(p);return _!==void 0?C.resolve(g.ts.get(_)):g.qr.getTargetData(d,p)}(i,a,Xt(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>i.es.getDocumentsMatchingQuery(a,e,n?r:J.min(),n?s:ce())).next(u=>(hC(i,_R(e),u),{documents:u,ls:s})))}function uC(t,e){const n=H(t),i=H(n.qr),r=n.ts.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(a=>a?a.target:null))}function cC(t,e){const n=H(t),i=n.rs.get(e)||J.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.ss.getAllFromCollectionGroup(r,e,ZA(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(hC(n,e,r),r))}function hC(t,e,n){let i=t.rs.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.rs.set(e,i)}async function uB(t,e,n,i){const r=H(t);let s=ce(),a=dn();for(const d of n){const p=e.hs(d.metadata.name);d.document&&(s=s.add(p));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),a=a.insert(p,g)}const u=r.ss.newChangeBuffer({trackRemovals:!0}),c=await ga(r,function(p){return Xt(Na(ye.fromString(`__bundle__/docs/${p}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",d=>lC(d,u,a).next(p=>(u.apply(d),p)).next(p=>r.qr.removeMatchingKeysForTargetId(d,c.targetId).next(()=>r.qr.addMatchingKeys(d,s,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,p.us,p.cs)).next(()=>p.us)))}async function cB(t,e,n=ce()){const i=await ga(t,Xt(Iy(e.bundledQuery))),r=H(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=rt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Kr.saveNamedQuery(s,e);const u=i.withResumeToken(gt.EMPTY_BYTE_STRING,a);return r.ts=r.ts.insert(u.targetId,u),r.qr.updateTargetData(s,u).next(()=>r.qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.qr.addMatchingKeys(s,n,i.targetId)).next(()=>r.Kr.saveNamedQuery(s,e))})}function vT(t,e){return`firestore_clients_${t}_${e}`}function yT(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Om(t,e){return`firestore_targets_${t}_${e}`}class Bd{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ts(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new F(r.error.code,r.error.message))),a?new Bd(e,n,r.state,s):(it("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kl{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ts(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new F(i.error.code,i.error.message))),s?new Kl(e,i.state,r):(it("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=py();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=XA(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new zd(e,s):(it("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Cy{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Cy(n.clientId,n.onlineState):(it("SharedClientState",`Failed to parse online state: ${e}`),null)}}class g_{constructor(){this.activeTargetIds=py()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mm{constructor(e,n,i,r,s){this.window=e,this.si=n,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ne(ae),this.started=!1,this.ps=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=vT(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new g_),this.Ss=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const i of e){if(i===this.Rs)continue;const r=this.getItem(vT(this.persistenceKey,i));if(r){const s=zd.Ts(i,r);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();const n=this.storage.getItem(this.Cs);if(n){const i=this.Ms(n);i&&this.xs(i)}for(const i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,i){this.Ns(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Om(this.persistenceKey,e));if(i){const r=Kl.Ts(e,i);r&&(n=r.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Om(this.persistenceKey,e))}updateQueryState(e,n,i){this.ks(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return B("SharedClientState","READ",e,n),n}setItem(e,n){B("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){B("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const n=e;if(n.storageArea===this.storage){if(B("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void it("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){const i=this.Ks(n.key);return this.$s(i,null)}{const i=this.Us(n.key,n.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(n.key)){if(n.newValue!==null){const i=this.Ws(n.key,n.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const i=this.zs(n.key,n.newValue);if(i)return this.js(i)}}else if(n.key===this.Cs){if(n.newValue!==null){const i=this.Ms(n.newValue);if(i)return this.xs(i)}}else if(n.key===this.ws){const i=function(s){let a=cn._e;if(s!=null)try{const u=JSON.parse(s);X(typeof u=="number"),a=u}catch(u){it("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(n.newValue);i!==cn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.vs){const i=this.Hs(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(n)})}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,i){const r=new Bd(this.currentUser,e,n,i),s=yT(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){const n=yT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){const n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,i){const r=Om(this.persistenceKey,e),s=new Kl(e,n,i);this.setItem(r,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const i=this.Ks(e);return zd.Ts(i,n)}Ws(e,n){const i=this.bs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Bd.Ts(new wt(s),r,n)}zs(e,n){const i=this.Ds.exec(e),r=Number(i[1]);return Kl.Ts(r,n)}Ms(e){return Cy.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);B("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const i=n?this.gs.insert(e,n):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),a=[],u=[];return s.forEach(c=>{r.has(c)||a.push(c)}),r.forEach(c=>{s.has(c)||u.push(c)}),this.syncEngine.Xs(a,u).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=py();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class dC{constructor(){this.eo=new g_,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,i){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new g_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih=null;function Vm(){return Ih===null?Ih=function(){return 268435456+Math.round(2147483648*Math.random())}():Ih++,"0x"+Ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class pB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+n.host,this.fo=`projects/${r}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(n,i,r,s,a){const u=Vm(),c=this.So(n,i);B("RestConnection",`Sending RPC '${n}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,a),this.Do(n,c,d,r).then(p=>(B("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw Qn("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",r),p})}Co(n,i,r,s,a,u){return this.wo(n,i,r,s,a)}bo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+La}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>n[a]=s),r&&r.headers.forEach((s,a)=>n[a]=s)}So(n,i){const r=dB[n];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,i,r){const s=Vm();return new Promise((a,u)=>{const c=new c2;c.setWithCredentials(!0),c.listenOnce(a2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Lm.NO_ERROR:const p=c.getResponseJson();B(zt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Lm.TIMEOUT:B(zt,`RPC '${e}' ${s} timed out`),u(new F(b.DEADLINE_EXCEEDED,"Request time out"));break;case Lm.HTTP_ERROR:const g=c.getStatus();if(B(zt,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const w=_==null?void 0:_.error;if(w&&w.status&&w.message){const S=function(k){const E=k.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(E)>=0?E:b.UNKNOWN}(w.status);u(new F(S,w.message))}else u(new F(b.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new F(b.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{B(zt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(r);B(zt,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",d,i,15)})}vo(e,n,i){const r=Vm(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=s2(),u=o2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.xmlHttpFactory=new u2({})),this.bo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const p=s.join("");B(zt,`Creating RPC '${e}' stream ${r}: ${p}`,c);const g=a.createWebChannel(p,c);let _=!1,w=!1;const S=new fB({co:k=>{w?B(zt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(_||(B(zt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),B(zt,`RPC '${e}' stream ${r} sending:`,k),g.send(k))},lo:()=>g.close()}),P=(k,E,y)=>{k.listen(E,I=>{try{y(I)}catch(A){setTimeout(()=>{throw A},0)}})};return P(g,gh.EventType.OPEN,()=>{w||B(zt,`RPC '${e}' stream ${r} transport opened.`)}),P(g,gh.EventType.CLOSE,()=>{w||(w=!0,B(zt,`RPC '${e}' stream ${r} transport closed`),S.Ro())}),P(g,gh.EventType.ERROR,k=>{w||(w=!0,Qn(zt,`RPC '${e}' stream ${r} transport errored:`,k),S.Ro(new F(b.UNAVAILABLE,"The operation could not be completed")))}),P(g,gh.EventType.MESSAGE,k=>{var E;if(!w){const y=k.data[0];X(!!y);const I=y,A=I.error||((E=I[0])===null||E===void 0?void 0:E.error);if(A){B(zt,`RPC '${e}' stream ${r} received error:`,A);const D=A.status;let O=function(de){const ne=lt[de];if(ne!==void 0)return LR(ne)}(D),z=A.message;O===void 0&&(O=b.INTERNAL,z="Unknown error status: "+D+" with message "+A.message),w=!0,S.Ro(new F(O,z)),g.close()}else B(zt,`RPC '${e}' stream ${r} received:`,y),S.Vo(y)}}),P(u,l2.STAT_EVENT,k=>{k.stat===R0.PROXY?B(zt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===R0.NOPROXY&&B(zt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.Ao()},0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){return typeof window<"u"?window:null}function Uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){return new EF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,i,r,s,a,u,c){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new ky(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(it(n.toString()),it("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===n&&this.s_(i,r)},i=>{e(()=>{const r=new F(b.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,n){const i=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mB extends pC{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=SF(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?rt(a.readTime):J.min()}(e);return this.listener.a_(n,i)}u_(e){const n={};n.database=Vu(this.serializer),n.addTarget=function(s,a){let u;const c=a.target;if(u=Ld(c)?{documents:UR(s,c)}:{query:$R(s,c)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=MR(s,a.resumeToken);const d=c_(s,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(J.min())>0){u.readTime=ma(s,a.snapshotVersion.toTimestamp());const d=c_(s,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const i=RF(this.serializer,e);i&&(n.labels=i),this.e_(n)}c_(e){const n={};n.database=Vu(this.serializer),n.removeTarget=e,this.e_(n)}}class gB extends pC{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=AF(e.writeResults,e.commitTime),i=rt(e.commitTime);return this.listener.I_(i,n)}return X(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Vu(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Fu(this.serializer,i))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new F(b.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new F(b.UNKNOWN,r.toString())})}Co(e,n,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,n,i,s,a,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(b.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class vB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(it(n),this.f_=!1):B("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{i.enqueueAndForget(async()=>{Xr(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=H(c);d.C_.add(4),await Ma(d),d.M_.set("Unknown"),d.C_.delete(4),await vc(d)}(this))})}),this.M_=new vB(i,r)}}async function vc(t){if(Xr(t))for(const e of t.v_)await e(!0)}async function Ma(t){for(const e of t.v_)await e(!1)}function Ff(t,e){const n=H(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Ly(n)?by(n):Fa(n).Ho()&&xy(n,e))}function Bu(t,e){const n=H(t),i=Fa(n);n.D_.delete(e),i.Ho()&&mC(n,e),n.D_.size===0&&(i.Ho()?i.Zo():Xr(n)&&n.M_.set("Unknown"))}function xy(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fa(t).u_(e)}function mC(t,e){t.x_.Oe(e),Fa(t).c_(e)}function by(t){t.x_=new vF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Fa(t).start(),t.M_.g_()}function Ly(t){return Xr(t)&&!Fa(t).jo()&&t.D_.size>0}function Xr(t){return H(t).C_.size===0}function gC(t){t.x_=void 0}async function wB(t){t.D_.forEach((e,n)=>{xy(t,e)})}async function IB(t,e){gC(t),Ly(t)?(t.M_.w_(e),by(t)):t.M_.set("Unknown")}async function EB(t,e,n){if(t.M_.set("Online"),e instanceof OR&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const u of s.targetIds)r.D_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.D_.delete(u),r.x_.removeTarget(u))}(t,e)}catch(i){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ud(t,i)}else if(e instanceof zh?t.x_.$e(e):e instanceof DR?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(J.min()))try{const i=await aC(t.localStore);n.compareTo(i)>=0&&await function(s,a){const u=s.x_.it(a);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.D_.get(d);p&&s.D_.set(d,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,d)=>{const p=s.D_.get(c);if(!p)return;s.D_.set(c,p.withResumeToken(gt.EMPTY_BYTE_STRING,p.snapshotVersion)),mC(s,c);const g=new Ni(p.target,c,d,p.sequenceNumber);xy(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){B("RemoteStore","Failed to raise snapshot:",i),await Ud(t,i)}}async function Ud(t,e,n){if(!Yr(e))throw e;t.C_.add(1),await Ma(t),t.M_.set("Offline"),n||(n=()=>aC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await vc(t)})}function _C(t,e){return e().catch(n=>Ud(t,n,e))}async function Va(t){const e=H(t),n=zr(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;TB(e);)try{const r=await lB(e.localStore,i);if(r===null){e.b_.length===0&&n.Zo();break}i=r.batchId,PB(e,r)}catch(r){await Ud(e,r)}vC(e)&&yC(e)}function TB(t){return Xr(t)&&t.b_.length<10}function PB(t,e){t.b_.push(e);const n=zr(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function vC(t){return Xr(t)&&!zr(t).jo()&&t.b_.length>0}function yC(t){zr(t).start()}async function SB(t){zr(t).E_()}async function AB(t){const e=zr(t);for(const n of t.b_)e.P_(n.mutations)}async function RB(t,e,n){const i=t.b_.shift(),r=_y.from(i,e,n);await _C(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Va(t)}async function CB(t,e){e&&zr(t).h_&&await async function(i,r){if(function(a){return bR(a)&&a!==b.ABORTED}(r.code)){const s=i.b_.shift();zr(i).Yo(),await _C(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Va(i)}}(t,e),vC(t)&&yC(t)}async function IT(t,e){const n=H(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const i=Xr(n);n.C_.add(3),await Ma(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await vc(n)}async function __(t,e){const n=H(t);e?(n.C_.delete(2),await vc(n)):e||(n.C_.add(2),await Ma(n),n.M_.set("Unknown"))}function Fa(t){return t.O_||(t.O_=function(n,i,r){const s=H(n);return s.A_(),new mB(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{ho:wB.bind(null,t),Io:IB.bind(null,t),a_:EB.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),Ly(t)?by(t):t.M_.set("Unknown")):(await t.O_.stop(),gC(t))})),t.O_}function zr(t){return t.N_||(t.N_=function(n,i,r){const s=H(n);return s.A_(),new gB(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{ho:SB.bind(null,t),Io:CB.bind(null,t),T_:AB.bind(null,t),I_:RB.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await Va(t)):(await t.N_.stop(),t.b_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,u=new Ny(e,n,a,r,s);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ba(t,e){if(it("AsyncQueue",`${e}: ${t}`),Yr(t))return new F(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||W.comparator(n.key,i.key):(n,i)=>W.comparator(n.key,i.key),this.keyedMap=xl(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.B_=new Ne(W.comparator)}track(e){const n=e.doc.key,i=this.B_.get(n);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(n,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(n):e.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Q():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,i)=>{e.push(i)}),e}}class va{constructor(e,n,i,r,s,a,u,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new va(e,n,Jo.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.k_=void 0,this.listeners=[]}}class xB{constructor(){this.queries=new Jr(e=>gR(e),dc),this.onlineState="Unknown",this.q_=new Set}}async function Dy(t,e){const n=H(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new kB),r)try{s.k_=await n.onListen(i)}catch(a){const u=Ba(a,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&My(n)}async function Oy(t,e){const n=H(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function bB(t,e){const n=H(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const u of a.listeners)u.K_(r)&&(i=!0);a.k_=r}}i&&My(n)}function LB(t,e,n){const i=H(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function My(t){t.q_.forEach(e=>{e.next()})}class Vy{constructor(e,n,i){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new va(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.J_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.serializer=e}hs(e){return vi(this.serializer,e)}Ps(e){return e.metadata.exists?zR(this.serializer,e.document,!1):Me.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return rt(e)}}class DB{constructor(e,n,i){this.X_=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wC(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const i=ye.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,i=new TT(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.hs(r.metadata.name);for(const a of r.metadata.queries){const u=(n.get(a)||ce()).add(s);n.set(a,u)}}return n}async complete(){const e=await uB(this.localStore,new TT(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(const i of this.queries)await cB(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function wC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.key=e}}class EC{constructor(e){this.key=e}}class TC{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ce(),this.mutatedKeys=ce(),this._a=vR(e),this.aa=new Jo(this._a)}get ua(){return this.ia}ca(e,n){const i=n?n.la:new ET,r=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,g)=>{const _=r.get(p),w=fc(this.query,g)?g:null,S=!!_&&this.mutatedKeys.has(_.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;_&&w?_.data.isEqual(w.data)?S!==P&&(i.track({type:3,doc:w}),k=!0):this.ha(_,w)||(i.track({type:2,doc:w}),k=!0,(c&&this._a(w,c)>0||d&&this._a(w,d)<0)&&(u=!0)):!_&&w?(i.track({type:0,doc:w}),k=!0):_&&!w&&(i.track({type:1,doc:_}),k=!0,(c||d)&&(u=!0)),k&&(w?(a=a.add(w),s=P?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{aa:a,la:i,Zi:u,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((d,p)=>function(_,w){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return S(_)-S(w)}(d.type,p.type)||this._a(d.doc,p.doc)),this.Pa(i);const a=n?this.Ia():[],u=this.oa.size===0&&this.current?1:0,c=u!==this.sa;return this.sa=u,s.length!==0||c?{snapshot:new va(this.query,e.aa,r,s,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new ET,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ce(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const n=[];return e.forEach(i=>{this.oa.has(i)||n.push(new EC(i))}),this.oa.forEach(i=>{e.has(i)||n.push(new IC(i))}),n}da(e){this.ia=e.ls,this.oa=ce();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return va.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class OB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class MB{constructor(e){this.key=e,this.Ra=!1}}class VB{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Va={},this.ma=new Jr(u=>gR(u),dc),this.fa=new Map,this.ga=new Set,this.pa=new Ne(W.comparator),this.ya=new Map,this.wa=new Py,this.Sa={},this.ba=new Map,this.Da=js.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function FB(t,e){const n=$y(t);let i,r;const s=n.ma.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{const a=await ga(n.localStore,Xt(e)),u=n.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=await Fy(n,e,i,u==="current",a.resumeToken),n.isPrimaryClient&&Ff(n.remoteStore,a)}return r}async function Fy(t,e,n,i,r){t.va=(g,_,w)=>async function(P,k,E,y){let I=k.view.ca(E);I.Zi&&(I=await Fd(P.localStore,k.query,!1).then(({documents:O})=>k.view.ca(O,I)));const A=y&&y.targetChanges.get(k.targetId),D=k.view.applyChanges(I,P.isPrimaryClient,A);return v_(P,k.targetId,D.Ta),D.snapshot}(t,g,_,w);const s=await Fd(t.localStore,e,!0),a=new TC(e,s.ls),u=a.ca(s.documents),c=gc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(u,t.isPrimaryClient,c);v_(t,n,d.Ta);const p=new OB(e,n,a);return t.ma.set(e,p),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}async function BB(t,e){const n=H(t),i=n.ma.get(e),r=n.fa.get(i.targetId);if(r.length>1)return n.fa.set(i.targetId,r.filter(s=>!dc(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await _a(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Bu(n.remoteStore,i.targetId),ya(n,i.targetId)}).catch(Qr)):(ya(n,i.targetId),await _a(n.localStore,i.targetId,!0))}async function zB(t,e,n){const i=jy(t);try{const r=await function(a,u){const c=H(a),d=$e.now(),p=u.reduce((w,S)=>w.add(S.key),ce());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=dn(),P=ce();return c.ss.getEntries(w,p).next(k=>{S=k,S.forEach((E,y)=>{y.isValidDocument()||(P=P.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,S)).next(k=>{g=k;const E=[];for(const y of u){const I=mF(y,g.get(y.key).overlayedDocument);I!=null&&E.push(new Ki(y.key,I,aR(I.value.mapValue),ze.exists(!0)))}return c.mutationQueue.addMutationBatch(w,d,E,u)}).next(k=>{_=k;const E=k.applyToLocalDocumentSet(g,P);return c.documentOverlayCache.saveOverlays(w,k.batchId,E)})}).then(()=>({batchId:_.batchId,changes:wR(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let d=a.Sa[a.currentUser.toKey()];d||(d=new Ne(ae)),d=d.insert(u,c),a.Sa[a.currentUser.toKey()]=d}(i,r.batchId,n),await Zi(i,r.changes),await Va(i.remoteStore)}catch(r){const s=Ba(r,"Failed to persist write");n.reject(s)}}async function PC(t,e){const n=H(t);try{const i=await aB(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.ya.get(s);a&&(X(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ra=!0:r.modifiedDocuments.size>0?X(a.Ra):r.removedDocuments.size>0&&(X(a.Ra),a.Ra=!1))}),await Zi(n,i,e)}catch(i){await Qr(i)}}function PT(t,e,n){const i=H(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ma.forEach((s,a)=>{const u=a.view.Q_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=H(a);c.onlineState=u;let d=!1;c.queries.forEach((p,g)=>{for(const _ of g.listeners)_.Q_(u)&&(d=!0)}),d&&My(c)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function UB(t,e,n){const i=H(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.ya.get(e),s=r&&r.key;if(s){let a=new Ne(W.comparator);a=a.insert(s,Me.newNoDocument(s,J.min()));const u=ce().add(s),c=new mc(J.min(),new Map,new Ne(ae),a,u);await PC(i,c),i.pa=i.pa.remove(s),i.ya.delete(e),Uy(i)}else await _a(i.localStore,e,!1).then(()=>ya(i,e,n)).catch(Qr)}async function $B(t,e){const n=H(t),i=e.batch.batchId;try{const r=await oB(n.localStore,e);zy(n,i,null),By(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zi(n,r)}catch(r){await Qr(r)}}async function jB(t,e,n){const i=H(t);try{const r=await function(a,u){const c=H(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(X(g!==null),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(i.localStore,e);zy(i,e,n),By(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zi(i,r)}catch(r){await Qr(r)}}async function qB(t,e){const n=H(t);Xr(n.remoteStore)||B("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const u=H(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();const r=n.ba.get(i)||[];r.push(e),n.ba.set(i,r)}catch(i){const r=Ba(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function By(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function zy(t,e,n){const i=H(t);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function ya(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.fa.get(e))t.ma.delete(i),n&&t.Va.Fa(i,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(i=>{t.wa.containsKey(i)||SC(t,i)})}function SC(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(Bu(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),Uy(t))}function v_(t,e,n){for(const i of n)i instanceof IC?(t.wa.addReference(i.key,e),WB(t,i)):i instanceof EC?(B("SyncEngine","Document no longer in limbo: "+i.key),t.wa.removeReference(i.key,e),t.wa.containsKey(i.key)||SC(t,i.key)):Q()}function WB(t,e){const n=e.key,i=n.path.canonicalString();t.pa.get(n)||t.ga.has(i)||(B("SyncEngine","New document in limbo: "+n),t.ga.add(i),Uy(t))}function Uy(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new W(ye.fromString(e)),i=t.Da.next();t.ya.set(i,new MB(n)),t.pa=t.pa.insert(n,i),Ff(t.remoteStore,new Ni(Xt(Na(n.path)),i,"TargetPurposeLimboResolution",cn._e))}}async function Zi(t,e,n){const i=H(t),r=[],s=[],a=[];i.ma.isEmpty()||(i.ma.forEach((u,c)=>{a.push(i.va(c,e,n).then(d=>{if((d||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,d!=null&&d.fromCache?"not-current":"current"),d){r.push(d);const p=Ry.Qi(c.targetId,d);s.push(p)}}))}),await Promise.all(a),i.Va.a_(r),await async function(c,d){const p=H(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>C.forEach(d,_=>C.forEach(_.ki,w=>p.persistence.referenceDelegate.addReference(g,_.targetId,w)).next(()=>C.forEach(_.qi,w=>p.persistence.referenceDelegate.removeReference(g,_.targetId,w)))))}catch(g){if(!Yr(g))throw g;B("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const w=p.ts.get(_),S=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(S);p.ts=p.ts.insert(_,P)}}}(i.localStore,s))}async function HB(t,e){const n=H(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());const i=await oC(n.localStore,e);n.currentUser=e,function(s,a){s.ba.forEach(u=>{u.forEach(c=>{c.reject(new F(b.CANCELLED,a))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zi(n,i._s)}}function GB(t,e){const n=H(t),i=n.ya.get(e);if(i&&i.Ra)return ce().add(i.key);{let r=ce();const s=n.fa.get(e);if(!s)return r;for(const a of s){const u=n.ma.get(a);r=r.unionWith(u.view.ua)}return r}}async function KB(t,e){const n=H(t),i=await Fd(n.localStore,e.query,!0),r=e.view.da(i);return n.isPrimaryClient&&v_(n,e.targetId,r.Ta),r}async function ZB(t,e){const n=H(t);return cC(n.localStore,e).then(i=>Zi(n,i))}async function QB(t,e,n,i){const r=H(t),s=await function(u,c){const d=H(u),p=H(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Cn(g,c).next(_=>_?d.localDocuments.getDocuments(g,_):C.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Va(r.remoteStore):n==="acknowledged"||n==="rejected"?(zy(r,e,i||null),By(r,e),function(u,c){H(H(u).mutationQueue).Fn(c)}(r.localStore,e)):Q(),await Zi(r,s)):B("SyncEngine","Cannot apply mutation batch with id: "+e)}async function YB(t,e){const n=H(t);if($y(n),jy(n),e===!0&&n.Ca!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await ST(n,i.toArray());n.Ca=!0,await __(n.remoteStore,!0);for(const s of r)Ff(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){const i=[];let r=Promise.resolve();n.fa.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(ya(n,a),_a(n.localStore,a,!0))),Bu(n.remoteStore,a)}),await r,await ST(n,i),function(a){const u=H(a);u.ya.forEach((c,d)=>{Bu(u.remoteStore,d)}),u.wa.Vr(),u.ya=new Map,u.pa=new Ne(W.comparator)}(n),n.Ca=!1,await __(n.remoteStore,!1)}}async function ST(t,e,n){const i=H(t),r=[],s=[];for(const a of e){let u;const c=i.fa.get(a);if(c&&c.length!==0){u=await ga(i.localStore,Xt(c[0]));for(const d of c){const p=i.ma.get(d),g=await KB(i,p);g.snapshot&&s.push(g.snapshot)}}else{const d=await uC(i.localStore,a);u=await ga(i.localStore,d),await Fy(i,AC(d),a,!1,u.resumeToken)}r.push(u)}return i.Va.a_(s),r}function AC(t){return mR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function JB(t){return function(n){return H(H(n).persistence).Bi()}(H(t).localStore)}async function XB(t,e,n,i){const r=H(t);if(r.Ca)return void B("SyncEngine","Ignoring unexpected query state notification.");const s=r.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await cC(r.localStore,_R(s[0])),u=mc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",gt.EMPTY_BYTE_STRING);await Zi(r,a,u);break}case"rejected":await _a(r.localStore,e,!0),ya(r,e,i);break;default:Q()}}async function ez(t,e,n){const i=$y(t);if(i.Ca){for(const r of e){if(i.fa.has(r)){B("SyncEngine","Adding an already active target "+r);continue}const s=await uC(i.localStore,r),a=await ga(i.localStore,s);await Fy(i,AC(s),a.targetId,!1,a.resumeToken),Ff(i.remoteStore,a)}for(const r of n)i.fa.has(r)&&await _a(i.localStore,r,!1).then(()=>{Bu(i.remoteStore,r),ya(i,r)}).catch(Qr)}}function $y(t){const e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UB.bind(null,e),e.Va.a_=bB.bind(null,e.eventManager),e.Va.Fa=LB.bind(null,e.eventManager),e}function jy(t){const e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$B.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jB.bind(null,e),e}function tz(t,e,n){const i=H(t);(async function(s,a,u){try{const c=await a.getMetadata();if(await function(w,S){const P=H(w),k=rt(S.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",E=>P.Kr.getBundleMetadata(E,S.id)).then(E=>!!E&&E.createTime.compareTo(k)>=0)}(s.localStore,c))return await a.close(),u._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(wC(c));const d=new DB(c,s.localStore,a.serializer);let p=await a.Ma();for(;p;){const _=await d.ea(p);_&&u._updateProgress(_),p=await a.Ma()}const g=await d.complete();return await Zi(s,g.ra,void 0),await function(w,S){const P=H(w);return P.persistence.runTransaction("Save bundle","readwrite",k=>P.Kr.saveBundleMetadata(k,S))}(s.localStore,c),u._completeWith(g.progress),Promise.resolve(g.na)}catch(c){return Qn("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class y_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=_c(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return sC(this.persistence,new rC,e.initialUser,this.serializer)}createPersistence(e){return new iC(Vf.jr,this.serializer)}createSharedClientState(e){return new dC}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class RC extends y_{constructor(e,n,i){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await jy(this.xa.syncEngine),await Va(this.xa.remoteStore),await this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return sC(this.persistence,new rC,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new jF(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new A2(n,this.persistence);return new S2(e.asyncQueue,i)}createPersistence(e){const n=Ay(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Sy(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,fC(),Uh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new dC}}class nz extends RC{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xa.syncEngine;this.sharedClientState instanceof Mm&&(this.sharedClientState.syncEngine={Ys:QB.bind(null,n),Zs:XB.bind(null,n),Xs:ez.bind(null,n),Bi:JB.bind(null,n),Js:ZB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.mi(async i=>{await YB(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=fC();if(!Mm.D(n))throw new F(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ay(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mm(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class qy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>PT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=HB.bind(null,this.syncEngine),await __(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xB}()}createDatastore(e){const n=_c(e.databaseInfo.databaseId),i=function(s){return new pB(s)}(e.databaseInfo);return function(s,a,u,c){return new _B(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,u){return new yB(i,r,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>PT(this.syncEngine,n,0),function(){return wT.D()?new wT:new hB}())}createSyncEngine(e,n){return function(r,s,a,u,c,d,p){const g=new VB(r,s,a,u,c,d);return p&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const i=H(n);B("RemoteStore","RemoteStore shutting down."),i.C_.add(5),await Ma(i),i.F_.shutdown(),i.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Et,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(e===null)return null;const n=this.La.decode(e),i=Number(n);isNaN(i)&&this.Qa(`length string (${n}) is not valid number`);const r=await this.Ka(i);return new NB(JSON.parse(r),e.length+i)}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(this.buffer.length===0)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ua(){const e=await this.Ba.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new F(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,s){const a=H(r),u=Vu(a.serializer)+"/documents",c={documents:s.map(_=>Mu(a.serializer,_))},d=await a.Co("BatchGetDocuments",u,c,s.length),p=new Map;d.forEach(_=>{const w=PF(a.serializer,_);p.set(w.key.toString(),w)});const g=[];return s.forEach(_=>{const w=p.get(_.toString());X(!!w),g.push(w)}),g}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=W.fromPath(i);this.mutations.push(new my(r,this.precondition(r)))}),await async function(i,r){const s=H(i),a=Vu(s.serializer)+"/documents",u={writes:r.map(c=>Fu(s.serializer,c))};await s.wo("Commit",a,u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q();n=J.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?ze.exists(!1):ze.updateTime(n):ze.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new F(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(n)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new ky(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(async()=>{const e=new rz(this.datastore),n=this.za(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})})}za(e){try{const n=this.updateFunction(e);return!cc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=wt.UNAUTHENTICATED,this.clientId=GA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{B("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ba(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function $h(t,e){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await oC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function w_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Wy(t);B("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>IT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>IT(e.remoteStore,s)),t._onlineComponents=e}function CC(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Wy(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await $h(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!CC(n))throw n;Qn("Error using user provided cache. Falling back to memory cache: "+n),await $h(t,new y_)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await $h(t,new y_);return t._offlineComponents}async function zf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await w_(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await w_(t,new qy))),t._onlineComponents}function kC(t){return Wy(t).then(e=>e.persistence)}function Hy(t){return Wy(t).then(e=>e.localStore)}function xC(t){return zf(t).then(e=>e.remoteStore)}function Gy(t){return zf(t).then(e=>e.syncEngine)}function az(t){return zf(t).then(e=>e.datastore)}async function wa(t){const e=await zf(t),n=e.eventManager;return n.onListen=FB.bind(null,e.syncEngine),n.onUnlisten=BB.bind(null,e.syncEngine),n}function lz(t){return t.asyncQueue.enqueue(async()=>{const e=await kC(t),n=await xC(t);return e.setNetworkEnabled(!0),function(r){const s=H(r);return s.C_.delete(0),vc(s)}(n)})}function uz(t){return t.asyncQueue.enqueue(async()=>{const e=await kC(t),n=await xC(t);return e.setNetworkEnabled(!1),async function(r){const s=H(r);s.C_.add(0),await Ma(s),s.M_.set("Offline")}(n)})}function cz(t,e){const n=new Et;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const u=await function(d,p){const g=H(d);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,p))}(r,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new F(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=Ba(u,`Failed to get document '${s} from cache`);a.reject(c)}}(await Hy(t),e,n)),n.promise}function bC(t,e,n={}){const i=new Et;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,d){const p=new Bf({next:_=>{a.enqueueAndForget(()=>Oy(s,g));const w=_.docs.has(u);!w&&_.fromCache?d.reject(new F(b.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&c&&c.source==="server"?d.reject(new F(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Vy(Na(u.path),p,{includeMetadataChanges:!0,J_:!0});return Dy(s,g)}(await wa(t),t.asyncQueue,e,n,i)),i.promise}function hz(t,e){const n=new Et;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const u=await Fd(r,s,!0),c=new TC(s,u.ls),d=c.ca(u.documents),p=c.applyChanges(d,!1);a.resolve(p.snapshot)}catch(u){const c=Ba(u,`Failed to execute query '${s} against cache`);a.reject(c)}}(await Hy(t),e,n)),n.promise}function LC(t,e,n={}){const i=new Et;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,d){const p=new Bf({next:_=>{a.enqueueAndForget(()=>Oy(s,g)),_.fromCache&&c.source==="server"?d.reject(new F(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Vy(u,p,{includeMetadataChanges:!0,J_:!0});return Dy(s,g)}(await wa(t),t.asyncQueue,e,n,i)),i.promise}function dz(t,e){const n=new Bf(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){H(r).q_.add(s),s.next()}(await wa(t),n)),()=>{n.Na(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){H(r).q_.delete(s)}(await wa(t),n))}}function fz(t,e,n,i){const r=function(a,u){let c;return c=typeof a=="string"?NR().encode(a):a,function(p,g){return new iz(p,g)}(function(p,g){if(p instanceof Uint8Array)return AT(p,g);if(p instanceof ArrayBuffer)return AT(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,_c(e));t.asyncQueue.enqueueAndForget(async()=>{tz(await Gy(t),r,i)})}function pz(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=H(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Kr.getNamedQuery(a,r))}(await Hy(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t,e,n){if(!n)throw new F(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DC(t,e,n,i){if(e===!0&&i===!0)throw new F(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function CT(t){if(!W.isDocumentKey(t))throw new F(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kT(t){if(W.isDocumentKey(t))throw new F(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Ee(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uf(t);throw new F(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function OC(t,e){if(e<=0)throw new F(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new F(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xT(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new p2;switch(i.type){case"firstParty":return new v2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=RT.get(n);i&&(B("ComponentProvider","Removing Datastore"),RT.delete(n),i.terminate())}(this),Promise.resolve()}}function mz(t,e,n,i={}){var r;const s=(t=Ee(t,yc))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let u,c;if(typeof i.mockUserToken=="string")u=i.mockUserToken,c=wt.MOCK_USER;else{u=kO(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new F(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new wt(d)}t._authCredentials=new m2(new HA(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class MC{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new MC(this.firestore,e,this._query)}},He=class VC{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new VC(this.firestore,e,this._key)}},Cr=class FC extends en{constructor(e,n,i){super(e,n,Na(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new W(e))}withConverter(e){return new FC(this.firestore,e,this._path)}};function BC(t,e,...n){if(t=te(t),Ky("collection","path",e),t instanceof yc){const i=ye.fromString(e,...n);return kT(i),new Cr(t,null,i)}{if(!(t instanceof He||t instanceof Cr))throw new F(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ye.fromString(e,...n));return kT(i),new Cr(t.firestore,null,i)}}function gz(t,e){if(t=Ee(t,yc),Ky("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new en(t,null,function(i){return new Gi(ye.emptyPath(),i)}(e))}function $d(t,e,...n){if(t=te(t),arguments.length===1&&(e=GA.newId()),Ky("doc","path",e),t instanceof yc){const i=ye.fromString(e,...n);return CT(i),new He(t,null,new W(i))}{if(!(t instanceof He||t instanceof Cr))throw new F(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ye.fromString(e,...n));return CT(i),new He(t.firestore,t instanceof Cr?t.converter:null,new W(i))}}function zC(t,e){return t=te(t),e=te(e),(t instanceof He||t instanceof Cr)&&(e instanceof He||e instanceof Cr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function UC(t,e){return t=te(t),e=te(e),t instanceof en&&e instanceof en&&t.firestore===e.firestore&&dc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new ky(this,"async_queue_retry"),this.iu=()=>{const n=Uh();n&&B("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Uh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Et;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Yr(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw it("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);const r=Ny.createAndSchedule(this,e,n,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&Q()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function I_(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class vz{constructor(){this._progressObserver={},this._taskCompletionResolver=new Et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz=-1;let Je=class extends yc{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new _z}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$C(this),this._firestoreClient.terminate()}};function At(t){return t._firestoreClient||$C(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $C(t){var e,n,i;const r=t._freezeSettings(),s=function(u,c,d,p){return new G2(u,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,NC(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new oz(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function wz(t,e){qC(t=Ee(t,Je));const n=At(t);if(n._uninitializedComponentsProvider)throw new F(b.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new qy;return jC(n,r,new RC(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Iz(t){qC(t=Ee(t,Je));const e=At(t);if(e._uninitializedComponentsProvider)throw new F(b.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new qy;return jC(e,i,new nz(i,n.cacheSizeBytes))}function jC(t,e,n){const i=new Et;return t.asyncQueue.enqueue(async()=>{try{await $h(t,n),await w_(t,e),i.resolve()}catch(r){const s=r;if(!CC(s))throw s;Qn("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}}).then(()=>i.promise)}function Ez(t){if(t._initialized&&!t._terminated)throw new F(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Et;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Wn.D())return Promise.resolve();const r=i+"main";await Wn.delete(r)}(Ay(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Tz(t){return function(n){const i=new Et;return n.asyncQueue.enqueueAndForget(async()=>qB(await Gy(n),i)),i.promise}(At(t=Ee(t,Je)))}function Pz(t){return lz(At(t=Ee(t,Je)))}function Sz(t){return uz(At(t=Ee(t,Je)))}function Az(t,e){const n=At(t=Ee(t,Je)),i=new vz;return fz(n,t._databaseId,e,i),i}function Rz(t,e){return pz(At(t=Ee(t,Je)),e).then(n=>n?new en(t,null,n.query):null)}function qC(t){if(t._initialized||t._terminated)throw new F(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ii(gt.fromBase64String(e))}catch(n){throw new F(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ii(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=/^__.*__$/;class kz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new Da(e,this.data,n,this.fieldTransforms)}}class WC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class jf{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return jd(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(HC(this.Iu)&&Cz.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class xz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||_c(e)}pu(e,n,i,r=!1){return new jf({Iu:e,methodName:n,gu:i,path:Be.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eo(t){const e=t._freezeSettings(),n=_c(t._databaseId);return new xz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qf(t,e,n,i,r,s={}){const a=t.pu(s.merge||s.mergeFields?2:0,e,n,r);Jy("Data must be an object, but it was:",a,i);const u=ZC(i,a);let c,d;if(s.merge)c=new hn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=E_(e,g,n);if(!a.contains(_))throw new F(b.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);YC(p,_)||p.push(_)}c=new hn(p),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new kz(new Lt(u),c,d)}class wc extends Xs{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function GC(t,e,n){return new jf({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zy extends Xs{_toFieldTransform(e){return new pc(e.path,new fa)}isEqual(e){return e instanceof Zy}}class bz extends Xs{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=GC(this,e,!0),i=this.yu.map(s=>to(s,n)),r=new Bs(i);return new pc(e.path,r)}isEqual(e){return this===e}}class Lz extends Xs{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=GC(this,e,!0),i=this.yu.map(s=>to(s,n)),r=new zs(i);return new pc(e.path,r)}isEqual(e){return this===e}}class Nz extends Xs{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new pa(e.serializer,PR(e.serializer,this.wu));return new pc(e.path,n)}isEqual(e){return this===e}}function Qy(t,e,n,i){const r=t.pu(1,e,n);Jy("Data must be an object, but it was:",r,i);const s=[],a=Lt.empty();Js(i,(c,d)=>{const p=Xy(e,c,n);d=te(d);const g=r.Ru(p);if(d instanceof wc)s.push(p);else{const _=to(d,g);_!=null&&(s.push(p),a.set(p,_))}});const u=new hn(s);return new WC(a,u,r.fieldTransforms)}function Yy(t,e,n,i,r,s){const a=t.pu(1,e,n),u=[E_(e,i,n)],c=[r];if(s.length%2!=0)throw new F(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(E_(e,s[_])),c.push(s[_+1]);const d=[],p=Lt.empty();for(let _=u.length-1;_>=0;--_)if(!YC(d,u[_])){const w=u[_];let S=c[_];S=te(S);const P=a.Ru(w);if(S instanceof wc)d.push(w);else{const k=to(S,P);k!=null&&(d.push(w),p.set(w,k))}}const g=new hn(d);return new WC(p,g,a.fieldTransforms)}function KC(t,e,n,i=!1){return to(n,t.pu(i?4:3,e))}function to(t,e){if(QC(t=te(t)))return Jy("Unsupported field value:",e,t),ZC(t,e);if(t instanceof Xs)return function(i,r){if(!HC(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const u of i){let c=to(u,r.Vu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=te(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return PR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=$e.fromDate(i);return{timestampValue:ma(r.serializer,s)}}if(i instanceof $e){const s=new $e(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ma(r.serializer,s)}}if(i instanceof $f)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ii)return{bytesValue:MR(r.serializer,i._byteString)};if(i instanceof He){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wy(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${Uf(i)}`)}(t,e)}function ZC(t,e){const n={};return rR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,(i,r)=>{const s=to(r,e.Eu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function QC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof $f||t instanceof Ii||t instanceof He||t instanceof Xs)}function Jy(t,e,n){if(!QC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Uf(n);throw i==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function E_(t,e,n){if((e=te(e))instanceof Ur)return e._internalPath;if(typeof e=="string")return Xy(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Dz=new RegExp("[~\\*/\\[\\]]");function Xy(t,e,n){if(e.search(Dz)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ur(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new F(b.INVALID_ARGUMENT,u+t+c)}function YC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Oz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Oz extends zu{data(){return super.data()}}function Wf(t,e){return typeof e=="string"?Xy(t,e):e instanceof Ur?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ew{}class Ic extends ew{}function sr(t,e,...n){let i=[];e instanceof ew&&i.push(e),i=i.concat(n),function(s){const a=s.filter(c=>c instanceof tw).length,u=s.filter(c=>c instanceof Hf).length;if(a>1||a>0&&u>0)throw new F(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Hf extends Ic{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Hf(e,n,i)}_apply(e){const n=this._parse(e);return ek(e._query,n),new en(e.firestore,e.converter,u_(e._query,n))}_parse(e){const n=eo(e.firestore);return function(s,a,u,c,d,p,g){let _;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new F(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){LT(g,p);const w=[];for(const S of g)w.push(bT(c,s,S));_={arrayValue:{values:w}}}else _=bT(c,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||LT(g,p),_=KC(u,a,g,p==="in"||p==="not-in");return me.create(d,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Mz(t,e,n){const i=e,r=Wf("where",t);return Hf._create(r,i,n)}class tw extends ew{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tw(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ae.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const u=s.getFlattenedFilters();for(const c of u)ek(a,c),a=u_(a,c)}(e._query,n),new en(e.firestore,e.converter,u_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nw extends Ic{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nw(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new F(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ou(s,a)}(e._query,this._field,this._direction);return new en(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Gi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Vz(t,e="asc"){const n=e,i=Wf("orderBy",t);return nw._create(i,n)}class Gf extends Ic{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Gf(e,n,i)}_apply(e){return new en(e.firestore,e.converter,Dd(e._query,this._limit,this._limitType))}}function Fz(t){return OC("limit",t),Gf._create("limit",t,"F")}function Bz(t){return OC("limitToLast",t),Gf._create("limitToLast",t,"L")}class Kf extends Ic{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Kf(e,n,i)}_apply(e){const n=XC(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(r,s){return new Gi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function zz(...t){return Kf._create("startAt",t,!0)}function Uz(...t){return Kf._create("startAfter",t,!1)}class Zf extends Ic{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Zf(e,n,i)}_apply(e){const n=XC(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(r,s){return new Gi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function $z(...t){return Zf._create("endBefore",t,!1)}function jz(...t){return Zf._create("endAt",t,!0)}function XC(t,e,n,i){if(n[0]=te(n[0]),n[0]instanceof zu)return function(s,a,u,c,d){if(!c)throw new F(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const p=[];for(const g of Yo(s))if(g.field.isKeyField())p.push(Vs(a,c.key));else{const _=c.data.field(g.field);if(Lf(_))throw new F(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const w=g.field.canonicalString();throw new F(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}p.push(_)}return new Br(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=eo(t.firestore);return function(a,u,c,d,p,g){const _=a.explicitOrderBy;if(p.length>_.length)throw new F(b.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let S=0;S<p.length;S++){const P=p[S];if(_[S].field.isKeyField()){if(typeof P!="string")throw new F(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof P}`);if(!fy(a)&&P.indexOf("/")!==-1)throw new F(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${P}' contains a slash.`);const k=a.path.child(ye.fromString(P));if(!W.isDocumentKey(k))throw new F(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const E=new W(k);w.push(Vs(u,E))}else{const k=KC(c,d,P);w.push(k)}}return new Br(w,g)}(t._query,t.firestore._databaseId,r,e,n,i)}}function bT(t,e,n){if(typeof(n=te(n))=="string"){if(n==="")throw new F(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fy(e)&&n.indexOf("/")!==-1)throw new F(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ye.fromString(n));if(!W.isDocumentKey(i))throw new F(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vs(t,new W(i))}if(n instanceof He)return Vs(t,n._key);throw new F(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(n)}.`)}function LT(t,e){if(!Array.isArray(t)||t.length===0)throw new F(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ek(t,e){const n=function(r,s){for(const a of r)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iw{convertValue(e,n="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Js(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new $f(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=hy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){const n=Or(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ye.fromString(e);X(HR(i));const r=new Vr(i.get(1),i.get(3)),s=new W(i.popFirst(5));return r.isEqual(n)||it(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class qz extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let qi=class extends zu{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Wf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Zl=class extends qi{data(e={}){return super.data(e)}},$r=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Is(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Zl(this._firestore,this._userDataWriter,i.key,i,new Is(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new Zl(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Is(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new Zl(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Is(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:Wz(u.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Wz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function tk(t,e){return t instanceof qi&&e instanceof qi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $r&&e instanceof $r&&t._firestore===e._firestore&&UC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(t){t=Ee(t,He);const e=Ee(t.firestore,Je);return bC(At(e),t._key).then(n=>rw(e,t,n))}class no extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function Gz(t){t=Ee(t,He);const e=Ee(t.firestore,Je),n=At(e),i=new no(e);return cz(n,t._key).then(r=>new qi(e,i,t._key,r,new Is(r!==null&&r.hasLocalMutations,!0),t.converter))}function Kz(t){t=Ee(t,He);const e=Ee(t.firestore,Je);return bC(At(e),t._key,{source:"server"}).then(n=>rw(e,t,n))}function Zz(t){t=Ee(t,en);const e=Ee(t.firestore,Je),n=At(e),i=new no(e);return JC(t._query),LC(n,t._query).then(r=>new $r(e,i,t,r))}function Qz(t){t=Ee(t,en);const e=Ee(t.firestore,Je),n=At(e),i=new no(e);return hz(n,t._query).then(r=>new $r(e,i,t,r))}function Yz(t){t=Ee(t,en);const e=Ee(t.firestore,Je),n=At(e),i=new no(e);return LC(n,t._query,{source:"server"}).then(r=>new $r(e,i,t,r))}function NT(t,e,n){t=Ee(t,He);const i=Ee(t.firestore,Je),r=Qf(t.converter,e,n);return Ec(i,[qf(eo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,ze.none())])}function DT(t,e,n,...i){t=Ee(t,He);const r=Ee(t.firestore,Je),s=eo(r);let a;return a=typeof(e=te(e))=="string"||e instanceof Ur?Yy(s,"updateDoc",t._key,e,n,i):Qy(s,"updateDoc",t._key,e),Ec(r,[a.toMutation(t._key,ze.exists(!0))])}function Jz(t){return Ec(Ee(t.firestore,Je),[new Oa(t._key,ze.none())])}function Xz(t,e){const n=Ee(t.firestore,Je),i=$d(t),r=Qf(t.converter,e);return Ec(n,[qf(eo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,ze.exists(!1))]).then(()=>i)}function nk(t,...e){var n,i,r;t=te(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||I_(e[a])||(s=e[a],a++);const u={includeMetadataChanges:s.includeMetadataChanges};if(I_(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let c,d,p;if(t instanceof He)d=Ee(t.firestore,Je),p=Na(t._key.path),c={next:g=>{e[a]&&e[a](rw(d,t,g))},error:e[a+1],complete:e[a+2]};else{const g=Ee(t,en);d=Ee(g.firestore,Je),p=g._query;const _=new no(d);c={next:w=>{e[a]&&e[a](new $r(d,_,g,w))},error:e[a+1],complete:e[a+2]},JC(t._query)}return function(_,w,S,P){const k=new Bf(P),E=new Vy(w,k,S);return _.asyncQueue.enqueueAndForget(async()=>Dy(await wa(_),E)),()=>{k.Na(),_.asyncQueue.enqueueAndForget(async()=>Oy(await wa(_),E))}}(At(d),p,u,c)}function eU(t,e){return dz(At(t=Ee(t,Je)),I_(e)?e:{next:e})}function Ec(t,e){return function(i,r){const s=new Et;return i.asyncQueue.enqueueAndForget(async()=>zB(await Gy(i),r,s)),s.promise}(At(t),e)}function rw(t,e,n){const i=n.docs.get(e._key),r=new no(t);return new qi(t,r,e._key,i,new Is(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nU=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=eo(e)}set(e,n,i){this._verifyNotCommitted();const r=dr(e,this._firestore),s=Qf(r.converter,n,i),a=qf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,ze.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=dr(e,this._firestore);let a;return a=typeof(n=te(n))=="string"||n instanceof Ur?Yy(this._dataReader,"WriteBatch.update",s._key,n,i,r):Qy(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dr(e,this._firestore);return this._mutations=this._mutations.concat(new Oa(n._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function dr(t,e){if((t=te(t)).firestore!==e)throw new F(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iU=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=eo(n)}get(n){const i=dr(n,this._firestore),r=new qz(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return Q();const a=s[0];if(a.isFoundDocument())return new zu(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new zu(this._firestore,r,i._key,null,i.converter);throw Q()})}set(n,i,r){const s=dr(n,this._firestore),a=Qf(s.converter,i,r),u=qf(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,r);return this._transaction.set(s._key,u),this}update(n,i,r,...s){const a=dr(n,this._firestore);let u;return u=typeof(i=te(i))=="string"||i instanceof Ur?Yy(this._dataReader,"Transaction.update",a._key,i,r,s):Qy(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,u),this}delete(n){const i=dr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=dr(e,this._firestore),i=new no(this._firestore);return super.get(e).then(r=>new qi(this._firestore,i,n._key,r._document,new Is(!1,!1),n.converter))}};function rU(t,e,n){t=Ee(t,Je);const i=Object.assign(Object.assign({},tU),n);return function(s){if(s.maxAttempts<1)throw new F(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,u){const c=new Et;return s.asyncQueue.enqueueAndForget(async()=>{const d=await az(s);new sz(s.asyncQueue,d,u,a,c).run()}),c.promise}(At(t),r=>e(new iU(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(){return new wc("deleteField")}function oU(){return new Zy("serverTimestamp")}function aU(...t){return new bz("arrayUnion",t)}function lU(...t){return new Lz("arrayRemove",t)}function uU(t){return new Nz("increment",t)}(function(e,n=!0){(function(r){La=r})(Gr),Nr(new yi("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),u=new Je(new g2(i.getProvider("auth-internal")),new w2(i.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vr(d.options.projectId,p)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),_i(C0,"4.3.2",e),_i(C0,"4.3.2","esm2017")})();const cU="@firebase/firestore-compat",hU="0.3.21";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function MT(){if(!W2())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Uu{constructor(e){this._delegate=e}static fromBase64String(e){return MT(),new Uu(Ii.fromBase64String(e))}static fromUint8Array(e){return OT(),new Uu(Ii.fromUint8Array(e))}toBase64(){return MT(),this._delegate.toBase64()}toUint8Array(){return OT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){return dU(t,["next","error","complete"])}function dU(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{enableIndexedDbPersistence(e,n){return wz(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Iz(e._delegate)}clearIndexedDbPersistence(e){return Ez(e._delegate)}}class ik{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){mz(this._delegate,e,n,i)}enableNetwork(){return Pz(this._delegate)}disableNetwork(){return Sz(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,DC("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Tz(this._delegate)}onSnapshotsInSync(e){return eU(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ia(this,BC(this._delegate,e))}catch(n){throw Kt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Dn(this,$d(this._delegate,e))}catch(n){throw Kt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gt(this,gz(this._delegate,e))}catch(n){throw Kt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return rU(this._delegate,n=>e(new rk(this,n)))}batch(){return At(this._delegate),new sk(new nU(this._delegate,e=>Ec(this._delegate,e)))}loadBundle(e){return Az(this._delegate,e)}namedQuery(e){return Rz(this._delegate,e).then(n=>n?new Gt(this,n):null)}}class Yf extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uu(new Ii(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Dn.forKey(n,this.firestore,null)}}function pU(t){d2(t)}class rk{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}get(e){const n=Es(e);return this._delegate.get(n).then(i=>new $u(this._firestore,new qi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=Es(e);return i?(sw("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Es(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Es(e);return this._delegate.delete(n),this}}class sk{constructor(e){this._delegate=e}set(e,n,i){const r=Es(e);return i?(sw("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Es(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Es(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class qs{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Zl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ju(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=qs.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new qs(e,new Yf(e),n),r.set(n,s)),s}}qs.INSTANCES=new WeakMap;class Dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dn(n,new He(n._delegate,i,new W(e)))}static forKey(e,n,i){return new Dn(n,new He(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ia(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ia(this.firestore,BC(this._delegate,e))}catch(n){throw Kt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=te(e),e instanceof He?zC(this._delegate,e):!1}set(e,n){n=sw("DocumentReference.set",n);try{return n?NT(this._delegate,e,n):NT(this._delegate,e)}catch(i){throw Kt(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?DT(this._delegate,e):DT(this._delegate,e,n,...i)}catch(r){throw Kt(r,"updateDoc()","DocumentReference.update()")}}delete(){return Jz(this._delegate)}onSnapshot(...e){const n=ok(e),i=ak(e,r=>new $u(this.firestore,new qi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return nk(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Gz(this._delegate):(e==null?void 0:e.source)==="server"?n=Kz(this._delegate):n=Hz(this._delegate),n.then(i=>new $u(this.firestore,new qi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Kt(t,e,n){return t.message=t.message.replace(e,n),t}function ok(t){for(const e of t)if(typeof e=="object"&&!T_(e))return e;return{}}function ak(t,e){var n,i;let r;return T_(t[0])?r=t[0]:T_(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:s=>{r.next&&r.next(e(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class $u{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tk(this._delegate,e._delegate)}}class ju extends $u{data(e){const n=this._delegate.data(e);return f2(n!==void 0),n}}class Gt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}where(e,n,i){try{return new Gt(this.firestore,sr(this._delegate,Mz(e,n,i)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Gt(this.firestore,sr(this._delegate,Vz(e,n)))}catch(i){throw Kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gt(this.firestore,sr(this._delegate,Fz(e)))}catch(n){throw Kt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Gt(this.firestore,sr(this._delegate,Bz(e)))}catch(n){throw Kt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gt(this.firestore,sr(this._delegate,zz(...e)))}catch(n){throw Kt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gt(this.firestore,sr(this._delegate,Uz(...e)))}catch(n){throw Kt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gt(this.firestore,sr(this._delegate,$z(...e)))}catch(n){throw Kt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gt(this.firestore,sr(this._delegate,jz(...e)))}catch(n){throw Kt(n,"endAt()","Query.endAt()")}}isEqual(e){return UC(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Qz(this._delegate):(e==null?void 0:e.source)==="server"?n=Yz(this._delegate):n=Zz(this._delegate),n.then(i=>new P_(this.firestore,new $r(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=ok(e),i=ak(e,r=>new P_(this.firestore,new $r(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return nk(this._delegate,n,i)}withConverter(e){return new Gt(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class mU{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ju(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class P_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Gt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ju(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new mU(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new ju(this._firestore,i))})}isEqual(e){return tk(this._delegate,e._delegate)}}class Ia extends Gt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dn(this.firestore,e):null}doc(e){try{return e===void 0?new Dn(this.firestore,$d(this._delegate)):new Dn(this.firestore,$d(this._delegate,e))}catch(n){throw Kt(n,"doc()","CollectionReference.doc()")}}add(e){return Xz(this._delegate,e).then(n=>new Dn(this.firestore,n))}isEqual(e){return zC(this._delegate,e._delegate)}withConverter(e){return new Ia(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Es(t){return Ee(t,He)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(...e){this._delegate=new Ur(...e)}static documentId(){return new ow(Be.keyField().canonicalString())}isEqual(e){return e=te(e),e instanceof Ur?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._delegate=e}static serverTimestamp(){const e=oU();return e._methodName="FieldValue.serverTimestamp",new ms(e)}static delete(){const e=sU();return e._methodName="FieldValue.delete",new ms(e)}static arrayUnion(...e){const n=aU(...e);return n._methodName="FieldValue.arrayUnion",new ms(n)}static arrayRemove(...e){const n=lU(...e);return n._methodName="FieldValue.arrayRemove",new ms(n)}static increment(e){const n=uU(e);return n._methodName="FieldValue.increment",new ms(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU={Firestore:ik,GeoPoint:$f,Timestamp:$e,Blob:Uu,Transaction:rk,WriteBatch:sk,DocumentReference:Dn,DocumentSnapshot:$u,Query:Gt,QueryDocumentSnapshot:ju,QuerySnapshot:P_,CollectionReference:Ia,FieldPath:ow,FieldValue:ms,setLogLevel:pU,CACHE_SIZE_UNLIMITED:yz};function _U(t,e){t.INTERNAL.registerComponent(new yi("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},gU)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t){_U(t,(e,n)=>new ik(e,n,new fU)),t.registerVersion(cU,hU)}vU(Ue);function aw(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}const yl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},wo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function lk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wU=yU,IU=lk,uk=new Qs("auth","Firebase",lk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new mf("@firebase/auth");function EU(t,...e){qd.logLevel<=pe.WARN&&qd.warn(`Auth (${Gr}): ${t}`,...e)}function jh(t,...e){qd.logLevel<=pe.ERROR&&qd.error(`Auth (${Gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t,...e){throw lw(t,...e)}function Ot(t,...e){return lw(t,...e)}function ck(t,e,n){const i=Object.assign(Object.assign({},IU()),{[e]:n});return new Qs("auth","Firebase",i).create(e,{appName:t.name})}function za(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Vt(t,"argument-error"),ck(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lw(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return uk.create(t,...e)}function $(t,e,...n){if(!t)throw lw(e,...n)}function pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jh(e),new Error(e)}function Yn(t,e){t||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uw(){return VT()==="http:"||VT()==="https:"}function VT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uw()||x1()||"connection"in navigator)?navigator.onLine:!0}function PU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=xO()||Mv()}get(){return TU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=new Tc(3e4,6e4);function st(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function dt(t,e,n,i,r={}){return dk(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const u=ka(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),hk.fetch()(fk(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function dk(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},SU),e);try{const r=new CU(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Nl(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Nl(t,"user-disabled",a);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ck(t,p,d);Vt(t,p)}}catch(r){if(r instanceof Yt)throw r;Vt(t,"network-request-failed",{message:String(r)})}}async function Qi(t,e,n,i,r={}){const s=await dt(t,e,n,i,r);return"mfaPendingCredential"in s&&Vt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fk(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?cw(t.config,r):`${t.config.apiScheme}://${r}`}function RU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ot(this.auth,"network-request-failed")),AU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ot(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){return t!==void 0&&t.getResponse!==void 0}function BT(t){return t!==void 0&&t.enterprise!==void 0}class kU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t){return(await dt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function bU(t,e){return dt(t,"GET","/v2/recaptchaConfig",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(t,e){return dt(t,"POST","/v1/accounts:delete",e)}async function NU(t,e){return dt(t,"POST","/v1/accounts:update",e)}async function DU(t,e){return dt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OU(t,e=!1){const n=te(t),i=await n.getIdToken(e),r=Jf(i);$(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ql(Fm(r.auth_time)),issuedAtTime:Ql(Fm(r.iat)),expirationTime:Ql(Fm(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fm(t){return Number(t)*1e3}function Jf(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const r=C1(n);return r?JSON.parse(r):(jh("Failed to decode base64 JWT payload"),null)}catch(r){return jh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function MU(t){const e=Jf(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Yt&&VU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function VU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Wi(t,DU(n,{idToken:i}));$(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UU(s.providerUserInfo):[],u=zU(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new pk(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function BU(t){const e=te(t);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function UU(t){return t.map(e=>{var{providerId:n}=e,i=aw(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(t,e){const n=await dk(t,{},async()=>{const i=ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=fk(t,r,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",hk.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return $(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await $U(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Hu;return i&&($(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&($(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&($(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hu,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){$(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rs{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=aw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pk(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wi(this,this.stsTokenManager.getToken(this.auth,e));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OU(this,e)}reload(){return BU(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Wu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wi(this,LU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,u,c,d,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,P=(u=n.tenantId)!==null&&u!==void 0?u:void 0,k=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:A,isAnonymous:D,providerData:O,stsTokenManager:z}=n;$(I&&z,e,"internal-error");const K=Hu.fromJSON(this.name,z);$(typeof I=="string",e,"internal-error"),or(g,e.name),or(_,e.name),$(typeof A=="boolean",e,"internal-error"),$(typeof D=="boolean",e,"internal-error"),or(w,e.name),or(S,e.name),or(P,e.name),or(k,e.name),or(E,e.name),or(y,e.name);const de=new Rs({uid:I,auth:e,email:_,emailVerified:A,displayName:g,isAnonymous:D,photoURL:S,phoneNumber:w,tenantId:P,stsTokenManager:K,createdAt:E,lastLoginAt:y});return O&&Array.isArray(O)&&(de.providerData=O.map(ne=>Object.assign({},ne))),k&&(de._redirectEventId=k),de}static async _fromIdTokenResponse(e,n,i=!1){const r=new Hu;r.updateFromServerResponse(n);const s=new Rs({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Wu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new Map;function wn(t){Yn(t instanceof Function,"Expected a class definition");let e=zT.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mk.type="NONE";const Ea=mk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,e,n){return`firebase:${t}:${e}:${n}`}class Xo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Cs(this.userKey,r.apiKey,s),this.fullPersistenceKey=Cs("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Xo(wn(Ea),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||wn(Ea);const a=Cs(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(a);if(p){const g=Rs._fromJSON(e,p);d!==s&&(u=g),s=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Xo(s,e,i):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Xo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yk(e))return"Blackberry";if(wk(e))return"Webos";if(hw(e))return"Safari";if((e.includes("chrome/")||_k(e))&&!e.includes("edge/"))return"Chrome";if(Pc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gk(t=Ke()){return/firefox\//i.test(t)}function hw(t=Ke()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _k(t=Ke()){return/crios\//i.test(t)}function vk(t=Ke()){return/iemobile/i.test(t)}function Pc(t=Ke()){return/android/i.test(t)}function yk(t=Ke()){return/blackberry/i.test(t)}function wk(t=Ke()){return/webos/i.test(t)}function Ua(t=Ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jU(t=Ke()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function qU(t=Ke()){var e;return Ua(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WU(){return b1()&&document.documentMode===10}function Ik(t=Ke()){return Ua(t)||Pc(t)||wk(t)||yk(t)||/windows phone/i.test(t)||vk(t)}function HU(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t,e=[]){let n;switch(t){case"Browser":n=UT(Ke());break;case"Worker":n=`${UT(Ke())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(t,e={}){return dt(t,"GET","/v2/passwordPolicy",st(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=6;class QU{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:ZU,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $T(this),this.idTokenSubscription=new $T(this),this.beforeStateQueue=new GU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?te(e):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KU(this),n=new QU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wn(e)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if($(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ek(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&EU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xe(t){return te(t)}class $T{constructor(e){this.auth=e,this.observer=null,this.addObserver=L1(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function dw(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Ot("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",JU().appendChild(i)})}function Tk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const XU="https://www.google.com/recaptcha/enterprise.js?render=",e4="recaptcha-enterprise",t4="NO_RECAPTCHA";class n4{constructor(e){this.type=e4,this.auth=Xe(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{bU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new kU(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(c=>{u(c)})})}function r(s,a,u){const c=window.grecaptcha;BT(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(t4)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{i(this.auth).then(u=>{if(!n&&BT(window.grecaptcha))r(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}dw(XU+u).then(()=>{r(u,s,a)}).catch(c=>{a(c)})}}).catch(u=>{a(u)})})}}async function jT(t,e,n,i=!1){const r=new n4(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xf(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await jT(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await jT(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(s)})}function i4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function r4(t,e,n){const i=Xe(t);$(i._canInitEmulator,i,"emulator-config-failed"),$(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=Pk(e),{host:a,port:u}=s4(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${s}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||o4()}function Pk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function s4(t){const e=Pk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:qT(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:qT(a)}}}function qT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(t,e){return dt(t,"POST","/v1/accounts:resetPassword",st(t,e))}async function Ak(t,e){return dt(t,"POST","/v1/accounts:update",e)}async function a4(t,e){return dt(t,"POST","/v1/accounts:update",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(t,e){return Qi(t,"POST","/v1/accounts:signInWithPassword",st(t,e))}async function ep(t,e){return dt(t,"POST","/v1/accounts:sendOobCode",st(t,e))}async function u4(t,e){return ep(t,e)}async function c4(t,e){return ep(t,e)}async function h4(t,e){return ep(t,e)}async function d4(t,e){return ep(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",st(t,e))}async function p4(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends $a{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Gu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Gu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,n,"signInWithPassword",l4);case"emailLink":return f4(e,{email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Ak(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return p4(e,{idToken:n,email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e){return Qi(t,"POST","/v1/accounts:signInWithIdp",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="http://localhost";class Ei extends $a{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=aw(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Ei(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}buildRequest(){const e={requestUri:m4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e){return dt(t,"POST","/v1/accounts:sendVerificationCode",st(t,e))}async function _4(t,e){return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",st(t,e))}async function v4(t,e){const n=await Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",st(t,e));if(n.temporaryProof)throw Nl(t,"account-exists-with-different-credential",n);return n}const y4={USER_NOT_FOUND:"user-not-found"};async function w4(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",st(t,n),y4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends $a{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ks({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ks({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return _4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return v4(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return w4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new ks({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E4(t){const e=zo(Rl(t)).link,n=e?zo(Rl(e)).deep_link_id:null,i=zo(Rl(t)).deep_link_id;return(i?zo(Rl(i)).link:null)||i||n||e||t}class tp{constructor(e){var n,i,r,s,a,u;const c=zo(Rl(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(i=c.oobCode)!==null&&i!==void 0?i:null,g=I4((r=c.mode)!==null&&r!==void 0?r:null);$(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=E4(e);try{return new tp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.providerId=es.PROVIDER_ID}static credential(e,n){return Gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=tp.parseLink(n);return $(i,"argument-error"),Gu._fromEmailAndCode(e,i.code,i.tenantId)}}es.PROVIDER_ID="password";es.EMAIL_PASSWORD_SIGN_IN_METHOD="password";es.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ea extends ja{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return $("providerId"in n&&"signInMethod"in n,"argument-error"),Ei._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return $(e.idToken||e.accessToken,"argument-error"),Ei._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ea.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ea.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:u}=e;if(!i&&!r&&!n&&!s||!u)return null;try{return new ea(u)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends ja{constructor(){super("facebook.com")}static credential(e){return Ei._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ei._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ai.credential(n,i)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends ja{constructor(){super("github.com")}static credential(e){return Ei._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.GITHUB_SIGN_IN_METHOD="github.com";li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="http://localhost";class Ta extends $a{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new Ta(i,s)}static _create(e,n){return new Ta(e,n)}buildRequest(){return{requestUri:T4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="saml.";class Wd extends Yi{constructor(e){$(e.startsWith(P4),"argument-error"),super(e)}static credentialFromResult(e){return Wd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Wd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ta.fromJSON(e);return $(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Ta._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends ja{constructor(){super("twitter.com")}static credential(e,n){return Ei._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ui.credential(n,i)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e){return Qi(t,"POST","/v1/accounts:signUp",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Rs._fromIdTokenResponse(e,i,r),a=WT(i);return new Fn({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=WT(i);return new Fn({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function WT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(t){var e;const n=Xe(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Fn({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Rk(n,{returnSecureToken:!0}),r=await Fn._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends Yt{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Hd(e,n,i,r)}}function Ck(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t,e){const n=te(t);await np(!0,n,e);const{providerUserInfo:i}=await NU(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=kk(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function fw(t,e,n=!1){const i=await Wi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fn._forOperation(t,"link",i)}async function np(t,e,n){await Wu(e);const i=kk(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";$(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Wi(t,Ck(i,r,e,t),n);$(s.idToken,i,"internal-error");const a=Jf(s.idToken);$(a,i,"internal-error");const{sub:u}=a;return $(t.uid===u,i,"user-mismatch"),Fn._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e,n=!1){const i="signIn",r=await Ck(t,i,e),s=await Fn._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function ip(t,e){return bk(Xe(t),e)}async function Lk(t,e){const n=te(t);return await np(!1,n,e.providerId),fw(n,e)}async function Nk(t,e){return xk(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(t,e){return Qi(t,"POST","/v1/accounts:signInWithCustomToken",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e){const n=Xe(t),i=await R4(n,{token:e,returnSecureToken:!0}),r=await Fn._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?pw._fromServerResponse(e,n):"totpInfo"in n?mw._fromServerResponse(e,n):Vt(e,"internal-error")}}class pw extends Sc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new pw(n)}}class mw extends Sc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new mw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e,n){var i;$(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),$(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&($(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(t){const e=Xe(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function k4(t,e,n){const i=Xe(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&rp(i,r,n),await Xf(i,r,"getOobCode",c4)}async function x4(t,e,n){await Sk(te(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&gw(t),i})}async function b4(t,e){await a4(te(t),{oobCode:e})}async function Dk(t,e){const n=te(t),i=await Sk(n,{oobCode:e}),r=i.requestType;switch($(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(i.mfaInfo,n,"internal-error");default:$(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=Sc._fromServerResponse(Xe(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function L4(t,e){const{data:n}=await Dk(te(t),e);return n.email}async function N4(t,e,n){const i=Xe(t),a=await Xf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&gw(t),c}),u=await Fn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function D4(t,e,n){return ip(te(t),es.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&gw(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t,e,n){const i=Xe(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,u){$(u.handleCodeInApp,i,"argument-error"),u&&rp(i,a,u)}s(r,n),await Xf(i,r,"getOobCode",h4)}function M4(t,e){const n=tp.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function V4(t,e,n){const i=te(t),r=es.credentialWithLink(e,n||qu());return $(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),ip(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(t,e){return dt(t,"POST","/v1/accounts:createAuthUri",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e){const n=uw()?qu():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await F4(te(t),i);return r||[]}async function z4(t,e){const n=te(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&rp(n.auth,r,e);const{email:s}=await u4(n.auth,r);s!==t.email&&await t.reload()}async function U4(t,e,n){const i=te(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&rp(i.auth,s,n);const{email:a}=await d4(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(t,e){return dt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=te(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Wi(i,$4(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const u=i.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function q4(t,e){return Ok(te(t),e,null)}function W4(t,e){return Ok(te(t),null,e)}async function Ok(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Wi(t,Ak(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const a=(n=(e=Jf(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(a){const u=a!=="anonymous"&&a!=="custom"?a:null;return new ta(s,u)}}if(!i)return null;switch(i){case"facebook.com":return new G4(s,r);case"github.com":return new K4(s,r);case"google.com":return new Z4(s,r);case"twitter.com":return new Q4(s,r,t.screenName||null);case"custom":case"anonymous":return new ta(s,null);default:return new ta(s,i,r)}}class ta{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class Mk extends ta{constructor(e,n,i,r){super(e,n,i),this.username=r}}class G4 extends ta{constructor(e,n){super(e,"facebook.com",n)}}class K4 extends Mk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Z4 extends ta{constructor(e,n){super(e,"google.com",n)}}class Q4 extends Mk{constructor(e,n,i){super(e,"twitter.com",n,i)}}function Y4(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:H4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new Ts("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ts("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ts._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return Ts._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=Xe(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(u=>Sc._fromServerResponse(i,u));$(r.mfaPendingCredential,i,"internal-error");const a=Ts._fromMfaPendingCredential(r.mfaPendingCredential);return new _w(a,s,async u=>{const c=await u._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const d=Object.assign(Object.assign({},r),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const p=await Fn._fromIdTokenResponse(i,n.operationType,d);return await i._updateCurrentUser(p.user),p;case"reauthenticate":return $(n.user,i,"internal-error"),Fn._forOperation(n.user,n.operationType,d);default:Vt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function J4(t,e){var n;const i=te(t),r=e;return $(e.customData.operationType,i,"argument-error"),$((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),_w._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t,e){return dt(t,"POST","/v2/accounts/mfaEnrollment:start",st(t,e))}function e$(t,e){return dt(t,"POST","/v2/accounts/mfaEnrollment:finalize",st(t,e))}function t$(t,e){return dt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",st(t,e))}class vw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Sc._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new vw(e)}async getSession(){return Ts._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Wi(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Wi(this.user,t$(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const Bm=new WeakMap;function n$(t){const e=te(t);return Bm.has(e)||Bm.set(e,vw._fromUser(e)),Bm.get(e)}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(){const t=Ke();return hw(t)||Ua(t)}const r$=1e3,s$=10;class Fk extends Vk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=i$()&&HU(),this.fallbackToPolling=Ik(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);WU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,s$):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},r$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fk.type="LOCAL";const yw=Fk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk extends Vk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bk.type="SESSION";const Ws=Bk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async d=>d(n.origin,s)),c=await o$(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const d=Ac("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function l$(t){ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function u$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function h$(){return ww()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="firebaseLocalStorageDb",d$=1,Kd="firebaseLocalStorage",Uk="fbase_key";class Rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function op(t,e){return t.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function f$(){const t=indexedDB.deleteDatabase(zk);return new Rc(t).toPromise()}function S_(){const t=indexedDB.open(zk,d$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Kd,{keyPath:Uk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Kd)?e(i):(i.close(),await f$(),e(await S_()))})})}async function HT(t,e,n){const i=op(t,!0).put({[Uk]:e,value:n});return new Rc(i).toPromise()}async function p$(t,e){const n=op(t,!1).get(e),i=await new Rc(n).toPromise();return i===void 0?null:i.value}function GT(t,e){const n=op(t,!0).delete(e);return new Rc(n).toPromise()}const m$=800,g$=3;class $k{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>g$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ww()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sp._getInstance(h$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await u$(),!this.activeServiceWorker)return;this.sender=new a$(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await S_();return await HT(e,Gd,"1"),await GT(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>HT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>p$(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>GT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=op(r,!1).getAll();return new Rc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),m$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$k.type="LOCAL";const Ku=$k;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _$(t,e){return dt(t,"POST","/v2/accounts/mfaSignIn:start",st(t,e))}function v$(t,e){return dt(t,"POST","/v2/accounts/mfaSignIn:finalize",st(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=500,w$=6e4,Eh=1e12;class I${constructor(e){this.auth=e,this.counter=Eh,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new E$(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Eh;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Eh;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Eh;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class E${constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;$(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=T$(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},w$)},y$))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function T$(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=Tk("rcb"),P$=new Tc(3e4,6e4),S$="https://www.google.com/recaptcha/api.js?";class A${constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return $(R$(n),e,"argument-error"),this.shouldResolveImmediately(n)&&FT(ut().grecaptcha)?Promise.resolve(ut().grecaptcha):new Promise((i,r)=>{const s=ut().setTimeout(()=>{r(Ot(e,"network-request-failed"))},P$.get());ut()[zm]=()=>{ut().clearTimeout(s),delete ut()[zm];const u=ut().grecaptcha;if(!u||!FT(u)){r(Ot(e,"internal-error"));return}const c=u.render;u.render=(d,p)=>{const g=c(d,p);return this.counter++,g},this.hostLanguage=n,i(u)};const a=`${S$}?${ka({onload:zm,render:"explicit",hl:n})}`;dw(a).catch(()=>{clearTimeout(s),r(Ot(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function R$(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class C${async load(e){return new I$(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="recaptcha",k$={theme:"light",type:"image"};let x$=class{constructor(e,n,i=Object.assign({},k$)){this.parameters=i,this.type=jk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xe(e),this.isInvisible=this.parameters.size==="invisible",$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;$(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new C$:new A$,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=ut()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){$(uw()&&!ww(),this.auth,"internal-error"),await b$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await xU(this.auth);$(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function b$(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ks._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function L$(t,e,n){const i=Xe(t),r=await ap(i,e,te(n));return new Iw(r,s=>ip(i,s))}async function N$(t,e,n){const i=te(t);await np(!1,i,"phone");const r=await ap(i.auth,e,te(n));return new Iw(r,s=>Lk(i,s))}async function D$(t,e,n){const i=te(t),r=await ap(i.auth,e,te(n));return new Iw(r,s=>Nk(i,s))}async function ap(t,e,n){var i;const r=await n.verify();try{$(typeof r=="string",t,"argument-error"),$(n.type===jk,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return $(a.type==="enroll",t,"internal-error"),(await X4(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{$(a.type==="signin",t,"internal-error");const u=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return $(u,t,"missing-multi-factor-info"),(await _$(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await g4(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return a}}finally{n._reset()}}async function O$(t,e){await fw(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hs=class qh{constructor(e){this.providerId=qh.PROVIDER_ID,this.auth=Xe(e)}verifyPhoneNumber(e,n){return ap(this.auth,e,te(n))}static credential(e,n){return ks._fromVerification(e,n)}static credentialFromResult(e){const n=e;return qh.credentialFromTaggedObject(n)}static credentialFromError(e){return qh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?ks._fromTokenResponse(n,i):null}};Hs.PROVIDER_ID="phone";Hs.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t,e){return e?wn(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew extends $a{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M$(t){return bk(t.auth,new Ew(t),t.bypassAuthState)}function V$(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),xk(n,new Ew(t),t.bypassAuthState)}async function F$(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),fw(n,new Ew(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M$;case"linkViaPopup":case"linkViaRedirect":return F$;case"reauthViaPopup":case"reauthViaRedirect":return V$;default:Vt(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=new Tc(2e3,1e4);async function z$(t,e,n){const i=Xe(t);za(t,e,Yi);const r=io(i,n);return new Di(i,"signInViaPopup",e,r).executeNotNull()}async function U$(t,e,n){const i=te(t);za(i.auth,e,Yi);const r=io(i.auth,n);return new Di(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function $$(t,e,n){const i=te(t);za(i.auth,e,Yi);const r=io(i.auth,n);return new Di(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class Di extends qk{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=Ac();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B$.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$="pendingRedirect",Yl=new Map;class q$ extends qk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Yl.get(this.auth._key());if(!e){try{const i=await W$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Yl.set(this.auth._key(),e)}return this.bypassAuthState||Yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function W$(t,e){const n=Hk(e),i=Wk(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function Tw(t,e){return Wk(t)._set(Hk(e),"true")}function H$(){Yl.clear()}function Pw(t,e){Yl.set(t._key(),e)}function Wk(t){return wn(t._redirectPersistence)}function Hk(t){return Cs(j$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t,e,n){return K$(t,e,n)}async function K$(t,e,n){const i=Xe(t);za(t,e,Yi),await i._initializationPromise;const r=io(i,n);return await Tw(r,i),r._openRedirect(i,e,"signInViaRedirect")}function Z$(t,e,n){return Q$(t,e,n)}async function Q$(t,e,n){const i=te(t);za(i.auth,e,Yi),await i.auth._initializationPromise;const r=io(i.auth,n);await Tw(r,i.auth);const s=await Gk(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function Y$(t,e,n){return J$(t,e,n)}async function J$(t,e,n){const i=te(t);za(i.auth,e,Yi),await i.auth._initializationPromise;const r=io(i.auth,n);await np(!1,i,e.providerId),await Tw(r,i.auth);const s=await Gk(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function X$(t,e){return await Xe(t)._initializationPromise,lp(t,e,!1)}async function lp(t,e,n=!1){const i=Xe(t),r=io(i,e),a=await new q$(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function Gk(t){const e=Ac(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=10*60*1e3;class Kk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Zk(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ot(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e3&&this.cachedEventUids.clear(),this.cachedEventUids.has(KT(e))}saveEventToCache(e){this.cachedEventUids.add(KT(e)),this.lastProcessedEventTime=Date.now()}}function KT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Zk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function t3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(t,e={}){return dt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i3=/^https?/;async function r3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Qk(t);for(const n of e)try{if(s3(n))return}catch{}Vt(t,"unauthorized-domain")}function s3(t){const e=qu(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!i3.test(n))return!1;if(n3.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=new Tc(3e4,6e4);function ZT(){const t=ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a3(t){return new Promise((e,n)=>{var i,r,s;function a(){ZT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZT(),n(Ot(t,"network-request-failed"))},timeout:o3.get()})}if(!((r=(i=ut().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ut().gapi)===null||s===void 0)&&s.load)a();else{const u=Tk("iframefcb");return ut()[u]=()=>{gapi.load?a():n(Ot(t,"network-request-failed"))},dw(`https://apis.google.com/js/api.js?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Wh=null,e})}let Wh=null;function l3(t){return Wh=Wh||a3(t),Wh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=new Tc(5e3,15e3),c3="__/auth/iframe",h3="emulator/auth/iframe",d3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p3(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cw(e,h3):`https://${t.config.authDomain}/${c3}`,i={apiKey:e.apiKey,appName:t.name,v:Gr},r=f3.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ka(i).slice(1)}`}async function m3(t){const e=await l3(t),n=ut().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:p3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d3,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Ot(t,"network-request-failed"),u=ut().setTimeout(()=>{s(a)},u3.get());function c(){ut().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_3=500,v3=600,y3="_blank",w3="http://localhost";class QT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I3(t,e,n,i=_3,r=v3){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},g3),{width:i.toString(),height:r.toString(),top:s,left:a}),d=Ke().toLowerCase();n&&(u=_k(d)?y3:n),gk(d)&&(e=e||w3,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[w,S])=>`${_}${w}=${S},`,"");if(qU(d)&&u!=="_self")return E3(e||"",u),new QT(null);const g=window.open(e||"",u,p);$(g,t,"popup-blocked");try{g.focus()}catch{}return new QT(g)}function E3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="__/auth/handler",P3="emulator/auth/handler",S3=encodeURIComponent("fac");async function A_(t,e,n,i,r,s){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Gr,eventId:r};if(e instanceof Yi){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",VO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries(s||{}))a[p]=g}if(e instanceof ja){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),d=c?`#${S3}=${encodeURIComponent(c)}`:"";return`${A3(t)}?${ka(u).slice(1)}${d}`}function A3({config:t}){return t.emulator?cw(t,P3):`https://${t.authDomain}/${T3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class R3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=lp,this._overrideRedirectResult=Pw}async _openPopup(e,n,i,r){var s;Yn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await A_(e,n,i,qu(),r);return I3(e,a,Ac())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await A_(e,n,i,qu(),r);return l$(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Yn(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await m3(e),i=new Kk(e);return n.register("authEvent",r=>($(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Um,{type:Um},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Um];a!==void 0&&n(!!a),Vt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ik()||hw()||Ua()}}const C3=R3;class k3{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return pi("unexpected MultiFactorSessionType")}}}class Sw extends k3{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Sw(e)}_finalizeEnroll(e,n,i){return e$(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return v$(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Yk{constructor(){}static assertion(e){return Sw._fromCredential(e)}}Yk.FACTOR_ID="phone";var YT="@firebase/auth",JT="1.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function L3(t){Nr(new yi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;$(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ek(t)},d=new YU(i,r,s,c);return i4(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Nr(new yi("auth-internal",e=>{const n=Xe(e.getProvider("auth").getImmediate());return(i=>new x3(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(YT,JT,b3(t)),_i(YT,JT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=5*60;RO("authIdTokenMaxAge");L3("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=2e3;async function O3(t,e,n){var i;const{BuildInfo:r}=Gs();Yn(e.sessionId,"AuthEvent did not contain a session ID");const s=await z3(e.sessionId),a={};return Ua()?a.ibi=r.packageName:Pc()?a.apn=r.packageName:Vt(t,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=s,A_(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,a)}async function M3(t){const{BuildInfo:e}=Gs(),n={};Ua()?n.iosBundleId=e.packageName:Pc()?n.androidPackageName=e.packageName:Vt(t,"operation-not-supported-in-this-environment"),await Qk(t,n)}function V3(t){const{cordova:e}=Gs();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,jU()?"_blank":"_system","location=yes"),n(r)})})}async function F3(t,e,n){const{cordova:i}=Gs();let r=()=>{};try{await new Promise((s,a)=>{let u=null;function c(){var g;s();const _=(g=i.plugins.browsertab)===null||g===void 0?void 0:g.close;typeof _=="function"&&_(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function d(){u||(u=window.setTimeout(()=>{a(Ot(t,"redirect-cancelled-by-user"))},D3))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&d()}e.addPassiveListener(c),document.addEventListener("resume",d,!1),Pc()&&document.addEventListener("visibilitychange",p,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",d,!1),document.removeEventListener("visibilitychange",p,!1),u&&window.clearTimeout(u)}})}finally{r()}}function B3(t){var e,n,i,r,s,a,u,c,d,p;const g=Gs();$(typeof((e=g==null?void 0:g.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof((n=g==null?void 0:g.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$(typeof((s=(r=(i=g==null?void 0:g.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((c=(u=(a=g==null?void 0:g.cordova)===null||a===void 0?void 0:a.plugins)===null||u===void 0?void 0:u.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((p=(d=g==null?void 0:g.cordova)===null||d===void 0?void 0:d.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function z3(t){const e=U3(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function U3(t){if(Yn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=20;class j3 extends Kk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function q3(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:G3(),postBody:null,tenantId:t.tenantId,error:Ot(t,"no-auth-event")}}function W3(t,e){return R_()._set(C_(t),e)}async function XT(t){const e=await R_()._get(C_(t));return e&&await R_()._remove(C_(t)),e}function H3(t,e){var n,i;const r=Z3(e);if(r.includes("/__/auth/callback")){const s=Hh(r),a=s.firebaseError?K3(decodeURIComponent(s.firebaseError)):null,u=(i=(n=a==null?void 0:a.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],c=u?Ot(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function G3(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<$3;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function R_(){return wn(yw)}function C_(t){return Cs("authEvent",t.config.apiKey,t.name)}function K3(t){try{return JSON.parse(t)}catch{return null}}function Z3(t){const e=Hh(t),n=e.link?decodeURIComponent(e.link):void 0,i=Hh(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Hh(r).link||r||i||n||t}function Hh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return zo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=500;class Y3{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lp,this._overrideRedirectResult=Pw}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new j3(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Vt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){B3(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),H$(),await this._originValidation(e);const a=q3(e,i,r);await W3(e,a);const u=await O3(e,a,n),c=await V3(u);return F3(e,s,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M3(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=Gs(),a=setTimeout(async()=>{await XT(e),n.onEvent(eP())},Q3),u=async p=>{clearTimeout(a);const g=await XT(e);let _=null;g&&(p!=null&&p.url)&&(_=H3(g,p.url)),n.onEvent(_||eP())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,u);const c=r,d=`${s.packageName.toLowerCase()}://`;Gs().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(d)&&u({url:p}),typeof c=="function")try{c(p)}catch(g){console.error(g)}}}}const J3=Y3;function eP(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ot("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t,e){Xe(t)._logFramework(e)}var e9="@firebase/auth-compat",t9="0.4.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=1e3;function Jl(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function i9(){return Jl()==="http:"||Jl()==="https:"}function Jk(t=Ke()){return!!((Jl()==="file:"||Jl()==="ionic:"||Jl()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function r9(){return Mv()||Ov()}function s9(){return b1()&&(document==null?void 0:document.documentMode)===11}function o9(t=Ke()){return/Edge\/\d+/.test(t)}function a9(t=Ke()){return s9()||o9(t)}function Xk(){try{const t=self.localStorage,e=Ac();if(t)return t.setItem(e,"1"),t.removeItem(e),a9()?vu():!0}catch{return Aw()&&vu()}return!1}function Aw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $m(){return(i9()||x1()||Jk())&&!r9()&&Xk()&&!Aw()}function ex(){return Jk()&&typeof document<"u"}async function l9(){return ex()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},n9);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function u9(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn={LOCAL:"local",NONE:"none",SESSION:"session"},wl=$,tx="persistence";function c9(t,e){if(wl(Object.values(vn).includes(e),t,"invalid-persistence-type"),Mv()){wl(e!==vn.SESSION,t,"unsupported-persistence-type");return}if(Ov()){wl(e===vn.NONE,t,"unsupported-persistence-type");return}if(Aw()){wl(e===vn.NONE||e===vn.LOCAL&&vu(),t,"unsupported-persistence-type");return}wl(e===vn.NONE||Xk(),t,"unsupported-persistence-type")}async function k_(t){await t._initializationPromise;const e=nx(),n=Cs(tx,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function h9(t,e){const n=nx();if(!n)return[];const i=Cs(tx,t,e);switch(n.getItem(i)){case vn.NONE:return[Ea];case vn.LOCAL:return[Ku,Ws];case vn.SESSION:return[Ws];default:return[]}}function nx(){var t;try{return((t=u9())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=$;class _r{constructor(){this.browserResolver=wn(C3),this.cordovaResolver=wn(J3),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=lp,this._overrideRedirectResult=Pw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return ex()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return d9(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await l9();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){return t.unwrap()}function f9(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t){return rx(t)}function m9(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new g9(t,J4(t,e))}else if(i){const r=rx(e),s=e;r&&(s.credential=r,s.tenantId=i.tenantId||void 0,s.email=i.email||void 0,s.phoneNumber=i.phoneNumber||void 0)}}function rx(t){const{_tokenResponse:e}=t instanceof Yt?t.customData:t;if(!e)return null;if(!(t instanceof Yt)&&"temporaryProof"in e&&"phoneNumber"in e)return Hs.credentialFromResult(t);const n=e.providerId;if(!n||n===yl.PASSWORD)return null;let i;switch(n){case yl.GOOGLE:i=ai;break;case yl.FACEBOOK:i=oi;break;case yl.GITHUB:i=li;break;case yl.TWITTER:i=ui;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:u,nonce:c}=e;return!s&&!a&&!r&&!u?null:u?n.startsWith("saml.")?Ta._create(n,u):Ei._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:r,accessToken:s}):new ea(n).credential({idToken:r,accessToken:s,rawNonce:c})}return t instanceof Yt?i.credentialFromError(t):i.credentialFromResult(t)}function an(t,e){return e.catch(n=>{throw n instanceof Yt&&m9(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:p9(n),additionalUserInfo:Y4(n),user:Oi.getOrCreate(r)}})}async function x_(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>an(t,n.confirm(i))}}class g9{constructor(e,n){this.resolver=n,this.auth=f9(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return an(ix(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this._delegate=e,this.multiFactor=n$(e)}static getOrCreate(e){return Oi.USER_MAP.has(e)||Oi.USER_MAP.set(e,new Oi(e)),Oi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return an(this.auth,Lk(this._delegate,e))}async linkWithPhoneNumber(e,n){return x_(this.auth,N$(this._delegate,e,n))}async linkWithPopup(e){return an(this.auth,$$(this._delegate,e,_r))}async linkWithRedirect(e){return await k_(Xe(this.auth)),Y$(this._delegate,e,_r)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return an(this.auth,Nk(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return x_(this.auth,D$(this._delegate,e,n))}reauthenticateWithPopup(e){return an(this.auth,U$(this._delegate,e,_r))}async reauthenticateWithRedirect(e){return await k_(Xe(this.auth)),Z$(this._delegate,e,_r)}sendEmailVerification(e){return z4(this._delegate,e)}async unlink(e){return await A4(this._delegate,e),this}updateEmail(e){return q4(this._delegate,e)}updatePassword(e){return W4(this._delegate,e)}updatePhoneNumber(e){return O$(this._delegate,e)}updateProfile(e){return j4(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return U4(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=$;class b_{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;Il(i,"invalid-api-key",{appName:e.name}),Il(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?_r:void 0;this._delegate=n.initialize({options:{persistence:_9(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(wU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){r4(this._delegate,e,n)}applyActionCode(e){return b4(this._delegate,e)}checkActionCode(e){return Dk(this._delegate,e)}confirmPasswordReset(e,n){return x4(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return an(this._delegate,N4(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return B4(this._delegate,e)}isSignInWithEmailLink(e){return M4(this._delegate,e)}async getRedirectResult(){Il($m(),this._delegate,"operation-not-supported-in-this-environment");const e=await X$(this._delegate,_r);return e?an(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){X3(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=tP(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=tP(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return O4(this._delegate,e,n)}sendPasswordResetEmail(e,n){return k4(this._delegate,e,n||void 0)}async setPersistence(e){c9(this._delegate,e);let n;switch(e){case vn.SESSION:n=Ws;break;case vn.LOCAL:n=await wn(Ku)._isAvailable()?Ku:yw;break;case vn.NONE:n=Ea;break;default:return Vt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return an(this._delegate,S4(this._delegate))}signInWithCredential(e){return an(this._delegate,ip(this._delegate,e))}signInWithCustomToken(e){return an(this._delegate,C4(this._delegate,e))}signInWithEmailAndPassword(e,n){return an(this._delegate,D4(this._delegate,e,n))}signInWithEmailLink(e,n){return an(this._delegate,V4(this._delegate,e,n))}signInWithPhoneNumber(e,n){return x_(this._delegate,L$(this._delegate,e,n))}async signInWithPopup(e){return Il($m(),this._delegate,"operation-not-supported-in-this-environment"),an(this._delegate,z$(this._delegate,e,_r))}async signInWithRedirect(e){return Il($m(),this._delegate,"operation-not-supported-in-this-environment"),await k_(this._delegate),G$(this._delegate,e,_r)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return L4(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}b_.Persistence=vn;function tP(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&Oi.getOrCreate(a)),error:e,complete:n}}function _9(t,e){const n=h9(t,e);if(typeof self<"u"&&!n.includes(Ku)&&n.push(Ku),typeof window<"u")for(const i of[yw,Ws])n.includes(i)||n.push(i);return n.includes(Ea)||n.push(Ea),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.providerId="phone",this._delegate=new Hs(ix(Ue.auth()))}static credential(e,n){return Hs.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Rw.PHONE_SIGN_IN_METHOD=Hs.PHONE_SIGN_IN_METHOD;Rw.PROVIDER_ID=Hs.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=$;class y9{constructor(e,n,i=Ue.app()){var r;v9((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new x$(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9="auth-compat";function I9(t){t.INTERNAL.registerComponent(new yi(w9,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new b_(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:wo.EMAIL_SIGNIN,PASSWORD_RESET:wo.PASSWORD_RESET,RECOVER_EMAIL:wo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:wo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:wo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:wo.VERIFY_EMAIL}},EmailAuthProvider:es,FacebookAuthProvider:oi,GithubAuthProvider:li,GoogleAuthProvider:ai,OAuthProvider:ea,SAMLAuthProvider:Wd,PhoneAuthProvider:Rw,PhoneMultiFactorGenerator:Yk,RecaptchaVerifier:y9,TwitterAuthProvider:ui,Auth:b_,AuthCredential:$a,Error:Yt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(e9,t9)}I9(Ue);const E9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Ue.initializeApp(E9);const T9=()=>{const[t,e]=N.useState([]);N.useEffect(()=>{n()},[]);const n=()=>{const r=Ue.firestore().collection("rooms").onSnapshot(s=>{const a=[];s.forEach(u=>{a.push(u.id)}),e(a)});return()=>{r()}};return q.jsx(q.Fragment,{children:t.map(i=>q.jsx(Bg,{to:`/room/${i}`,className:vO.room,children:i},i))})},P9="_input_slrb5_1",S9={input:P9},A9=({children:t,...e})=>q.jsx("input",{...e,className:S9.input,type:"text",placeholder:t}),R9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Ue.initializeApp(R9);const C9=()=>{const[t,e]=N.useState(!1),[n,i]=N.useState(""),[r,s]=N.useState(null),a=pf();N.useEffect(()=>{Ue.auth().onAuthStateChanged(d=>{d&&s(d)})},[]);const u=()=>{a(r?`/room/${n}`:"/login")},c=()=>{r?e(!t):a("/login")};return q.jsxs("div",{className:n0.home_page_container,children:[q.jsxs("div",{className:n0.buttons_container,children:[q.jsx(Ko,{style:{background:"#C7B8EA"},children:"Створити кімнату"}),q.jsx(Ko,{style:{background:"#E9E9E9"},onClick:c,children:"Підʼєднатися до кімнати"})]}),q.jsxs(gO,{visible:t,setVisible:e,children:[q.jsx(A9,{children:"ID Кімнати",value:n,onChange:d=>{i(d.target.value)}}),q.jsx(Ko,{onClick:u,style:{background:"#C7B8EA",marginBottom:"2rem",marginTop:"1rem"},children:"Підʼєднатися"}),q.jsx(T9,{})]})]})},k9="_room_page_container_rx7as_1",x9="_back_icon_rx7as_9",b9="_users_list_container_rx7as_14",L9="_users_list_rx7as_14",N9="_user_rx7as_14",D9="_ready_point_rx7as_37",Io={room_page_container:k9,back_icon:x9,users_list_container:b9,users_list:L9,user:N9,ready_point:D9},O9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Ue.initializeApp(O9);const M9=()=>{var E;const{roomId:t}=Nv(),[e,n]=N.useState([]),[i,r]=N.useState([]),[s,a]=N.useState(!1),[u,c]=N.useState("Готовий");N.useState(null);const d=pf(),p=Ue.firestore();N.useEffect(()=>{Ue.auth().onAuthStateChanged(y=>{y&&r(y)})},[]),N.useEffect(()=>{g()},[]);const g=()=>{const I=p.collection("rooms").doc(t).onSnapshot(A=>{A.exists?n(A.data()):console.log("Документ не існує")});return()=>{I()}};N.useEffect(()=>{e.length!=0&&(w(),_())},[e]);const _=()=>{const y=e.users.every(z=>z.ready===!0),I=p.collection("rooms").doc(t);if(y){console.log("ALL READY");var A=[];e.users.map(z=>{A.push(z.id)});var D=A[Math.floor(Math.random()*A.length)];I.update({seeking:D});var O=10;setInterval(()=>{O!=-1&&y&&(c(O),O--)},1e3)}else I.update({seeking:""})},w=()=>{i.uid?e.users.some(I=>I.id===i.uid)?console.log("Є"):S():console.log("Не зареєстровані")},S=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(y=>{var I={latitude:y.coords.latitude,longitude:y.coords.longitude};const A={id:i.uid,location:I,ready:!1,color:"#20a7f5"};p.collection("rooms").doc(t).update({users:Ue.firestore.FieldValue.arrayUnion(A)})}):console.log("Геолока не надана")},P=()=>{const y=p.collection("rooms").doc(t);s?y.get().then(I=>{if(I.exists){const O=I.data().users.map(z=>z.id===i.uid?{...z,ready:!1}:z);y.update({users:O}),a(!1),c("Готовий")}}):s||y.get().then(I=>{if(I.exists){const O=I.data().users.map(z=>z.id===i.uid?{...z,ready:!0}:z);y.update({users:O}),a(!0),c("Не готовий")}})},k=()=>{d(-1)};return q.jsxs("div",{className:Io.room_page_container,children:[q.jsx("svg",{onClick:k,className:Io.back_icon,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:q.jsx("path",{d:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"})}),q.jsxs("div",{className:Io.users_list_container,children:[q.jsx("h3",{children:"Список гравців:"}),q.jsx("div",{className:Io.users_list,children:(E=e==null?void 0:e.users)==null?void 0:E.map(y=>q.jsxs("div",{className:Io.user,children:[q.jsx("div",{className:Io.ready_point,style:y.ready?{background:"#62FF48"}:{background:"#FD3A3A"}}),q.jsx("p",{style:e.seeking==y.id?{color:"red"}:{},children:y.id})]},y.id))})]}),q.jsx(Ko,{onClick:P,style:{background:"#C7B8EA"},children:u}),q.jsx("p",{children:"ID Кімнати:"}),q.jsx("div",{children:t}),q.jsx(Bg,{to:`/map/seeking/${t}`,children:"Seeking Map"}),q.jsx(Bg,{to:`/map/hiding/${t}`,children:"Hiding Map"}),q.jsx("p",{children:i.uid||i.id||"Немає"})]})};function sx(t,e){const n=N.useRef(e);N.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function V9(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const F9=1;function B9(t){return Object.freeze({__version:F9,map:t})}function ox(t,e){return Object.freeze({...t,...e})}const ax=N.createContext(null),lx=ax.Provider;function Cw(){const t=N.useContext(ax);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function ux(t){function e(n,i){const{instance:r,context:s}=t(n).current;return N.useImperativeHandle(i,()=>r),n.children==null?null:Xl.createElement(lx,{value:s},n.children)}return N.forwardRef(e)}function z9(t){function e(n,i){const[r,s]=N.useState(!1),{instance:a}=t(n,s).current;N.useImperativeHandle(i,()=>a),N.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?m1.createPortal(n.children,u):null}return N.forwardRef(e)}function U9(t){function e(n,i){const{instance:r}=t(n).current;return N.useImperativeHandle(i,()=>r),null}return N.forwardRef(e)}function kw(t,e){const n=N.useRef();N.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function up(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function $9(t,e){return function(i,r){const s=Cw(),a=t(up(i,s),s);return sx(s.map,i.attribution),kw(a.current,i.eventHandlers),e(a.current,s,i,r),a}}var L_={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Bb,function(n){var i="1.9.4";function r(o){var l,h,f,m;for(h=1,f=arguments.length;h<f;h++){m=arguments[h];for(l in m)o[l]=m[l]}return o}var s=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function a(o,l){var h=Array.prototype.slice;if(o.bind)return o.bind.apply(o,h.call(arguments,1));var f=h.call(arguments,2);return function(){return o.apply(l,f.length?f.concat(h.call(arguments)):arguments)}}var u=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function d(o,l,h){var f,m,v,T;return T=function(){f=!1,m&&(v.apply(h,m),m=!1)},v=function(){f?m=arguments:(o.apply(h,arguments),setTimeout(T,l),f=!0)},v}function p(o,l,h){var f=l[1],m=l[0],v=f-m;return o===f&&h?o:((o-m)%v+v)%v+m}function g(){return!1}function _(o,l){if(l===!1)return o;var h=Math.pow(10,l===void 0?6:l);return Math.round(o*h)/h}function w(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function S(o){return w(o).split(/\s+/)}function P(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var h in l)o.options[h]=l[h];return o.options}function k(o,l,h){var f=[];for(var m in o)f.push(encodeURIComponent(h?m.toUpperCase():m)+"="+encodeURIComponent(o[m]));return(!l||l.indexOf("?")===-1?"?":"&")+f.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function y(o,l){return o.replace(E,function(h,f){var m=l[f];if(m===void 0)throw new Error("No value provided for variable "+h);return typeof m=="function"&&(m=m(l)),m})}var I=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function A(o,l){for(var h=0;h<o.length;h++)if(o[h]===l)return h;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var z=0;function K(o){var l=+new Date,h=Math.max(0,16-(l-z));return z=l+h,window.setTimeout(o,h)}var de=window.requestAnimationFrame||O("RequestAnimationFrame")||K,ne=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function Se(o,l,h){if(h&&de===K)o.call(l);else return de.call(window,a(o,l))}function et(o){o&&ne.call(window,o)}var Ji={__proto__:null,extend:r,create:s,bind:a,get lastId(){return u},stamp:c,throttle:d,wrapNum:p,falseFn:g,formatNum:_,trim:w,splitWords:S,setOptions:P,getParamString:k,template:y,isArray:I,indexOf:A,emptyImageUrl:D,requestFn:de,cancelFn:ne,requestAnimFrame:Se,cancelAnimFrame:et};function gn(){}gn.extend=function(o){var l=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,f=s(h);f.constructor=l,l.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(l[m]=this[m]);return o.statics&&r(l,o.statics),o.includes&&(kc(o.includes),r.apply(null,[f].concat(o.includes))),r(f,o),delete f.statics,delete f.includes,f.options&&(f.options=h.options?s(h.options):{},r(f.options,o.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,T=f._initHooks.length;v<T;v++)f._initHooks[v].call(this)}},l},gn.include=function(o){var l=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},gn.mergeOptions=function(o){return r(this.prototype.options,o),this},gn.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),h=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function kc(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=I(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Rt={on:function(o,l,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],l);else{o=S(o);for(var m=0,v=o.length;m<v;m++)this._on(o[m],l,h)}return this},off:function(o,l,h){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var f in o)this._off(f,o[f],l);else{o=S(o);for(var m=arguments.length===1,v=0,T=o.length;v<T;v++)m?this._off(o[v]):this._off(o[v],l,h)}return this},_on:function(o,l,h,f){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,h)===!1){h===this&&(h=void 0);var m={fn:l,ctx:h};f&&(m.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(m)}},_off:function(o,l,h){var f,m,v;if(this._events&&(f=this._events[o],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,v=f.length;m<v;m++)f[m].fn=g;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var T=this._listens(o,l,h);if(T!==!1){var R=f[T];this._firingCount&&(R.fn=g,this._events[o]=f=f.slice()),f.splice(T,1)}}},fire:function(o,l,h){if(!this.listens(o,h))return this;var f=r({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var m=this._events[o];if(m){this._firingCount=this._firingCount+1||1;for(var v=0,T=m.length;v<T;v++){var R=m[v],x=R.fn;R.once&&this.off(o,x,R.ctx),x.call(R.ctx||this,f)}this._firingCount--}}return h&&this._propagateEvent(f),this},listens:function(o,l,h,f){typeof o!="string"&&console.warn('"string" type argument expected');var m=l;typeof l!="function"&&(f=!!l,m=void 0,h=void 0);var v=this._events&&this._events[o];if(v&&v.length&&this._listens(o,m,h)!==!1)return!0;if(f){for(var T in this._eventParents)if(this._eventParents[T].listens(o,l,h,f))return!0}return!1},_listens:function(o,l,h){if(!this._events)return!1;var f=this._events[o]||[];if(!l)return!!f.length;h===this&&(h=void 0);for(var m=0,v=f.length;m<v;m++)if(f[m].fn===l&&f[m].ctx===h)return m;return!1},once:function(o,l,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],l,!0);else{o=S(o);for(var m=0,v=o.length;m<v;m++)this._on(o[m],l,h,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};Rt.addEventListener=Rt.on,Rt.removeEventListener=Rt.clearAllEventListeners=Rt.off,Rt.addOneTimeEventListener=Rt.once,Rt.fireEvent=Rt.fire,Rt.hasEventListeners=Rt.listens;var Ti=gn.extend(Rt);function M(o,l,h){this.x=h?Math.round(o):o,this.y=h?Math.round(l):l}var oe=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(o){return this.clone()._add(j(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(j(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new M(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new M(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(o){o=j(o);var l=o.x-this.x,h=o.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(o){return o=j(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=j(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function j(o,l,h){return o instanceof M?o:I(o)?new M(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new M(o.x,o.y):new M(o,l,h)}function re(o,l){if(o)for(var h=l?[o,l]:o,f=0,m=h.length;f<m;f++)this.extend(h[f])}re.prototype={extend:function(o){var l,h;if(!o)return this;if(o instanceof M||typeof o[0]=="number"||"x"in o)l=h=j(o);else if(o=we(o),l=o.min,h=o.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(o){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,h;return typeof o[0]=="number"||o instanceof M?o=j(o):o=we(o),o instanceof re?(l=o.min,h=o.max):l=h=o,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(o){o=we(o);var l=this.min,h=this.max,f=o.min,m=o.max,v=m.x>=l.x&&f.x<=h.x,T=m.y>=l.y&&f.y<=h.y;return v&&T},overlaps:function(o){o=we(o);var l=this.min,h=this.max,f=o.min,m=o.max,v=m.x>l.x&&f.x<h.x,T=m.y>l.y&&f.y<h.y;return v&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,h=this.max,f=Math.abs(l.x-h.x)*o,m=Math.abs(l.y-h.y)*o;return we(j(l.x-f,l.y-m),j(h.x+f,h.y+m))},equals:function(o){return o?(o=we(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function we(o,l){return!o||o instanceof re?o:new re(o,l)}function ft(o,l){if(o)for(var h=l?[o,l]:o,f=0,m=h.length;f<m;f++)this.extend(h[f])}ft.prototype={extend:function(o){var l=this._southWest,h=this._northEast,f,m;if(o instanceof Te)f=o,m=o;else if(o instanceof ft){if(f=o._southWest,m=o._northEast,!f||!m)return this}else return o?this.extend(le(o)||ke(o)):this;return!l&&!h?(this._southWest=new Te(f.lat,f.lng),this._northEast=new Te(m.lat,m.lng)):(l.lat=Math.min(f.lat,l.lat),l.lng=Math.min(f.lng,l.lng),h.lat=Math.max(m.lat,h.lat),h.lng=Math.max(m.lng,h.lng)),this},pad:function(o){var l=this._southWest,h=this._northEast,f=Math.abs(l.lat-h.lat)*o,m=Math.abs(l.lng-h.lng)*o;return new ft(new Te(l.lat-f,l.lng-m),new Te(h.lat+f,h.lng+m))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Te||"lat"in o?o=le(o):o=ke(o);var l=this._southWest,h=this._northEast,f,m;return o instanceof ft?(f=o.getSouthWest(),m=o.getNorthEast()):f=m=o,f.lat>=l.lat&&m.lat<=h.lat&&f.lng>=l.lng&&m.lng<=h.lng},intersects:function(o){o=ke(o);var l=this._southWest,h=this._northEast,f=o.getSouthWest(),m=o.getNorthEast(),v=m.lat>=l.lat&&f.lat<=h.lat,T=m.lng>=l.lng&&f.lng<=h.lng;return v&&T},overlaps:function(o){o=ke(o);var l=this._southWest,h=this._northEast,f=o.getSouthWest(),m=o.getNorthEast(),v=m.lat>l.lat&&f.lat<h.lat,T=m.lng>l.lng&&f.lng<h.lng;return v&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=ke(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(o,l){return o instanceof ft?o:new ft(o,l)}function Te(o,l,h){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,h!==void 0&&(this.alt=+h)}Te.prototype={equals:function(o,l){if(!o)return!1;o=le(o);var h=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return h<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+_(this.lat,o)+", "+_(this.lng,o)+")"},distanceTo:function(o){return Xi.distance(this,le(o))},wrap:function(){return Xi.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,h=l/Math.cos(Math.PI/180*this.lat);return ke([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function le(o,l,h){return o instanceof Te?o:I(o)&&typeof o[0]!="object"?o.length===3?new Te(o[0],o[1],o[2]):o.length===2?new Te(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Te(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new Te(o,l,h)}var rn={latLngToPoint:function(o,l){var h=this.projection.project(o),f=this.scale(l);return this.transformation._transform(h,f)},pointToLatLng:function(o,l){var h=this.scale(l),f=this.transformation.untransform(o,h);return this.projection.unproject(f)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(o),f=this.transformation.transform(l.min,h),m=this.transformation.transform(l.max,h);return new re(f,m)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,h=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,f=o.alt;return new Te(h,l,f)},wrapLatLngBounds:function(o){var l=o.getCenter(),h=this.wrapLatLng(l),f=l.lat-h.lat,m=l.lng-h.lng;if(f===0&&m===0)return o;var v=o.getSouthWest(),T=o.getNorthEast(),R=new Te(v.lat-f,v.lng-m),x=new Te(T.lat-f,T.lng-m);return new ft(R,x)}},Xi=r({},rn,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var h=Math.PI/180,f=o.lat*h,m=l.lat*h,v=Math.sin((l.lat-o.lat)*h/2),T=Math.sin((l.lng-o.lng)*h/2),R=v*v+Math.cos(f)*Math.cos(m)*T*T,x=2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R));return this.R*x}}),xw=6378137,dp={R:xw,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,h=this.MAX_LATITUDE,f=Math.max(Math.min(h,o.lat),-h),m=Math.sin(f*l);return new M(this.R*o.lng*l,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(o){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=xw*Math.PI;return new re([-o,-o],[o,o])}()};function fp(o,l,h,f){if(I(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=h,this._d=f}fp.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new M((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function qa(o,l,h,f){return new fp(o,l,h,f)}var pp=r({},Xi,{code:"EPSG:3857",projection:dp,transformation:function(){var o=.5/(Math.PI*dp.R);return qa(o,.5,-o,.5)}()}),px=r({},pp,{code:"EPSG:900913"});function bw(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Lw(o,l){var h="",f,m,v,T,R,x;for(f=0,v=o.length;f<v;f++){for(R=o[f],m=0,T=R.length;m<T;m++)x=R[m],h+=(m?"L":"M")+x.x+" "+x.y;h+=l?ee.svg?"z":"x":""}return h||"M0 0"}var mp=document.documentElement.style,xc="ActiveXObject"in window,mx=xc&&!document.addEventListener,Nw="msLaunchUri"in navigator&&!("documentMode"in document),gp=Jn("webkit"),Dw=Jn("android"),Ow=Jn("android 2")||Jn("android 3"),gx=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_x=Dw&&Jn("Google")&&gx<537&&!("AudioNode"in window),_p=!!window.opera,Mw=!Nw&&Jn("chrome"),Vw=Jn("gecko")&&!gp&&!_p&&!xc,vx=!Mw&&Jn("safari"),Fw=Jn("phantom"),Bw="OTransition"in mp,yx=navigator.platform.indexOf("Win")===0,zw=xc&&"transition"in mp,vp="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ow,Uw="MozPerspective"in mp,wx=!window.L_DISABLE_3D&&(zw||vp||Uw)&&!Bw&&!Fw,Wa=typeof orientation<"u"||Jn("mobile"),Ix=Wa&&gp,Ex=Wa&&vp,$w=!window.PointerEvent&&window.MSPointerEvent,jw=!!(window.PointerEvent||$w),qw="ontouchstart"in window||!!window.TouchEvent,Tx=!window.L_NO_TOUCH&&(qw||jw),Px=Wa&&_p,Sx=Wa&&Vw,Ax=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Rx=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return o}(),Cx=function(){return!!document.createElement("canvas").getContext}(),yp=!!(document.createElementNS&&bw("svg").createSVGRect),kx=!!yp&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),xx=!yp&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),bx=navigator.platform.indexOf("Mac")===0,Lx=navigator.platform.indexOf("Linux")===0;function Jn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ee={ie:xc,ielt9:mx,edge:Nw,webkit:gp,android:Dw,android23:Ow,androidStock:_x,opera:_p,chrome:Mw,gecko:Vw,safari:vx,phantom:Fw,opera12:Bw,win:yx,ie3d:zw,webkit3d:vp,gecko3d:Uw,any3d:wx,mobile:Wa,mobileWebkit:Ix,mobileWebkit3d:Ex,msPointer:$w,pointer:jw,touch:Tx,touchNative:qw,mobileOpera:Px,mobileGecko:Sx,retina:Ax,passiveEvents:Rx,canvas:Cx,svg:yp,vml:xx,inlineSvg:kx,mac:bx,linux:Lx},Ww=ee.msPointer?"MSPointerDown":"pointerdown",Hw=ee.msPointer?"MSPointerMove":"pointermove",Gw=ee.msPointer?"MSPointerUp":"pointerup",Kw=ee.msPointer?"MSPointerCancel":"pointercancel",wp={touchstart:Ww,touchmove:Hw,touchend:Gw,touchcancel:Kw},Zw={touchstart:Fx,touchmove:bc,touchend:bc,touchcancel:bc},ro={},Qw=!1;function Nx(o,l,h){return l==="touchstart"&&Vx(),Zw[l]?(h=Zw[l].bind(this,h),o.addEventListener(wp[l],h,!1),h):(console.warn("wrong event specified:",l),g)}function Dx(o,l,h){if(!wp[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(wp[l],h,!1)}function Ox(o){ro[o.pointerId]=o}function Mx(o){ro[o.pointerId]&&(ro[o.pointerId]=o)}function Yw(o){delete ro[o.pointerId]}function Vx(){Qw||(document.addEventListener(Ww,Ox,!0),document.addEventListener(Hw,Mx,!0),document.addEventListener(Gw,Yw,!0),document.addEventListener(Kw,Yw,!0),Qw=!0)}function bc(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in ro)l.touches.push(ro[h]);l.changedTouches=[l],o(l)}}function Fx(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ct(l),bc(o,l)}function Bx(o){var l={},h,f;for(f in o)h=o[f],l[f]=h&&h.bind?h.bind(o):h;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var zx=200;function Ux(o,l){o.addEventListener("dblclick",l);var h=0,f;function m(v){if(v.detail!==1){f=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var T=nI(v);if(!(T.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!T.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var R=Date.now();R-h<=zx?(f++,f===2&&l(Bx(v))):f=1,h=R}}}return o.addEventListener("click",m),{dblclick:l,simDblclick:m}}function $x(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var Ip=Dc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ha=Dc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jw=Ha==="webkitTransition"||Ha==="OTransition"?Ha+"End":"transitionend";function Xw(o){return typeof o=="string"?document.getElementById(o):o}function Ga(o,l){var h=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(o,null);h=f?f[l]:null}return h==="auto"?null:h}function Pe(o,l,h){var f=document.createElement(o);return f.className=l||"",h&&h.appendChild(f),f}function je(o){var l=o.parentNode;l&&l.removeChild(o)}function Lc(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function so(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function oo(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function Ep(o,l){if(o.classList!==void 0)return o.classList.contains(l);var h=Nc(o);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function he(o,l){if(o.classList!==void 0)for(var h=S(l),f=0,m=h.length;f<m;f++)o.classList.add(h[f]);else if(!Ep(o,l)){var v=Nc(o);Tp(o,(v?v+" ":"")+l)}}function tt(o,l){o.classList!==void 0?o.classList.remove(l):Tp(o,w((" "+Nc(o)+" ").replace(" "+l+" "," ")))}function Tp(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function Nc(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Rn(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&jx(o,l)}function jx(o,l){var h=!1,f="DXImageTransform.Microsoft.Alpha";try{h=o.filters.item(f)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):o.style.filter+=" progid:"+f+"(opacity="+l+")"}function Dc(o){for(var l=document.documentElement.style,h=0;h<o.length;h++)if(o[h]in l)return o[h];return!1}function ts(o,l,h){var f=l||new M(0,0);o.style[Ip]=(ee.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(h?" scale("+h+")":"")}function ot(o,l){o._leaflet_pos=l,ee.any3d?ts(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function ns(o){return o._leaflet_pos||new M(0,0)}var Ka,Za,Pp;if("onselectstart"in document)Ka=function(){ue(window,"selectstart",Ct)},Za=function(){be(window,"selectstart",Ct)};else{var Qa=Dc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ka=function(){if(Qa){var o=document.documentElement.style;Pp=o[Qa],o[Qa]="none"}},Za=function(){Qa&&(document.documentElement.style[Qa]=Pp,Pp=void 0)}}function Sp(){ue(window,"dragstart",Ct)}function Ap(){be(window,"dragstart",Ct)}var Oc,Rp;function Cp(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Mc(),Oc=o,Rp=o.style.outlineStyle,o.style.outlineStyle="none",ue(window,"keydown",Mc))}function Mc(){Oc&&(Oc.style.outlineStyle=Rp,Oc=void 0,Rp=void 0,be(window,"keydown",Mc))}function eI(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function kp(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var qx={__proto__:null,TRANSFORM:Ip,TRANSITION:Ha,TRANSITION_END:Jw,get:Xw,getStyle:Ga,create:Pe,remove:je,empty:Lc,toFront:so,toBack:oo,hasClass:Ep,addClass:he,removeClass:tt,setClass:Tp,getClass:Nc,setOpacity:Rn,testProp:Dc,setTransform:ts,setPosition:ot,getPosition:ns,get disableTextSelection(){return Ka},get enableTextSelection(){return Za},disableImageDrag:Sp,enableImageDrag:Ap,preventOutline:Cp,restoreOutline:Mc,getSizedParentNode:eI,getScale:kp};function ue(o,l,h,f){if(l&&typeof l=="object")for(var m in l)bp(o,m,l[m],h);else{l=S(l);for(var v=0,T=l.length;v<T;v++)bp(o,l[v],h,f)}return this}var Xn="_leaflet_events";function be(o,l,h,f){if(arguments.length===1)tI(o),delete o[Xn];else if(l&&typeof l=="object")for(var m in l)Lp(o,m,l[m],h);else if(l=S(l),arguments.length===2)tI(o,function(R){return A(l,R)!==-1});else for(var v=0,T=l.length;v<T;v++)Lp(o,l[v],h,f);return this}function tI(o,l){for(var h in o[Xn]){var f=h.split(/\d/)[0];(!l||l(f))&&Lp(o,f,null,null,h)}}var xp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bp(o,l,h,f){var m=l+c(h)+(f?"_"+c(f):"");if(o[Xn]&&o[Xn][m])return this;var v=function(R){return h.call(f||o,R||window.event)},T=v;!ee.touchNative&&ee.pointer&&l.indexOf("touch")===0?v=Nx(o,l,v):ee.touch&&l==="dblclick"?v=Ux(o,v):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(xp[l]||l,v,ee.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(v=function(R){R=R||window.event,Dp(o,R)&&T(R)},o.addEventListener(xp[l],v,!1)):o.addEventListener(l,T,!1):o.attachEvent("on"+l,v),o[Xn]=o[Xn]||{},o[Xn][m]=v}function Lp(o,l,h,f,m){m=m||l+c(h)+(f?"_"+c(f):"");var v=o[Xn]&&o[Xn][m];if(!v)return this;!ee.touchNative&&ee.pointer&&l.indexOf("touch")===0?Dx(o,l,v):ee.touch&&l==="dblclick"?$x(o,v):"removeEventListener"in o?o.removeEventListener(xp[l]||l,v,!1):o.detachEvent("on"+l,v),o[Xn][m]=null}function is(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Np(o){return bp(o,"wheel",is),this}function Ya(o){return ue(o,"mousedown touchstart dblclick contextmenu",is),o._leaflet_disable_click=!0,this}function Ct(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function rs(o){return Ct(o),is(o),this}function nI(o){if(o.composedPath)return o.composedPath();for(var l=[],h=o.target;h;)l.push(h),h=h.parentNode;return l}function iI(o,l){if(!l)return new M(o.clientX,o.clientY);var h=kp(l),f=h.boundingClientRect;return new M((o.clientX-f.left)/h.x-l.clientLeft,(o.clientY-f.top)/h.y-l.clientTop)}var Wx=ee.linux&&ee.chrome?window.devicePixelRatio:ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function rI(o){return ee.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Wx:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Dp(o,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==o;)h=h.parentNode}catch{return!1}return h!==o}var Hx={__proto__:null,on:ue,off:be,stopPropagation:is,disableScrollPropagation:Np,disableClickPropagation:Ya,preventDefault:Ct,stop:rs,getPropagationPath:nI,getMousePosition:iI,getWheelDelta:rI,isExternalTarget:Dp,addListener:ue,removeListener:be},sI=Ti.extend({run:function(o,l,h,f){this.stop(),this._el=o,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=ns(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Se(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var h=this._startPos.add(this._offset.multiplyBy(o));l&&h._round(),ot(this._el,h),this.fire("step")},_complete:function(){et(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),_e=Ti.extend({options:{crs:pp,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=P(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(le(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ha&&ee.any3d&&!ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ue(this._proxy,Jw,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(le(o),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=r({animate:h.animate},h.zoom),h.pan=r({animate:h.animate,duration:h.duration},h.pan));var f=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,h.zoom):this._tryAnimatedPan(o,h.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,h){var f=this.getZoomScale(l),m=this.getSize().divideBy(2),v=o instanceof M?o:this.latLngToContainerPoint(o),T=v.subtract(m).multiplyBy(1-1/f),R=this.containerPointToLatLng(m.add(T));return this.setView(R,l,{zoom:h})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():ke(o);var h=j(l.paddingTopLeft||l.padding||[0,0]),f=j(l.paddingBottomRight||l.padding||[0,0]),m=this.getBoundsZoom(o,!1,h.add(f));if(m=typeof l.maxZoom=="number"?Math.min(l.maxZoom,m):m,m===1/0)return{center:o.getCenter(),zoom:m};var v=f.subtract(h).divideBy(2),T=this.project(o.getSouthWest(),m),R=this.project(o.getNorthEast(),m),x=this.unproject(T.add(R).divideBy(2).add(v),m);return{center:x,zoom:m}},fitBounds:function(o,l){if(o=ke(o),!o.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(o,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=j(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new sI,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){he(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,h){if(h=h||{},h.animate===!1||!ee.any3d)return this.setView(o,l,h);this._stop();var f=this.project(this.getCenter()),m=this.project(o),v=this.getSize(),T=this._zoom;o=le(o),l=l===void 0?T:l;var R=Math.max(v.x,v.y),x=R*this.getZoomScale(T,l),V=m.distanceTo(f)||1,Z=1.42,ie=Z*Z;function fe(at){var Kc=at?-1:1,Db=at?x:R,Ob=x*x-R*R+Kc*ie*ie*V*V,Mb=2*Db*ie*V,Wp=Ob/Mb,BI=Math.sqrt(Wp*Wp+1)-Wp,Vb=BI<1e-9?-18:Math.log(BI);return Vb}function Wt(at){return(Math.exp(at)-Math.exp(-at))/2}function _t(at){return(Math.exp(at)+Math.exp(-at))/2}function kn(at){return Wt(at)/_t(at)}var sn=fe(0);function fo(at){return R*(_t(sn)/_t(sn+Z*at))}function xb(at){return R*(_t(sn)*kn(sn+Z*at)-Wt(sn))/ie}function bb(at){return 1-Math.pow(1-at,1.5)}var Lb=Date.now(),VI=(fe(1)-sn)/Z,Nb=h.duration?1e3*h.duration:1e3*VI*.8;function FI(){var at=(Date.now()-Lb)/Nb,Kc=bb(at)*VI;at<=1?(this._flyToFrame=Se(FI,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(xb(Kc)/V)),T),this.getScaleZoom(R/fo(Kc),T),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),FI.call(this),this},flyToBounds:function(o,l){var h=this._getBoundsCenterZoom(o,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(o){return o=ke(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var h=this.getCenter(),f=this._limitCenter(h,this._zoom,ke(o));return h.equals(f)||this.panTo(f,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var h=j(l.paddingTopLeft||l.padding||[0,0]),f=j(l.paddingBottomRight||l.padding||[0,0]),m=this.project(this.getCenter()),v=this.project(o),T=this.getPixelBounds(),R=we([T.min.add(h),T.max.subtract(f)]),x=R.getSize();if(!R.contains(v)){this._enforcingBounds=!0;var V=v.subtract(R.getCenter()),Z=R.extend(v).getSize().subtract(x);m.x+=V.x<0?-Z.x:Z.x,m.y+=V.y<0?-Z.y:Z.y,this.panTo(this.unproject(m),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),f=l.divideBy(2).round(),m=h.divideBy(2).round(),v=f.subtract(m);return!v.x&&!v.y?this:(o.animate&&o.pan?this.panBy(v):(o.pan&&this._rawPanBy(v),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,o):navigator.geolocation.getCurrentPosition(l,h,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,h=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,h=o.coords.longitude,f=new Te(l,h),m=f.toBounds(o.coords.accuracy*2),v=this._locateOptions;if(v.setView){var T=this.getBoundsZoom(m);this.setView(f,v.maxZoom?Math.min(T,v.maxZoom):T)}var R={latlng:f,bounds:m,timestamp:o.timestamp};for(var x in o.coords)typeof o.coords[x]=="number"&&(R[x]=o.coords[x]);this.fire("locationfound",R)}},addHandler:function(o,l){if(!l)return this;var h=this[o]=new l(this);return this._handlers.push(h),this.options[o]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(et(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)je(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var h="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),f=Pe("div",h,l||this._mapPane);return o&&(this._panes[o]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),h=this.unproject(o.getTopRight());return new ft(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,h){o=ke(o),h=j(h||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),v=this.getMaxZoom(),T=o.getNorthWest(),R=o.getSouthEast(),x=this.getSize().subtract(h),V=we(this.project(R,f),this.project(T,f)).getSize(),Z=ee.any3d?this.options.zoomSnap:1,ie=x.x/V.x,fe=x.y/V.y,Wt=l?Math.max(ie,fe):Math.min(ie,fe);return f=this.getScaleZoom(Wt,f),Z&&(f=Math.round(f/(Z/100))*(Z/100),f=l?Math.ceil(f/Z)*Z:Math.floor(f/Z)*Z),Math.max(m,Math.min(v,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var h=this._getTopLeftPoint(o,l);return new re(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(o)/h.scale(l)},getScaleZoom:function(o,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var f=h.zoom(o*h.scale(l));return isNaN(f)?1/0:f},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(le(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(j(o),l)},layerPointToLatLng:function(o){var l=j(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(le(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(le(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(ke(o))},distance:function(o,l){return this.options.crs.distance(le(o),le(l))},containerPointToLayerPoint:function(o){return j(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return j(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(j(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(o)))},mouseEventToContainerPoint:function(o){return iI(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=Xw(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ue(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ee.any3d,he(o,"leaflet-container"+(ee.touch?" leaflet-touch":"")+(ee.retina?" leaflet-retina":"")+(ee.ielt9?" leaflet-oldie":"")+(ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ga(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ot(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(o.markerPane,"leaflet-zoom-hide"),he(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,h){ot(this._mapPane,new M(0,0));var f=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var m=this._zoom!==l;this._moveStart(m,h)._move(o,l)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,h,f){l===void 0&&(l=this._zoom);var m=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),f?h&&h.pinch&&this.fire("zoom",h):((m||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return et(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){ot(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var l=o?be:ue;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ee.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){et(this._resizeRequest),this._resizeRequest=Se(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var h=[],f,m=l==="mouseout"||l==="mouseover",v=o.target||o.srcElement,T=!1;v;){if(f=this._targets[c(v)],f&&(l==="click"||l==="preclick")&&this._draggableMoved(f)){T=!0;break}if(f&&f.listens(l,!0)&&(m&&!Dp(v,o)||(h.push(f),m))||v===this._container)break;v=v.parentNode}return!h.length&&!T&&!m&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var h=o.type;h==="mousedown"&&Cp(l),this._fireDOMEvent(o,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,h){if(o.type==="click"){var f=r({},o);f.type="preclick",this._fireDOMEvent(f,f.type,h)}var m=this._findEventTargets(o,l);if(h){for(var v=[],T=0;T<h.length;T++)h[T].listens(l,!0)&&v.push(h[T]);m=v.concat(m)}if(m.length){l==="contextmenu"&&Ct(o);var R=m[0],x={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var V=R.getLatLng&&(!R._radius||R._radius<=10);x.containerPoint=V?this.latLngToContainerPoint(R.getLatLng()):this.mouseEventToContainerPoint(o),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=V?R.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(T=0;T<m.length;T++)if(m[T].fire(l,x,!0),x.originalEvent._stopped||m[T].options.bubblingMouseEvents===!1&&A(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return ns(this._mapPane)||new M(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var h=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var h=this.getSize()._divideBy(2);return this.project(o,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,h){var f=this._getNewPixelOrigin(h,l);return this.project(o,l)._subtract(f)},_latLngBoundsToNewLayerBounds:function(o,l,h){var f=this._getNewPixelOrigin(h,l);return we([this.project(o.getSouthWest(),l)._subtract(f),this.project(o.getNorthWest(),l)._subtract(f),this.project(o.getSouthEast(),l)._subtract(f),this.project(o.getNorthEast(),l)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,h){if(!h)return o;var f=this.project(o,l),m=this.getSize().divideBy(2),v=new re(f.subtract(m),f.add(m)),T=this._getBoundsOffset(v,h,l);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?o:this.unproject(f.add(T),l)},_limitOffset:function(o,l){if(!l)return o;var h=this.getPixelBounds(),f=new re(h.min.add(o),h.max.add(o));return o.add(this._getBoundsOffset(f,l))},_getBoundsOffset:function(o,l,h){var f=we(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),m=f.min.subtract(o.min),v=f.max.subtract(o.max),T=this._rebound(m.x,-v.x),R=this._rebound(m.y,-v.y);return new M(T,R)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),h=this.getMaxZoom(),f=ee.any3d?this.options.zoomSnap:1;return f&&(o=Math.round(o/f)*f),Math.max(l,Math.min(h,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var h=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var o=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var h=Ip,f=this._proxy.style[h];ts(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),f===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();ts(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(l),m=this._getCenterOffset(o)._divideBy(1-1/f);return h.animate!==!0&&!this.getSize().contains(m)?!1:(Se(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,h,f){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Gx(o,l){return new _e(o,l)}var Bn=gn.extend({options:{position:"topright"},initialize:function(o){P(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),h=this.getPosition(),f=o._controlCorners[h];return he(l,"leaflet-control"),h.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Ja=function(o){return new Bn(o)};_e.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",h=this._controlContainer=Pe("div",l+"control-container",this._container);function f(m,v){var T=l+m+" "+l+v;o[m+v]=Pe("div",T,h)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)je(this._controlCorners[o]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var oI=Bn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,h,f){return h<f?-1:f<h?1:0}},initialize:function(o,l,h){P(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in o)this._addLayer(o[f],f);for(f in l)this._addLayer(l[f],f,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Bn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=Pe("div",o),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ya(l),Np(l);var f=this._section=Pe("section",o+"-list");h&&(this._map.on("click",this.collapse,this),ue(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Pe("a",o+"-toggle",l);m.href="#",m.title="Layers",m.setAttribute("role","button"),ue(m,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){Ct(v),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Pe("div",o+"-base",f),this._separator=Pe("div",o+"-separator",f),this._overlaysList=Pe("div",o+"-overlays",f),l.appendChild(f)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,h){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Lc(this._baseLayersList),Lc(this._overlaysList),this._layerControlInputs=[];var o,l,h,f,m=0;for(h=0;h<this._layers.length;h++)f=this._layers[h],this._addItem(f),l=l||f.overlay,o=o||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(o=o&&m>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(c(o.target)),h=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(o,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=h,f.firstChild},_addItem:function(o){var l=document.createElement("label"),h=this._map.hasLayer(o.layer),f;o.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=h):f=this._createRadioElement("leaflet-base-layers_"+c(this),h),this._layerControlInputs.push(f),f.layerId=c(o.layer),ue(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+o.name;var v=document.createElement("span");l.appendChild(v),v.appendChild(f),v.appendChild(m);var T=o.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,h,f=[],m=[];this._handlingClick=!0;for(var v=o.length-1;v>=0;v--)l=o[v],h=this._getLayer(l.layerId).layer,l.checked?f.push(h):l.checked||m.push(h);for(v=0;v<m.length;v++)this._map.hasLayer(m[v])&&this._map.removeLayer(m[v]);for(v=0;v<f.length;v++)this._map.hasLayer(f[v])||this._map.addLayer(f[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,h,f=this._map.getZoom(),m=o.length-1;m>=0;m--)l=o[m],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&f<h.options.minZoom||h.options.maxZoom!==void 0&&f>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ue(o,"click",Ct),this.expand();var l=this;setTimeout(function(){be(o,"click",Ct),l._preventClick=!1})}}),Kx=function(o,l,h){return new oI(o,l,h)},Op=Bn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",h=Pe("div",l+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,h,f,m){var v=Pe("a",h,f);return v.innerHTML=o,v.href="#",v.title=l,v.setAttribute("role","button"),v.setAttribute("aria-label",l),Ya(v),ue(v,"click",rs),ue(v,"click",m,this),ue(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";tt(this._zoomInButton,l),tt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(he(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(he(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Op,this.addControl(this.zoomControl))});var Zx=function(o){return new Op(o)},aI=Bn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",h=Pe("div",l),f=this.options;return this._addScales(f,l+"-line",h),o.on(f.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),h},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,h){o.metric&&(this._mScale=Pe("div",l,h)),o.imperial&&(this._iScale=Pe("div",l,h))},_update:function(){var o=this._map,l=o.getSize().y/2,h=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/o)},_updateImperial:function(o){var l=o*3.2808399,h,f,m;l>5280?(h=l/5280,f=this._getRoundNum(h),this._updateScale(this._iScale,f+" mi",f/h)):(m=this._getRoundNum(l),this._updateScale(this._iScale,m+" ft",m/l))},_updateScale:function(o,l,h){o.style.width=Math.round(this.options.maxWidth*h)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),h=o/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),Qx=function(o){return new aI(o)},Yx='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Mp=Bn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ee.inlineSvg?Yx+" ":"")+"Leaflet</a>"},initialize:function(o){P(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Ya(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),o.length&&h.push(o.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new Mp().addTo(this)});var Jx=function(o){return new Mp(o)};Bn.Layers=oI,Bn.Zoom=Op,Bn.Scale=aI,Bn.Attribution=Mp,Ja.layers=Kx,Ja.zoom=Zx,Ja.scale=Qx,Ja.attribution=Jx;var ei=gn.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ei.addTo=function(o,l){return o.addHandler(l,this),this};var Xx={Events:Rt},lI=ee.touch?"touchstart mousedown":"mousedown",er=Ti.extend({options:{clickTolerance:3},initialize:function(o,l,h,f){P(this,f),this._element=o,this._dragStartTarget=l||o,this._preventOutline=h},enable:function(){this._enabled||(ue(this._dragStartTarget,lI,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(er._dragging===this&&this.finishDrag(!0),be(this._dragStartTarget,lI,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Ep(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){er._dragging===this&&this.finishDrag();return}if(!(er._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(er._dragging=this,this._preventOutline&&Cp(this._element),Sp(),Ka(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,h=eI(this._element);this._startPoint=new M(l.clientX,l.clientY),this._startPos=ns(this._element),this._parentScale=kp(h);var f=o.type==="mousedown";ue(document,f?"mousemove":"touchmove",this._onMove,this),ue(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,h=new M(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Ct(o),this._moved||(this.fire("dragstart"),this._moved=!0,he(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),ot(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),be(document,"mousemove touchmove",this._onMove,this),be(document,"mouseup touchend touchcancel",this._onUp,this),Ap(),Za();var l=this._moved&&this._moving;this._moving=!1,er._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function uI(o,l,h){var f,m=[1,4,2,8],v,T,R,x,V,Z,ie,fe;for(v=0,Z=o.length;v<Z;v++)o[v]._code=ss(o[v],l);for(R=0;R<4;R++){for(ie=m[R],f=[],v=0,Z=o.length,T=Z-1;v<Z;T=v++)x=o[v],V=o[T],x._code&ie?V._code&ie||(fe=Vc(V,x,ie,l,h),fe._code=ss(fe,l),f.push(fe)):(V._code&ie&&(fe=Vc(V,x,ie,l,h),fe._code=ss(fe,l),f.push(fe)),f.push(x));o=f}return o}function cI(o,l){var h,f,m,v,T,R,x,V,Z;if(!o||o.length===0)throw new Error("latlngs not passed");Cn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ie=le([0,0]),fe=ke(o),Wt=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Wt<1700&&(ie=Vp(o));var _t=o.length,kn=[];for(h=0;h<_t;h++){var sn=le(o[h]);kn.push(l.project(le([sn.lat-ie.lat,sn.lng-ie.lng])))}for(R=x=V=0,h=0,f=_t-1;h<_t;f=h++)m=kn[h],v=kn[f],T=m.y*v.x-v.y*m.x,x+=(m.x+v.x)*T,V+=(m.y+v.y)*T,R+=T*3;R===0?Z=kn[0]:Z=[x/R,V/R];var fo=l.unproject(j(Z));return le([fo.lat+ie.lat,fo.lng+ie.lng])}function Vp(o){for(var l=0,h=0,f=0,m=0;m<o.length;m++){var v=le(o[m]);l+=v.lat,h+=v.lng,f++}return le([l/f,h/f])}var eb={__proto__:null,clipPolygon:uI,polygonCenter:cI,centroid:Vp};function hI(o,l){if(!l||!o.length)return o.slice();var h=l*l;return o=ib(o,h),o=nb(o,h),o}function dI(o,l,h){return Math.sqrt(Xa(o,l,h,!0))}function tb(o,l,h){return Xa(o,l,h)}function nb(o,l){var h=o.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,m=new f(h);m[0]=m[h-1]=1,Fp(o,m,l,0,h-1);var v,T=[];for(v=0;v<h;v++)m[v]&&T.push(o[v]);return T}function Fp(o,l,h,f,m){var v=0,T,R,x;for(R=f+1;R<=m-1;R++)x=Xa(o[R],o[f],o[m],!0),x>v&&(T=R,v=x);v>h&&(l[T]=1,Fp(o,l,h,f,T),Fp(o,l,h,T,m))}function ib(o,l){for(var h=[o[0]],f=1,m=0,v=o.length;f<v;f++)rb(o[f],o[m])>l&&(h.push(o[f]),m=f);return m<v-1&&h.push(o[v-1]),h}var fI;function pI(o,l,h,f,m){var v=f?fI:ss(o,h),T=ss(l,h),R,x,V;for(fI=T;;){if(!(v|T))return[o,l];if(v&T)return!1;R=v||T,x=Vc(o,l,R,h,m),V=ss(x,h),R===v?(o=x,v=V):(l=x,T=V)}}function Vc(o,l,h,f,m){var v=l.x-o.x,T=l.y-o.y,R=f.min,x=f.max,V,Z;return h&8?(V=o.x+v*(x.y-o.y)/T,Z=x.y):h&4?(V=o.x+v*(R.y-o.y)/T,Z=R.y):h&2?(V=x.x,Z=o.y+T*(x.x-o.x)/v):h&1&&(V=R.x,Z=o.y+T*(R.x-o.x)/v),new M(V,Z,m)}function ss(o,l){var h=0;return o.x<l.min.x?h|=1:o.x>l.max.x&&(h|=2),o.y<l.min.y?h|=4:o.y>l.max.y&&(h|=8),h}function rb(o,l){var h=l.x-o.x,f=l.y-o.y;return h*h+f*f}function Xa(o,l,h,f){var m=l.x,v=l.y,T=h.x-m,R=h.y-v,x=T*T+R*R,V;return x>0&&(V=((o.x-m)*T+(o.y-v)*R)/x,V>1?(m=h.x,v=h.y):V>0&&(m+=T*V,v+=R*V)),T=o.x-m,R=o.y-v,f?T*T+R*R:new M(m,v)}function Cn(o){return!I(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function mI(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cn(o)}function gI(o,l){var h,f,m,v,T,R,x,V;if(!o||o.length===0)throw new Error("latlngs not passed");Cn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Z=le([0,0]),ie=ke(o),fe=ie.getNorthWest().distanceTo(ie.getSouthWest())*ie.getNorthEast().distanceTo(ie.getNorthWest());fe<1700&&(Z=Vp(o));var Wt=o.length,_t=[];for(h=0;h<Wt;h++){var kn=le(o[h]);_t.push(l.project(le([kn.lat-Z.lat,kn.lng-Z.lng])))}for(h=0,f=0;h<Wt-1;h++)f+=_t[h].distanceTo(_t[h+1])/2;if(f===0)V=_t[0];else for(h=0,v=0;h<Wt-1;h++)if(T=_t[h],R=_t[h+1],m=T.distanceTo(R),v+=m,v>f){x=(v-f)/m,V=[R.x-x*(R.x-T.x),R.y-x*(R.y-T.y)];break}var sn=l.unproject(j(V));return le([sn.lat+Z.lat,sn.lng+Z.lng])}var sb={__proto__:null,simplify:hI,pointToSegmentDistance:dI,closestPointOnSegment:tb,clipSegment:pI,_getEdgeIntersection:Vc,_getBitCode:ss,_sqClosestPointOnSegment:Xa,isFlat:Cn,_flat:mI,polylineCenter:gI},Bp={project:function(o){return new M(o.lng,o.lat)},unproject:function(o){return new Te(o.y,o.x)},bounds:new re([-180,-90],[180,90])},zp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,h=this.R,f=o.lat*l,m=this.R_MINOR/h,v=Math.sqrt(1-m*m),T=v*Math.sin(f),R=Math.tan(Math.PI/4-f/2)/Math.pow((1-T)/(1+T),v/2);return f=-h*Math.log(Math.max(R,1e-10)),new M(o.lng*l*h,f)},unproject:function(o){for(var l=180/Math.PI,h=this.R,f=this.R_MINOR/h,m=Math.sqrt(1-f*f),v=Math.exp(-o.y/h),T=Math.PI/2-2*Math.atan(v),R=0,x=.1,V;R<15&&Math.abs(x)>1e-7;R++)V=m*Math.sin(T),V=Math.pow((1-V)/(1+V),m/2),x=Math.PI/2-2*Math.atan(v*V)-T,T+=x;return new Te(T*l,o.x*l/h)}},ob={__proto__:null,LonLat:Bp,Mercator:zp,SphericalMercator:dp},ab=r({},Xi,{code:"EPSG:3395",projection:zp,transformation:function(){var o=.5/(Math.PI*zp.R);return qa(o,.5,-o,.5)}()}),_I=r({},Xi,{code:"EPSG:4326",projection:Bp,transformation:qa(1/180,1,-1/180,.5)}),lb=r({},rn,{projection:Bp,transformation:qa(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var h=l.lng-o.lng,f=l.lat-o.lat;return Math.sqrt(h*h+f*f)},infinite:!0});rn.Earth=Xi,rn.EPSG3395=ab,rn.EPSG3857=pp,rn.EPSG900913=px,rn.EPSG4326=_I,rn.Simple=lb;var zn=Ti.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=c(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,l){for(var h in this._layers)o.call(l,this._layers[h]);return this},_addLayers:function(o){o=o?I(o)?o:[o]:[];for(var l=0,h=o.length;l<h;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=c(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,h=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;o=m.minZoom===void 0?o:Math.min(o,m.minZoom),l=m.maxZoom===void 0?l:Math.max(l,m.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ao=zn.extend({initialize:function(o,l){P(this,l),this._layers={};var h,f;if(o)for(h=0,f=o.length;h<f;h++)this.addLayer(o[h])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),h,f;for(h in this._layers)f=this._layers[h],f[o]&&f[o].apply(f,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var h in this._layers)o.call(l,this._layers[h]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),ub=function(o,l){return new ao(o,l)},Pi=ao.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),ao.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),ao.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ft;for(var l in this._layers){var h=this._layers[l];o.extend(h.getBounds?h.getBounds():h.getLatLng())}return o}}),cb=function(o,l){return new Pi(o,l)},lo=gn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){P(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var h=this._getIconUrl(o);if(!h){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(f,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(o,l){var h=this.options,f=h[l+"Size"];typeof f=="number"&&(f=[f,f]);var m=j(f),v=j(l==="shadow"&&h.shadowAnchor||h.iconAnchor||m&&m.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(h.className||""),v&&(o.style.marginLeft=-v.x+"px",o.style.marginTop=-v.y+"px"),m&&(o.style.width=m.x+"px",o.style.height=m.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return ee.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function hb(o){return new lo(o)}var el=lo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof el.imagePath!="string"&&(el.imagePath=this._detectIconPath()),(this.options.imagePath||el.imagePath)+lo.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(h,f,m){var v=f.exec(h);return v&&v[m]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Pe("div","leaflet-default-icon-path",document.body),l=Ga(o,"background-image")||Ga(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),vI=ei.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new er(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,h=l._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,v=ns(l._icon),T=h.getPixelBounds(),R=h.getPixelOrigin(),x=we(T.min._subtract(R).add(m),T.max._subtract(R).subtract(m));if(!x.contains(v)){var V=j((Math.max(x.max.x,v.x)-x.max.x)/(T.max.x-x.max.x)-(Math.min(x.min.x,v.x)-x.min.x)/(T.min.x-x.min.x),(Math.max(x.max.y,v.y)-x.max.y)/(T.max.y-x.max.y)-(Math.min(x.min.y,v.y)-x.min.y)/(T.min.y-x.min.y)).multiplyBy(f);h.panBy(V,{animate:!1}),this._draggable._newPos._add(V),this._draggable._startPos._add(V),ot(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=Se(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(et(this._panRequest),this._panRequest=Se(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,h=l._shadow,f=ns(l._icon),m=l._map.layerPointToLatLng(f);h&&ot(h,f),l._latlng=m,o.latlng=m,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){et(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Fc=zn.extend({options:{icon:new el,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){P(this,l),this._latlng=le(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=le(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=o.icon.createIcon(this._icon),f=!1;h!==this._icon&&(this._icon&&this._removeIcon(),f=!0,o.title&&(h.title=o.title),h.tagName==="IMG"&&(h.alt=o.alt||"")),he(h,l),o.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ue(h,"focus",this._panOnFocus,this);var m=o.icon.createShadow(this._shadow),v=!1;m!==this._shadow&&(this._removeShadow(),v=!0),m&&(he(m,l),m.alt=""),this._shadow=m,o.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&v&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&be(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&ot(this._icon,o),this._shadow&&ot(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vI)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vI(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Rn(this._icon,o),this._shadow&&Rn(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,h=l.iconSize?j(l.iconSize):j(0,0),f=l.iconAnchor?j(l.iconAnchor):j(0,0);o.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:h.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function db(o,l){return new Fc(o,l)}var tr=zn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return P(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bc=tr.extend({options:{fill:!0,radius:10},initialize:function(o,l){P(this,l),this._latlng=le(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=le(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return tr.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,h=this._clickTolerance(),f=[o+h,l+h];this._pxBounds=new re(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fb(o,l){return new Bc(o,l)}var Up=Bc.extend({initialize:function(o,l,h){if(typeof l=="number"&&(l=r({},h,{radius:l})),P(this,l),this._latlng=le(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:tr.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,h=this._map,f=h.options.crs;if(f.distance===Xi.distance){var m=Math.PI/180,v=this._mRadius/Xi.R/m,T=h.project([l+v,o]),R=h.project([l-v,o]),x=T.add(R).divideBy(2),V=h.unproject(x).lat,Z=Math.acos((Math.cos(v*m)-Math.sin(l*m)*Math.sin(V*m))/(Math.cos(l*m)*Math.cos(V*m)))/m;(isNaN(Z)||Z===0)&&(Z=v/Math.cos(Math.PI/180*l)),this._point=x.subtract(h.getPixelOrigin()),this._radius=isNaN(Z)?0:x.x-h.project([V,o-Z]).x,this._radiusY=x.y-T.y}else{var ie=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(ie).x}this._updateBounds()}});function pb(o,l,h){return new Up(o,l,h)}var Si=tr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){P(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,h=null,f=Xa,m,v,T=0,R=this._parts.length;T<R;T++)for(var x=this._parts[T],V=1,Z=x.length;V<Z;V++){m=x[V-1],v=x[V];var ie=f(o,m,v,!0);ie<l&&(l=ie,h=f(o,m,v))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gI(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=le(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ft,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Cn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],h=Cn(o),f=0,m=o.length;f<m;f++)h?(l[f]=le(o[f]),this._bounds.extend(l[f])):l[f]=this._convertLatLngs(o[f]);return l},_project:function(){var o=new re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new M(o,o);this._rawPxBounds&&(this._pxBounds=new re([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,h){var f=o[0]instanceof Te,m=o.length,v,T;if(f){for(T=[],v=0;v<m;v++)T[v]=this._map.latLngToLayerPoint(o[v]),h.extend(T[v]);l.push(T)}else for(v=0;v<m;v++)this._projectLatlngs(o[v],l,h)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,f,m,v,T,R,x;for(h=0,m=0,v=this._rings.length;h<v;h++)for(x=this._rings[h],f=0,T=x.length;f<T-1;f++)R=pI(x[f],x[f+1],o,f,!0),R&&(l[m]=l[m]||[],l[m].push(R[0]),(R[1]!==x[f+1]||f===T-2)&&(l[m].push(R[1]),m++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,h=0,f=o.length;h<f;h++)o[h]=hI(o[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var h,f,m,v,T,R,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(h=0,v=this._parts.length;h<v;h++)for(R=this._parts[h],f=0,T=R.length,m=T-1;f<T;m=f++)if(!(!l&&f===0)&&dI(o,R[m],R[f])<=x)return!0;return!1}});function mb(o,l){return new Si(o,l)}Si._flat=mI;var uo=Si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cI(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=Si.prototype._convertLatLngs.call(this,o),h=l.length;return h>=2&&l[0]instanceof Te&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(o){Si.prototype._setLatLngs.call(this,o),Cn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,h=new M(l,l);if(o=new re(o.min.subtract(h),o.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,v;f<m;f++)v=uI(this._rings[f],o,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,h,f,m,v,T,R,x,V;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(v=0,x=this._parts.length;v<x;v++)for(h=this._parts[v],T=0,V=h.length,R=V-1;T<V;R=T++)f=h[T],m=h[R],f.y>o.y!=m.y>o.y&&o.x<(m.x-f.x)*(o.y-f.y)/(m.y-f.y)+f.x&&(l=!l);return l||Si.prototype._containsPoint.call(this,o,!0)}});function gb(o,l){return new uo(o,l)}var Ai=Pi.extend({initialize:function(o,l){P(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=I(o)?o:o.features,h,f,m;if(l){for(h=0,f=l.length;h<f;h++)m=l[h],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var v=this.options;if(v.filter&&!v.filter(o))return this;var T=zc(o,v);return T?(T.feature=jc(o),T.defaultOptions=T.options,this.resetStyle(T),v.onEachFeature&&v.onEachFeature(o,T),this.addLayer(T)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function zc(o,l){var h=o.type==="Feature"?o.geometry:o,f=h?h.coordinates:null,m=[],v=l&&l.pointToLayer,T=l&&l.coordsToLatLng||$p,R,x,V,Z;if(!f&&!h)return null;switch(h.type){case"Point":return R=T(f),yI(v,o,R,l);case"MultiPoint":for(V=0,Z=f.length;V<Z;V++)R=T(f[V]),m.push(yI(v,o,R,l));return new Pi(m);case"LineString":case"MultiLineString":return x=Uc(f,h.type==="LineString"?0:1,T),new Si(x,l);case"Polygon":case"MultiPolygon":return x=Uc(f,h.type==="Polygon"?1:2,T),new uo(x,l);case"GeometryCollection":for(V=0,Z=h.geometries.length;V<Z;V++){var ie=zc({geometry:h.geometries[V],type:"Feature",properties:o.properties},l);ie&&m.push(ie)}return new Pi(m);case"FeatureCollection":for(V=0,Z=h.features.length;V<Z;V++){var fe=zc(h.features[V],l);fe&&m.push(fe)}return new Pi(m);default:throw new Error("Invalid GeoJSON object.")}}function yI(o,l,h,f){return o?o(l,h):new Fc(h,f&&f.markersInheritOptions&&f)}function $p(o){return new Te(o[1],o[0],o[2])}function Uc(o,l,h){for(var f=[],m=0,v=o.length,T;m<v;m++)T=l?Uc(o[m],l-1,h):(h||$p)(o[m]),f.push(T);return f}function jp(o,l){return o=le(o),o.alt!==void 0?[_(o.lng,l),_(o.lat,l),_(o.alt,l)]:[_(o.lng,l),_(o.lat,l)]}function $c(o,l,h,f){for(var m=[],v=0,T=o.length;v<T;v++)m.push(l?$c(o[v],Cn(o[v])?0:l-1,h,f):jp(o[v],f));return!l&&h&&m.length>0&&m.push(m[0].slice()),m}function co(o,l){return o.feature?r({},o.feature,{geometry:l}):jc(l)}function jc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var qp={toGeoJSON:function(o){return co(this,{type:"Point",coordinates:jp(this.getLatLng(),o)})}};Fc.include(qp),Up.include(qp),Bc.include(qp),Si.include({toGeoJSON:function(o){var l=!Cn(this._latlngs),h=$c(this._latlngs,l?1:0,!1,o);return co(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),uo.include({toGeoJSON:function(o){var l=!Cn(this._latlngs),h=l&&!Cn(this._latlngs[0]),f=$c(this._latlngs,h?2:l?1:0,!0,o);return l||(f=[f]),co(this,{type:(h?"Multi":"")+"Polygon",coordinates:f})}}),ao.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(o).geometry.coordinates)}),co(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var h=l==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var v=m.toGeoJSON(o);if(h)f.push(v.geometry);else{var T=jc(v);T.type==="FeatureCollection"?f.push.apply(f,T.features):f.push(T)}}}),h?co(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function wI(o,l){return new Ai(o,l)}var _b=wI,qc=zn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,h){this._url=o,this._bounds=ke(l),P(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&so(this._image),this},bringToBack:function(){return this._map&&oo(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=ke(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:Pe("img");if(he(l,"leaflet-image-layer"),this._zoomAnimated&&he(l,"leaflet-zoom-animated"),this.options.className&&he(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;ts(this._image,h,l)},_reset:function(){var o=this._image,l=new re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();ot(o,l.min),o.style.width=h.x+"px",o.style.height=h.y+"px"},_updateOpacity:function(){Rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),vb=function(o,l,h){return new qc(o,l,h)},II=qc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:Pe("video");if(he(l,"leaflet-image-layer"),this._zoomAnimated&&he(l,"leaflet-zoom-animated"),this.options.className&&he(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),o){for(var h=l.getElementsByTagName("source"),f=[],m=0;m<h.length;m++)f.push(h[m].src);this._url=h.length>0?f:[l.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var T=Pe("source");T.src=this._url[v],l.appendChild(T)}}});function yb(o,l,h){return new II(o,l,h)}var EI=qc.extend({_initImage:function(){var o=this._image=this._url;he(o,"leaflet-image-layer"),this._zoomAnimated&&he(o,"leaflet-zoom-animated"),this.options.className&&he(o,this.options.className),o.onselectstart=g,o.onmousemove=g}});function wb(o,l,h){return new EI(o,l,h)}var ti=zn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof Te||I(o))?(this._latlng=le(o),P(this,l)):(P(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Rn(this._container,1),this.bringToFront(),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Rn(this._container,0),this._removeTimeout=setTimeout(a(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=le(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&so(this._container),this},bringToBack:function(){return this._map&&oo(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof Pi){l=null;var h=this._source._layers;for(var f in h)if(h[f]._map){l=h[f];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=j(this.options.offset),h=this._getAnchor();this._zoomAnimated?ot(this._container,o.add(h)):l=l.add(o).add(h);var f=this._containerBottom=-l.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(o,l,h,f){var m=l;return m instanceof o||(m=new o(f).setContent(l)),h&&m.setLatLng(h),m}}),zn.include({_initOverlay:function(o,l,h,f){var m=h;return m instanceof o?(P(m,f),m._source=this):(m=l&&!f?l:new o(f,this),m.setContent(h)),m}});var Wc=ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,ti.prototype.openOn.call(this,o)},onAdd:function(o){ti.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof tr||this._source.on("preclick",is))},onRemove:function(o){ti.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof tr||this._source.off("preclick",is))},getEvents:function(){var o=ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=Pe("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Pe("div",o+"-content-wrapper",l);if(this._contentNode=Pe("div",o+"-content",h),Ya(l),Np(this._contentNode),ue(l,"contextmenu",is),this._tipContainer=Pe("div",o+"-tip-container",l),this._tip=Pe("div",o+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",o+"-close-button",l);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ue(f,"click",function(m){Ct(m),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var h=o.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var f=o.offsetHeight,m=this.options.maxHeight,v="leaflet-popup-scrolled";m&&f>m?(l.height=m+"px",he(o,v)):tt(o,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),h=this._getAnchor();ot(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Ga(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,f=this._containerWidth,m=new M(this._containerLeft,-h-this._containerBottom);m._add(ns(this._container));var v=o.layerPointToContainerPoint(m),T=j(this.options.autoPanPadding),R=j(this.options.autoPanPaddingTopLeft||T),x=j(this.options.autoPanPaddingBottomRight||T),V=o.getSize(),Z=0,ie=0;v.x+f+x.x>V.x&&(Z=v.x+f-V.x+x.x),v.x-Z-R.x<0&&(Z=v.x-R.x),v.y+h+x.y>V.y&&(ie=v.y+h-V.y+x.y),v.y-ie-R.y<0&&(ie=v.y-R.y),(Z||ie)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Z,ie]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ib=function(o,l){return new Wc(o,l)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(o,l,h){return this._initOverlay(Wc,o,l,h).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),zn.include({bindPopup:function(o,l){return this._popup=this._initOverlay(Wc,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Pi||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){rs(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof tr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Hc=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){ti.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){ti.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=ti.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,h,f=this._map,m=this._container,v=f.latLngToContainerPoint(f.getCenter()),T=f.layerPointToContainerPoint(o),R=this.options.direction,x=m.offsetWidth,V=m.offsetHeight,Z=j(this.options.offset),ie=this._getAnchor();R==="top"?(l=x/2,h=V):R==="bottom"?(l=x/2,h=0):R==="center"?(l=x/2,h=V/2):R==="right"?(l=0,h=V/2):R==="left"?(l=x,h=V/2):T.x<v.x?(R="right",l=0,h=V/2):(R="left",l=x+(Z.x+ie.x)*2,h=V/2),o=o.subtract(j(l,h,!0)).add(Z).add(ie),tt(m,"leaflet-tooltip-right"),tt(m,"leaflet-tooltip-left"),tt(m,"leaflet-tooltip-top"),tt(m,"leaflet-tooltip-bottom"),he(m,"leaflet-tooltip-"+R),ot(m,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Rn(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Eb=function(o,l){return new Hc(o,l)};_e.include({openTooltip:function(o,l,h){return this._initOverlay(Hc,o,l,h).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),zn.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hc,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Pi||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(ue(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ue(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,h,f;this._tooltip.options.sticky&&o.originalEvent&&(h=this._map.mouseEventToContainerPoint(o.originalEvent),f=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(l)}});var TI=lo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Lc(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var f=j(h.bgPos);l.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Tb(o){return new TI(o)}lo.Default=el;var tl=zn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){P(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),je(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(so(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof M?o:new M(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,h=-o(-1/0,1/0),f=0,m=l.length,v;f<m;f++)v=l[f].style.zIndex,l[f]!==this._container&&v&&(h=o(h,+v));isFinite(h)&&(this.options.zIndex=h+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ee.ielt9){Rn(this._container,this.options.opacity);var o=+new Date,l=!1,h=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var v=Math.min(1,(o-m.loaded)/200);Rn(m.el,v),v<1?l=!0:(m.active?h=!0:this._onOpaqueTile(m),m.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(et(this._fadeFrame),this._fadeFrame=Se(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===o?(this._levels[h].el.style.zIndex=l-Math.abs(o-h),this._onUpdateLevel(h)):(je(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var f=this._levels[o],m=this._map;return f||(f=this._levels[o]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=l,f.origin=m.project(m.unproject(m.getPixelOrigin()),o).round(),f.zoom=o,this._setZoomTransform(f,m.getCenter(),m.getZoom()),g(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var o,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var f=l.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)je(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,h,f){var m=Math.floor(o/2),v=Math.floor(l/2),T=h-1,R=new M(+m,+v);R.z=+T;var x=this._tileCoordsToKey(R),V=this._tiles[x];return V&&V.active?(V.retain=!0,!0):(V&&V.loaded&&(V.retain=!0),T>f?this._retainParent(m,v,T,f):!1)},_retainChildren:function(o,l,h,f){for(var m=2*o;m<2*o+2;m++)for(var v=2*l;v<2*l+2;v++){var T=new M(m,v);T.z=h+1;var R=this._tileCoordsToKey(T),x=this._tiles[R];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);h+1<f&&this._retainChildren(m,v,h+1,f)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,h,f){var m=Math.round(l);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var v=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||v)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(o),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],o,l)},_setZoomTransform:function(o,l,h){var f=this._map.getZoomScale(h,o.zoom),m=o.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(l,h)).round();ee.any3d?ts(o.el,m,f):ot(o.el,m)},_resetGrid:function(){var o=this._map,l=o.options.crs,h=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],f).x/h.x),Math.ceil(o.project([0,l.wrapLng[1]],f).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],f).y/h.x),Math.ceil(o.project([l.wrapLat[1],0],f).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),f=l.getZoomScale(h,this._tileZoom),m=l.project(o,this._tileZoom).floor(),v=l.getSize().divideBy(f*2);return new re(m.subtract(v),m.add(v))},_update:function(o){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(o),m=this._pxBoundsToTileRange(f),v=m.getCenter(),T=[],R=this.options.keepBuffer,x=new re(m.getBottomLeft().subtract([R,-R]),m.getTopRight().add([R,-R]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var V in this._tiles){var Z=this._tiles[V].coords;(Z.z!==this._tileZoom||!x.contains(new M(Z.x,Z.y)))&&(this._tiles[V].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(o,h);return}for(var ie=m.min.y;ie<=m.max.y;ie++)for(var fe=m.min.x;fe<=m.max.x;fe++){var Wt=new M(fe,ie);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var _t=this._tiles[this._tileCoordsToKey(Wt)];_t?_t.current=!0:T.push(Wt)}}if(T.sort(function(sn,fo){return sn.distanceTo(v)-fo.distanceTo(v)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var kn=document.createDocumentFragment();for(fe=0;fe<T.length;fe++)this._addTile(T[fe],kn);this._level.el.appendChild(kn)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(o.x<h.min.x||o.x>h.max.x)||!l.wrapLat&&(o.y<h.min.y||o.y>h.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(o);return ke(this.options.bounds).overlaps(f)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,h=this.getTileSize(),f=o.scaleBy(h),m=f.add(h),v=l.unproject(f,o.z),T=l.unproject(m,o.z);return[v,T]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),h=new ft(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),h=new M(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(o){var l=this._tiles[o];l&&(je(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){he(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=g,o.onmousemove=g,ee.ielt9&&this.options.opacity<1&&Rn(o,this.options.opacity)},_addTile:function(o,l){var h=this._getTilePos(o),f=this._tileCoordsToKey(o),m=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(m),this.createTile.length<2&&Se(a(this._tileReady,this,o,null,m)),ot(m,h),this._tiles[f]={el:m,coords:o,current:!0},l.appendChild(m),this.fire("tileloadstart",{tile:m,coords:o})},_tileReady:function(o,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:o});var f=this._tileCoordsToKey(o);h=this._tiles[f],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Rn(h.el,0),et(this._fadeFrame),this._fadeFrame=Se(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(he(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ee.ielt9||!this._map._fadeAnimated?Se(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new M(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new re(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Pb(o){return new tl(o)}var ho=tl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=P(this,l),l.detectRetina&&ee.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var h=document.createElement("img");return ue(h,"load",a(this._tileOnLoad,this,l,h)),ue(h,"error",a(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(o),h},getTileUrl:function(o){var l={r:ee.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=h),l["-y"]=h}return y(this._url,r(l,this.options))},_tileOnLoad:function(o,l){ee.ielt9?setTimeout(a(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,h){var f=this.options.errorTileUrl;f&&l.getAttribute("src")!==f&&(l.src=f),o(h,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,f=this.options.zoomOffset;return h&&(o=l-o),o+f},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=g,l.onerror=g,!l.complete)){l.src=D;var h=this._tiles[o].coords;je(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",D),tl.prototype._removeTile.call(this,o)},_tileReady:function(o,l,h){if(!(!this._map||h&&h.getAttribute("src")===D))return tl.prototype._tileReady.call(this,o,l,h)}});function PI(o,l){return new ho(o,l)}var SI=ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var h=r({},this.defaultWmsParams);for(var f in l)f in this.options||(h[f]=l[f]);l=P(this,l);var m=l.detectRetina&&ee.retina?2:1,v=this.getTileSize();h.width=v.x*m,h.height=v.y*m,this.wmsParams=h},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ho.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),h=this._crs,f=we(h.project(l[0]),h.project(l[1])),m=f.min,v=f.max,T=(this._wmsVersion>=1.3&&this._crs===_I?[m.y,m.x,v.y,v.x]:[m.x,m.y,v.x,v.y]).join(","),R=ho.prototype.getTileUrl.call(this,o);return R+k(this.wmsParams,R,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(o,l){return r(this.wmsParams,o),l||this.redraw(),this}});function Sb(o,l){return new SI(o,l)}ho.WMS=SI,PI.wms=Sb;var Ri=zn.extend({options:{padding:.1},initialize:function(o){P(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var h=this._map.getZoomScale(l,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,l),v=f.multiplyBy(-h).add(m).subtract(this._map._getNewPixelOrigin(o,l));ee.any3d?ts(this._container,v,h):ot(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new re(h,h.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),AI=Ri.extend({options:{tolerance:0},getEvents:function(){var o=Ri.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ue(o,"mousemove",this._onMouseMove,this),ue(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ue(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){et(this._redrawRequest),delete this._ctx,je(this._container),be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ri.prototype._update.call(this);var o=this._bounds,l=this._container,h=o.getSize(),f=ee.retina?2:1;ot(l,o.min),l.width=f*h.x,l.height=f*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,h=l.next,f=l.prev;h?h.prev=f:this._drawLast=f,f?f.next=h:this._drawFirst=h,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),h=[],f,m;for(m=0;m<l.length;m++){if(f=Number(l[m]),isNaN(f))return;h.push(f)}o.options._dashArray=h}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||Se(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new re,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)o=f.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var h,f,m,v,T=o._parts,R=T.length,x=this._ctx;if(R){for(x.beginPath(),h=0;h<R;h++){for(f=0,m=T[h].length;f<m;f++)v=T[h][f],x[f?"lineTo":"moveTo"](v.x,v.y);l&&x.closePath()}this._fillStroke(x,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,h=this._ctx,f=Math.max(Math.round(o._radius),1),m=(Math.max(Math.round(o._radiusY),1)||f)/f;m!==1&&(h.save(),h.scale(1,m)),h.beginPath(),h.arc(l.x,l.y/m,f,0,Math.PI*2,!1),m!==1&&h.restore(),this._fillStroke(h,o)}},_fillStroke:function(o,l){var h=l.options;h.fill&&(o.globalAlpha=h.fillOpacity,o.fillStyle=h.fillColor||h.color,o.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=h.opacity,o.lineWidth=h.weight,o.strokeStyle=h.color,o.lineCap=h.lineCap,o.lineJoin=h.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),h,f,m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(h))&&(f=h);this._fireEvent(f?[f]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(tt(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var h,f,m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(l)&&(f=h);f!==this._hoveredLayer&&(this._handleMouseOut(o),f&&(he(this._container,"leaflet-interactive"),this._fireEvent([f],o,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,h){this._map._fireDOMEvent(l,h||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var h=l.next,f=l.prev;if(h)h.prev=f;else return;f?f.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var h=l.next,f=l.prev;if(f)f.next=h;else return;h?h.prev=f:f&&(this._drawLast=f),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function RI(o){return ee.canvas?new AI(o):null}var nl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ab={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ri.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=nl("shape");he(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=nl("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;je(l),o.removeInteractiveTarget(l),delete this._layers[c(o)]},_updateStyle:function(o){var l=o._stroke,h=o._fill,f=o.options,m=o._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(l||(l=o._stroke=nl("stroke")),m.appendChild(l),l.weight=f.weight+"px",l.color=f.color,l.opacity=f.opacity,f.dashArray?l.dashStyle=I(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=f.lineCap.replace("butt","flat"),l.joinstyle=f.lineJoin):l&&(m.removeChild(l),o._stroke=null),f.fill?(h||(h=o._fill=nl("fill")),m.appendChild(h),h.color=f.fillColor||f.color,h.opacity=f.fillOpacity):h&&(m.removeChild(h),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),h=Math.round(o._radius),f=Math.round(o._radiusY||h);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+f+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){so(o._container)},_bringToBack:function(o){oo(o._container)}},Gc=ee.vml?nl:bw,il=Ri.extend({_initContainer:function(){this._container=Gc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ri.prototype._update.call(this);var o=this._bounds,l=o.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),ot(h,o.min),h.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=Gc("path");o.options.className&&he(l,o.options.className),o.options.interactive&&he(l,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){je(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,h=o.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,Lw(o._parts,l))},_updateCircle:function(o){var l=o._point,h=Math.max(Math.round(o._radius),1),f=Math.max(Math.round(o._radiusY),1)||h,m="a"+h+","+f+" 0 1,0 ",v=o._empty()?"M0 0":"M"+(l.x-h)+","+l.y+m+h*2+",0 "+m+-h*2+",0 ";this._setPath(o,v)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){so(o._path)},_bringToBack:function(o){oo(o._path)}});ee.vml&&il.include(Ab);function CI(o){return ee.svg||ee.vml?new il(o):null}_e.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&RI(o)||CI(o)}});var kI=uo.extend({initialize:function(o,l){uo.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=ke(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Rb(o,l){return new kI(o,l)}il.create=Gc,il.pointsToPath=Lw,Ai.geometryToLayer=zc,Ai.coordsToLatLng=$p,Ai.coordsToLatLngs=Uc,Ai.latLngToCoords=jp,Ai.latLngsToCoords=$c,Ai.getFeature=co,Ai.asFeature=jc,_e.mergeOptions({boxZoom:!0});var xI=ei.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ue(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ka(),Sp(),this._startPoint=this._map.mouseEventToContainerPoint(o),ue(document,{contextmenu:rs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new re(this._point,this._startPoint),h=l.getSize();ot(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(je(this._box),tt(this._container,"leaflet-crosshair")),Za(),Ap(),be(document,{contextmenu:rs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",xI),_e.mergeOptions({doubleClickZoom:!0});var bI=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,h=l.getZoom(),f=l.options.zoomDelta,m=o.originalEvent.shiftKey?h-f:h+f;l.options.doubleClickZoom==="center"?l.setZoom(m):l.setZoomAround(o.containerPoint,m)}});_e.addInitHook("addHandler","doubleClickZoom",bI),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var LI=ei.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new er(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ke(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),h=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-l+h)%o+l-h,v=(f+l+h)%o-l-h,T=Math.abs(m+h)<Math.abs(v+h)?m:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(o){var l=this._map,h=l.options,f=!h.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),f)l.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,T=h.easeLinearity,R=m.multiplyBy(T/v),x=R.distanceTo([0,0]),V=Math.min(h.inertiaMaxSpeed,x),Z=R.multiplyBy(V/x),ie=V/(h.inertiaDeceleration*T),fe=Z.multiplyBy(-ie/2).round();!fe.x&&!fe.y?l.fire("moveend"):(fe=l._limitOffset(fe,l.options.maxBounds),Se(function(){l.panBy(fe,{duration:ie,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",LI),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var NI=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ue(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,h=o.scrollTop||l.scrollTop,f=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(f,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},h=this.keyCodes,f,m;for(f=0,m=h.left.length;f<m;f++)l[h.left[f]]=[-1*o,0];for(f=0,m=h.right.length;f<m;f++)l[h.right[f]]=[o,0];for(f=0,m=h.down.length;f<m;f++)l[h.down[f]]=[0,o];for(f=0,m=h.up.length;f<m;f++)l[h.up[f]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},h=this.keyCodes,f,m;for(f=0,m=h.zoomIn.length;f<m;f++)l[h.zoomIn[f]]=o;for(f=0,m=h.zoomOut.length;f<m;f++)l[h.zoomOut[f]]=-o},_addHooks:function(){ue(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,h=this._map,f;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(f=this._panKeys[l],o.shiftKey&&(f=j(f).multiplyBy(3)),h.options.maxBounds&&(f=h._limitOffset(j(f),h.options.maxBounds)),h.options.worldCopyJump){var m=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(f)));h.panTo(m)}else h.panBy(f)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;rs(o)}}});_e.addInitHook("addHandler","keyboard",NI),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var DI=ei.extend({addHooks:function(){ue(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=rI(o),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var f=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),f),rs(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),h=this._map.options.zoomSnap||0;o._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,v=h?Math.ceil(m/h)*h:m,T=o._limitZoom(l+(this._delta>0?v:-v))-l;this._delta=0,this._startTime=null,T&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+T):o.setZoomAround(this._lastMousePos,l+T))}});_e.addInitHook("addHandler","scrollWheelZoom",DI);var Cb=600;_e.mergeOptions({tapHold:ee.touchNative&&ee.safari&&ee.mobile,tapTolerance:15});var OI=ei.extend({addHooks:function(){ue(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new M(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ue(document,"touchend",Ct),ue(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Cb),ue(document,"touchend touchcancel contextmenu",this._cancel,this),ue(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){be(document,"touchend",Ct),be(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),be(document,"touchend touchcancel contextmenu",this._cancel,this),be(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new M(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var h=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});_e.addInitHook("addHandler","tapHold",OI),_e.mergeOptions({touchZoom:ee.touch,bounceAtZoomLimits:!0});var MI=ei.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),ue(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(o.touches[0]),f=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(f)._divideBy(2))),this._startDist=h.distanceTo(f),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ue(document,"touchmove",this._onTouchMove,this),ue(document,"touchend touchcancel",this._onTouchEnd,this),Ct(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(o.touches[0]),f=l.mouseEventToContainerPoint(o.touches[1]),m=h.distanceTo(f)/this._startDist;if(this._zoom=l.getScaleZoom(m,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&m<1||this._zoom>l.getMaxZoom()&&m>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var v=h._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&v.x===0&&v.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),et(this._animRequest);var T=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Se(T,this,!0),Ct(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,et(this._animRequest),be(document,"touchmove",this._onTouchMove,this),be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",MI),_e.BoxZoom=xI,_e.DoubleClickZoom=bI,_e.Drag=LI,_e.Keyboard=NI,_e.ScrollWheelZoom=DI,_e.TapHold=OI,_e.TouchZoom=MI,n.Bounds=re,n.Browser=ee,n.CRS=rn,n.Canvas=AI,n.Circle=Up,n.CircleMarker=Bc,n.Class=gn,n.Control=Bn,n.DivIcon=TI,n.DivOverlay=ti,n.DomEvent=Hx,n.DomUtil=qx,n.Draggable=er,n.Evented=Ti,n.FeatureGroup=Pi,n.GeoJSON=Ai,n.GridLayer=tl,n.Handler=ei,n.Icon=lo,n.ImageOverlay=qc,n.LatLng=Te,n.LatLngBounds=ft,n.Layer=zn,n.LayerGroup=ao,n.LineUtil=sb,n.Map=_e,n.Marker=Fc,n.Mixin=Xx,n.Path=tr,n.Point=M,n.PolyUtil=eb,n.Polygon=uo,n.Polyline=Si,n.Popup=Wc,n.PosAnimation=sI,n.Projection=ob,n.Rectangle=kI,n.Renderer=Ri,n.SVG=il,n.SVGOverlay=EI,n.TileLayer=ho,n.Tooltip=Hc,n.Transformation=fp,n.Util=Ji,n.VideoOverlay=II,n.bind=a,n.bounds=we,n.canvas=RI,n.circle=pb,n.circleMarker=fb,n.control=Ja,n.divIcon=Tb,n.extend=r,n.featureGroup=cb,n.geoJSON=wI,n.geoJson=_b,n.gridLayer=Pb,n.icon=hb,n.imageOverlay=vb,n.latLng=le,n.latLngBounds=ke,n.layerGroup=ub,n.map=Gx,n.marker=db,n.point=j,n.polygon=gb,n.polyline=mb,n.popup=Ib,n.rectangle=Rb,n.setOptions=P,n.stamp=c,n.svg=CI,n.svgOverlay=wb,n.tileLayer=PI,n.tooltip=Eb,n.transformation=qa,n.version=i,n.videoOverlay=yb;var kb=window.L;n.noConflict=function(){return window.L=kb,this},window.L=n})})(L_,L_.exports);var Cc=L_.exports;function cp(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function hp(t,e){return e==null?function(i,r){const s=N.useRef();return s.current||(s.current=t(i,r)),s}:function(i,r){const s=N.useRef();s.current||(s.current=t(i,r));const a=N.useRef(i),{instance:u}=s.current;return N.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),s}}function cx(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function hx(t){return function(n){const i=Cw(),r=t(up(n,i),i);return sx(i.map,n.attribution),kw(r.current,n.eventHandlers),cx(r.current,i),r}}function j9(t,e){const n=N.useRef();N.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function q9(t){return function(n){const i=Cw(),r=t(up(n,i),i);return kw(r.current,n.eventHandlers),cx(r.current,i),j9(r.current,n),r}}function W9(t,e){const n=hp(t,e),i=hx(n);return ux(i)}function H9(t,e){const n=hp(t),i=$9(n,e);return z9(i)}function G9(t,e){const n=hp(t,e),i=q9(n);return ux(i)}function K9(t,e){const n=hp(t,e),i=hx(n);return U9(i)}function Z9(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}const N_=G9(function({center:e,children:n,...i},r){const s=new Cc.Circle(e,i);return cp(s,ox(r,{overlayContainer:s}))},V9);function D_(){return D_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},D_.apply(this,arguments)}function Q9({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:s,placeholder:a,style:u,whenReady:c,zoom:d,...p},g){const[_]=N.useState({className:r,id:s,style:u}),[w,S]=N.useState(null);N.useImperativeHandle(g,()=>(w==null?void 0:w.map)??null,[w]);const P=N.useCallback(E=>{if(E!==null&&w===null){const y=new Cc.Map(E,p);n!=null&&d!=null?y.setView(n,d):t!=null&&y.fitBounds(t,e),c!=null&&y.whenReady(c),S(B9(y))}},[]);N.useEffect(()=>()=>{w==null||w.map.remove()},[w]);const k=w?Xl.createElement(lx,{value:w},i):a??null;return Xl.createElement("div",D_({},_,{ref:P}),k)}const dx=N.forwardRef(Q9),O_=W9(function({position:e,...n},i){const r=new Cc.Marker(e,n);return cp(r,ox(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Gh=H9(function(e,n){const i=new Cc.Popup(e,n.overlayContainer);return cp(i,n)},function(e,n,{position:i},r){N.useEffect(function(){const{instance:a}=e;function u(d){d.popup===a&&(a.update(),r(!0))}function c(d){d.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var p;n.map.off({popupopen:u,popupclose:c}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),fx=K9(function({url:e,...n},i){const r=new Cc.TileLayer(e,up(n,i));return cp(r,i)},function(e,n,i){Z9(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});const Y9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Ue.initializeApp(Y9);const J9=()=>{const{roomId:t}=Nv(),[e,n]=N.useState(null),[i,r]=N.useState(null),[s,a]=N.useState(null),[u,c]=N.useState(100),[d,p]=N.useState(null),[g,_]=N.useState([49.190199,16.593468]),[w,S]=N.useState(1e3),[P,k]=N.useState(!1);N.useEffect(()=>{Ue.auth().onAuthStateChanged(A=>{A&&r(A)})},[]),N.useEffect(()=>{if(navigator.geolocation){const A=navigator.geolocation.watchPosition(D=>{n([D.coords.latitude,D.coords.longitude])});return()=>{navigator.geolocation.clearWatch(A)}}else console.log("Геолока не надана")},[]),N.useEffect(()=>{i&&I()},[i]),N.useEffect(()=>{e&&y()},[e]);function E(A,D,O,z){const K=Math.PI*A/180,de=Math.PI*O/180,ne=de-K,Se=(Math.PI*z-Math.PI*D)/180,et=Math.sin(ne/2)*Math.sin(ne/2)+Math.cos(K)*Math.cos(de)*Math.sin(Se/2)*Math.sin(Se/2);return 6371*(2*Math.atan2(Math.sqrt(et),Math.sqrt(1-et)))}N.useEffect(()=>{if(e&&s){let A=null,D=1/0;s.forEach(O=>{const z=E(e[0],e[1],O[0],O[1]);z<D&&(D=z,A=O)}),A&&D<u/1e3?p(A):p(null)}},[e,s]);const y=()=>{E(e[0],e[1],g[0],g[1])>w/1e3?(k(!0),console.log("ВИ НЕ В ЗОНІ")):k(!1)},I=()=>{const O=Ue.firestore().collection("rooms").doc(t).onSnapshot(z=>{if(z.exists){var K=[];z.data().users.map(de=>{if(de.id!=i.uid){var ne=de.location;K.push([ne.latitude,ne.longitude])}}),a(K)}else console.log("Документ не існує")});return()=>{O()}};return q.jsxs("div",{children:[P&&q.jsxs("div",{className:"warning_zone",children:[q.jsx("h1",{children:"ВИ ЗА ЗОНОЮ"}),q.jsx("h2",{children:"Поверніться до зони"})]}),e?q.jsxs(dx,{center:e,zoom:13,style:{height:"400px",width:"100%"},children:[q.jsx(fx,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),q.jsx(O_,{position:e,children:q.jsxs(Gh,{children:["Your Location",e==null?void 0:e.map(A=>q.jsx("div",{children:A},A))]})}),s==null?void 0:s.map((A,D)=>d&&A===d&&q.jsx(N_,{center:A,radius:u,children:q.jsxs(Gh,{children:["Position ",A.map(O=>q.jsx("div",{children:O},O))]})},D)),s==null?void 0:s.map((A,D)=>q.jsx(O_,{position:A,children:q.jsxs(Gh,{children:["Destination Location",A==null?void 0:A.map(O=>q.jsx("div",{children:O},O))]})},D)),q.jsx(N_,{center:g,radius:w,className:"field_circle"})]}):q.jsx("p",{children:"Loading map..."})]})};const X9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Ue.initializeApp(X9);const ej=()=>{const{roomId:t}=Nv(),[e,n]=N.useState(null),[i,r]=N.useState([]),[s,a]=N.useState([49.190199,16.593468]),[u,c]=N.useState(1e3),[d,p]=N.useState(!1),g=Ue.firestore();N.useEffect(()=>{Ue.auth().onAuthStateChanged(P=>{P&&(r(P),console.log(P))})},[]),N.useEffect(()=>{if(navigator.geolocation){const P=navigator.geolocation.watchPosition(k=>{n([k.coords.latitude,k.coords.longitude])});return()=>{navigator.geolocation.clearWatch(P)}}else console.log("Геолока не надана")},[]),N.useEffect(()=>{e&&(w(),S(),console.log(e))},[e]);function _(P,k,E,y){const I=Math.PI*P/180,A=Math.PI*E/180,D=A-I,O=(Math.PI*y-Math.PI*k)/180,z=Math.sin(D/2)*Math.sin(D/2)+Math.cos(I)*Math.cos(A)*Math.sin(O/2)*Math.sin(O/2);return 6371*(2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z)))}const w=()=>{_(e[0],e[1],s[0],s[1])>u/1e3?(p(!0),console.log("ВИ НЕ В ЗОНІ")):p(!1)},S=()=>{const P=g.collection("rooms").doc(t);i&&P.get().then(k=>{if(k.exists){const I=k.data().users.map(A=>A.id===i.uid?{...A,location:{latitude:e[0],longitude:e[1]}}:A);P.update({users:I})}})};return q.jsxs("div",{children:[d&&q.jsxs("div",{className:"warning_zone",children:[q.jsx("h1",{children:"ВИ ЗА ЗОНОЮ"}),q.jsx("h2",{children:"Поверніться до зони"})]}),e?q.jsxs(dx,{center:e,zoom:13,style:{height:"400px",width:"100%"},children:[q.jsx(fx,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),q.jsx(O_,{position:e,children:q.jsxs(Gh,{children:["Your Location",e==null?void 0:e.map(P=>q.jsx("div",{children:P},P))]})}),q.jsx(N_,{center:s,radius:u,className:"field_circle"})]}):q.jsx("p",{children:"Loading map..."})]})},tj="_login_page_container_y2iww_1",nj="_buttons_container_y2iww_9",ij="_google_svg_y2iww_20",rj="_anonymous_svg_y2iww_25",sj="_back_icon_y2iww_30",El={login_page_container:tj,buttons_container:nj,google_svg:ij,anonymous_svg:rj,back_icon:sj},oj={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Ue.initializeApp(oj);const aj=()=>{const[t,e]=N.useState(null),n=pf();N.useEffect(()=>{Ue.auth().onAuthStateChanged(a=>{a&&(e(a),n("/"))})},[]);const i=()=>{const a=new Ue.auth.GoogleAuthProvider;Ue.auth().signInWithPopup(a).then(u=>{const c=u.user;e(c)}).catch(u=>{const c=u.code,d=u.message;console.log(c,d)})},r=()=>{Ue.auth().signInAnonymously().then(a=>{const u=a.user;e(u)}).catch(a=>{console.error(a)})},s=()=>{n(-1)};return q.jsxs("div",{className:El.login_page_container,children:[q.jsx("svg",{onClick:s,className:El.back_icon,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:q.jsx("path",{d:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"})}),q.jsxs("div",{className:El.buttons_container,children:[q.jsxs(Ko,{onClick:i,style:{background:"#E9E9E9"},children:[q.jsxs("svg",{className:El.google_svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"30px",height:"30px",children:["    ",q.jsx("path",{d:"M 15.003906 3 C 8.3749062 3 3 8.373 3 15 C 3 21.627 8.3749062 27 15.003906 27 C 25.013906 27 27.269078 17.707 26.330078 13 L 25 13 L 22.732422 13 L 15 13 L 15 17 L 22.738281 17 C 21.848702 20.448251 18.725955 23 15 23 C 10.582 23 7 19.418 7 15 C 7 10.582 10.582 7 15 7 C 17.009 7 18.839141 7.74575 20.244141 8.96875 L 23.085938 6.1289062 C 20.951937 4.1849063 18.116906 3 15.003906 3 z"})]}),"Google"]}),q.jsxs(Ko,{onClick:r,style:{background:"#E9E9E9"},children:[q.jsx("svg",{className:El.anonymous_svg,xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:q.jsx("path",{d:"M480-481q-66 0-108-42t-42-108q0-66 42-108t108-42q66 0 108 42t42 108q0 66-42 108t-108 42ZM160-160v-94q0-38 19-65t49-41q67-30 128.5-45T480-420q62 0 123 15.5T731-360q31 14 50 41t19 65v94H160Z"})}),"Anonymous"]})]})]})};function lj(){return q.jsx("div",{className:"App",children:q.jsx(sO,{basename:"/fantqhns",children:q.jsxs(XD,{children:[q.jsx(Eo,{index:!0,element:q.jsx(C9,{})}),q.jsx(Eo,{path:"/login",element:q.jsx(aj,{})}),q.jsx(Eo,{path:"/room/:roomId",element:q.jsx(M9,{})}),q.jsx(Eo,{path:"/map/seeking/:roomId",element:q.jsx(J9,{})}),q.jsx(Eo,{path:"/map/hiding/:roomId",element:q.jsx(ej,{})})]})})})}jm.createRoot(document.getElementById("root")).render(q.jsx(Xl.StrictMode,{children:q.jsx(lj,{})}));
