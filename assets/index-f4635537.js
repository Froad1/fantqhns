function Ub(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var $b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iP={exports:{}},Zd={},rP={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),qb=Symbol.for("react.portal"),Wb=Symbol.for("react.fragment"),Hb=Symbol.for("react.strict_mode"),Gb=Symbol.for("react.profiler"),Kb=Symbol.for("react.provider"),Zb=Symbol.for("react.context"),Qb=Symbol.for("react.forward_ref"),Yb=Symbol.for("react.suspense"),Jb=Symbol.for("react.memo"),Xb=Symbol.for("react.lazy"),UI=Symbol.iterator;function eL(t){return t===null||typeof t!="object"?null:(t=UI&&t[UI]||t["@@iterator"],typeof t=="function"?t:null)}var sP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oP=Object.assign,aP={};function Aa(t,e,n){this.props=t,this.context=e,this.refs=aP,this.updater=n||sP}Aa.prototype.isReactComponent={};Aa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Aa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lP(){}lP.prototype=Aa.prototype;function F_(t,e,n){this.props=t,this.context=e,this.refs=aP,this.updater=n||sP}var B_=F_.prototype=new lP;B_.constructor=F_;oP(B_,Aa.prototype);B_.isPureReactComponent=!0;var $I=Array.isArray,uP=Object.prototype.hasOwnProperty,z_={current:null},cP={key:!0,ref:!0,__self:!0,__source:!0};function hP(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)uP.call(e,i)&&!cP.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Qu,type:t,key:s,ref:a,props:r,_owner:z_.current}}function tL(t,e){return{$$typeof:Qu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function U_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qu}function nL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jI=/\/+/g;function Hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nL(""+t.key):e.toString(36)}function Ph(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Qu:case qb:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Hp(a,0):i,$I(r)?(n="",t!=null&&(n=t.replace(jI,"$&/")+"/"),Ph(r,e,n,"",function(d){return d})):r!=null&&(U_(r)&&(r=tL(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(jI,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",$I(t))for(var u=0;u<t.length;u++){s=t[u];var c=i+Hp(s,u);a+=Ph(s,e,n,c,r)}else if(c=eL(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=i+Hp(s,u++),a+=Ph(s,e,n,c,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Qc(t,e,n){if(t==null)return t;var i=[],r=0;return Ph(t,i,"","",function(s){return e.call(n,s,r++)}),i}function iL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},Sh={transition:null},rL={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Sh,ReactCurrentOwner:z_};ve.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!U_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Aa;ve.Fragment=Wb;ve.Profiler=Gb;ve.PureComponent=F_;ve.StrictMode=Hb;ve.Suspense=Yb;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rL;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=oP({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=z_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)uP.call(e,c)&&!cP.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:Qu,type:t.type,key:r,ref:s,props:i,_owner:a}};ve.createContext=function(t){return t={$$typeof:Zb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kb,_context:t},t.Consumer=t};ve.createElement=hP;ve.createFactory=function(t){var e=hP.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:Qb,render:t}};ve.isValidElement=U_;ve.lazy=function(t){return{$$typeof:Xb,_payload:{_status:-1,_result:t},_init:iL}};ve.memo=function(t,e){return{$$typeof:Jb,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Sh.transition;Sh.transition={};try{t()}finally{Sh.transition=e}};ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ve.useCallback=function(t,e){return sn.current.useCallback(t,e)};ve.useContext=function(t){return sn.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};ve.useEffect=function(t,e){return sn.current.useEffect(t,e)};ve.useId=function(){return sn.current.useId()};ve.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return sn.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};ve.useRef=function(t){return sn.current.useRef(t)};ve.useState=function(t){return sn.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return sn.current.useTransition()};ve.version="18.2.0";rP.exports=ve;var N=rP.exports;const eu=jb(N),sL=Ub({__proto__:null,default:eu},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL=N,aL=Symbol.for("react.element"),lL=Symbol.for("react.fragment"),uL=Object.prototype.hasOwnProperty,cL=oL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hL={key:!0,ref:!0,__self:!0,__source:!0};function dP(t,e,n){var i,r={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)uL.call(e,i)&&!hL.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:aL,type:t,key:s,ref:a,props:r,_owner:cL.current}}Zd.Fragment=lL;Zd.jsx=dP;Zd.jsxs=dP;iP.exports=Zd;var B=iP.exports,qm={},fP={exports:{}},Rn={},pP={exports:{}},mP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,oe){var W=O.length;O.push(oe);e:for(;0<W;){var ae=W-1>>>1,we=O[ae];if(0<r(we,oe))O[ae]=oe,O[W]=we,W=ae;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var oe=O[0],W=O.pop();if(W!==oe){O[0]=W;e:for(var ae=0,we=O.length,gt=we>>>1;ae<gt;){var be=2*(ae+1)-1,Ae=O[be],ce=be+1,an=O[ce];if(0>r(Ae,W))ce<we&&0>r(an,Ae)?(O[ae]=an,O[ce]=W,ae=ce):(O[ae]=Ae,O[be]=W,ae=be);else if(ce<we&&0>r(an,W))O[ae]=an,O[ce]=W,ae=ce;else break e}}return oe}function r(O,oe){var W=O.sortIndex-oe.sortIndex;return W!==0?W:O.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],d=[],p=1,g=null,_=3,y=!1,S=!1,P=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(O){for(var oe=n(d);oe!==null;){if(oe.callback===null)i(d);else if(oe.startTime<=O)i(d),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=n(d)}}function x(O){if(P=!1,E(O),!S)if(n(c)!==null)S=!0,He(D);else{var oe=n(d);oe!==null&&Gt(x,oe.startTime-O)}}function D(O,oe){S=!1,P&&(P=!1,I(z),z=-1),y=!0;var W=_;try{for(E(oe),g=n(c);g!==null&&(!(g.expirationTime>oe)||O&&!J());){var ae=g.callback;if(typeof ae=="function"){g.callback=null,_=g.priorityLevel;var we=ae(g.expirationTime<=oe);oe=t.unstable_now(),typeof we=="function"?g.callback=we:g===n(c)&&i(c),E(oe)}else i(c);g=n(c)}if(g!==null)var gt=!0;else{var be=n(d);be!==null&&Gt(x,be.startTime-oe),gt=!1}return gt}finally{g=null,_=W,y=!1}}var U=!1,q=null,z=-1,ie=5,X=-1;function J(){return!(t.unstable_now()-X<ie)}function fe(){if(q!==null){var O=t.unstable_now();X=O;var oe=!0;try{oe=q(!0,O)}finally{oe?ye():(U=!1,q=null)}}else U=!1}var ye;if(typeof w=="function")ye=function(){w(fe)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,xn=We.port2;We.port1.onmessage=fe,ye=function(){xn.postMessage(null)}}else ye=function(){C(fe,0)};function He(O){q=O,U||(U=!0,ye())}function Gt(O,oe){z=C(function(){O(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,He(D))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var W=_;_=oe;try{return O()}finally{_=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,oe){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var W=_;_=O;try{return oe()}finally{_=W}},t.unstable_scheduleCallback=function(O,oe,W){var ae=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ae+W:ae):W=ae,O){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=W+we,O={id:p++,callback:oe,priorityLevel:O,startTime:W,expirationTime:we,sortIndex:-1},W>ae?(O.sortIndex=W,e(d,O),n(c)===null&&O===n(d)&&(P?(I(z),z=-1):P=!0,Gt(x,W-ae))):(O.sortIndex=we,e(c,O),S||y||(S=!0,He(D))),O},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(O){var oe=_;return function(){var W=_;_=oe;try{return O.apply(this,arguments)}finally{_=W}}}})(mP);pP.exports=mP;var dL=pP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=N,Pn=dL;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _P=new Set,tu={};function Ys(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(tu[t]=e,t=0;t<e.length;t++)_P.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=Object.prototype.hasOwnProperty,fL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qI={},WI={};function pL(t){return Wm.call(WI,t)?!0:Wm.call(qI,t)?!1:fL.test(t)?WI[t]=!0:(qI[t]=!0,!1)}function mL(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gL(t,e,n,i){if(e===null||typeof e>"u"||mL(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var $_=/[\-:]([a-z])/g;function j_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($_,j_);Ft[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($_,j_);Ft[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($_,j_);Ft[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function q_(t,e,n,i){var r=Ft.hasOwnProperty(e)?Ft[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gL(e,n,r,i)&&(n=null),i||r===null?pL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Qi=gP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yc=Symbol.for("react.element"),bo=Symbol.for("react.portal"),Lo=Symbol.for("react.fragment"),W_=Symbol.for("react.strict_mode"),Hm=Symbol.for("react.profiler"),vP=Symbol.for("react.provider"),yP=Symbol.for("react.context"),H_=Symbol.for("react.forward_ref"),Gm=Symbol.for("react.suspense"),Km=Symbol.for("react.suspense_list"),G_=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),wP=Symbol.for("react.offscreen"),HI=Symbol.iterator;function sl(t){return t===null||typeof t!="object"?null:(t=HI&&t[HI]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Gp;function Pl(t){if(Gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gp=e&&e[1]||""}return`
`+Gp+t}var Kp=!1;function Zp(t,e){if(!t||Kp)return"";Kp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,u=s.length-1;1<=a&&0<=u&&r[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==s[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{Kp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pl(t):""}function _L(t){switch(t.tag){case 5:return Pl(t.type);case 16:return Pl("Lazy");case 13:return Pl("Suspense");case 19:return Pl("SuspenseList");case 0:case 2:case 15:return t=Zp(t.type,!1),t;case 11:return t=Zp(t.type.render,!1),t;case 1:return t=Zp(t.type,!0),t;default:return""}}function Zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lo:return"Fragment";case bo:return"Portal";case Hm:return"Profiler";case W_:return"StrictMode";case Gm:return"Suspense";case Km:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yP:return(t.displayName||"Context")+".Consumer";case vP:return(t._context.displayName||"Context")+".Provider";case H_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G_:return e=t.displayName||null,e!==null?e:Zm(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return Zm(t(e))}catch{}}return null}function vL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zm(e);case 8:return e===W_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yL(t){var e=IP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jc(t){t._valueTracker||(t._valueTracker=yL(t))}function EP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=IP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qm(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function GI(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TP(t,e){e=e.checked,e!=null&&q_(t,"checked",e,!1)}function Ym(t,e){TP(t,e);var n=Lr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jm(t,e.type,Lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function KI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jm(t,e,n){(e!=="number"||Kh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sl=Array.isArray;function Wo(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Lr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Xm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ZI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Sl(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lr(n)}}function PP(t,e){var n=Lr(e.value),i=Lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function QI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function SP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?SP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xc,AP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xc=Xc||document.createElement("div"),Xc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wL=["Webkit","ms","Moz","O"];Object.keys(Ol).forEach(function(t){wL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ol[e]=Ol[t]})});function RP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ol.hasOwnProperty(t)&&Ol[t]?(""+e).trim():e+"px"}function CP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=RP(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var IL=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tg(t,e){if(e){if(IL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ng(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ig=null;function K_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rg=null,Ho=null,Go=null;function YI(t){if(t=Xu(t)){if(typeof rg!="function")throw Error($(280));var e=t.stateNode;e&&(e=ef(e),rg(t.stateNode,t.type,e))}}function xP(t){Ho?Go?Go.push(t):Go=[t]:Ho=t}function kP(){if(Ho){var t=Ho,e=Go;if(Go=Ho=null,YI(t),e)for(t=0;t<e.length;t++)YI(e[t])}}function bP(t,e){return t(e)}function LP(){}var Qp=!1;function NP(t,e,n){if(Qp)return t(e,n);Qp=!0;try{return bP(t,e,n)}finally{Qp=!1,(Ho!==null||Go!==null)&&(LP(),kP())}}function iu(t,e){var n=t.stateNode;if(n===null)return null;var i=ef(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var sg=!1;if(ji)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){sg=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch{sg=!1}function EL(t,e,n,i,r,s,a,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Ml=!1,Zh=null,Qh=!1,og=null,TL={onError:function(t){Ml=!0,Zh=t}};function PL(t,e,n,i,r,s,a,u,c){Ml=!1,Zh=null,EL.apply(TL,arguments)}function SL(t,e,n,i,r,s,a,u,c){if(PL.apply(this,arguments),Ml){if(Ml){var d=Zh;Ml=!1,Zh=null}else throw Error($(198));Qh||(Qh=!0,og=d)}}function Js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function JI(t){if(Js(t)!==t)throw Error($(188))}function AL(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return JI(r),t;if(s===i)return JI(r),e;s=s.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=s;break}if(u===i){a=!0,i=r,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,i=r;break}if(u===i){a=!0,i=s,n=r;break}u=u.sibling}if(!a)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function OP(t){return t=AL(t),t!==null?MP(t):null}function MP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MP(t);if(e!==null)return e;t=t.sibling}return null}var VP=Pn.unstable_scheduleCallback,XI=Pn.unstable_cancelCallback,RL=Pn.unstable_shouldYield,CL=Pn.unstable_requestPaint,st=Pn.unstable_now,xL=Pn.unstable_getCurrentPriorityLevel,Z_=Pn.unstable_ImmediatePriority,FP=Pn.unstable_UserBlockingPriority,Yh=Pn.unstable_NormalPriority,kL=Pn.unstable_LowPriority,BP=Pn.unstable_IdlePriority,Qd=null,yi=null;function bL(t){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(Qd,t,void 0,(t.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:DL,LL=Math.log,NL=Math.LN2;function DL(t){return t>>>=0,t===0?32:31-(LL(t)/NL|0)|0}var eh=64,th=4194304;function Al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Al(u):(s&=a,s!==0&&(i=Al(s)))}else a=n&~r,a!==0?i=Al(a):s!==0&&(i=Al(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Qn(e),r=1<<n,i|=t[n],e&=~r;return i}function OL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ML(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Qn(s),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=OL(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function ag(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zP(){var t=eh;return eh<<=1,!(eh&4194240)&&(eh=64),t}function Yp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qn(e),t[e]=n}function VL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Qn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Q_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Qn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var xe=0;function UP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $P,Y_,jP,qP,WP,lg=!1,nh=[],Ir=null,Er=null,Tr=null,ru=new Map,su=new Map,dr=[],FL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e0(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(e.pointerId)}}function al(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Xu(e),e!==null&&Y_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function BL(t,e,n,i,r){switch(e){case"focusin":return Ir=al(Ir,t,e,n,i,r),!0;case"dragenter":return Er=al(Er,t,e,n,i,r),!0;case"mouseover":return Tr=al(Tr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ru.set(s,al(ru.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,su.set(s,al(su.get(s)||null,t,e,n,i,r)),!0}return!1}function HP(t){var e=ys(t.target);if(e!==null){var n=Js(e);if(n!==null){if(e=n.tag,e===13){if(e=DP(n),e!==null){t.blockedOn=e,WP(t.priority,function(){jP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ah(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ug(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ig=i,n.target.dispatchEvent(i),ig=null}else return e=Xu(n),e!==null&&Y_(e),t.blockedOn=n,!1;e.shift()}return!0}function t0(t,e,n){Ah(t)&&n.delete(e)}function zL(){lg=!1,Ir!==null&&Ah(Ir)&&(Ir=null),Er!==null&&Ah(Er)&&(Er=null),Tr!==null&&Ah(Tr)&&(Tr=null),ru.forEach(t0),su.forEach(t0)}function ll(t,e){t.blockedOn===e&&(t.blockedOn=null,lg||(lg=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,zL)))}function ou(t){function e(r){return ll(r,t)}if(0<nh.length){ll(nh[0],t);for(var n=1;n<nh.length;n++){var i=nh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ir!==null&&ll(Ir,t),Er!==null&&ll(Er,t),Tr!==null&&ll(Tr,t),ru.forEach(e),su.forEach(e),n=0;n<dr.length;n++)i=dr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)HP(n),n.blockedOn===null&&dr.shift()}var Ko=Qi.ReactCurrentBatchConfig,Xh=!0;function UL(t,e,n,i){var r=xe,s=Ko.transition;Ko.transition=null;try{xe=1,J_(t,e,n,i)}finally{xe=r,Ko.transition=s}}function $L(t,e,n,i){var r=xe,s=Ko.transition;Ko.transition=null;try{xe=4,J_(t,e,n,i)}finally{xe=r,Ko.transition=s}}function J_(t,e,n,i){if(Xh){var r=ug(t,e,n,i);if(r===null)am(t,e,i,ed,n),e0(t,i);else if(BL(r,t,e,n,i))i.stopPropagation();else if(e0(t,i),e&4&&-1<FL.indexOf(t)){for(;r!==null;){var s=Xu(r);if(s!==null&&$P(s),s=ug(t,e,n,i),s===null&&am(t,e,i,ed,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else am(t,e,i,null,n)}}var ed=null;function ug(t,e,n,i){if(ed=null,t=K_(i),t=ys(t),t!==null)if(e=Js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ed=t,null}function GP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xL()){case Z_:return 1;case FP:return 4;case Yh:case kL:return 16;case BP:return 536870912;default:return 16}default:return 16}}var gr=null,X_=null,Rh=null;function KP(){if(Rh)return Rh;var t,e=X_,n=e.length,i,r="value"in gr?gr.value:gr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Rh=r.slice(t,1<i?1-i:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ih(){return!0}function n0(){return!1}function Cn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ih:n0,this.isPropagationStopped=n0,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ih)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ih)},persist:function(){},isPersistent:ih}),e}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ev=Cn(Ra),Ju=Ye({},Ra,{view:0,detail:0}),jL=Cn(Ju),Jp,Xp,ul,Yd=Ye({},Ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(Jp=t.screenX-ul.screenX,Xp=t.screenY-ul.screenY):Xp=Jp=0,ul=t),Jp)},movementY:function(t){return"movementY"in t?t.movementY:Xp}}),i0=Cn(Yd),qL=Ye({},Yd,{dataTransfer:0}),WL=Cn(qL),HL=Ye({},Ju,{relatedTarget:0}),em=Cn(HL),GL=Ye({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),KL=Cn(GL),ZL=Ye({},Ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QL=Cn(ZL),YL=Ye({},Ra,{data:0}),r0=Cn(YL),JL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eN[t])?!!e[t]:!1}function tv(){return tN}var nN=Ye({},Ju,{key:function(t){if(t.key){var e=JL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tv,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iN=Cn(nN),rN=Ye({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s0=Cn(rN),sN=Ye({},Ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tv}),oN=Cn(sN),aN=Ye({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),lN=Cn(aN),uN=Ye({},Yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cN=Cn(uN),hN=[9,13,27,32],nv=ji&&"CompositionEvent"in window,Vl=null;ji&&"documentMode"in document&&(Vl=document.documentMode);var dN=ji&&"TextEvent"in window&&!Vl,ZP=ji&&(!nv||Vl&&8<Vl&&11>=Vl),o0=String.fromCharCode(32),a0=!1;function QP(t,e){switch(t){case"keyup":return hN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var No=!1;function fN(t,e){switch(t){case"compositionend":return YP(e);case"keypress":return e.which!==32?null:(a0=!0,o0);case"textInput":return t=e.data,t===o0&&a0?null:t;default:return null}}function pN(t,e){if(No)return t==="compositionend"||!nv&&QP(t,e)?(t=KP(),Rh=X_=gr=null,No=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZP&&e.locale!=="ko"?null:e.data;default:return null}}var mN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mN[t.type]:e==="textarea"}function JP(t,e,n,i){xP(i),e=td(e,"onChange"),0<e.length&&(n=new ev("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Fl=null,au=null;function gN(t){uS(t,0)}function Jd(t){var e=Mo(t);if(EP(e))return t}function _N(t,e){if(t==="change")return e}var XP=!1;if(ji){var tm;if(ji){var nm="oninput"in document;if(!nm){var u0=document.createElement("div");u0.setAttribute("oninput","return;"),nm=typeof u0.oninput=="function"}tm=nm}else tm=!1;XP=tm&&(!document.documentMode||9<document.documentMode)}function c0(){Fl&&(Fl.detachEvent("onpropertychange",eS),au=Fl=null)}function eS(t){if(t.propertyName==="value"&&Jd(au)){var e=[];JP(e,au,t,K_(t)),NP(gN,e)}}function vN(t,e,n){t==="focusin"?(c0(),Fl=e,au=n,Fl.attachEvent("onpropertychange",eS)):t==="focusout"&&c0()}function yN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jd(au)}function wN(t,e){if(t==="click")return Jd(e)}function IN(t,e){if(t==="input"||t==="change")return Jd(e)}function EN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:EN;function lu(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Wm.call(e,r)||!Jn(t[r],e[r]))return!1}return!0}function h0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d0(t,e){var n=h0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h0(n)}}function tS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nS(){for(var t=window,e=Kh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kh(t.document)}return e}function iv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TN(t){var e=nS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tS(n.ownerDocument.documentElement,n)){if(i!==null&&iv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=d0(n,s);var a=d0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PN=ji&&"documentMode"in document&&11>=document.documentMode,Do=null,cg=null,Bl=null,hg=!1;function f0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hg||Do==null||Do!==Kh(i)||(i=Do,"selectionStart"in i&&iv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Bl&&lu(Bl,i)||(Bl=i,i=td(cg,"onSelect"),0<i.length&&(e=new ev("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Do)))}function rh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oo={animationend:rh("Animation","AnimationEnd"),animationiteration:rh("Animation","AnimationIteration"),animationstart:rh("Animation","AnimationStart"),transitionend:rh("Transition","TransitionEnd")},im={},iS={};ji&&(iS=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Xd(t){if(im[t])return im[t];if(!Oo[t])return t;var e=Oo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iS)return im[t]=e[n];return t}var rS=Xd("animationend"),sS=Xd("animationiteration"),oS=Xd("animationstart"),aS=Xd("transitionend"),lS=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,e){lS.set(t,e),Ys(e,[t])}for(var rm=0;rm<p0.length;rm++){var sm=p0[rm],SN=sm.toLowerCase(),AN=sm[0].toUpperCase()+sm.slice(1);Hr(SN,"on"+AN)}Hr(rS,"onAnimationEnd");Hr(sS,"onAnimationIteration");Hr(oS,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(aS,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function m0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,SL(i,e,void 0,t),t.currentTarget=null}function uS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==s&&r.isPropagationStopped())break e;m0(r,u,d),s=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,d=u.currentTarget,u=u.listener,c!==s&&r.isPropagationStopped())break e;m0(r,u,d),s=c}}}if(Qh)throw t=og,Qh=!1,og=null,t}function Ve(t,e){var n=e[gg];n===void 0&&(n=e[gg]=new Set);var i=t+"__bubble";n.has(i)||(cS(e,t,2,!1),n.add(i))}function om(t,e,n){var i=0;e&&(i|=4),cS(n,t,i,e)}var sh="_reactListening"+Math.random().toString(36).slice(2);function uu(t){if(!t[sh]){t[sh]=!0,_P.forEach(function(n){n!=="selectionchange"&&(RN.has(n)||om(n,!1,t),om(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sh]||(e[sh]=!0,om("selectionchange",!1,e))}}function cS(t,e,n,i){switch(GP(e)){case 1:var r=UL;break;case 4:r=$L;break;default:r=J_}n=r.bind(null,e,n,t),r=void 0,!sg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function am(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=ys(u),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}u=u.parentNode}}i=i.return}NP(function(){var d=s,p=K_(n),g=[];e:{var _=lS.get(t);if(_!==void 0){var y=ev,S=t;switch(t){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":y=iN;break;case"focusin":S="focus",y=em;break;case"focusout":S="blur",y=em;break;case"beforeblur":case"afterblur":y=em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=i0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=WL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=oN;break;case rS:case sS:case oS:y=KL;break;case aS:y=lN;break;case"scroll":y=jL;break;case"wheel":y=cN;break;case"copy":case"cut":case"paste":y=QL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=s0}var P=(e&4)!==0,C=!P&&t==="scroll",I=P?_!==null?_+"Capture":null:_;P=[];for(var w=d,E;w!==null;){E=w;var x=E.stateNode;if(E.tag===5&&x!==null&&(E=x,I!==null&&(x=iu(w,I),x!=null&&P.push(cu(w,x,E)))),C)break;w=w.return}0<P.length&&(_=new y(_,S,null,n,p),g.push({event:_,listeners:P}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",_&&n!==ig&&(S=n.relatedTarget||n.fromElement)&&(ys(S)||S[qi]))break e;if((y||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=d,S=S?ys(S):null,S!==null&&(C=Js(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=d),y!==S)){if(P=i0,x="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=s0,x="onPointerLeave",I="onPointerEnter",w="pointer"),C=y==null?_:Mo(y),E=S==null?_:Mo(S),_=new P(x,w+"leave",y,n,p),_.target=C,_.relatedTarget=E,x=null,ys(p)===d&&(P=new P(I,w+"enter",S,n,p),P.target=E,P.relatedTarget=C,x=P),C=x,y&&S)t:{for(P=y,I=S,w=0,E=P;E;E=vo(E))w++;for(E=0,x=I;x;x=vo(x))E++;for(;0<w-E;)P=vo(P),w--;for(;0<E-w;)I=vo(I),E--;for(;w--;){if(P===I||I!==null&&P===I.alternate)break t;P=vo(P),I=vo(I)}P=null}else P=null;y!==null&&g0(g,_,y,P,!1),S!==null&&C!==null&&g0(g,C,S,P,!0)}}e:{if(_=d?Mo(d):window,y=_.nodeName&&_.nodeName.toLowerCase(),y==="select"||y==="input"&&_.type==="file")var D=_N;else if(l0(_))if(XP)D=IN;else{D=yN;var U=vN}else(y=_.nodeName)&&y.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(D=wN);if(D&&(D=D(t,d))){JP(g,D,n,p);break e}U&&U(t,_,d),t==="focusout"&&(U=_._wrapperState)&&U.controlled&&_.type==="number"&&Jm(_,"number",_.value)}switch(U=d?Mo(d):window,t){case"focusin":(l0(U)||U.contentEditable==="true")&&(Do=U,cg=d,Bl=null);break;case"focusout":Bl=cg=Do=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,f0(g,n,p);break;case"selectionchange":if(PN)break;case"keydown":case"keyup":f0(g,n,p)}var q;if(nv)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else No?QP(t,n)&&(z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(ZP&&n.locale!=="ko"&&(No||z!=="onCompositionStart"?z==="onCompositionEnd"&&No&&(q=KP()):(gr=p,X_="value"in gr?gr.value:gr.textContent,No=!0)),U=td(d,z),0<U.length&&(z=new r0(z,t,null,n,p),g.push({event:z,listeners:U}),q?z.data=q:(q=YP(n),q!==null&&(z.data=q)))),(q=dN?fN(t,n):pN(t,n))&&(d=td(d,"onBeforeInput"),0<d.length&&(p=new r0("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=q))}uS(g,e)})}function cu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function td(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=iu(t,n),s!=null&&i.unshift(cu(t,s,r)),s=iu(t,e),s!=null&&i.push(cu(t,s,r))),t=t.return}return i}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g0(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&d!==null&&(u=d,r?(c=iu(n,s),c!=null&&a.unshift(cu(n,c,u))):r||(c=iu(n,s),c!=null&&a.push(cu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var CN=/\r\n?/g,xN=/\u0000|\uFFFD/g;function _0(t){return(typeof t=="string"?t:""+t).replace(CN,`
`).replace(xN,"")}function oh(t,e,n){if(e=_0(e),_0(t)!==e&&n)throw Error($(425))}function nd(){}var dg=null,fg=null;function pg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mg=typeof setTimeout=="function"?setTimeout:void 0,kN=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,bN=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(t){return v0.resolve(null).then(t).catch(LN)}:mg;function LN(t){setTimeout(function(){throw t})}function lm(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ou(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ou(e)}function Pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function y0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),li="__reactFiber$"+Ca,hu="__reactProps$"+Ca,qi="__reactContainer$"+Ca,gg="__reactEvents$"+Ca,NN="__reactListeners$"+Ca,DN="__reactHandles$"+Ca;function ys(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qi]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=y0(t);t!==null;){if(n=t[li])return n;t=y0(t)}return e}t=n,n=t.parentNode}return null}function Xu(t){return t=t[li]||t[qi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function ef(t){return t[hu]||null}var _g=[],Vo=-1;function Gr(t){return{current:t}}function ze(t){0>Vo||(t.current=_g[Vo],_g[Vo]=null,Vo--)}function Oe(t,e){Vo++,_g[Vo]=t.current,t.current=e}var Nr={},Ht=Gr(Nr),gn=Gr(!1),Ns=Nr;function sa(t,e){var n=t.type.contextTypes;if(!n)return Nr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _n(t){return t=t.childContextTypes,t!=null}function id(){ze(gn),ze(Ht)}function w0(t,e,n){if(Ht.current!==Nr)throw Error($(168));Oe(Ht,e),Oe(gn,n)}function hS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,vL(t)||"Unknown",r));return Ye({},n,i)}function rd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,Ns=Ht.current,Oe(Ht,t),Oe(gn,gn.current),!0}function I0(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=hS(t,e,Ns),i.__reactInternalMemoizedMergedChildContext=t,ze(gn),ze(Ht),Oe(Ht,t)):ze(gn),Oe(gn,n)}var Li=null,tf=!1,um=!1;function dS(t){Li===null?Li=[t]:Li.push(t)}function ON(t){tf=!0,dS(t)}function Kr(){if(!um&&Li!==null){um=!0;var t=0,e=xe;try{var n=Li;for(xe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Li=null,tf=!1}catch(r){throw Li!==null&&(Li=Li.slice(t+1)),VP(Z_,Kr),r}finally{xe=e,um=!1}}return null}var Fo=[],Bo=0,sd=null,od=0,Nn=[],Dn=0,Ds=null,Ni=1,Di="";function cs(t,e){Fo[Bo++]=od,Fo[Bo++]=sd,sd=t,od=e}function fS(t,e,n){Nn[Dn++]=Ni,Nn[Dn++]=Di,Nn[Dn++]=Ds,Ds=t;var i=Ni;t=Di;var r=32-Qn(i)-1;i&=~(1<<r),n+=1;var s=32-Qn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ni=1<<32-Qn(e)+r|n<<r|i,Di=s+t}else Ni=1<<s|n<<r|i,Di=t}function rv(t){t.return!==null&&(cs(t,1),fS(t,1,0))}function sv(t){for(;t===sd;)sd=Fo[--Bo],Fo[Bo]=null,od=Fo[--Bo],Fo[Bo]=null;for(;t===Ds;)Ds=Nn[--Dn],Nn[Dn]=null,Di=Nn[--Dn],Nn[Dn]=null,Ni=Nn[--Dn],Nn[Dn]=null}var Tn=null,In=null,Ue=!1,Kn=null;function pS(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,In=Pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,In=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ds!==null?{id:Ni,overflow:Di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,In=null,!0):!1;default:return!1}}function vg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yg(t){if(Ue){var e=In;if(e){var n=e;if(!E0(t,e)){if(vg(t))throw Error($(418));e=Pr(n.nextSibling);var i=Tn;e&&E0(t,e)?pS(i,n):(t.flags=t.flags&-4097|2,Ue=!1,Tn=t)}}else{if(vg(t))throw Error($(418));t.flags=t.flags&-4097|2,Ue=!1,Tn=t}}}function T0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function ah(t){if(t!==Tn)return!1;if(!Ue)return T0(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pg(t.type,t.memoizedProps)),e&&(e=In)){if(vg(t))throw mS(),Error($(418));for(;e;)pS(t,e),e=Pr(e.nextSibling)}if(T0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){In=Pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}In=null}}else In=Tn?Pr(t.stateNode.nextSibling):null;return!0}function mS(){for(var t=In;t;)t=Pr(t.nextSibling)}function oa(){In=Tn=null,Ue=!1}function ov(t){Kn===null?Kn=[t]:Kn.push(t)}var MN=Qi.ReactCurrentBatchConfig;function Hn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ad=Gr(null),ld=null,zo=null,av=null;function lv(){av=zo=ld=null}function uv(t){var e=ad.current;ze(ad),t._currentValue=e}function wg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Zo(t,e){ld=t,av=zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(av!==t)if(t={context:t,memoizedValue:e,next:null},zo===null){if(ld===null)throw Error($(308));zo=t,ld.dependencies={lanes:0,firstContext:t}}else zo=zo.next=t;return e}var ws=null;function cv(t){ws===null?ws=[t]:ws.push(t)}function gS(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,cv(e)):(n.next=r.next,r.next=n),e.interleaved=n,Wi(t,i)}function Wi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hr=!1;function hv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _S(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Pe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Wi(t,n)}return r=i.interleaved,r===null?(e.next=e,cv(i)):(e.next=r.next,r.next=e),i.interleaved=e,Wi(t,n)}function xh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Q_(t,n)}}function P0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ud(t,e,n,i){var r=t.updateQueue;hr=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==a&&(u===null?p.firstBaseUpdate=d:u.next=d,p.lastBaseUpdate=c))}if(s!==null){var g=r.baseState;a=0,p=d=c=null,u=s;do{var _=u.lane,y=u.eventTime;if((i&_)===_){p!==null&&(p=p.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,P=u;switch(_=e,y=n,P.tag){case 1:if(S=P.payload,typeof S=="function"){g=S.call(y,g,_);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=P.payload,_=typeof S=="function"?S.call(y,g,_):S,_==null)break e;g=Ye({},g,_);break e;case 2:hr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else y={eventTime:y,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(d=p=y,c=g):p=p.next=y,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(1);if(p===null&&(c=g),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ms|=a,t.lanes=a,t.memoizedState=g}}function S0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var vS=new gP.Component().refs;function Ig(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nf={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Xt(),r=Rr(t),s=zi(i,r);s.payload=e,n!=null&&(s.callback=n),e=Sr(t,s,r),e!==null&&(Yn(e,t,r,i),xh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Xt(),r=Rr(t),s=zi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Sr(t,s,r),e!==null&&(Yn(e,t,r,i),xh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),i=Rr(t),r=zi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Sr(t,r,i),e!==null&&(Yn(e,t,i,n),xh(e,t,i))}};function A0(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!lu(n,i)||!lu(r,s):!0}function yS(t,e,n){var i=!1,r=Nr,s=e.contextType;return typeof s=="object"&&s!==null?s=Bn(s):(r=_n(e)?Ns:Ht.current,i=e.contextTypes,s=(i=i!=null)?sa(t,r):Nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function R0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&nf.enqueueReplaceState(e,e.state,null)}function Eg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=vS,hv(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Bn(s):(s=_n(e)?Ns:Ht.current,r.context=sa(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ig(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&nf.enqueueReplaceState(r,r.state,null),ud(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=r.refs;u===vS&&(u=r.refs={}),a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function lh(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function C0(t){var e=t._init;return e(t._payload)}function wS(t){function e(I,w){if(t){var E=I.deletions;E===null?(I.deletions=[w],I.flags|=16):E.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function i(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function r(I,w){return I=Cr(I,w),I.index=0,I.sibling=null,I}function s(I,w,E){return I.index=E,t?(E=I.alternate,E!==null?(E=E.index,E<w?(I.flags|=2,w):E):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,w,E,x){return w===null||w.tag!==6?(w=gm(E,I.mode,x),w.return=I,w):(w=r(w,E),w.return=I,w)}function c(I,w,E,x){var D=E.type;return D===Lo?p(I,w,E.props.children,x,E.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&C0(D)===w.type)?(x=r(w,E.props),x.ref=cl(I,w,E),x.return=I,x):(x=Oh(E.type,E.key,E.props,null,I.mode,x),x.ref=cl(I,w,E),x.return=I,x)}function d(I,w,E,x){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=_m(E,I.mode,x),w.return=I,w):(w=r(w,E.children||[]),w.return=I,w)}function p(I,w,E,x,D){return w===null||w.tag!==7?(w=Cs(E,I.mode,x,D),w.return=I,w):(w=r(w,E),w.return=I,w)}function g(I,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gm(""+w,I.mode,E),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yc:return E=Oh(w.type,w.key,w.props,null,I.mode,E),E.ref=cl(I,null,w),E.return=I,E;case bo:return w=_m(w,I.mode,E),w.return=I,w;case cr:var x=w._init;return g(I,x(w._payload),E)}if(Sl(w)||sl(w))return w=Cs(w,I.mode,E,null),w.return=I,w;lh(I,w)}return null}function _(I,w,E,x){var D=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:u(I,w,""+E,x);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Yc:return E.key===D?c(I,w,E,x):null;case bo:return E.key===D?d(I,w,E,x):null;case cr:return D=E._init,_(I,w,D(E._payload),x)}if(Sl(E)||sl(E))return D!==null?null:p(I,w,E,x,null);lh(I,E)}return null}function y(I,w,E,x,D){if(typeof x=="string"&&x!==""||typeof x=="number")return I=I.get(E)||null,u(w,I,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yc:return I=I.get(x.key===null?E:x.key)||null,c(w,I,x,D);case bo:return I=I.get(x.key===null?E:x.key)||null,d(w,I,x,D);case cr:var U=x._init;return y(I,w,E,U(x._payload),D)}if(Sl(x)||sl(x))return I=I.get(E)||null,p(w,I,x,D,null);lh(w,x)}return null}function S(I,w,E,x){for(var D=null,U=null,q=w,z=w=0,ie=null;q!==null&&z<E.length;z++){q.index>z?(ie=q,q=null):ie=q.sibling;var X=_(I,q,E[z],x);if(X===null){q===null&&(q=ie);break}t&&q&&X.alternate===null&&e(I,q),w=s(X,w,z),U===null?D=X:U.sibling=X,U=X,q=ie}if(z===E.length)return n(I,q),Ue&&cs(I,z),D;if(q===null){for(;z<E.length;z++)q=g(I,E[z],x),q!==null&&(w=s(q,w,z),U===null?D=q:U.sibling=q,U=q);return Ue&&cs(I,z),D}for(q=i(I,q);z<E.length;z++)ie=y(q,I,z,E[z],x),ie!==null&&(t&&ie.alternate!==null&&q.delete(ie.key===null?z:ie.key),w=s(ie,w,z),U===null?D=ie:U.sibling=ie,U=ie);return t&&q.forEach(function(J){return e(I,J)}),Ue&&cs(I,z),D}function P(I,w,E,x){var D=sl(E);if(typeof D!="function")throw Error($(150));if(E=D.call(E),E==null)throw Error($(151));for(var U=D=null,q=w,z=w=0,ie=null,X=E.next();q!==null&&!X.done;z++,X=E.next()){q.index>z?(ie=q,q=null):ie=q.sibling;var J=_(I,q,X.value,x);if(J===null){q===null&&(q=ie);break}t&&q&&J.alternate===null&&e(I,q),w=s(J,w,z),U===null?D=J:U.sibling=J,U=J,q=ie}if(X.done)return n(I,q),Ue&&cs(I,z),D;if(q===null){for(;!X.done;z++,X=E.next())X=g(I,X.value,x),X!==null&&(w=s(X,w,z),U===null?D=X:U.sibling=X,U=X);return Ue&&cs(I,z),D}for(q=i(I,q);!X.done;z++,X=E.next())X=y(q,I,z,X.value,x),X!==null&&(t&&X.alternate!==null&&q.delete(X.key===null?z:X.key),w=s(X,w,z),U===null?D=X:U.sibling=X,U=X);return t&&q.forEach(function(fe){return e(I,fe)}),Ue&&cs(I,z),D}function C(I,w,E,x){if(typeof E=="object"&&E!==null&&E.type===Lo&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Yc:e:{for(var D=E.key,U=w;U!==null;){if(U.key===D){if(D=E.type,D===Lo){if(U.tag===7){n(I,U.sibling),w=r(U,E.props.children),w.return=I,I=w;break e}}else if(U.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&C0(D)===U.type){n(I,U.sibling),w=r(U,E.props),w.ref=cl(I,U,E),w.return=I,I=w;break e}n(I,U);break}else e(I,U);U=U.sibling}E.type===Lo?(w=Cs(E.props.children,I.mode,x,E.key),w.return=I,I=w):(x=Oh(E.type,E.key,E.props,null,I.mode,x),x.ref=cl(I,w,E),x.return=I,I=x)}return a(I);case bo:e:{for(U=E.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(I,w.sibling),w=r(w,E.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=_m(E,I.mode,x),w.return=I,I=w}return a(I);case cr:return U=E._init,C(I,w,U(E._payload),x)}if(Sl(E))return S(I,w,E,x);if(sl(E))return P(I,w,E,x);lh(I,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(I,w.sibling),w=r(w,E),w.return=I,I=w):(n(I,w),w=gm(E,I.mode,x),w.return=I,I=w),a(I)):n(I,w)}return C}var aa=wS(!0),IS=wS(!1),ec={},wi=Gr(ec),du=Gr(ec),fu=Gr(ec);function Is(t){if(t===ec)throw Error($(174));return t}function dv(t,e){switch(Oe(fu,e),Oe(du,t),Oe(wi,ec),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eg(e,t)}ze(wi),Oe(wi,e)}function la(){ze(wi),ze(du),ze(fu)}function ES(t){Is(fu.current);var e=Is(wi.current),n=eg(e,t.type);e!==n&&(Oe(du,t),Oe(wi,n))}function fv(t){du.current===t&&(ze(wi),ze(du))}var Ke=Gr(0);function cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cm=[];function pv(){for(var t=0;t<cm.length;t++)cm[t]._workInProgressVersionPrimary=null;cm.length=0}var kh=Qi.ReactCurrentDispatcher,hm=Qi.ReactCurrentBatchConfig,Os=0,Ze=null,_t=null,Et=null,hd=!1,zl=!1,pu=0,VN=0;function zt(){throw Error($(321))}function mv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function gv(t,e,n,i,r,s){if(Os=s,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kh.current=t===null||t.memoizedState===null?UN:$N,t=n(i,r),zl){s=0;do{if(zl=!1,pu=0,25<=s)throw Error($(301));s+=1,Et=_t=null,e.updateQueue=null,kh.current=jN,t=n(i,r)}while(zl)}if(kh.current=dd,e=_t!==null&&_t.next!==null,Os=0,Et=_t=Ze=null,hd=!1,e)throw Error($(300));return t}function _v(){var t=pu!==0;return pu=0,t}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ze.memoizedState=Et=t:Et=Et.next=t,Et}function zn(){if(_t===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Et===null?Ze.memoizedState:Et.next;if(e!==null)Et=e,_t=t;else{if(t===null)throw Error($(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Et===null?Ze.memoizedState=Et=t:Et=Et.next=t}return Et}function mu(t,e){return typeof e=="function"?e(t):e}function dm(t){var e=zn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=_t,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var u=a=null,c=null,d=s;do{var p=d.lane;if((Os&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,Ze.lanes|=p,Ms|=p}d=d.next}while(d!==null&&d!==s);c===null?a=i:c.next=u,Jn(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ze.lanes|=s,Ms|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fm(t){var e=zn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Jn(s,e.memoizedState)||(dn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function TS(){}function PS(t,e){var n=Ze,i=zn(),r=e(),s=!Jn(i.memoizedState,r);if(s&&(i.memoizedState=r,dn=!0),i=i.queue,vv(RS.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,gu(9,AS.bind(null,n,i,r,e),void 0,null),Pt===null)throw Error($(349));Os&30||SS(n,e,r)}return r}function SS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AS(t,e,n,i){e.value=n,e.getSnapshot=i,CS(e)&&xS(t)}function RS(t,e,n){return n(function(){CS(e)&&xS(t)})}function CS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function xS(t){var e=Wi(t,1);e!==null&&Yn(e,t,1,-1)}function x0(t){var e=ai();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:t},e.queue=t,t=t.dispatch=zN.bind(null,Ze,t),[e.memoizedState,t]}function gu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function kS(){return zn().memoizedState}function bh(t,e,n,i){var r=ai();Ze.flags|=t,r.memoizedState=gu(1|e,n,void 0,i===void 0?null:i)}function rf(t,e,n,i){var r=zn();i=i===void 0?null:i;var s=void 0;if(_t!==null){var a=_t.memoizedState;if(s=a.destroy,i!==null&&mv(i,a.deps)){r.memoizedState=gu(e,n,s,i);return}}Ze.flags|=t,r.memoizedState=gu(1|e,n,s,i)}function k0(t,e){return bh(8390656,8,t,e)}function vv(t,e){return rf(2048,8,t,e)}function bS(t,e){return rf(4,2,t,e)}function LS(t,e){return rf(4,4,t,e)}function NS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DS(t,e,n){return n=n!=null?n.concat([t]):null,rf(4,4,NS.bind(null,e,t),n)}function yv(){}function OS(t,e){var n=zn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&mv(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function MS(t,e){var n=zn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&mv(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function VS(t,e,n){return Os&21?(Jn(n,e)||(n=zP(),Ze.lanes|=n,Ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function FN(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var i=hm.transition;hm.transition={};try{t(!1),e()}finally{xe=n,hm.transition=i}}function FS(){return zn().memoizedState}function BN(t,e,n){var i=Rr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BS(t))zS(e,n);else if(n=gS(t,e,n,i),n!==null){var r=Xt();Yn(n,t,i,r),US(n,e,i)}}function zN(t,e,n){var i=Rr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BS(t))zS(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(r.hasEagerState=!0,r.eagerState=u,Jn(u,a)){var c=e.interleaved;c===null?(r.next=r,cv(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=gS(t,e,r,i),n!==null&&(r=Xt(),Yn(n,t,i,r),US(n,e,i))}}function BS(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function zS(t,e){zl=hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function US(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Q_(t,n)}}var dd={readContext:Bn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},UN={readContext:Bn,useCallback:function(t,e){return ai().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:k0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bh(4194308,4,NS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return bh(4,2,t,e)},useMemo:function(t,e){var n=ai();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ai();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=BN.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=ai();return t={current:t},e.memoizedState=t},useState:x0,useDebugValue:yv,useDeferredValue:function(t){return ai().memoizedState=t},useTransition:function(){var t=x0(!1),e=t[0];return t=FN.bind(null,t[1]),ai().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,r=ai();if(Ue){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Pt===null)throw Error($(349));Os&30||SS(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,k0(RS.bind(null,i,s,t),[t]),i.flags|=2048,gu(9,AS.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=ai(),e=Pt.identifierPrefix;if(Ue){var n=Di,i=Ni;n=(i&~(1<<32-Qn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=pu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$N={readContext:Bn,useCallback:OS,useContext:Bn,useEffect:vv,useImperativeHandle:DS,useInsertionEffect:bS,useLayoutEffect:LS,useMemo:MS,useReducer:dm,useRef:kS,useState:function(){return dm(mu)},useDebugValue:yv,useDeferredValue:function(t){var e=zn();return VS(e,_t.memoizedState,t)},useTransition:function(){var t=dm(mu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:TS,useSyncExternalStore:PS,useId:FS,unstable_isNewReconciler:!1},jN={readContext:Bn,useCallback:OS,useContext:Bn,useEffect:vv,useImperativeHandle:DS,useInsertionEffect:bS,useLayoutEffect:LS,useMemo:MS,useReducer:fm,useRef:kS,useState:function(){return fm(mu)},useDebugValue:yv,useDeferredValue:function(t){var e=zn();return _t===null?e.memoizedState=t:VS(e,_t.memoizedState,t)},useTransition:function(){var t=fm(mu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:TS,useSyncExternalStore:PS,useId:FS,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",i=e;do n+=_L(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qN=typeof WeakMap=="function"?WeakMap:Map;function $S(t,e,n){n=zi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){pd||(pd=!0,Ng=i),Tg(t,e)},n}function jS(t,e,n){n=zi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Tg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Tg(t,e),typeof i!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function b0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new qN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=rD.bind(null,t,e,n),e.then(t,t))}function L0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zi(-1,1),e.tag=2,Sr(n,e,1))),n.lanes|=1),t)}var WN=Qi.ReactCurrentOwner,dn=!1;function Zt(t,e,n,i){e.child=t===null?IS(e,null,n,i):aa(e,t.child,n,i)}function D0(t,e,n,i,r){n=n.render;var s=e.ref;return Zo(e,r),i=gv(t,e,n,i,s,r),n=_v(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Hi(t,e,r)):(Ue&&n&&rv(e),e.flags|=1,Zt(t,e,i,r),e.child)}function O0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Rv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qS(t,e,s,i,r)):(t=Oh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:lu,n(a,i)&&t.ref===e.ref)return Hi(t,e,r)}return e.flags|=1,t=Cr(s,i),t.ref=e.ref,t.return=e,e.child=t}function qS(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(lu(s,i)&&t.ref===e.ref)if(dn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Hi(t,e,r)}return Pg(t,e,n,i,r)}function WS(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe($o,yn),yn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe($o,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Oe($o,yn),yn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Oe($o,yn),yn|=i;return Zt(t,e,r,n),e.child}function HS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pg(t,e,n,i,r){var s=_n(n)?Ns:Ht.current;return s=sa(e,s),Zo(e,r),n=gv(t,e,n,i,s,r),i=_v(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Hi(t,e,r)):(Ue&&i&&rv(e),e.flags|=1,Zt(t,e,n,r),e.child)}function M0(t,e,n,i,r){if(_n(n)){var s=!0;rd(e)}else s=!1;if(Zo(e,r),e.stateNode===null)Lh(t,e),yS(e,n,i),Eg(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Bn(d):(d=_n(n)?Ns:Ht.current,d=sa(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==d)&&R0(e,a,i,d),hr=!1;var _=e.memoizedState;a.state=_,ud(e,i,a,r),c=e.memoizedState,u!==i||_!==c||gn.current||hr?(typeof p=="function"&&(Ig(e,n,p,i),c=e.memoizedState),(u=hr||A0(e,n,u,i,_,c,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=d,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,_S(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:Hn(e.type,u),a.props=d,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=_n(n)?Ns:Ht.current,c=sa(e,c));var y=n.getDerivedStateFromProps;(p=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==c)&&R0(e,a,i,c),hr=!1,_=e.memoizedState,a.state=_,ud(e,i,a,r);var S=e.memoizedState;u!==g||_!==S||gn.current||hr?(typeof y=="function"&&(Ig(e,n,y,i),S=e.memoizedState),(d=hr||A0(e,n,d,i,_,S,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,S,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,S,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=S),a.props=i,a.state=S,a.context=c,i=d):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Sg(t,e,n,i,s,r)}function Sg(t,e,n,i,r,s){HS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&I0(e,n,!1),Hi(t,e,s);i=e.stateNode,WN.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=aa(e,t.child,null,s),e.child=aa(e,null,u,s)):Zt(t,e,u,s),e.memoizedState=i.state,r&&I0(e,n,!0),e.child}function GS(t){var e=t.stateNode;e.pendingContext?w0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w0(t,e.context,!1),dv(t,e.containerInfo)}function V0(t,e,n,i,r){return oa(),ov(r),e.flags|=256,Zt(t,e,n,i),e.child}var Ag={dehydrated:null,treeContext:null,retryLane:0};function Rg(t){return{baseLanes:t,cachePool:null,transitions:null}}function KS(t,e,n){var i=e.pendingProps,r=Ke.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Oe(Ke,r&1),t===null)return yg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=af(a,i,0,null),t=Cs(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rg(n),e.memoizedState=Ag,t):wv(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return HN(t,e,a,i,u,r,n);if(s){s=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Cr(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?s=Cr(u,s):(s=Cs(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?Rg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Ag,i}return s=t.child,t=s.sibling,i=Cr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function wv(t,e){return e=af({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uh(t,e,n,i){return i!==null&&ov(i),aa(e,t.child,null,n),t=wv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HN(t,e,n,i,r,s,a){if(n)return e.flags&256?(e.flags&=-257,i=pm(Error($(422))),uh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=af({mode:"visible",children:i.children},r,0,null),s=Cs(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&aa(e,t.child,null,a),e.child.memoizedState=Rg(a),e.memoizedState=Ag,s);if(!(e.mode&1))return uh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,s=Error($(419)),i=pm(s,i,void 0),uh(t,e,a,i)}if(u=(a&t.childLanes)!==0,dn||u){if(i=Pt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Wi(t,r),Yn(i,t,r,-1))}return Av(),i=pm(Error($(421))),uh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=sD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,In=Pr(r.nextSibling),Tn=e,Ue=!0,Kn=null,t!==null&&(Nn[Dn++]=Ni,Nn[Dn++]=Di,Nn[Dn++]=Ds,Ni=t.id,Di=t.overflow,Ds=e),e=wv(e,i.children),e.flags|=4096,e)}function F0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),wg(t.return,e,n)}function mm(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function ZS(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Zt(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F0(t,n,e);else if(t.tag===19)F0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Oe(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),mm(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}mm(e,!0,n,null,s);break;case"together":mm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GN(t,e,n){switch(e.tag){case 3:GS(e),oa();break;case 5:ES(e);break;case 1:_n(e.type)&&rd(e);break;case 4:dv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Oe(ad,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Oe(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?KS(t,e,n):(Oe(Ke,Ke.current&1),t=Hi(t,e,n),t!==null?t.sibling:null);Oe(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ZS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,WS(t,e,n)}return Hi(t,e,n)}var QS,Cg,YS,JS;QS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cg=function(){};YS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Is(wi.current);var s=null;switch(n){case"input":r=Qm(t,r),i=Qm(t,i),s=[];break;case"select":r=Ye({},r,{value:void 0}),i=Ye({},i,{value:void 0}),s=[];break;case"textarea":r=Xm(t,r),i=Xm(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=nd)}tg(n,i);var a;n=null;for(d in r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(tu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var c=i[d];if(u=r!=null?r[d]:void 0,i.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(tu.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ve("scroll",t),s||u===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};JS=function(t,e,n,i){n!==i&&(e.flags|=4)};function hl(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function KN(t,e,n){var i=e.pendingProps;switch(sv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return _n(e.type)&&id(),Ut(e),null;case 3:return i=e.stateNode,la(),ze(gn),ze(Ht),pv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ah(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(Mg(Kn),Kn=null))),Cg(t,e),Ut(e),null;case 5:fv(e);var r=Is(fu.current);if(n=e.type,t!==null&&e.stateNode!=null)YS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return Ut(e),null}if(t=Is(wi.current),ah(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[li]=e,i[hu]=s,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(r=0;r<Rl.length;r++)Ve(Rl[r],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":GI(i,s),Ve("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ve("invalid",i);break;case"textarea":ZI(i,s),Ve("invalid",i)}tg(n,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?i.textContent!==u&&(s.suppressHydrationWarning!==!0&&oh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&oh(i.textContent,u,t),r=["children",""+u]):tu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ve("scroll",i)}switch(n){case"input":Jc(i),KI(i,s,!0);break;case"textarea":Jc(i),QI(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=nd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=SP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[li]=e,t[hu]=i,QS(t,e,!1,!1),e.stateNode=t;e:{switch(a=ng(n,i),n){case"dialog":Ve("cancel",t),Ve("close",t),r=i;break;case"iframe":case"object":case"embed":Ve("load",t),r=i;break;case"video":case"audio":for(r=0;r<Rl.length;r++)Ve(Rl[r],t);r=i;break;case"source":Ve("error",t),r=i;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),r=i;break;case"details":Ve("toggle",t),r=i;break;case"input":GI(t,i),r=Qm(t,i),Ve("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ye({},i,{value:void 0}),Ve("invalid",t);break;case"textarea":ZI(t,i),r=Xm(t,i),Ve("invalid",t);break;default:r=i}tg(n,r),u=r;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?CP(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AP(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&nu(t,c):typeof c=="number"&&nu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ve("scroll",t):c!=null&&q_(t,s,c,a))}switch(n){case"input":Jc(t),KI(t,i,!1);break;case"textarea":Jc(t),QI(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Lr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Wo(t,!!i.multiple,s,!1):i.defaultValue!=null&&Wo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)JS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=Is(fu.current),Is(wi.current),ah(e)){if(i=e.stateNode,n=e.memoizedProps,i[li]=e,(s=i.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:oh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oh(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[li]=e,e.stateNode=i}return Ut(e),null;case 13:if(ze(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&In!==null&&e.mode&1&&!(e.flags&128))mS(),oa(),e.flags|=98560,s=!1;else if(s=ah(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[li]=e}else oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),s=!1}else Kn!==null&&(Mg(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?vt===0&&(vt=3):Av())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return la(),Cg(t,e),t===null&&uu(e.stateNode.containerInfo),Ut(e),null;case 10:return uv(e.type._context),Ut(e),null;case 17:return _n(e.type)&&id(),Ut(e),null;case 19:if(ze(Ke),s=e.memoizedState,s===null)return Ut(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)hl(s,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cd(t),a!==null){for(e.flags|=128,hl(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&st()>ca&&(e.flags|=128,i=!0,hl(s,!1),e.lanes=4194304)}else{if(!i)if(t=cd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ue)return Ut(e),null}else 2*st()-s.renderingStartTime>ca&&n!==1073741824&&(e.flags|=128,i=!0,hl(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=st(),e.sibling=null,n=Ke.current,Oe(Ke,i?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return Sv(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function ZN(t,e){switch(sv(e),e.tag){case 1:return _n(e.type)&&id(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return la(),ze(gn),ze(Ht),pv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fv(e),null;case 13:if(ze(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(Ke),null;case 4:return la(),null;case 10:return uv(e.type._context),null;case 22:case 23:return Sv(),null;case 24:return null;default:return null}}var ch=!1,jt=!1,QN=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Uo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xe(t,e,i)}else n.current=null}function xg(t,e,n){try{n()}catch(i){Xe(t,e,i)}}var B0=!1;function YN(t,e){if(dg=Xh,t=nS(),iv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,d=0,p=0,g=t,_=null;t:for(;;){for(var y;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==s||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(y=g.firstChild)!==null;)_=g,g=y;for(;;){if(g===t)break t;if(_===n&&++d===r&&(u=a),_===s&&++p===i&&(c=a),(y=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=y}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fg={focusedElem:t,selectionRange:n},Xh=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var P=S.memoizedProps,C=S.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?P:Hn(e.type,P),C);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(x){Xe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return S=B0,B0=!1,S}function Ul(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&xg(e,n,s)}r=r.next}while(r!==i)}}function sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function kg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XS(t){var e=t.alternate;e!==null&&(t.alternate=null,XS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[hu],delete e[gg],delete e[NN],delete e[DN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function e1(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||e1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nd));else if(i!==4&&(t=t.child,t!==null))for(bg(t,e,n),t=t.sibling;t!==null;)bg(t,e,n),t=t.sibling}function Lg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Lg(t,e,n),t=t.sibling;t!==null;)Lg(t,e,n),t=t.sibling}var bt=null,Gn=!1;function sr(t,e,n){for(n=n.child;n!==null;)t1(t,e,n),n=n.sibling}function t1(t,e,n){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(Qd,n)}catch{}switch(n.tag){case 5:jt||Uo(n,e);case 6:var i=bt,r=Gn;bt=null,sr(t,e,n),bt=i,Gn=r,bt!==null&&(Gn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Gn?(t=bt,n=n.stateNode,t.nodeType===8?lm(t.parentNode,n):t.nodeType===1&&lm(t,n),ou(t)):lm(bt,n.stateNode));break;case 4:i=bt,r=Gn,bt=n.stateNode.containerInfo,Gn=!0,sr(t,e,n),bt=i,Gn=r;break;case 0:case 11:case 14:case 15:if(!jt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&xg(n,e,a),r=r.next}while(r!==i)}sr(t,e,n);break;case 1:if(!jt&&(Uo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){Xe(n,e,u)}sr(t,e,n);break;case 21:sr(t,e,n);break;case 22:n.mode&1?(jt=(i=jt)||n.memoizedState!==null,sr(t,e,n),jt=i):sr(t,e,n);break;default:sr(t,e,n)}}function U0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QN),e.forEach(function(i){var r=oD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:bt=u.stateNode,Gn=!1;break e;case 3:bt=u.stateNode.containerInfo,Gn=!0;break e;case 4:bt=u.stateNode.containerInfo,Gn=!0;break e}u=u.return}if(bt===null)throw Error($(160));t1(s,a,r),bt=null,Gn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Xe(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)n1(e,t),e=e.sibling}function n1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),oi(t),i&4){try{Ul(3,t,t.return),sf(3,t)}catch(P){Xe(t,t.return,P)}try{Ul(5,t,t.return)}catch(P){Xe(t,t.return,P)}}break;case 1:qn(e,t),oi(t),i&512&&n!==null&&Uo(n,n.return);break;case 5:if(qn(e,t),oi(t),i&512&&n!==null&&Uo(n,n.return),t.flags&32){var r=t.stateNode;try{nu(r,"")}catch(P){Xe(t,t.return,P)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&TP(r,s),ng(u,a);var d=ng(u,s);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?CP(r,g):p==="dangerouslySetInnerHTML"?AP(r,g):p==="children"?nu(r,g):q_(r,p,g,d)}switch(u){case"input":Ym(r,s);break;case"textarea":PP(r,s);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Wo(r,!!s.multiple,y,!1):_!==!!s.multiple&&(s.defaultValue!=null?Wo(r,!!s.multiple,s.defaultValue,!0):Wo(r,!!s.multiple,s.multiple?[]:"",!1))}r[hu]=s}catch(P){Xe(t,t.return,P)}}break;case 6:if(qn(e,t),oi(t),i&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(P){Xe(t,t.return,P)}}break;case 3:if(qn(e,t),oi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ou(e.containerInfo)}catch(P){Xe(t,t.return,P)}break;case 4:qn(e,t),oi(t);break;case 13:qn(e,t),oi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Tv=st())),i&4&&U0(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(d=jt)||p,qn(e,t),jt=d):qn(e,t),oi(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(g=Y=p;Y!==null;){switch(_=Y,y=_.child,_.tag){case 0:case 11:case 14:case 15:Ul(4,_,_.return);break;case 1:Uo(_,_.return);var S=_.stateNode;if(typeof S.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(P){Xe(i,n,P)}}break;case 5:Uo(_,_.return);break;case 22:if(_.memoizedState!==null){j0(g);continue}}y!==null?(y.return=_,Y=y):j0(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{r=g.stateNode,d?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=RP("display",a))}catch(P){Xe(t,t.return,P)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(P){Xe(t,t.return,P)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:qn(e,t),oi(t),i&4&&U0(t);break;case 21:break;default:qn(e,t),oi(t)}}function oi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(e1(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(nu(r,""),i.flags&=-33);var s=z0(t);Lg(t,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=z0(t);bg(t,u,a);break;default:throw Error($(161))}}catch(c){Xe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JN(t,e,n){Y=t,i1(t)}function i1(t,e,n){for(var i=(t.mode&1)!==0;Y!==null;){var r=Y,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||ch;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||jt;u=ch;var d=jt;if(ch=a,(jt=c)&&!d)for(Y=r;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?q0(r):c!==null?(c.return=a,Y=c):q0(r);for(;s!==null;)Y=s,i1(s),s=s.sibling;Y=r,ch=u,jt=d}$0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Y=s):$0(t)}}function $0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||sf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!jt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&S0(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&ou(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}jt||e.flags&512&&kg(e)}catch(_){Xe(e,e.return,_)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function j0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function q0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sf(4,e)}catch(c){Xe(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){Xe(e,r,c)}}var s=e.return;try{kg(e)}catch(c){Xe(e,s,c)}break;case 5:var a=e.return;try{kg(e)}catch(c){Xe(e,a,c)}}}catch(c){Xe(e,e.return,c)}if(e===t){Y=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Y=u;break}Y=e.return}}var XN=Math.ceil,fd=Qi.ReactCurrentDispatcher,Iv=Qi.ReactCurrentOwner,Fn=Qi.ReactCurrentBatchConfig,Pe=0,Pt=null,ft=null,Ot=0,yn=0,$o=Gr(0),vt=0,_u=null,Ms=0,of=0,Ev=0,$l=null,hn=null,Tv=0,ca=1/0,bi=null,pd=!1,Ng=null,Ar=null,hh=!1,_r=null,md=0,jl=0,Dg=null,Nh=-1,Dh=0;function Xt(){return Pe&6?st():Nh!==-1?Nh:Nh=st()}function Rr(t){return t.mode&1?Pe&2&&Ot!==0?Ot&-Ot:MN.transition!==null?(Dh===0&&(Dh=zP()),Dh):(t=xe,t!==0||(t=window.event,t=t===void 0?16:GP(t.type)),t):1}function Yn(t,e,n,i){if(50<jl)throw jl=0,Dg=null,Error($(185));Yu(t,n,i),(!(Pe&2)||t!==Pt)&&(t===Pt&&(!(Pe&2)&&(of|=n),vt===4&&fr(t,Ot)),vn(t,i),n===1&&Pe===0&&!(e.mode&1)&&(ca=st()+500,tf&&Kr()))}function vn(t,e){var n=t.callbackNode;ML(t,e);var i=Jh(t,t===Pt?Ot:0);if(i===0)n!==null&&XI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&XI(n),e===1)t.tag===0?ON(W0.bind(null,t)):dS(W0.bind(null,t)),bN(function(){!(Pe&6)&&Kr()}),n=null;else{switch(UP(i)){case 1:n=Z_;break;case 4:n=FP;break;case 16:n=Yh;break;case 536870912:n=BP;break;default:n=Yh}n=h1(n,r1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r1(t,e){if(Nh=-1,Dh=0,Pe&6)throw Error($(327));var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var i=Jh(t,t===Pt?Ot:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=gd(t,i);else{e=i;var r=Pe;Pe|=2;var s=o1();(Pt!==t||Ot!==e)&&(bi=null,ca=st()+500,Rs(t,e));do try{nD();break}catch(u){s1(t,u)}while(1);lv(),fd.current=s,Pe=r,ft!==null?e=0:(Pt=null,Ot=0,e=vt)}if(e!==0){if(e===2&&(r=ag(t),r!==0&&(i=r,e=Og(t,r))),e===1)throw n=_u,Rs(t,0),fr(t,i),vn(t,st()),n;if(e===6)fr(t,i);else{if(r=t.current.alternate,!(i&30)&&!eD(r)&&(e=gd(t,i),e===2&&(s=ag(t),s!==0&&(i=s,e=Og(t,s))),e===1))throw n=_u,Rs(t,0),fr(t,i),vn(t,st()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:hs(t,hn,bi);break;case 3:if(fr(t,i),(i&130023424)===i&&(e=Tv+500-st(),10<e)){if(Jh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Xt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=mg(hs.bind(null,t,hn,bi),e);break}hs(t,hn,bi);break;case 4:if(fr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-Qn(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=st()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*XN(i/1960))-i,10<i){t.timeoutHandle=mg(hs.bind(null,t,hn,bi),i);break}hs(t,hn,bi);break;case 5:hs(t,hn,bi);break;default:throw Error($(329))}}}return vn(t,st()),t.callbackNode===n?r1.bind(null,t):null}function Og(t,e){var n=$l;return t.current.memoizedState.isDehydrated&&(Rs(t,e).flags|=256),t=gd(t,e),t!==2&&(e=hn,hn=n,e!==null&&Mg(e)),t}function Mg(t){hn===null?hn=t:hn.push.apply(hn,t)}function eD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Jn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e){for(e&=~Ev,e&=~of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qn(e),i=1<<n;t[n]=-1,e&=~i}}function W0(t){if(Pe&6)throw Error($(327));Qo();var e=Jh(t,0);if(!(e&1))return vn(t,st()),null;var n=gd(t,e);if(t.tag!==0&&n===2){var i=ag(t);i!==0&&(e=i,n=Og(t,i))}if(n===1)throw n=_u,Rs(t,0),fr(t,e),vn(t,st()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hs(t,hn,bi),vn(t,st()),null}function Pv(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(ca=st()+500,tf&&Kr())}}function Vs(t){_r!==null&&_r.tag===0&&!(Pe&6)&&Qo();var e=Pe;Pe|=1;var n=Fn.transition,i=xe;try{if(Fn.transition=null,xe=1,t)return t()}finally{xe=i,Fn.transition=n,Pe=e,!(Pe&6)&&Kr()}}function Sv(){yn=$o.current,ze($o)}function Rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kN(n)),ft!==null)for(n=ft.return;n!==null;){var i=n;switch(sv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&id();break;case 3:la(),ze(gn),ze(Ht),pv();break;case 5:fv(i);break;case 4:la();break;case 13:ze(Ke);break;case 19:ze(Ke);break;case 10:uv(i.type._context);break;case 22:case 23:Sv()}n=n.return}if(Pt=t,ft=t=Cr(t.current,null),Ot=yn=e,vt=0,_u=null,Ev=of=Ms=0,hn=$l=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}n.pending=i}ws=null}return t}function s1(t,e){do{var n=ft;try{if(lv(),kh.current=dd,hd){for(var i=Ze.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}hd=!1}if(Os=0,Et=_t=Ze=null,zl=!1,pu=0,Iv.current=null,n===null||n.return===null){vt=1,_u=e,ft=null;break}e:{var s=t,a=n.return,u=n,c=e;if(e=Ot,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=u,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=L0(a);if(y!==null){y.flags&=-257,N0(y,a,u,s,e),y.mode&1&&b0(s,d,e),e=y,c=d;var S=e.updateQueue;if(S===null){var P=new Set;P.add(c),e.updateQueue=P}else S.add(c);break e}else{if(!(e&1)){b0(s,d,e),Av();break e}c=Error($(426))}}else if(Ue&&u.mode&1){var C=L0(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),N0(C,a,u,s,e),ov(ua(c,u));break e}}s=c=ua(c,u),vt!==4&&(vt=2),$l===null?$l=[s]:$l.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=$S(s,c,e);P0(s,I);break e;case 1:u=c;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ar===null||!Ar.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=jS(s,u,e);P0(s,x);break e}}s=s.return}while(s!==null)}l1(n)}catch(D){e=D,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(1)}function o1(){var t=fd.current;return fd.current=dd,t===null?dd:t}function Av(){(vt===0||vt===3||vt===2)&&(vt=4),Pt===null||!(Ms&268435455)&&!(of&268435455)||fr(Pt,Ot)}function gd(t,e){var n=Pe;Pe|=2;var i=o1();(Pt!==t||Ot!==e)&&(bi=null,Rs(t,e));do try{tD();break}catch(r){s1(t,r)}while(1);if(lv(),Pe=n,fd.current=i,ft!==null)throw Error($(261));return Pt=null,Ot=0,vt}function tD(){for(;ft!==null;)a1(ft)}function nD(){for(;ft!==null&&!RL();)a1(ft)}function a1(t){var e=c1(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?l1(t):ft=e,Iv.current=null}function l1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZN(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ft=null;return}}else if(n=KN(n,e,yn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);vt===0&&(vt=5)}function hs(t,e,n){var i=xe,r=Fn.transition;try{Fn.transition=null,xe=1,iD(t,e,n,i)}finally{Fn.transition=r,xe=i}return null}function iD(t,e,n,i){do Qo();while(_r!==null);if(Pe&6)throw Error($(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(VL(t,s),t===Pt&&(ft=Pt=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hh||(hh=!0,h1(Yh,function(){return Qo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fn.transition,Fn.transition=null;var a=xe;xe=1;var u=Pe;Pe|=4,Iv.current=null,YN(t,n),n1(n,t),TN(fg),Xh=!!dg,fg=dg=null,t.current=n,JN(n),CL(),Pe=u,xe=a,Fn.transition=s}else t.current=n;if(hh&&(hh=!1,_r=t,md=r),s=t.pendingLanes,s===0&&(Ar=null),bL(n.stateNode),vn(t,st()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(pd)throw pd=!1,t=Ng,Ng=null,t;return md&1&&t.tag!==0&&Qo(),s=t.pendingLanes,s&1?t===Dg?jl++:(jl=0,Dg=t):jl=0,Kr(),null}function Qo(){if(_r!==null){var t=UP(md),e=Fn.transition,n=xe;try{if(Fn.transition=null,xe=16>t?16:t,_r===null)var i=!1;else{if(t=_r,_r=null,md=0,Pe&6)throw Error($(331));var r=Pe;for(Pe|=4,Y=t.current;Y!==null;){var s=Y,a=s.child;if(Y.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:Ul(8,p,s)}var g=p.child;if(g!==null)g.return=p,Y=g;else for(;Y!==null;){p=Y;var _=p.sibling,y=p.return;if(XS(p),p===d){Y=null;break}if(_!==null){_.return=y,Y=_;break}Y=y}}}var S=s.alternate;if(S!==null){var P=S.child;if(P!==null){S.child=null;do{var C=P.sibling;P.sibling=null,P=C}while(P!==null)}}Y=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ul(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,Y=I;break e}Y=s.return}}var w=t.current;for(Y=w;Y!==null;){a=Y;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,Y=E;else e:for(a=w;Y!==null;){if(u=Y,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:sf(9,u)}}catch(D){Xe(u,u.return,D)}if(u===a){Y=null;break e}var x=u.sibling;if(x!==null){x.return=u.return,Y=x;break e}Y=u.return}}if(Pe=r,Kr(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(Qd,t)}catch{}i=!0}return i}finally{xe=n,Fn.transition=e}}return!1}function H0(t,e,n){e=ua(n,e),e=$S(t,e,1),t=Sr(t,e,1),e=Xt(),t!==null&&(Yu(t,1,e),vn(t,e))}function Xe(t,e,n){if(t.tag===3)H0(t,t,n);else for(;e!==null;){if(e.tag===3){H0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ar===null||!Ar.has(i))){t=ua(n,t),t=jS(e,t,1),e=Sr(e,t,1),t=Xt(),e!==null&&(Yu(e,1,t),vn(e,t));break}}e=e.return}}function rD(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(Ot&n)===n&&(vt===4||vt===3&&(Ot&130023424)===Ot&&500>st()-Tv?Rs(t,0):Ev|=n),vn(t,e)}function u1(t,e){e===0&&(t.mode&1?(e=th,th<<=1,!(th&130023424)&&(th=4194304)):e=1);var n=Xt();t=Wi(t,e),t!==null&&(Yu(t,e,n),vn(t,n))}function sD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),u1(t,n)}function oD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),u1(t,n)}var c1;c1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,GN(t,e,n);dn=!!(t.flags&131072)}else dn=!1,Ue&&e.flags&1048576&&fS(e,od,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Lh(t,e),t=e.pendingProps;var r=sa(e,Ht.current);Zo(e,n),r=gv(null,e,i,t,r,n);var s=_v();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(i)?(s=!0,rd(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,hv(e),r.updater=nf,e.stateNode=r,r._reactInternals=e,Eg(e,i,t,n),e=Sg(null,e,i,!0,s,n)):(e.tag=0,Ue&&s&&rv(e),Zt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Lh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=lD(i),t=Hn(i,t),r){case 0:e=Pg(null,e,i,t,n);break e;case 1:e=M0(null,e,i,t,n);break e;case 11:e=D0(null,e,i,t,n);break e;case 14:e=O0(null,e,i,Hn(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hn(i,r),Pg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hn(i,r),M0(t,e,i,r,n);case 3:e:{if(GS(e),t===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,_S(t,e),ud(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ua(Error($(423)),e),e=V0(t,e,i,n,r);break e}else if(i!==r){r=ua(Error($(424)),e),e=V0(t,e,i,n,r);break e}else for(In=Pr(e.stateNode.containerInfo.firstChild),Tn=e,Ue=!0,Kn=null,n=IS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oa(),i===r){e=Hi(t,e,n);break e}Zt(t,e,i,n)}e=e.child}return e;case 5:return ES(e),t===null&&yg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,pg(i,r)?a=null:s!==null&&pg(i,s)&&(e.flags|=32),HS(t,e),Zt(t,e,a,n),e.child;case 6:return t===null&&yg(e),null;case 13:return KS(t,e,n);case 4:return dv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=aa(e,null,i,n):Zt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hn(i,r),D0(t,e,i,r,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Oe(ad,i._currentValue),i._currentValue=a,s!==null)if(Jn(s.value,a)){if(s.children===r.children&&!gn.current){e=Hi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=zi(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),wg(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error($(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),wg(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Zt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Zo(e,n),r=Bn(r),i=i(r),e.flags|=1,Zt(t,e,i,n),e.child;case 14:return i=e.type,r=Hn(i,e.pendingProps),r=Hn(i.type,r),O0(t,e,i,r,n);case 15:return qS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hn(i,r),Lh(t,e),e.tag=1,_n(i)?(t=!0,rd(e)):t=!1,Zo(e,n),yS(e,i,r),Eg(e,i,r,n),Sg(null,e,i,!0,t,n);case 19:return ZS(t,e,n);case 22:return WS(t,e,n)}throw Error($(156,e.tag))};function h1(t,e){return VP(t,e)}function aD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,i){return new aD(t,e,n,i)}function Rv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lD(t){if(typeof t=="function")return Rv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H_)return 11;if(t===G_)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oh(t,e,n,i,r,s){var a=2;if(i=t,typeof t=="function")Rv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Lo:return Cs(n.children,r,s,e);case W_:a=8,r|=8;break;case Hm:return t=Mn(12,n,e,r|2),t.elementType=Hm,t.lanes=s,t;case Gm:return t=Mn(13,n,e,r),t.elementType=Gm,t.lanes=s,t;case Km:return t=Mn(19,n,e,r),t.elementType=Km,t.lanes=s,t;case wP:return af(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vP:a=10;break e;case yP:a=9;break e;case H_:a=11;break e;case G_:a=14;break e;case cr:a=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Mn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Cs(t,e,n,i){return t=Mn(7,t,i,e),t.lanes=n,t}function af(t,e,n,i){return t=Mn(22,t,i,e),t.elementType=wP,t.lanes=n,t.stateNode={isHidden:!1},t}function gm(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function _m(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yp(0),this.expirationTimes=Yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Cv(t,e,n,i,r,s,a,u,c){return t=new uD(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hv(s),t}function cD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function d1(t){if(!t)return Nr;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(_n(n))return hS(t,n,e)}return e}function f1(t,e,n,i,r,s,a,u,c){return t=Cv(n,i,!0,t,r,s,a,u,c),t.context=d1(null),n=t.current,i=Xt(),r=Rr(n),s=zi(i,r),s.callback=e??null,Sr(n,s,r),t.current.lanes=r,Yu(t,r,i),vn(t,i),t}function lf(t,e,n,i){var r=e.current,s=Xt(),a=Rr(r);return n=d1(n),e.context===null?e.context=n:e.pendingContext=n,e=zi(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Sr(r,e,a),t!==null&&(Yn(t,r,a,s),xh(t,r,a)),a}function _d(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xv(t,e){G0(t,e),(t=t.alternate)&&G0(t,e)}function hD(){return null}var p1=typeof reportError=="function"?reportError:function(t){console.error(t)};function kv(t){this._internalRoot=t}uf.prototype.render=kv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));lf(t,e,null,null)};uf.prototype.unmount=kv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vs(function(){lf(null,t,null,null)}),e[qi]=null}};function uf(t){this._internalRoot=t}uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=qP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&HP(t)}};function bv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K0(){}function dD(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var d=_d(a);s.call(d)}}var a=f1(e,i,t,0,null,!1,!1,"",K0);return t._reactRootContainer=a,t[qi]=a.current,uu(t.nodeType===8?t.parentNode:t),Vs(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var d=_d(c);u.call(d)}}var c=Cv(t,0,!1,null,null,!1,!1,"",K0);return t._reactRootContainer=c,t[qi]=c.current,uu(t.nodeType===8?t.parentNode:t),Vs(function(){lf(e,c,n,i)}),c}function hf(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var u=r;r=function(){var c=_d(a);u.call(c)}}lf(e,a,t,r)}else a=dD(n,e,t,r,i);return _d(a)}$P=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Al(e.pendingLanes);n!==0&&(Q_(e,n|1),vn(e,st()),!(Pe&6)&&(ca=st()+500,Kr()))}break;case 13:Vs(function(){var i=Wi(t,1);if(i!==null){var r=Xt();Yn(i,t,1,r)}}),xv(t,1)}};Y_=function(t){if(t.tag===13){var e=Wi(t,134217728);if(e!==null){var n=Xt();Yn(e,t,134217728,n)}xv(t,134217728)}};jP=function(t){if(t.tag===13){var e=Rr(t),n=Wi(t,e);if(n!==null){var i=Xt();Yn(n,t,e,i)}xv(t,e)}};qP=function(){return xe};WP=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};rg=function(t,e,n){switch(e){case"input":if(Ym(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=ef(i);if(!r)throw Error($(90));EP(i),Ym(i,r)}}}break;case"textarea":PP(t,n);break;case"select":e=n.value,e!=null&&Wo(t,!!n.multiple,e,!1)}};bP=Pv;LP=Vs;var fD={usingClientEntryPoint:!1,Events:[Xu,Mo,ef,xP,kP,Pv]},dl={findFiberByHostInstance:ys,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pD={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OP(t),t===null?null:t.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||hD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Qd=dh.inject(pD),yi=dh}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fD;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bv(e))throw Error($(200));return cD(t,e,null,n)};Rn.createRoot=function(t,e){if(!bv(t))throw Error($(299));var n=!1,i="",r=p1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Cv(t,1,!1,null,null,n,!1,i,r),t[qi]=e.current,uu(t.nodeType===8?t.parentNode:t),new kv(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=OP(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return Vs(t)};Rn.hydrate=function(t,e,n){if(!cf(e))throw Error($(200));return hf(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!bv(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",a=p1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=f1(e,null,t,1,n??null,r,!1,s,a),t[qi]=e.current,uu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new uf(e)};Rn.render=function(t,e,n){if(!cf(e))throw Error($(200));return hf(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!cf(t))throw Error($(40));return t._reactRootContainer?(Vs(function(){hf(null,null,t,!1,function(){t._reactRootContainer=null,t[qi]=null})}),!0):!1};Rn.unstable_batchedUpdates=Pv;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!cf(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return hf(t,e,n,!1,i)};Rn.version="18.2.0-next-9e3b772b8-20220608";function m1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m1)}catch(t){console.error(t)}}m1(),fP.exports=Rn;var g1=fP.exports,Z0=g1;qm.createRoot=Z0.createRoot,qm.hydrateRoot=Z0.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vu.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const Q0="popstate";function mD(t){t===void 0&&(t={});function e(r,s){let{pathname:a="/",search:u="",hash:c=""}=Xs(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Vg("",{pathname:a,search:u,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=r.location.href,d=c.indexOf("#");u=d===-1?c:c.slice(0,d)}return u+"#"+(typeof s=="string"?s:vd(s))}function i(r,s){df(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return _D(e,n,i,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function df(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gD(){return Math.random().toString(36).substr(2,8)}function Y0(t,e){return{usr:t.state,key:t.key,idx:e}}function Vg(t,e,n,i){return n===void 0&&(n=null),vu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xs(e):e,{state:n,key:e&&e.key||i||gD()})}function vd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Xs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function _D(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,u=vr.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(vu({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function g(){u=vr.Pop;let C=p(),I=C==null?null:C-d;d=C,c&&c({action:u,location:P.location,delta:I})}function _(C,I){u=vr.Push;let w=Vg(P.location,C,I);n&&n(w,C),d=p()+1;let E=Y0(w,d),x=P.createHref(w);try{a.pushState(E,"",x)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(x)}s&&c&&c({action:u,location:P.location,delta:1})}function y(C,I){u=vr.Replace;let w=Vg(P.location,C,I);n&&n(w,C),d=p();let E=Y0(w,d),x=P.createHref(w);a.replaceState(E,"",x),s&&c&&c({action:u,location:P.location,delta:0})}function S(C){let I=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof C=="string"?C:vd(C);return pt(I,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,I)}let P={get action(){return u},get location(){return t(r,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Q0,g),c=C,()=>{r.removeEventListener(Q0,g),c=null}},createHref(C){return e(r,C)},createURL:S,encodeLocation(C){let I=S(C);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:_,replace:y,go(C){return a.go(C)}};return P}var J0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(J0||(J0={}));function vD(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Xs(e):e,r=Lv(i.pathname||"/",n);if(r==null)return null;let s=_1(t);yD(s);let a=null;for(let u=0;a==null&&u<s.length;++u)a=CD(s[u],bD(r));return a}function _1(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(pt(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let d=xr([i,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(pt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_1(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:AD(d,s.index),routesMeta:p})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))r(s,a);else for(let c of v1(s.path))r(s,a,c)}),e}function v1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=v1(i.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function yD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RD(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const wD=/^:\w+$/,ID=3,ED=2,TD=1,PD=10,SD=-2,X0=t=>t==="*";function AD(t,e){let n=t.split("/"),i=n.length;return n.some(X0)&&(i+=SD),e&&(i+=ED),n.filter(r=>!X0(r)).reduce((r,s)=>r+(wD.test(s)?ID:s===""?TD:PD),i)}function RD(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function CD(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let a=0;a<n.length;++a){let u=n[a],c=a===n.length-1,d=r==="/"?e:e.slice(r.length)||"/",p=xD({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d);if(!p)return null;Object.assign(i,p.params);let g=u.route;s.push({params:i,pathname:xr([r,p.pathname]),pathnameBase:OD(xr([r,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(r=xr([r,p.pathnameBase]))}return s}function xD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=kD(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((d,p,g)=>{let{paramName:_,isOptional:y}=p;if(_==="*"){let P=u[g]||"";a=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const S=u[g];return y&&!S?d[_]=void 0:d[_]=LD(S||"",_),d},{}),pathname:s,pathnameBase:a,pattern:t}}function kD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),df(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(a,u,c)=>(i.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function bD(t){try{return decodeURI(t)}catch(e){return df(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function LD(t,e){try{return decodeURIComponent(t)}catch(n){return df(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Lv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function ND(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Xs(t):t;return{pathname:n?n.startsWith("/")?n:DD(n,e):e,search:MD(i),hash:VD(r)}}function DD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function vm(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function y1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function w1(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Xs(t):(r=vu({},t),pt(!r.pathname||!r.pathname.includes("?"),vm("?","pathname","search",r)),pt(!r.pathname||!r.pathname.includes("#"),vm("#","pathname","hash",r)),pt(!r.search||!r.search.includes("#"),vm("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,u;if(i||a==null)u=n;else{let g=e.length-1;if(a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let c=ND(r,u),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const xr=t=>t.join("/").replace(/\/\/+/g,"/"),OD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const I1=["post","put","patch","delete"];new Set(I1);const BD=["get",...I1];new Set(BD);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yd.apply(this,arguments)}const Nv=N.createContext(null),zD=N.createContext(null),xa=N.createContext(null),ff=N.createContext(null),Zr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),E1=N.createContext(null);function UD(t,e){let{relative:n}=e===void 0?{}:e;tc()||pt(!1);let{basename:i,navigator:r}=N.useContext(xa),{hash:s,pathname:a,search:u}=P1(t,{relative:n}),c=a;return i!=="/"&&(c=a==="/"?i:xr([i,a])),r.createHref({pathname:c,search:u,hash:s})}function tc(){return N.useContext(ff)!=null}function pf(){return tc()||pt(!1),N.useContext(ff).location}function T1(t){N.useContext(xa).static||N.useLayoutEffect(t)}function nc(){let{isDataRoute:t}=N.useContext(Zr);return t?eO():$D()}function $D(){tc()||pt(!1);let t=N.useContext(Nv),{basename:e,navigator:n}=N.useContext(xa),{matches:i}=N.useContext(Zr),{pathname:r}=pf(),s=JSON.stringify(y1(i).map(c=>c.pathnameBase)),a=N.useRef(!1);return T1(()=>{a.current=!0}),N.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let p=w1(c,JSON.parse(s),r,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:xr([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,s,r,t])}function Dv(){let{matches:t}=N.useContext(Zr),e=t[t.length-1];return e?e.params:{}}function P1(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=N.useContext(Zr),{pathname:r}=pf(),s=JSON.stringify(y1(i).map(a=>a.pathnameBase));return N.useMemo(()=>w1(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function jD(t,e){return qD(t,e)}function qD(t,e,n){tc()||pt(!1);let{navigator:i}=N.useContext(xa),{matches:r}=N.useContext(Zr),s=r[r.length-1],a=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let c=pf(),d;if(e){var p;let P=typeof e=="string"?Xs(e):e;u==="/"||(p=P.pathname)!=null&&p.startsWith(u)||pt(!1),d=P}else d=c;let g=d.pathname||"/",_=u==="/"?g:g.slice(u.length)||"/",y=vD(t,{pathname:_}),S=ZD(y&&y.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:xr([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:xr([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),r,n);return e&&S?N.createElement(ff.Provider,{value:{location:yd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:vr.Pop}},S):S}function WD(){let t=XD(),e=FD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:r},n):null,s)}const HD=N.createElement(WD,null);class GD extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?N.createElement(Zr.Provider,{value:this.props.routeContext},N.createElement(E1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KD(t){let{routeContext:e,match:n,children:i}=t,r=N.useContext(Nv);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Zr.Provider,{value:e},i)}function ZD(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));u>=0||pt(!1),s=s.slice(0,Math.min(s.length,u+1))}return s.reduceRight((u,c,d)=>{let p=c.route.id?a==null?void 0:a[c.route.id]:null,g=null;n&&(g=c.route.errorElement||HD);let _=e.concat(s.slice(0,d+1)),y=()=>{let S;return p?S=g:c.route.Component?S=N.createElement(c.route.Component,null):c.route.element?S=c.route.element:S=u,N.createElement(KD,{match:c,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:S})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?N.createElement(GD,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var S1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(S1||{}),wd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wd||{});function QD(t){let e=N.useContext(Nv);return e||pt(!1),e}function YD(t){let e=N.useContext(zD);return e||pt(!1),e}function JD(t){let e=N.useContext(Zr);return e||pt(!1),e}function A1(t){let e=JD(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function XD(){var t;let e=N.useContext(E1),n=YD(wd.UseRouteError),i=A1(wd.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function eO(){let{router:t}=QD(S1.UseNavigateStable),e=A1(wd.UseNavigateStable),n=N.useRef(!1);return T1(()=>{n.current=!0}),N.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,yd({fromRouteId:e},s)))},[t,e])}function So(t){pt(!1)}function tO(t){let{basename:e="/",children:n=null,location:i,navigationType:r=vr.Pop,navigator:s,static:a=!1}=t;tc()&&pt(!1);let u=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:u,navigator:s,static:a}),[u,s,a]);typeof i=="string"&&(i=Xs(i));let{pathname:d="/",search:p="",hash:g="",state:_=null,key:y="default"}=i,S=N.useMemo(()=>{let P=Lv(d,u);return P==null?null:{location:{pathname:P,search:p,hash:g,state:_,key:y},navigationType:r}},[u,d,p,g,_,y,r]);return S==null?null:N.createElement(xa.Provider,{value:c},N.createElement(ff.Provider,{children:n,value:S}))}function nO(t){let{children:e,location:n}=t;return jD(Fg(e),n)}new Promise(()=>{});function Fg(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(i,r)=>{if(!N.isValidElement(i))return;let s=[...e,r];if(i.type===N.Fragment){n.push.apply(n,Fg(i.props.children,s));return}i.type!==So&&pt(!1),!i.props.index||!i.props.children||pt(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Fg(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bg(){return Bg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bg.apply(this,arguments)}function iO(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function rO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sO(t,e){return t.button===0&&(!e||e==="_self")&&!rO(t)}const oO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],aO="startTransition",eE=sL[aO];function lO(t){let{basename:e,children:n,future:i,window:r}=t,s=N.useRef();s.current==null&&(s.current=mD({window:r,v5Compat:!0}));let a=s.current,[u,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:d}=i||{},p=N.useCallback(g=>{d&&eE?eE(()=>c(g)):c(g)},[c,d]);return N.useLayoutEffect(()=>a.listen(p),[a,p]),N.createElement(tO,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a})}const uO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zg=N.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:u,target:c,to:d,preventScrollReset:p,unstable_viewTransition:g}=e,_=iO(e,oO),{basename:y}=N.useContext(xa),S,P=!1;if(typeof d=="string"&&cO.test(d)&&(S=d,uO))try{let E=new URL(window.location.href),x=d.startsWith("//")?new URL(E.protocol+d):new URL(d),D=Lv(x.pathname,y);x.origin===E.origin&&D!=null?d=D+x.search+x.hash:P=!0}catch{}let C=UD(d,{relative:r}),I=hO(d,{replace:a,state:u,target:c,preventScrollReset:p,relative:r,unstable_viewTransition:g});function w(E){i&&i(E),E.defaultPrevented||I(E)}return N.createElement("a",Bg({},_,{href:S||C,onClick:P||s?i:w,ref:n,target:c}))});var tE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tE||(tE={}));var nE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nE||(nE={}));function hO(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:u}=e===void 0?{}:e,c=nc(),d=pf(),p=P1(t,{relative:a});return N.useCallback(g=>{if(sO(g,n)){g.preventDefault();let _=i!==void 0?i:vd(d)===vd(p);c(t,{replace:_,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:u})}},[d,c,p,i,r,n,t,s,a,u])}const dO="_home_page_container_1821l_1",fO="_buttons_container_1821l_9",iE={home_page_container:dO,buttons_container:fO},pO="_button_11gcf_1",mO={button:pO},Oi=({children:t,...e})=>B.jsx("button",{...e,className:mO.button,children:t}),gO="_myModal_1sefv_1",_O="_myModalContent_1sefv_11",vO="_active_1sefv_18",ym={myModal:gO,myModalContent:_O,active:vO},R1=({children:t,visible:e,setVisible:n})=>{const i=[ym.myModal];return e&&i.push(ym.active),B.jsx("div",{className:i.join(" "),onClick:()=>n(!1),children:B.jsx("div",{className:ym.myModalContent,onClick:r=>r.stopPropagation(),children:t})})},yO="_rooms_container_1ndx7_1",wO="_room_1ndx7_1",IO="_dot_1ndx7_11",wm={rooms_container:yO,room:wO,dot:IO};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},EO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let _=(u&15)<<2|d>>6,y=d&63;c||(y=64,a||(_=64)),i.push(n[p],n[g],n[_],n[y])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||u==null||d==null||g==null)throw new TO;const _=s<<2|u>>4;if(i.push(_),d!==64){const y=u<<4&240|d>>2;if(i.push(y),g!==64){const S=d<<6&192|g;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PO=function(t){const e=C1(t);return x1.encodeByteArray(e,!0)},Id=function(t){return PO(t).replace(/\./g,"")},k1=function(t){try{return x1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ed(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!SO(n)||(t[n]=Ed(t[n],e[n]));return t}function SO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=()=>AO().__FIREBASE_DEFAULTS__,CO=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&k1(t[1]);return e&&JSON.parse(e)},Ov=()=>{try{return RO()||CO()||xO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b1=()=>{var t;return(t=Ov())===null||t===void 0?void 0:t.config},kO=t=>{var e;return(e=Ov())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Id(JSON.stringify(n)),Id(JSON.stringify(a)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Mv(){var t;const e=(t=Ov())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DO(){return typeof self=="object"&&self.self===self}function L1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N1(){const t=Je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OO(){return!Mv()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yu(){try{return typeof indexedDB=="object"}catch{return!1}}function MO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="FirebaseError";class en extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=VO,Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}}class eo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?FO(s,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new en(r,u,i)}}function FO(t,e){return t.replace(BO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const BO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ug(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(sE(s)&&sE(a)){if(!Ug(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function sE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Cl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function D1(t,e){const n=new UO(t,e);return n.subscribe.bind(n)}class UO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");$O(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Im),r.error===void 0&&(r.error=Im),r.complete===void 0&&(r.complete=Im);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $O(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t){return t&&t._delegate?t._delegate:t}class Ti{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new bO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WO(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qO(t){return t===ds?void 0:t}function WO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=[];var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const O1={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},GO=ge.INFO,KO={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},ZO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=KO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mf{constructor(e){this.name=e,this._logLevel=GO,this._logHandler=ZO,this._userLogHandler=null,Fv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}function QO(t){Fv.forEach(e=>{e.setLogLevel(t)})}function YO(t,e){for(const n of Fv){let i=null;e&&e.level&&(i=O1[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const u=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(i??r.logLevel)&&t({level:ge[s].toLowerCase(),message:u,args:a,type:r.name})}}}const JO=(t,e)=>e.some(n=>t instanceof n);let oE,aE;function XO(){return oE||(oE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eM(){return aE||(aE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M1=new WeakMap,$g=new WeakMap,V1=new WeakMap,Em=new WeakMap,Bv=new WeakMap;function tM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(kr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&M1.set(n,t)}).catch(()=>{}),Bv.set(e,t),e}function nM(t){if($g.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});$g.set(t,e)}let jg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $g.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iM(t){jg=t(jg)}function rM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Tm(this),e,...n);return V1.set(i,e.sort?e.sort():[e]),kr(i)}:eM().includes(t)?function(...e){return t.apply(Tm(this),e),kr(M1.get(this))}:function(...e){return kr(t.apply(Tm(this),e))}}function sM(t){return typeof t=="function"?rM(t):(t instanceof IDBTransaction&&nM(t),JO(t,XO())?new Proxy(t,jg):t)}function kr(t){if(t instanceof IDBRequest)return tM(t);if(Em.has(t))return Em.get(t);const e=sM(t);return e!==t&&(Em.set(t,e),Bv.set(e,t)),e}const Tm=t=>Bv.get(t);function oM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),u=kr(a);return i&&a.addEventListener("upgradeneeded",c=>{i(kr(a.result),c.oldVersion,c.newVersion,kr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const aM=["get","getKey","getAll","getAllKeys","count"],lM=["put","add","delete","clear"],Pm=new Map;function lE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=lM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||aM.includes(n)))return;const s=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&c.done]))[0]};return Pm.set(e,s),s}iM(t=>({...t,get:(e,n,i)=>lE(e,n)||t.get(e,n,i),has:(e,n)=>!!lE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function cM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qg="@firebase/app",uE="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new mf("@firebase/app"),hM="@firebase/app-compat",dM="@firebase/analytics-compat",fM="@firebase/analytics",pM="@firebase/app-check-compat",mM="@firebase/app-check",gM="@firebase/auth",_M="@firebase/auth-compat",vM="@firebase/database",yM="@firebase/database-compat",wM="@firebase/functions",IM="@firebase/functions-compat",EM="@firebase/installations",TM="@firebase/installations-compat",PM="@firebase/messaging",SM="@firebase/messaging-compat",AM="@firebase/performance",RM="@firebase/performance-compat",CM="@firebase/remote-config",xM="@firebase/remote-config-compat",kM="@firebase/storage",bM="@firebase/storage-compat",LM="@firebase/firestore",NM="@firebase/firestore-compat",DM="firebase",OM="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]",MM={[qg]:"fire-core",[hM]:"fire-core-compat",[fM]:"fire-analytics",[dM]:"fire-analytics-compat",[mM]:"fire-app-check",[pM]:"fire-app-check-compat",[gM]:"fire-auth",[_M]:"fire-auth-compat",[vM]:"fire-rtdb",[yM]:"fire-rtdb-compat",[wM]:"fire-fn",[IM]:"fire-fn-compat",[EM]:"fire-iid",[TM]:"fire-iid-compat",[PM]:"fire-fcm",[SM]:"fire-fcm-compat",[AM]:"fire-perf",[RM]:"fire-perf-compat",[CM]:"fire-rc",[xM]:"fire-rc-compat",[kM]:"fire-gcs",[bM]:"fire-gcs-compat",[LM]:"fire-fst",[NM]:"fire-fst-compat","fire-js":"fire-js",[DM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Map,wu=new Map;function Td(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function F1(t,e){t.container.addOrOverwriteComponent(e)}function Mr(t){const e=t.name;if(wu.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;wu.set(e,t);for(const n of Or.values())Td(n,t);return!0}function B1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function VM(t,e,n=Dr){B1(t,e).clearInstance(n)}function FM(){wu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ui=new eo("app","Firebase",BM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zM=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=OM;function zv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Dr,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ui.create("bad-app-name",{appName:String(r)});if(n||(n=b1()),!n)throw Ui.create("no-options");const s=Or.get(r);if(s){if(Ug(n,s.options)&&Ug(i,s.config))return s;throw Ui.create("duplicate-app",{appName:r})}const a=new HO(r);for(const c of wu.values())a.addComponent(c);const u=new zM(n,i,a);return Or.set(r,u),u}function UM(t=Dr){const e=Or.get(t);if(!e&&t===Dr&&b1())return zv();if(!e)throw Ui.create("no-app",{appName:t});return e}function $M(){return Array.from(Or.values())}async function z1(t){const e=t.name;Or.has(e)&&(Or.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Ii(t,e,n){var i;let r=(i=MM[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${r}" with version "${e}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(u.join(" "));return}Mr(new Ti(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function U1(t,e){if(t!==null&&typeof t!="function")throw Ui.create("invalid-log-argument");YO(t,e)}function $1(t){QO(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="firebase-heartbeat-database",qM=1,Iu="firebase-heartbeat-store";let Sm=null;function j1(){return Sm||(Sm=oM(jM,qM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Iu)}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),Sm}async function WM(t){try{return await(await j1()).transaction(Iu).objectStore(Iu).get(q1(t))}catch(e){if(e instanceof en)Fs.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function cE(t,e){try{const i=(await j1()).transaction(Iu,"readwrite");await i.objectStore(Iu).put(e,q1(t)),await i.done}catch(n){if(n instanceof en)Fs.warn(n.message);else{const i=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(i.message)}}}function q1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=1024,GM=30*24*60*60*1e3;class KM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=hE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=GM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=hE(),{heartbeatsToSend:n,unsentEntries:i}=ZM(this._heartbeatsCache.heartbeats),r=Id(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function hE(){return new Date().toISOString().substring(0,10)}function ZM(t,e=HM){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),dE(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),dE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class QM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yu()?MO().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await WM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return cE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return cE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dE(t){return Id(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){Mr(new Ti("platform-logger",e=>new uM(e),"PRIVATE")),Mr(new Ti("heartbeat",e=>new KM(e),"PRIVATE")),Ii(qg,uE,t),Ii(qg,uE,"esm2017"),Ii("fire-js","")}YM("");const JM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:en,SDK_VERSION:Qr,_DEFAULT_ENTRY_NAME:Dr,_addComponent:Td,_addOrOverwriteComponent:F1,_apps:Or,_clearComponents:FM,_components:wu,_getProvider:B1,_registerComponent:Mr,_removeServiceInstance:VM,deleteApp:z1,getApp:UM,getApps:$M,initializeApp:zv,onLog:U1,registerVersion:Ii,setLogLevel:$1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this._delegate=e,this.firebase=n,Td(e,new Ti("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),z1(this._delegate)))}_getService(e,n=Dr){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Dr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Td(this._delegate,e)}_addOrOverwriteComponent(e){F1(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},fE=new eo("app-compat","Firebase",eV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:Ii,setLogLevel:$1,onLog:U1,apps:null,SDK_VERSION:Qr,INTERNAL:{registerComponent:u,removeApp:i,useAsService:c,modularAPIs:JM}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(d){delete e[d]}function r(d){if(d=d||Dr,!rE(e,d))throw fE.create("no-app",{appName:d});return e[d]}r.App=t;function s(d,p={}){const g=zv(d,p);if(rE(e,g.name))return e[g.name];const _=new t(g,n);return e[g.name]=_,_}function a(){return Object.keys(e).map(d=>e[d])}function u(d){const p=d.name,g=p.replace("-compat","");if(Mr(d)&&d.type==="PUBLIC"){const _=(y=r())=>{if(typeof y[g]!="function")throw fE.create("invalid-app-argument",{appName:p});return y[g]()};d.serviceProps!==void 0&&Ed(_,d.serviceProps),n[g]=_,t.prototype[g]=function(...y){return this._getService.bind(this,p).apply(this,d.multipleInstances?y:[])}}return d.type==="PUBLIC"?n[g]:null}function c(d,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(){const t=tV(XM);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:W1,extendNamespace:e,createSubscribe:D1,ErrorFactory:eo,deepExtend:Ed});function e(n){Ed(t,n)}return t}const nV=W1();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=new mf("@firebase/app-compat"),iV="@firebase/app-compat",rV="0.2.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){Ii(iV,rV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(DO()&&self.firebase!==void 0){pE.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&pE.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Le=nV;sV();var oV="firebase",aV="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Le.registerVersion(oV,aV,"app-compat");var lV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K,Uv=Uv||{},le=lV||self;function gf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ic(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function uV(t){return Object.prototype.hasOwnProperty.call(t,Am)&&t[Am]||(t[Am]=++cV)}var Am="closure_uid_"+(1e9*Math.random()>>>0),cV=0;function hV(t,e,n){return t.call.apply(t.bind,arguments)}function dV(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function qt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?qt=hV:qt=dV,qt.apply(null,arguments)}function fh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Rt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var a=Array(arguments.length-2),u=2;u<arguments.length;u++)a[u-2]=arguments[u];return e.prototype[r].apply(i,a)}}function Yr(){this.s=this.s,this.o=this.o}var fV=0;Yr.prototype.s=!1;Yr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),fV!=0)&&uV(this)};Yr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const H1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $v(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function mE(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(gf(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let a=0;a<s;a++)t[r+a]=i[a]}else t.push(i)}}function Wt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var pV=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function Eu(t){return/^[\s\xa0]*$/.test(t)}function _f(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function ui(t){return _f().indexOf(t)!=-1}function jv(t){return jv[" "](t),t}jv[" "]=function(){};function mV(t,e){var n=a2;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var gV=ui("Opera"),ha=ui("Trident")||ui("MSIE"),G1=ui("Edge"),Wg=G1||ha,K1=ui("Gecko")&&!(_f().toLowerCase().indexOf("webkit")!=-1&&!ui("Edge"))&&!(ui("Trident")||ui("MSIE"))&&!ui("Edge"),_V=_f().toLowerCase().indexOf("webkit")!=-1&&!ui("Edge");function Z1(){var t=le.document;return t?t.documentMode:void 0}var Hg;e:{var Rm="",Cm=function(){var t=_f();if(K1)return/rv:([^\);]+)(\)|;)/.exec(t);if(G1)return/Edge\/([\d\.]+)/.exec(t);if(ha)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(_V)return/WebKit\/(\S+)/.exec(t);if(gV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Cm&&(Rm=Cm?Cm[1]:""),ha){var xm=Z1();if(xm!=null&&xm>parseFloat(Rm)){Hg=String(xm);break e}}Hg=Rm}var Gg;if(le.document&&ha){var gE=Z1();Gg=gE||parseInt(Hg,10)||void 0}else Gg=void 0;var vV=Gg;function Tu(t,e){if(Wt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(K1){e:{try{jv(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:yV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tu.$.h.call(this)}}Rt(Tu,Wt);var yV={2:"touch",3:"pen",4:"mouse"};Tu.prototype.h=function(){Tu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var rc="closure_listenable_"+(1e6*Math.random()|0),wV=0;function IV(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++wV,this.fa=this.ia=!1}function vf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function qv(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function EV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Q1(t){const e={};for(const n in t)e[n]=t[n];return e}const _E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y1(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<_E.length;s++)n=_E[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function yf(t){this.src=t,this.g={},this.h=0}yf.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=Zg(t,e,i,r);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new IV(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function Kg(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=H1(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(vf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Zg(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var Wv="closure_lm_"+(1e6*Math.random()|0),km={};function J1(t,e,n,i,r){if(i&&i.once)return eA(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)J1(t,e[s],n,i,r);return null}return n=Kv(n),t&&t[rc]?t.O(e,n,ic(i)?!!i.capture:!!i,r):X1(t,e,n,!1,i,r)}function X1(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=ic(r)?!!r.capture:!!r,u=Gv(t);if(u||(t[Wv]=u=new yf(t)),n=u.add(e,n,i,a,s),n.proxy)return n;if(i=TV(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)pV||(r=a),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(nA(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function TV(){function t(n){return e.call(t.src,t.listener,n)}const e=PV;return t}function eA(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)eA(t,e[s],n,i,r);return null}return n=Kv(n),t&&t[rc]?t.P(e,n,ic(i)?!!i.capture:!!i,r):X1(t,e,n,!0,i,r)}function tA(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)tA(t,e[s],n,i,r);else i=ic(i)?!!i.capture:!!i,n=Kv(n),t&&t[rc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Zg(s,n,i,r),-1<n&&(vf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Gv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Zg(e,n,i,r)),(n=-1<t?e[t]:null)&&Hv(n))}function Hv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[rc])Kg(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(nA(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Gv(e))?(Kg(n,t),n.h==0&&(n.src=null,e[Wv]=null)):vf(t)}}}function nA(t){return t in km?km[t]:km[t]="on"+t}function PV(t,e){if(t.fa)t=!0;else{e=new Tu(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Hv(t),t=n.call(i,e)}return t}function Gv(t){return t=t[Wv],t instanceof yf?t:null}var bm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kv(t){return typeof t=="function"?t:(t[bm]||(t[bm]=function(e){return t.handleEvent(e)}),t[bm])}function At(){Yr.call(this),this.i=new yf(this),this.S=this,this.J=null}Rt(At,Yr);At.prototype[rc]=!0;At.prototype.removeEventListener=function(t,e,n,i){tA(this,t,e,n,i)};function Mt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Wt(e,t);else if(e instanceof Wt)e.target=e.target||t;else{var r=e;e=new Wt(i,t),Y1(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];r=ph(a,i,!0,e)&&r}if(a=e.g=t,r=ph(a,i,!0,e)&&r,r=ph(a,i,!1,e)&&r,n)for(s=0;s<n.length;s++)a=e.g=n[s],r=ph(a,i,!1,e)&&r}At.prototype.N=function(){if(At.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)vf(n[i]);delete t.g[e],t.h--}}this.J=null};At.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};At.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function ph(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==n){var u=a.listener,c=a.la||a.src;a.ia&&Kg(t.i,a),r=u.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Zv=le.JSON.stringify;class SV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function AV(){var t=Qv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class RV{constructor(){this.h=this.g=null}add(e,n){const i=iA.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var iA=new SV(()=>new CV,t=>t.reset());class CV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function xV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function kV(t){le.setTimeout(()=>{throw t},0)}let Pu,Su=!1,Qv=new RV,rA=()=>{const t=le.Promise.resolve(void 0);Pu=()=>{t.then(bV)}};var bV=()=>{for(var t;t=AV();){try{t.h.call(t.g)}catch(n){kV(n)}var e=iA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Su=!1};function wf(t,e){At.call(this),this.h=t||1,this.g=e||le,this.j=qt(this.qb,this),this.l=Date.now()}Rt(wf,At);K=wf.prototype;K.ga=!1;K.T=null;K.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Mt(this,"tick"),this.ga&&(Yv(this),this.start()))}};K.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Yv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}K.N=function(){wf.$.N.call(this),Yv(this),delete this.g};function Jv(t,e,n){if(typeof t=="function")n&&(t=qt(t,n));else if(t&&typeof t.handleEvent=="function")t=qt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function sA(t){t.g=Jv(()=>{t.g=null,t.i&&(t.i=!1,sA(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class LV extends Yr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sA(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Au(t){Yr.call(this),this.h=t,this.g={}}Rt(Au,Yr);var vE=[];function oA(t,e,n,i){Array.isArray(n)||(n&&(vE[0]=n.toString()),n=vE);for(var r=0;r<n.length;r++){var s=J1(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function aA(t){qv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Hv(e)},t),t.g={}}Au.prototype.N=function(){Au.$.N.call(this),aA(this)};Au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function If(){this.g=!0}If.prototype.Ea=function(){this.g=!1};function NV(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var a="",u=s.split("&"),c=0;c<u.length;c++){var d=u[c].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");a=2<=g.length&&g[1]=="type"?a+(p+"="+d+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+a})}function DV(t,e,n,i,r,s,a){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+a})}function qo(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+MV(t,n)+(i?" "+i:"")})}function OV(t,e){t.info(function(){return"TIMEOUT: "+e})}If.prototype.info=function(){};function MV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<r.length;a++)r[a]=""}}}}return Zv(n)}catch{return e}}var to={},yE=null;function Ef(){return yE=yE||new At}to.Ta="serverreachability";function lA(t){Wt.call(this,to.Ta,t)}Rt(lA,Wt);function Ru(t){const e=Ef();Mt(e,new lA(e))}to.STAT_EVENT="statevent";function uA(t,e){Wt.call(this,to.STAT_EVENT,t),this.stat=e}Rt(uA,Wt);function Jt(t){const e=Ef();Mt(e,new uA(e,t))}to.Ua="timingevent";function cA(t,e){Wt.call(this,to.Ua,t),this.size=e}Rt(cA,Wt);function sc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var Tf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xv(){}Xv.prototype.h=null;function wE(t){return t.h||(t.h=t.i())}function dA(){}var oc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ey(){Wt.call(this,"d")}Rt(ey,Wt);function ty(){Wt.call(this,"c")}Rt(ty,Wt);var Qg;function Pf(){}Rt(Pf,Xv);Pf.prototype.g=function(){return new XMLHttpRequest};Pf.prototype.i=function(){return{}};Qg=new Pf;function ac(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Au(this),this.P=VV,t=Wg?125:void 0,this.V=new wf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fA}function fA(){this.i=null,this.g="",this.h=!1}var VV=45e3,Yg={},Pd={};K=ac.prototype;K.setTimeout=function(t){this.P=t};function Jg(t,e,n){t.L=1,t.v=Af(Gi(e)),t.s=n,t.S=!0,pA(t,null)}function pA(t,e){t.G=Date.now(),lc(t),t.A=Gi(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),EA(n.i,"t",i),t.C=0,n=t.l.J,t.h=new fA,t.g=jA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new LV(qt(t.Pa,t,t.g),t.O)),oA(t.U,t.g,"readystatechange",t.nb),e=t.I?Q1(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Ru(),NV(t.j,t.u,t.A,t.m,t.W,t.s)}K.nb=function(t){t=t.target;const e=this.M;e&&pi(t)==3?e.l():this.Pa(t)};K.Pa=function(t){try{if(t==this.g)e:{const p=pi(this.g);var e=this.g.Ia();const g=this.g.da();if(!(3>p)&&(p!=3||Wg||this.g&&(this.h.h||this.g.ja()||PE(this.g)))){this.J||p!=4||e==7||(e==8||0>=g?Ru(3):Ru(2)),Sf(this);var n=this.g.da();this.ca=n;t:if(mA(this)){var i=PE(this.g);t="";var r=i.length,s=pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),ql(this);var a="";break t}this.h.i=new le.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,DV(this.j,this.u,this.A,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Eu(u)){var d=u;break t}}d=null}if(n=d)qo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xg(this,n);else{this.i=!1,this.o=3,Jt(12),Es(this),ql(this);break e}}this.S?(gA(this,p,a),Wg&&this.i&&p==3&&(oA(this.U,this.V,"tick",this.mb),this.V.start())):(qo(this.j,this.m,a,null),Xg(this,a)),p==4&&Es(this),this.i&&!this.J&&(p==4?BA(this.l,this):(this.i=!1,lc(this)))}else r2(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Jt(12)):(this.o=0,Jt(13)),Es(this),ql(this)}}}catch{}finally{}};function mA(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function gA(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=FV(t,n),r==Pd){e==4&&(t.o=4,Jt(14),i=!1),qo(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Yg){t.o=4,Jt(15),qo(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else qo(t.j,t.m,r,null),Xg(t,r);mA(t)&&r!=Pd&&r!=Yg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Jt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ay(e),e.M=!0,Jt(11))):(qo(t.j,t.m,n,"[Invalid Chunked Response]"),Es(t),ql(t))}K.mb=function(){if(this.g){var t=pi(this.g),e=this.g.ja();this.C<e.length&&(Sf(this),gA(this,t,e),this.i&&t!=4&&lc(this))}};function FV(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Pd:(n=Number(e.substring(n,i)),isNaN(n)?Yg:(i+=1,i+n>e.length?Pd:(e=e.slice(i,i+n),t.C=i+n,e)))}K.cancel=function(){this.J=!0,Es(this)};function lc(t){t.Y=Date.now()+t.P,_A(t,t.P)}function _A(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=sc(qt(t.lb,t),e)}function Sf(t){t.B&&(le.clearTimeout(t.B),t.B=null)}K.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(OV(this.j,this.A),this.L!=2&&(Ru(),Jt(17)),Es(this),this.o=2,ql(this)):_A(this,this.Y-t)};function ql(t){t.l.H==0||t.J||BA(t.l,t)}function Es(t){Sf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Yv(t.V),aA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Xg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||e_(n.i,t))){if(!t.K&&e_(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Rd(n),xf(n);else break e;oy(n),Jt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=sc(qt(n.ib,n),6e3));if(1>=SA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ts(n,11)}else if((t.K||n.g==t)&&Rd(n),!Eu(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let d=r[e];if(n.V=d[0],d=d[1],n.H==2)if(d[0]=="c"){n.K=d[1],n.pa=d[2];const p=d[3];p!=null&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];g!=null&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];_!=null&&typeof _=="number"&&0<_&&(i=1.5*_,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const y=t.g;if(y){const S=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var s=i.i;s.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(ny(s,s.h),s.h=null))}if(i.F){const P=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;P&&(i.Da=P,Fe(i.I,i.F,P))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var a=t;if(i.wa=$A(i,i.J?i.pa:null,i.Y),a.K){AA(i.i,a);var u=a,c=i.L;c&&u.setTimeout(c),u.B&&(Sf(u),lc(u)),i.g=a}else VA(i);0<n.j.length&&kf(n)}else d[0]!="stop"&&d[0]!="close"||Ts(n,7);else n.H==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?Ts(n,7):sy(n):d[0]!="noop"&&n.h&&n.h.Aa(d),n.A=0)}}Ru(4)}catch{}}function BV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(gf(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function zV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(gf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function vA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(gf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=zV(t),i=BV(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var yA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function xs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof xs){this.h=t.h,Sd(this,t.j),this.s=t.s,this.g=t.g,Ad(this,t.m),this.l=t.l;var e=t.i,n=new Cu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),IE(this,n),this.o=t.o}else t&&(e=String(t).match(yA))?(this.h=!1,Sd(this,e[1]||"",!0),this.s=xl(e[2]||""),this.g=xl(e[3]||"",!0),Ad(this,e[4]),this.l=xl(e[5]||"",!0),IE(this,e[6]||"",!0),this.o=xl(e[7]||"")):(this.h=!1,this.i=new Cu(null,this.h))}xs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kl(e,EE,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kl(e,EE,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(kl(n,n.charAt(0)=="/"?qV:jV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kl(n,HV)),t.join("")};function Gi(t){return new xs(t)}function Sd(t,e,n){t.j=n?xl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ad(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function IE(t,e,n){e instanceof Cu?(t.i=e,GV(t.i,t.h)):(n||(e=kl(e,WV)),t.i=new Cu(e,t.h))}function Fe(t,e,n){t.i.set(e,n)}function Af(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function xl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,$V),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $V(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var EE=/[#\/\?@]/g,jV=/[#\?:]/g,qV=/[#\?]/g,WV=/[#\?@]/g,HV=/#/g;function Cu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Jr(t){t.g||(t.g=new Map,t.h=0,t.i&&UV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}K=Cu.prototype;K.add=function(t,e){Jr(this),this.i=null,t=ba(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function wA(t,e){Jr(t),e=ba(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function IA(t,e){return Jr(t),e=ba(t,e),t.g.has(e)}K.forEach=function(t,e){Jr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};K.ta=function(){Jr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};K.Z=function(t){Jr(this);let e=[];if(typeof t=="string")IA(this,t)&&(e=e.concat(this.g.get(ba(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};K.set=function(t,e){return Jr(this),this.i=null,t=ba(this,t),IA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};K.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function EA(t,e,n){wA(t,e),0<n.length&&(t.i=null,t.g.set(ba(t,e),$v(n)),t.h+=n.length)}K.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=s;a[i]!==""&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")};function ba(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function GV(t,e){e&&!t.j&&(Jr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(wA(this,i),EA(this,r,n))},t)),t.j=e}var KV=class{constructor(t,e){this.g=t,this.map=e}};function TA(t){this.l=t||ZV,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ZV=10;function PA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function SA(t){return t.h?1:t.g?t.g.size:0}function e_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ny(t,e){t.g?t.g.add(e):t.h=e}function AA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}TA.prototype.cancel=function(){if(this.i=RA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function RA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return $v(t.i)}var QV=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function YV(){this.g=new QV}function JV(t,e,n){const i=n||"";try{vA(t,function(r,s){let a=r;ic(r)&&(a=Zv(r)),e.push(i+s+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function XV(t,e){const n=new If;if(le.Image){const i=new Image;i.onload=fh(mh,n,i,"TestLoadImage: loaded",!0,e),i.onerror=fh(mh,n,i,"TestLoadImage: error",!1,e),i.onabort=fh(mh,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=fh(mh,n,i,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function mh(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function uc(t){this.l=t.ec||null,this.j=t.ob||!1}Rt(uc,Xv);uc.prototype.g=function(){return new Rf(this.l,this.j)};uc.prototype.i=function(t){return function(){return t}}({});function Rf(t,e){At.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=iy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rt(Rf,At);var iy=0;K=Rf.prototype;K.open=function(t,e){if(this.readyState!=iy)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xu(this)};K.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};K.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cc(this)),this.readyState=iy};K.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xu(this)),this.g&&(this.readyState=3,xu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;CA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function CA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}K.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?cc(this):xu(this),this.readyState==3&&CA(this)}};K.Za=function(t){this.g&&(this.response=this.responseText=t,cc(this))};K.Ya=function(t){this.g&&(this.response=t,cc(this))};K.ka=function(){this.g&&cc(this)};function cc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xu(t)}K.setRequestHeader=function(t,e){this.v.append(t,e)};K.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};K.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function xu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Rf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var e2=le.JSON.parse;function tt(t){At.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=xA,this.L=this.M=!1}Rt(tt,At);var xA="",t2=/^https?$/i,n2=["POST","PUT"];K=tt.prototype;K.Oa=function(t){this.M=t};K.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Qg.g(),this.C=this.u?wE(this.u):wE(Qg),this.g.onreadystatechange=qt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){TE(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=le.FormData&&t instanceof le.FormData,!(0<=H1(n2,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LA(this),0<this.B&&((this.L=i2(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qt(this.ua,this)):this.A=Jv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){TE(this,s)}};function i2(t){return ha&&typeof t.timeout=="number"&&t.ontimeout!==void 0}K.ua=function(){typeof Uv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mt(this,"timeout"),this.abort(8))};function TE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,kA(t),Cf(t)}function kA(t){t.F||(t.F=!0,Mt(t,"complete"),Mt(t,"error"))}K.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Mt(this,"complete"),Mt(this,"abort"),Cf(this))};K.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cf(this,!0)),tt.$.N.call(this)};K.La=function(){this.s||(this.G||this.v||this.l?bA(this):this.kb())};K.kb=function(){bA(this)};function bA(t){if(t.h&&typeof Uv<"u"&&(!t.C[1]||pi(t)!=4||t.da()!=2)){if(t.v&&pi(t)==4)Jv(t.La,0,t);else if(Mt(t,"readystatechange"),pi(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.I).match(yA)[1]||null;!r&&le.self&&le.self.location&&(r=le.self.location.protocol.slice(0,-1)),i=!t2.test(r?r.toLowerCase():"")}n=i}if(n)Mt(t,"complete"),Mt(t,"success");else{t.m=6;try{var s=2<pi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",kA(t)}}finally{Cf(t)}}}}function Cf(t,e){if(t.g){LA(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Mt(t,"ready");try{n.onreadystatechange=i}catch{}}}function LA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}K.isActive=function(){return!!this.g};function pi(t){return t.g?t.g.readyState:0}K.da=function(){try{return 2<pi(this)?this.g.status:-1}catch{return-1}};K.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};K.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),e2(e)}};function PE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case xA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function r2(t){const e={};t=(t.g&&2<=pi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Eu(t[i]))continue;var n=xV(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}EV(e,function(i){return i.join(", ")})}K.Ia=function(){return this.m};K.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function NA(t){let e="";return qv(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function ry(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=NA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Fe(t,e,n))}function fl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function DA(t){this.Ga=0,this.j=[],this.l=new If,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fl("baseRetryDelayMs",5e3,t),this.hb=fl("retryDelaySeedMs",1e4,t),this.eb=fl("forwardChannelMaxRetries",2,t),this.xa=fl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new TA(t&&t.concurrentRequestLimit),this.Ja=new YV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}K=DA.prototype;K.ra=8;K.H=1;function sy(t){if(OA(t),t.H==3){var e=t.W++,n=Gi(t.I);if(Fe(n,"SID",t.K),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),hc(t,n),e=new ac(t,t.l,e),e.L=2,e.v=Af(Gi(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=jA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),lc(e)}UA(t)}function xf(t){t.g&&(ay(t),t.g.cancel(),t.g=null)}function OA(t){xf(t),t.u&&(le.clearTimeout(t.u),t.u=null),Rd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function kf(t){if(!PA(t.i)&&!t.m){t.m=!0;var e=t.Na;Pu||rA(),Su||(Pu(),Su=!0),Qv.add(e,t),t.C=0}}function s2(t,e){return SA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=sc(qt(t.Na,t,e),zA(t,t.C)),t.C++,!0)}K.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new ac(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Q1(s),Y1(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=MA(this,r,e),n=Gi(this.I),Fe(n,"RID",t),Fe(n,"CVER",22),this.F&&Fe(n,"X-HTTP-Session-Id",this.F),hc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(NA(s)))+"&"+e:this.o&&ry(n,this.o,s)),ny(this.i,r),this.bb&&Fe(n,"TYPE","init"),this.P?(Fe(n,"$req",e),Fe(n,"SID","null"),r.aa=!0,Jg(r,n,null)):Jg(r,n,e),this.H=2}}else this.H==3&&(t?SE(this,t):this.j.length==0||PA(this.i)||SE(this))};function SE(t,e){var n;e?n=e.m:n=t.W++;const i=Gi(t.I);Fe(i,"SID",t.K),Fe(i,"RID",n),Fe(i,"AID",t.V),hc(t,i),t.o&&t.s&&ry(i,t.o,t.s),n=new ac(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=MA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ny(t.i,n),Jg(n,i,e)}function hc(t,e){t.na&&qv(t.na,function(n,i){Fe(e,i,n)}),t.h&&vA({},function(n,i){Fe(e,i,n)})}function MA(t,e,n){n=Math.min(t.j.length,n);var i=t.h?qt(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){const a=["count="+n];s==-1?0<n?(s=r[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let u=!0;for(let c=0;c<n;c++){let d=r[c].g;const p=r[c].map;if(d-=s,0>d)s=Math.max(0,r[c].g-100),u=!1;else try{JV(p,a,"req"+d+"_")}catch{i&&i(p)}}if(u){i=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function VA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Pu||rA(),Su||(Pu(),Su=!0),Qv.add(e,t),t.A=0}}function oy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=sc(qt(t.Ma,t),zA(t,t.A)),t.A++,!0)}K.Ma=function(){if(this.u=null,FA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=sc(qt(this.jb,this),t)}};K.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Jt(10),xf(this),FA(this))};function ay(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function FA(t){t.g=new ac(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Gi(t.wa);Fe(e,"RID","rpc"),Fe(e,"SID",t.K),Fe(e,"AID",t.V),Fe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Fe(e,"TO",t.qa),Fe(e,"TYPE","xmlhttp"),hc(t,e),t.o&&t.s&&ry(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Af(Gi(e)),n.s=null,n.S=!0,pA(n,t)}K.ib=function(){this.v!=null&&(this.v=null,xf(this),oy(this),Jt(19))};function Rd(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function BA(t,e){var n=null;if(t.g==e){Rd(t),ay(t),t.g=null;var i=2}else if(e_(t.i,e))n=e.F,AA(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=Ef(),Mt(i,new cA(i,n)),kf(t)}else VA(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&s2(t,e)||i==2&&oy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ts(t,5);break;case 4:Ts(t,10);break;case 3:Ts(t,6);break;default:Ts(t,2)}}}function zA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ts(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=qt(t.pb,t);n||(n=new xs("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||Sd(n,"https"),Af(n)),XV(n.toString(),i)}else Jt(2);t.H=0,t.h&&t.h.za(e),UA(t),OA(t)}K.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Jt(2)):(this.l.info("Failed to ping google.com"),Jt(1))};function UA(t){if(t.H=0,t.ma=[],t.h){const e=RA(t.i);(e.length!=0||t.j.length!=0)&&(mE(t.ma,e),mE(t.ma,t.j),t.i.i.length=0,$v(t.j),t.j.length=0),t.h.ya()}}function $A(t,e,n){var i=n instanceof xs?Gi(n):new xs(n);if(i.g!="")e&&(i.g=e+"."+i.g),Ad(i,i.m);else{var r=le.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new xs(null);i&&Sd(s,i),e&&(s.g=e),r&&Ad(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Fe(i,n,e),Fe(i,"VER",t.ra),hc(t,i),i}function jA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new tt(new uc({ob:!0})):new tt(t.va),e.Oa(t.J),e}K.isActive=function(){return!!this.h&&this.h.isActive(this)};function qA(){}K=qA.prototype;K.Ba=function(){};K.Aa=function(){};K.za=function(){};K.ya=function(){};K.isActive=function(){return!0};K.Va=function(){};function Cd(){if(ha&&!(10<=Number(vV)))throw Error("Environmental error: no available transport.")}Cd.prototype.g=function(t,e){return new Sn(t,e)};function Sn(t,e){At.call(this),this.g=new DA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Eu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Eu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new La(this)}Rt(Sn,At);Sn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Jt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=$A(t,null,t.Y),kf(t)};Sn.prototype.close=function(){sy(this.g)};Sn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Zv(t),t=n);e.j.push(new KV(e.fb++,t)),e.H==3&&kf(e)};Sn.prototype.N=function(){this.g.h=null,delete this.j,sy(this.g),delete this.g,Sn.$.N.call(this)};function WA(t){ey.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Rt(WA,ey);function HA(){ty.call(this),this.status=1}Rt(HA,ty);function La(t){this.g=t}Rt(La,qA);La.prototype.Ba=function(){Mt(this.g,"a")};La.prototype.Aa=function(t){Mt(this.g,new WA(t))};La.prototype.za=function(t){Mt(this.g,new HA)};La.prototype.ya=function(){Mt(this.g,"b")};function o2(){this.blockSize=-1}function Xn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Rt(Xn,o2);Xn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Lm(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],a=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Xn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)Lm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Lm(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Lm(this,i),r=0;break}}this.h=r,this.i+=e};Xn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function ke(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var a2={};function ly(t){return-128<=t&&128>t?mV(t,function(e){return new ke([e|0],0>e?-1:0)}):new ke([t|0],0>t?-1:0)}function mi(t){if(isNaN(t)||!isFinite(t))return Yo;if(0>t)return Nt(mi(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=t_;return new ke(e,0)}function GA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Nt(GA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=mi(Math.pow(e,8)),i=Yo,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),a=parseInt(t.substring(r,r+s),e);8>s?(s=mi(Math.pow(e,s)),i=i.R(s).add(mi(a))):(i=i.R(n),i=i.add(mi(a)))}return i}var t_=4294967296,Yo=ly(0),n_=ly(1),AE=ly(16777216);K=ke.prototype;K.ea=function(){if(On(this))return-Nt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:t_+i)*e,e*=t_}return t};K.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Mi(this))return"0";if(On(this))return"-"+Nt(this).toString(t);for(var e=mi(Math.pow(t,6)),n=this,i="";;){var r=kd(n,e).g;n=xd(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Mi(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};K.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Mi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function On(t){return t.h==-1}K.X=function(t){return t=xd(this,t),On(t)?-1:Mi(t)?0:1};function Nt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new ke(n,~t.h).add(n_)}K.abs=function(){return On(this)?Nt(this):this};K.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),a=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=a>>>16,s&=65535,a&=65535,n[r]=a<<16|s}return new ke(n,n[n.length-1]&-2147483648?-1:0)};function xd(t,e){return t.add(Nt(e))}K.R=function(t){if(Mi(this)||Mi(t))return Yo;if(On(this))return On(t)?Nt(this).R(Nt(t)):Nt(Nt(this).R(t));if(On(t))return Nt(this.R(Nt(t)));if(0>this.X(AE)&&0>t.X(AE))return mi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,a=this.D(i)&65535,u=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=a*c,gh(n,2*i+2*r),n[2*i+2*r+1]+=s*c,gh(n,2*i+2*r+1),n[2*i+2*r+1]+=a*u,gh(n,2*i+2*r+1),n[2*i+2*r+2]+=s*u,gh(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new ke(n,0)};function gh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function pl(t,e){this.g=t,this.h=e}function kd(t,e){if(Mi(e))throw Error("division by zero");if(Mi(t))return new pl(Yo,Yo);if(On(t))return e=kd(Nt(t),e),new pl(Nt(e.g),Nt(e.h));if(On(e))return e=kd(t,Nt(e)),new pl(Nt(e.g),e.h);if(30<t.g.length){if(On(t)||On(e))throw Error("slowDivide_ only works with positive integers.");for(var n=n_,i=e;0>=i.X(t);)n=RE(n),i=RE(i);var r=yo(n,1),s=yo(i,1);for(i=yo(i,2),n=yo(n,2);!Mi(i);){var a=s.add(i);0>=a.X(t)&&(r=r.add(n),s=a),i=yo(i,1),n=yo(n,1)}return e=xd(t,r.R(e)),new pl(r,e)}for(r=Yo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=mi(n),a=s.R(e);On(a)||0<a.X(t);)n-=i,s=mi(n),a=s.R(e);Mi(s)&&(s=n_),r=r.add(s),t=xd(t,a)}return new pl(r,t)}K.gb=function(t){return kd(this,t).h};K.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new ke(n,this.h&t.h)};K.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new ke(n,this.h|t.h)};K.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new ke(n,this.h^t.h)};function RE(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new ke(n,t.h)}function yo(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ke(r,t.h)}Cd.prototype.createWebChannel=Cd.prototype.g;Sn.prototype.send=Sn.prototype.u;Sn.prototype.open=Sn.prototype.m;Sn.prototype.close=Sn.prototype.close;Tf.NO_ERROR=0;Tf.TIMEOUT=8;Tf.HTTP_ERROR=6;hA.COMPLETE="complete";dA.EventType=oc;oc.OPEN="a";oc.CLOSE="b";oc.ERROR="c";oc.MESSAGE="d";At.prototype.listen=At.prototype.O;tt.prototype.listenOnce=tt.prototype.P;tt.prototype.getLastError=tt.prototype.Sa;tt.prototype.getLastErrorCode=tt.prototype.Ia;tt.prototype.getStatus=tt.prototype.da;tt.prototype.getResponseJson=tt.prototype.Wa;tt.prototype.getResponseText=tt.prototype.ja;tt.prototype.send=tt.prototype.ha;tt.prototype.setWithCredentials=tt.prototype.Oa;Xn.prototype.digest=Xn.prototype.l;Xn.prototype.reset=Xn.prototype.reset;Xn.prototype.update=Xn.prototype.j;ke.prototype.add=ke.prototype.add;ke.prototype.multiply=ke.prototype.R;ke.prototype.modulo=ke.prototype.gb;ke.prototype.compare=ke.prototype.X;ke.prototype.toNumber=ke.prototype.ea;ke.prototype.toString=ke.prototype.toString;ke.prototype.getBits=ke.prototype.D;ke.fromNumber=mi;ke.fromString=GA;var l2=function(){return new Cd},u2=function(){return Ef()},Nm=Tf,c2=hA,h2=to,CE={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},d2=uc,_h=dA,f2=tt,p2=Xn,Jo=ke;const xE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new mf("@firebase/firestore");function Ao(){return Vr.logLevel}function m2(t){Vr.setLogLevel(t)}function F(t,...e){if(Vr.logLevel<=ge.DEBUG){const n=e.map(uy);Vr.debug(`Firestore (${Na}): ${t}`,...n)}}function ot(t,...e){if(Vr.logLevel<=ge.ERROR){const n=e.map(uy);Vr.error(`Firestore (${Na}): ${t}`,...n)}}function ei(t,...e){if(Vr.logLevel<=ge.WARN){const n=e.map(uy);Vr.warn(`Firestore (${Na}): ${t}`,...n)}}function uy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: `+t;throw ot(e),new Error(e)}function te(t,e){t||Q()}function g2(t,e){t||Q()}function G(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends en{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class v2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y2{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new St;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new St,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new St)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(te(typeof i.accessToken=="string"),new KA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string"),new Tt(e)}}class w2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class I2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new w2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(te(typeof n.token=="string"),this.R=n.token,new E2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=P2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ue(t,e){return t<e?-1:t>e?1:0}function da(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function QA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new qe(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new qe(0,0))}static max(){return new ee(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,i){n===void 0?n=0:n>e.length&&Q(),i===void 0?i=e.length-n:i>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ku.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ku?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),a=n.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends ku{construct(e,n,i){return new Te(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new V(b.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const S2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends ku{construct(e,n,i){return new $e(e,n,i)}static isValidIdentifier(e){return S2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new V(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new V(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(s(),r++)}if(s(),a)throw new V(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(Te.fromString(e))}static fromName(e){return new H(Te.fromString(e).popFirst(5))}static empty(){return new H(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function i_(t){return t.fields.find(e=>e.kind===2)}function fs(t){return t.fields.filter(e=>e.kind!==2)}bd.UNKNOWN_ID=-1;class Mh{constructor(e,n){this.fieldPath=e,this.kind=n}}class bu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new bu(0,An.min())}}function YA(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ee.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new An(r,H.empty(),e)}function JA(t){return new An(t.readTime,t.key,-1)}class An{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new An(ee.min(),H.empty(),-1)}static max(){return new An(ee.max(),H.empty(),-1)}}function cy(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xr(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==XA)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new R((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):R.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):R.reject(n)}static resolve(e){return new R((n,i)=>{n(e)})}static reject(e){return new R((n,i)=>{i(e)})}static waitFor(e){return new R((n,i)=>{let r=0,s=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++s,a&&s===r&&n()},c=>i(c))}),a=!0,s===r&&n()})}static or(e){let n=R.resolve(!1);for(const i of e)n=n.next(r=>r?R.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new R((i,r)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(p=>{a[d]=p,++u,u===s&&i(a)},p=>r(p))}})}static doWhile(e,n){return new R((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new St,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Wl(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=hy(i.target.error);this.V.reject(new Wl(e,r))}}static open(e,n,i,r){try{return new bf(n,e.transaction(r,i))}catch(s){throw new Wl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new R2(n)}}class Zn{constructor(e,n,i){this.name=e,this.version=n,this.p=i,Zn.S(Je())===12.2&&ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),ps(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!yu())return!1;if(Zn.C())return!0;const e=Je(),n=Zn.S(e),i=0<n&&n<10,r=Zn.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async O(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new Wl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new V(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new V(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new Wl(e,a))},r.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.N(a,r.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.O(e);const u=bf.open(this.db,e,s?"readonly":"readwrite",i),c=r(u).next(d=>(u.g(),d)).catch(d=>(u.abort(d),R.reject(d))).toPromise();return c.catch(()=>{}),await u.m,c}catch(u){const c=u,d=c.name!=="FirebaseError"&&a<3;if(F("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class A2{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ps(this.k.delete())}}class Wl extends V{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function es(t){return t.name==="IndexedDbTransactionError"}class R2{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ps(i)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),ps(this.store.add(e))}get(e){return ps(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),ps(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),ps(this.store.count())}W(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const r=this.cursor(i),s=[];return this.G(r,(a,u)=>{s.push(u)}).next(()=>s)}{const r=this.store.getAll(i.range);return new R((s,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}}j(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new R((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}H(e,n){F("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.J=!1;const r=this.cursor(i);return this.G(r,(s,a,u)=>u.delete())}Y(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.G(r,n)}Z(e){const n=this.cursor({});return new R((i,r)=>{n.onerror=s=>{const a=hy(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(u=>{u?a.continue():i()}):i()}})}G(e,n){const i=[];return new R((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void r();const c=new A2(u),d=n(u.primaryKey,u.value,c);if(d instanceof R){const p=d.catch(g=>(c.done(),R.reject(g)));i.push(p)}c.isDone?r():c.$===null?u.continue():u.continue(c.$)}}).next(()=>R.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ps(t){return new R((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=hy(i.target.error);n(r)}})}let kE=!1;function hy(t){const e=Zn.S(Je());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kE||(kE=!0,setTimeout(()=>{throw i},0)),i}}return t}class C2{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){F("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{F("IndexBackiller",`Documents written: ${await this.X.te()}`)}catch(n){es(n)?F("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Xr(n)}await this.ee(6e4)})}}class x2{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const i=new Set;let r=n,s=!0;return R.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return F("IndexBackiller",`Processing collection: ${a}`),this.re(e,a,r).next(u=>{r-=u,i.add(a)});s=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.ie(r,s)).next(u=>(F("IndexBackiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>a.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=JA(s);cy(a,i)>0&&(i=a)}),new An(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.se(i),this.oe=i=>n.writeSequenceNumber(i))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}fn._e=-1;function dc(t){return t==null}function Lu(t){return t===0&&1/t==-1/0}function tR(t){return typeof t=="number"&&Number.isInteger(t)&&!Lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bE(e)),e=k2(t.get(n),e);return bE(e)}function k2(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function bE(t){return t+""}function gi(t){const e=t.length;if(te(e>=2),e===2)return te(t.charAt(0)===""&&t.charAt(1)===""),Te.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>n)&&Q(),t.charAt(a+1)){case"":const u=t.substring(s,a);let c;r.length===0?c=u:(r+=u,c=r,r=""),i.push(c);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:Q()}s=a+2}return new Te(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t,e){return[t,tn(e)]}function nR(t,e,n){return[t,tn(e),n]}const b2={},L2=["prefixPath","collectionGroup","readTime","documentId"],N2=["prefixPath","collectionGroup","documentId"],D2=["collectionGroup","readTime","prefixPath","documentId"],O2=["canonicalId","targetId"],M2=["targetId","path"],V2=["path","targetId"],F2=["collectionId","parent"],B2=["indexId","uid"],z2=["uid","sequenceNumber"],U2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$2=["indexId","uid","orderedDocumentKey"],j2=["userId","collectionPath","documentId"],q2=["userId","collectionPath","largestBatchId"],W2=["userId","collectionGroup","largestBatchId"],iR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],H2=[...iR,"documentOverlays"],rR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sR=rR,G2=[...sR,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends eR{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Ct(t,e){const n=G(t);return Zn.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=s??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(e){return new DE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ne(this.comparator);return n.data=e,n}}class DE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new pn([])}unionWith(e){let n=new Ne($e.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aR("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(te(!!t),typeof t=="string"){let e=0;const n=Z2.exec(t);if(te(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Br(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dy(t){const e=t.mapValue.fields.__previous_value__;return Lf(e)?dy(e):e}function Nu(t){const e=Fr(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n,i,r,s,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class zr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fh={nullValue:"NULL_VALUE"};function Bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lf(t)?4:lR(t)?9007199254740991:10:Q()}function Pi(t,e){if(t===e)return!0;const n=Bs(t);if(n!==Bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nu(t).isEqual(Nu(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Fr(r.timestampValue),u=Fr(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Br(r.bytesValue).isEqual(Br(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return et(r.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return et(r.integerValue)===et(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=et(r.doubleValue),u=et(s.doubleValue);return a===u?Lu(a)===Lu(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return da(t.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:return function(r,s){const a=r.mapValue.fields||{},u=s.mapValue.fields||{};if(NE(a)!==NE(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Pi(a[c],u[c])))return!1;return!0}(t,e);default:return Q()}}function Du(t,e){return(t.values||[]).find(n=>Pi(n,e))!==void 0}function Ur(t,e){if(t===e)return 0;const n=Bs(t),i=Bs(e);if(n!==i)return ue(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,a){const u=et(s.integerValue||s.doubleValue),c=et(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return OE(t.timestampValue,e.timestampValue);case 4:return OE(Nu(t),Nu(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(s,a){const u=Br(s),c=Br(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let d=0;d<u.length&&d<c.length;d++){const p=ue(u[d],c[d]);if(p!==0)return p}return ue(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const u=ue(et(s.latitude),et(a.latitude));return u!==0?u:ue(et(s.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const u=s.values||[],c=a.values||[];for(let d=0;d<u.length&&d<c.length;++d){const p=Ur(u[d],c[d]);if(p)return p}return ue(u.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===yr.mapValue&&a===yr.mapValue)return 0;if(s===yr.mapValue)return 1;if(a===yr.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),d=a.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=ue(c[g],p[g]);if(_!==0)return _;const y=Ur(u[c[g]],d[p[g]]);if(y!==0)return y}return ue(c.length,p.length)}(t.mapValue,e.mapValue);default:throw Q()}}function OE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Fr(t),i=Fr(e),r=ue(n.seconds,i.seconds);return r!==0?r:ue(n.nanos,i.nanos)}function fa(t){return s_(t)}function s_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Fr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=s_(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${s_(n.fields[a])}`;return r+"}"}(t.mapValue):Q()}function zs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function o_(t){return!!t&&"integerValue"in t}function Ou(t){return!!t&&"arrayValue"in t}function ME(t){return!!t&&"nullValue"in t}function VE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bh(t){return!!t&&"mapValue"in t}function Hl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Hl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Y2(t){return"nullValue"in t?Fh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zs(zr.empty(),H.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Q()}function J2(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zs(zr.empty(),H.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?yr:Q()}function FE(t,e){const n=Ur(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function BE(t,e){const n=Ur(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(n)}setAll(e){let n=$e.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Hl(a):r.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Bh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){no(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Dt(Hl(this.value))}}function uR(t){const e=[];return no(t.fields,(n,i)=>{const r=new $e([n]);if(Bh(i)){const s=uR(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n,i,r,s,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Be(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,i,r){return new Be(e,1,n,ee.min(),i,r,0)}static newNoDocument(e,n){return new Be(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Be(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n){this.position=e,this.inclusive=n}}function zE(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=H.comparator(H.fromName(a.referenceValue),n.key):i=Ur(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function UE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function X2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{}class _e extends cR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new eF(e,n,i):n==="array-contains"?new iF(e,i):n==="in"?new gR(e,i):n==="not-in"?new rF(e,i):n==="array-contains-any"?new sF(e,i):new _e(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new tF(e,i):new nF(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ur(n,this.value)):n!==null&&Bs(this.value)===Bs(n)&&this.matchesComparison(Ur(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ce extends cR{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ce(e,n)}matches(e){return pa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function pa(t){return t.op==="and"}function a_(t){return t.op==="or"}function fy(t){return hR(t)&&pa(t)}function hR(t){for(const e of t.filters)if(e instanceof Ce)return!1;return!0}function l_(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(fy(t))return t.filters.map(e=>l_(e)).join(",");{const e=t.filters.map(n=>l_(n)).join(",");return`${t.op}(${e})`}}function dR(t,e){return t instanceof _e?function(i,r){return r instanceof _e&&i.op===r.op&&i.field.isEqual(r.field)&&Pi(i.value,r.value)}(t,e):t instanceof Ce?function(i,r){return r instanceof Ce&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,u)=>s&&dR(a,r.filters[u]),!0):!1}(t,e):void Q()}function fR(t,e){const n=t.filters.concat(e);return Ce.create(n,t.op)}function pR(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${fa(n.value)}`}(t):t instanceof Ce?function(n){return n.op.toString()+" {"+n.getFilters().map(pR).join(" ,")+"}"}(t):"Filter"}class eF extends _e{constructor(e,n,i){super(e,n,i),this.key=H.fromName(i.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class tF extends _e{constructor(e,n){super(e,"in",n),this.keys=mR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nF extends _e{constructor(e,n){super(e,"not-in",n),this.keys=mR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>H.fromName(i.referenceValue))}class iF extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ou(n)&&Du(n.arrayValue,this.value)}}class gR extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}}class rF extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Du(this.value.arrayValue,n)}}class sF extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ou(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Du(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,n=null,i=[],r=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=u,this.ce=null}}function u_(t,e=null,n=[],i=[],r=null,s=null,a=null){return new oF(t,e,n,i,r,s,a)}function Us(t){const e=G(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>l_(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),dc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>fa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>fa(i)).join(",")),e.ce=n}return e.ce}function fc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!X2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UE(t.startAt,e.startAt)&&UE(t.endAt,e.endAt)}function Ld(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Nd(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function $E(t,e,n){let i=Fh,r=!0;for(const s of Nd(t,e)){let a=Fh,u=!0;switch(s.op){case"<":case"<=":a=Y2(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=Fh}FE({value:i,inclusive:r},{value:a,inclusive:u})<0&&(i=a,r=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];FE({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function jE(t,e,n){let i=yr,r=!0;for(const s of Nd(t,e)){let a=yr,u=!0;switch(s.op){case">=":case">":a=J2(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=yr}BE({value:i,inclusive:r},{value:a,inclusive:u})>0&&(i=a,r=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];BE({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n=null,i=[],r=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function _R(t,e,n,i,r,s,a,u){return new Yi(t,e,n,i,r,s,a,u)}function Da(t){return new Yi(t)}function qE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function py(t){return t.collectionGroup!==null}function Xo(t){const e=G(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ne($e.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Mu(s,i))}),n.has($e.keyField().canonicalString())||e.le.push(new Mu($e.keyField(),i))}return e.le}function nn(t){const e=G(t);return e.he||(e.he=aF(e,Xo(t))),e.he}function aF(t,e){if(t.limitType==="F")return u_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Mu(r.field,s)});const n=t.endAt?new $r(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new $r(t.startAt.position,t.startAt.inclusive):null;return u_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function c_(t,e){const n=t.filters.concat([e]);return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dd(t,e,n){return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pc(t,e){return fc(nn(t),nn(e))&&t.limitType===e.limitType}function vR(t){return`${Us(nn(t))}|lt:${t.limitType}`}function Ro(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>pR(r)).join(", ")}]`),dc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>fa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>fa(r)).join(",")),`Target(${i})`}(nn(t))}; limitType=${t.limitType})`}function mc(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):H.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Xo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const d=zE(a,u,c);return a.inclusive?d<=0:d<0}(i.startAt,Xo(i),r)||i.endAt&&!function(a,u,c){const d=zE(a,u,c);return a.inclusive?d>=0:d>0}(i.endAt,Xo(i),r))}(t,e)}function yR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wR(t){return(e,n)=>{let i=!1;for(const r of Xo(t)){const s=lF(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function lF(t,e,n){const i=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,a,u){const c=a.data.field(s),d=u.data.field(s);return c!==null&&d!==null?Ur(c,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return oR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new Me(H.comparator);function mn(){return uF}const IR=new Me(H.comparator);function bl(...t){let e=IR;for(const n of t)e=e.insert(n.key,n);return e}function ER(t){let e=IR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function _i(){return Gl()}function TR(){return Gl()}function Gl(){return new ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const cF=new Me(H.comparator),hF=new Ne(H.comparator);function de(...t){let e=hF;for(const n of t)e=e.add(n);return e}const dF=new Ne(ue);function my(){return dF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(e)?"-0":e}}function SR(t){return{integerValue:""+t}}function AR(t,e){return tR(e)?SR(e):PR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function fF(t,e,n){return t instanceof ma?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Lf(s)&&(s=dy(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof $s?CR(t,e):t instanceof js?xR(t,e):function(r,s){const a=RR(r,s),u=WE(a)+WE(r.Ie);return o_(a)&&o_(r.Ie)?SR(u):PR(r.serializer,u)}(t,e)}function pF(t,e,n){return t instanceof $s?CR(t,e):t instanceof js?xR(t,e):n}function RR(t,e){return t instanceof ga?function(i){return o_(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class ma extends Nf{}class $s extends Nf{constructor(e){super(),this.elements=e}}function CR(t,e){const n=kR(e);for(const i of t.elements)n.some(r=>Pi(r,i))||n.push(i);return{arrayValue:{values:n}}}class js extends Nf{constructor(e){super(),this.elements=e}}function xR(t,e){let n=kR(e);for(const i of t.elements)n=n.filter(r=>!Pi(r,i));return{arrayValue:{values:n}}}class ga extends Nf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function WE(t){return et(t.integerValue||t.doubleValue)}function kR(t){return Ou(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.field=e,this.transform=n}}function mF(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof $s&&r instanceof $s||i instanceof js&&r instanceof js?da(i.elements,r.elements,Pi):i instanceof ga&&r instanceof ga?Pi(i.Ie,r.Ie):i instanceof ma&&r instanceof ma}(t.transform,e.transform)}class gF{constructor(e,n){this.version=e,this.transformResults=n}}class je{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new je}static exists(e){return new je(void 0,e)}static updateTime(e){return new je(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Df{}function bR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ma(t.key,je.none()):new Oa(t.key,t.data,je.none());{const n=t.data,i=Dt.empty();let r=new Ne($e.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Ji(t.key,i,new pn(r.toArray()),je.none())}}function _F(t,e,n){t instanceof Oa?function(r,s,a){const u=r.value.clone(),c=GE(r.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Ji?function(r,s,a){if(!zh(r.precondition,s))return void s.convertToUnknownDocument(a.version);const u=GE(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(LR(r)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Kl(t,e,n,i){return t instanceof Oa?function(s,a,u,c){if(!zh(s.precondition,a))return u;const d=s.value.clone(),p=KE(s.fieldTransforms,c,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ji?function(s,a,u,c){if(!zh(s.precondition,a))return u;const d=KE(s.fieldTransforms,c,a),p=a.data;return p.setAll(LR(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,a,u){return zh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function vF(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=RR(i.transform,r||null);s!=null&&(n===null&&(n=Dt.empty()),n.set(i.field,s))}return n||null}function HE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&da(i,r,(s,a)=>mF(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Oa extends Df{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ji extends Df{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function GE(t,e,n){const i=new Map;te(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,u=e.data.field(s.field);i.set(s.field,pF(a,u,n[r]))}return i}function KE(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,fF(s,a,e))}return i}class Ma extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gy extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&_F(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Kl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Kl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=TR();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(r.key)?null:u;const c=bR(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ee.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,(n,i)=>HE(n,i))&&da(this.baseMutations,e.baseMutations,(n,i)=>HE(n,i))}}class vy{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){te(e.mutations.length===i.length);let r=function(){return cF}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new vy(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Ee;function NR(t){switch(t){default:return Q();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function DR(t){if(t===void 0)return ot("GRPC error has no .code"),b.UNKNOWN;switch(t){case ht.OK:return b.OK;case ht.CANCELLED:return b.CANCELLED;case ht.UNKNOWN:return b.UNKNOWN;case ht.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case ht.INTERNAL:return b.INTERNAL;case ht.UNAVAILABLE:return b.UNAVAILABLE;case ht.UNAUTHENTICATED:return b.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case ht.NOT_FOUND:return b.NOT_FOUND;case ht.ALREADY_EXISTS:return b.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return b.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case ht.ABORTED:return b.ABORTED;case ht.OUT_OF_RANGE:return b.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return b.UNIMPLEMENTED;case ht.DATA_LOSS:return b.DATA_LOSS;default:return Q()}}(Ee=ht||(ht={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=new Jo([4294967295,4294967295],0);function ZE(t){const e=OR().encode(t),n=new p2;return n.update(e),new Uint8Array(n.digest())}function QE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jo([n,i],0),new Jo([r,s],0)]}class wy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ll(`Invalid padding: ${n}`);if(i<0)throw new Ll(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Jo.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Jo.fromNumber(i)));return r.compare(wF)===1&&(r=new Jo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=ZE(e),[i,r]=QE(n);for(let s=0;s<this.hashCount;s++){const a=this.de(i,r,s);if(!this.Ae(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new wy(s,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Te===0)return;const n=ZE(e),[i,r]=QE(n);for(let s=0;s<this.hashCount;s++){const a=this.de(i,r,s);this.Re(a)}}Re(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new _c(ee.min(),r,new Me(ue),mn(),de())}}class vc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new vc(i,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}}class MR{constructor(e,n){this.targetId=e,this.fe=n}}class VR{constructor(e,n,i=yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class YE{constructor(){this.ge=0,this.pe=XE(),this.ye=yt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=de(),n=de(),i=de();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Q()}}),new vc(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=XE()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class IF{constructor(e){this.Le=e,this.ke=new Map,this.qe=mn(),this.Qe=JE(),this.Ke=new Me(ue)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){const n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){const s=r.target;if(Ld(s))if(i===0){const a=new H(s.path);this.We(n,a,Be.newNoDocument(a,ee.min()))}else te(i===1);else{const a=this.Ze(n);if(a!==i){const u=this.Xe(e),c=u?this.et(u,e,a):1;if(c!==0){this.He(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,d)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,u;try{a=Br(i).toUint8Array()}catch(c){if(c instanceof aR)return ei("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new wy(a,r,s)}catch(c){return ei(c instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Te===0?null:u}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Le.nt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.We(n,s,null),r++)}),r}it(e){const n=new Map;this.ke.forEach((s,a)=>{const u=this.Ye(a);if(u){if(s.current&&Ld(u.target)){const c=new H(u.target.path);this.qe.get(c)!==null||this.st(a,c)||this.We(a,c,Be.newNoDocument(c,e))}s.De&&(n.set(a,s.ve()),s.Fe())}});let i=de();this.Qe.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const d=this.Ye(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(s))}),this.qe.forEach((s,a)=>a.setReadTime(e));const r=new _c(e,n,this.Ke,this.qe,i);return this.qe=mn(),this.Qe=JE(),this.Ke=new Me(ue),r}Ue(e,n){if(!this.je(e))return;const i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new YE,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ne(ue),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new YE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function JE(){return new Me(H.comparator)}function XE(){return new Me(H.comparator)}const EF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),TF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),PF=(()=>({and:"AND",or:"OR"}))();class SF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function h_(t,e){return t.useProto3Json||dc(e)?e:{value:e}}function _a(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AF(t,e){return _a(t,e.toTimestamp())}function at(t){return te(!!t),ee.fromTimestamp(function(n){const i=Fr(n);return new qe(i.seconds,i.nanos)}(t))}function Iy(t,e){return function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function BR(t){const e=Te.fromString(t);return te(KR(e)),e}function Vu(t,e){return Iy(t.databaseId,e.path)}function Ei(t,e){const n=BR(e);if(n.get(1)!==t.databaseId.projectId)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(UR(n))}function d_(t,e){return Iy(t.databaseId,e)}function zR(t){const e=BR(t);return e.length===4?Te.emptyPath():UR(e)}function Fu(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UR(t){return te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eT(t,e,n){return{name:Vu(t,e),fields:n.value.mapValue.fields}}function $R(t,e,n){const i=Ei(t,e.name),r=at(e.updateTime),s=e.createTime?at(e.createTime):ee.min(),a=new Dt({mapValue:{fields:e.fields}}),u=Be.newFoundDocument(i,r,s,a);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function RF(t,e){return"found"in e?function(i,r){te(!!r.found),r.found.name,r.found.updateTime;const s=Ei(i,r.found.name),a=at(r.found.updateTime),u=r.found.createTime?at(r.found.createTime):ee.min(),c=new Dt({mapValue:{fields:r.found.fields}});return Be.newFoundDocument(s,a,u,c)}(t,e):"missing"in e?function(i,r){te(!!r.missing),te(!!r.readTime);const s=Ei(i,r.missing),a=at(r.readTime);return Be.newNoDocument(s,a)}(t,e):Q()}function CF(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(te(p===void 0||typeof p=="string"),yt.fromBase64String(p||"")):(te(p===void 0||p instanceof Uint8Array),yt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){const p=d.code===void 0?b.UNKNOWN:DR(d.code);return new V(p,d.message||"")}(a);n=new VR(i,r,s,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ei(t,i.document.name),s=at(i.document.updateTime),a=i.document.createTime?at(i.document.createTime):ee.min(),u=new Dt({mapValue:{fields:i.document.fields}}),c=Be.newFoundDocument(r,s,a,u),d=i.targetIds||[],p=i.removedTargetIds||[];n=new Uh(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ei(t,i.document),s=i.readTime?at(i.readTime):ee.min(),a=Be.newNoDocument(r,s),u=i.removedTargetIds||[];n=new Uh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ei(t,i.document),s=i.removedTargetIds||[];n=new Uh([],s,r,null)}else{if(!("filter"in e))return Q();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new yF(r,s),u=i.targetId;n=new MR(u,a)}}return n}function Bu(t,e){let n;if(e instanceof Oa)n={update:eT(t,e.key,e.value)};else if(e instanceof Ma)n={delete:Vu(t,e.key)};else if(e instanceof Ji)n={update:eT(t,e.key,e.data),updateMask:DF(e.fieldMask)};else{if(!(e instanceof gy))return Q();n={verify:Vu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const u=a.transform;if(u instanceof ma)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof $s)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof js)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ga)return{fieldPath:a.field.canonicalString(),increment:u.Ie};throw Q()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:AF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function f_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?je.updateTime(at(s.updateTime)):s.exists!==void 0?je.exists(s.exists):je.none()}(e.currentDocument):je.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,u){let c=null;if("setToServerValue"in u)te(u.setToServerValue==="REQUEST_TIME"),c=new ma;else if("appendMissingElements"in u){const p=u.appendMissingElements.values||[];c=new $s(p)}else if("removeAllFromArray"in u){const p=u.removeAllFromArray.values||[];c=new js(p)}else"increment"in u?c=new ga(a,u.increment):Q();const d=$e.fromServerFormat(u.fieldPath);return new gc(d,c)}(t,r)):[];if(e.update){e.update.name;const r=Ei(t,e.update.name),s=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const d=c.fieldPaths||[];return new pn(d.map(p=>$e.fromServerFormat(p)))}(e.updateMask);return new Ji(r,s,a,n,i)}return new Oa(r,s,n,i)}if(e.delete){const r=Ei(t,e.delete);return new Ma(r,n)}if(e.verify){const r=Ei(t,e.verify);return new gy(r,n)}return Q()}function xF(t,e){return t&&t.length>0?(te(e!==void 0),t.map(n=>function(r,s){let a=r.updateTime?at(r.updateTime):at(s);return a.isEqual(ee.min())&&(a=at(s)),new gF(a,r.transformResults||[])}(n,e))):[]}function jR(t,e){return{documents:[d_(t,e.path)]}}function qR(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=d_(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=d_(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(c){if(c.length!==0)return GR(Ce.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Co(g.field),direction:bF(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=h_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function WR(t){let e=zR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){te(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const _=HR(g);return _ instanceof Ce&&fy(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(S){return new Mu(xo(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,dc(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,y=g.values||[];return new $r(y,_)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const _=!g.before,y=g.values||[];return new $r(y,_)}(n.endAt)),_R(e,r,a,s,u,"F",c,d)}function kF(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=xo(n.unaryFilter.field);return _e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=xo(n.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xo(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xo(n.unaryFilter.field);return _e.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(xo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ce.create(n.compositeFilter.filters.map(i=>HR(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function bF(t){return EF[t]}function LF(t){return TF[t]}function NF(t){return PF[t]}function Co(t){return{fieldPath:t.canonicalString()}}function xo(t){return $e.fromServerFormat(t.fieldPath)}function GR(t){return t instanceof _e?function(n){if(n.op==="=="){if(VE(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NAN"}};if(ME(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VE(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NAN"}};if(ME(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(n.field),op:LF(n.op),value:n.value}}}(t):t instanceof Ce?function(n){const i=n.getFilters().map(r=>GR(r));return i.length===1?i[0]:{compositeFilter:{op:NF(n.op),filters:i}}}(t):Q()}function DF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function KR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,i,r,s=ee.min(),a=ee.min(),u=yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.ut=e}}function OF(t,e){let n;if(e.document)n=$R(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=H.fromSegments(e.noDocument.path),r=Ws(e.noDocument.readTime);n=Be.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{const i=H.fromSegments(e.unknownDocument.path),r=Ws(e.unknownDocument.version);n=Be.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new qe(r[0],r[1]);return ee.fromTimestamp(s)}(e.readTime)),n}function tT(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Od(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Vu(s,a.key),fields:a.data.value.mapValue.fields,updateTime:_a(s,a.version.toTimestamp()),createTime:_a(s,a.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:qs(e.version)};else{if(!e.isUnknownDocument())return Q();i.unknownDocument={path:n.path.toArray(),version:qs(e.version)}}return i}function Od(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ws(t){const e=new qe(t.seconds,t.nanoseconds);return ee.fromTimestamp(e)}function ms(t,e){const n=(e.baseMutations||[]).map(s=>f_(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>f_(t.ut,s)),r=qe.fromMillis(e.localWriteTimeMs);return new _y(e.batchId,r,n,i)}function Nl(t){const e=Ws(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ws(t.lastLimboFreeSnapshotVersion):ee.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return te(s.documents.length===1),nn(Da(zR(s.documents[0])))}(t.query):function(s){return nn(WR(s))}(t.query),new Vi(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function QR(t,e){const n=qs(e.snapshotVersion),i=qs(e.lastLimboFreeSnapshotVersion);let r;r=Ld(e.target)?jR(t.ut,e.target):qR(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Us(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Ey(t){const e=WR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dd(e,e.limit,"L"):e}function Dm(t,e){return new yy(e.largestBatchId,f_(t.ut,e.overlayMutation))}function nT(t,e){const n=e.path.lastSegment();return[t,tn(e.path.popLast()),n]}function iT(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:qs(i.readTime),documentKey:tn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{getBundleMetadata(e,n){return rT(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:Ws(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return rT(e).put(function(r){return{bundleId:r.id,createTime:qs(at(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return sT(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Ey(s.bundledQuery),readTime:Ws(s.readTime)}}(i)})}saveNamedQuery(e,n){return sT(e).put(function(r){return{name:r.name,readTime:qs(at(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function rT(t){return Ct(t,"bundles")}function sT(t){return Ct(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){const i=n.uid||"";return new Of(e,i)}getOverlay(e,n){return ml(e).get(nT(this.userId,n)).next(i=>i?Dm(this.serializer,i):null)}getOverlays(e,n){const i=_i();return R.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const u=new yy(n,a);r.push(this.lt(e,u))}),R.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(tn(a.getCollectionPath())));const s=[];return r.forEach(a=>{const u=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(ml(e).H("collectionPathOverlayIndex",u))}),R.waitFor(s)}getOverlaysForCollection(e,n,i){const r=_i(),s=tn(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ml(e).W("collectionPathOverlayIndex",a).next(u=>{for(const c of u){const d=Dm(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=_i();let a;const u=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ml(e).Y({index:"collectionGroupOverlayIndex",range:u},(c,d,p)=>{const g=Dm(this.serializer,d);s.size()<r||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):p.done()}).next(()=>s)}lt(e,n){return ml(e).put(function(r,s,a){const[u,c,d]=nT(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Bu(r.ut,a.mutation)}}(this.serializer,this.userId,n))}}function ml(t){return Ct(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(et(e.integerValue));else if("doubleValue"in e){const i=et(e.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),Lu(i)?n.Et(0):n.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(n,20),typeof i=="string"?n.dt(i):(n.dt(`${i.seconds||""}`),n.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Br(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in e?lR(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Q()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const i=e.fields||{};this.Tt(n,55);for(const r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(e,n){const i=e.values||[];this.Tt(n,50);for(const r of i)this.Pt(r,n)}ft(e,n){this.Tt(n,37),H.fromName(e).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}gs.St=new gs;function VF(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function oT(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=VF(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class FF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Dt(i.value),i=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=n.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const n=this.Bt(e),i=oT(n);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}kt(e){const n=this.Bt(e),i=oT(n);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Dt(e){const n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class BF{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class zF{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class gl{constructor(){this.Wt=new FF,this.Gt=new BF(this.Wt),this.zt=new zF(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new _s(this.indexId,this.documentKey,this.arrayValue,i)}}function or(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=aT(t.arrayValue,e.arrayValue),n!==0?n:(n=aT(t.directionalValue,e.directionalValue),n!==0?n:H.comparator(t.documentKey,e.documentKey)))}function aT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.Jt=new Ne((n,i)=>$e.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const i=n;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(te(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=i_(e);if(n!==void 0&&!this.tn(n))return!1;const i=fs(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){const u=this.Jt.getIterator().getNext();if(!r.has(u.field.canonicalString())){const c=i[s];if(!this.nn(u,c)||!this.rn(this.Yt[a++],c))return!1}++s}for(;s<i.length;++s){const u=i[s];if(a>=this.Yt.length||!this.rn(this.Yt[a++],u))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ne($e.comparator);const n=[];for(const i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Mh(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Mh(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Mh(i.field,i.dir==="asc"?0:1)));return new bd(bd.UNKNOWN_ID,this.collectionId,n,bu.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){var e,n;if(te(t instanceof _e||t instanceof Ce),t instanceof _e){if(t instanceof gR){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>_e.create(t.field,"==",s)))||[];return Ce.create(r,"or")}return t}const i=t.filters.map(r=>YR(r));return Ce.create(i,t.op)}function UF(t){if(t.getFilters().length===0)return[];const e=g_(YR(t));return te(JR(e)),p_(e)||m_(e)?[e]:e.getFilters()}function p_(t){return t instanceof _e}function m_(t){return t instanceof Ce&&fy(t)}function JR(t){return p_(t)||m_(t)||function(n){if(n instanceof Ce&&a_(n)){for(const i of n.getFilters())if(!p_(i)&&!m_(i))return!1;return!0}return!1}(t)}function g_(t){if(te(t instanceof _e||t instanceof Ce),t instanceof _e)return t;if(t.filters.length===1)return g_(t.filters[0]);const e=t.filters.map(i=>g_(i));let n=Ce.create(e,t.op);return n=Md(n),JR(n)?n:(te(n instanceof Ce),te(pa(n)),te(n.filters.length>1),n.filters.reduce((i,r)=>Ty(i,r)))}function Ty(t,e){let n;return te(t instanceof _e||t instanceof Ce),te(e instanceof _e||e instanceof Ce),n=t instanceof _e?e instanceof _e?function(r,s){return Ce.create([r,s],"and")}(t,e):uT(t,e):e instanceof _e?uT(e,t):function(r,s){if(te(r.filters.length>0&&s.filters.length>0),pa(r)&&pa(s))return fR(r,s.getFilters());const a=a_(r)?r:s,u=a_(r)?s:r,c=a.filters.map(d=>Ty(d,u));return Ce.create(c,"or")}(t,e),Md(n)}function uT(t,e){if(pa(e))return fR(e,t.getFilters());{const n=e.filters.map(i=>Ty(t,i));return Ce.create(n,"or")}}function Md(t){if(te(t instanceof _e||t instanceof Ce),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Md(e[0]);if(hR(t))return t;const n=e.map(r=>Md(r)),i=[];return n.forEach(r=>{r instanceof _e?i.push(r):r instanceof Ce&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ce.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(){this.on=new Py}addToCollectionParentIndex(e,n){return this.on.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(An.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(An.min())}updateCollectionGroup(e,n,i){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}}class Py{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ne(Te.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ne(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Uint8Array(0);class jF{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Py,this.an=new ts(i=>Us(i),(i,r)=>fc(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:i,parent:tn(r)};return cT(e).put(s)}return R.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[QA(n),""],!1,!0);return cT(e).W(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(gi(a.parent))}return i})}addFieldIndex(e,n){const i=_l(e),r=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=Eo(e);return s.next(u=>{a.put(iT(u,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=_l(e),r=Eo(e),s=Io(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=_l(e),i=Io(e),r=Eo(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return R.forEach(this.un(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new lT(i).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=Io(e);let r=!0;const s=new Map;return R.forEach(this.un(n),a=>this.cn(e,a).next(u=>{r&&(r=!!u),s.set(a,u)})).next(()=>{if(r){let a=de();const u=[];return R.forEach(s,(c,d)=>{F("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(c)} to execute ${Us(n)}`);const p=function(E,x){const D=i_(x);if(D===void 0)return null;for(const U of Nd(E,D.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(d,c),g=function(E,x){const D=new Map;for(const U of fs(x))for(const q of Nd(E,U.fieldPath))switch(q.op){case"==":case"in":D.set(U.fieldPath.canonicalString(),q.value);break;case"not-in":case"!=":return D.set(U.fieldPath.canonicalString(),q.value),Array.from(D.values())}return null}(d,c),_=function(E,x){const D=[];let U=!0;for(const q of fs(x)){const z=q.kind===0?$E(E,q.fieldPath,E.startAt):jE(E,q.fieldPath,E.startAt);D.push(z.value),U&&(U=z.inclusive)}return new $r(D,U)}(d,c),y=function(E,x){const D=[];let U=!0;for(const q of fs(x)){const z=q.kind===0?jE(E,q.fieldPath,E.endAt):$E(E,q.fieldPath,E.endAt);D.push(z.value),U&&(U=z.inclusive)}return new $r(D,U)}(d,c),S=this.ln(c,d,_),P=this.ln(c,d,y),C=this.hn(c,d,g),I=this.Pn(c.indexId,p,S,_.inclusive,P,y.inclusive,C);return R.forEach(I,w=>i.j(w,n.limit).next(E=>{E.forEach(x=>{const D=H.fromSegments(x.documentKey);a.has(D)||(a=a.add(D),u.push(D))})}))}).next(()=>u)}return R.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=UF(Ce.create(e.filters,"and")).map(i=>u_(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,i,r,s,a,u){const c=(n!=null?n.length:1)*Math.max(i.length,s.length),d=c/(n!=null?n.length:1),p=[];for(let g=0;g<c;++g){const _=n?this.In(n[g/d]):yh,y=this.Tn(e,_,i[g%d],r),S=this.En(e,_,s[g%d],a),P=u.map(C=>this.Tn(e,_,C,!0));p.push(...this.createRange(y,S,P))}return p}Tn(e,n,i,r){const s=new _s(e,H.empty(),n,i);return r?s:s.Ht()}En(e,n,i,r){const s=new _s(e,H.empty(),n,i);return r?s.Ht():s}cn(e,n){const i=new lT(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const u of s)i.en(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a})}getIndexType(e,n){let i=2;const r=this.un(n);return R.forEach(r,s=>this.cn(e,s).next(a=>{a?i!==0&&a.fields.length<function(c){let d=new Ne($e.comparator),p=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:d=d.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}dn(e,n){const i=new gl;for(const r of fs(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.jt(r.kind);gs.St.ht(s,a)}return i.Ut()}In(e){const n=new gl;return gs.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const i=new gl;return gs.St.ht(zs(this.databaseId,n),i.jt(function(s){const a=fs(s);return a.length===0?0:a[a.length-1].kind}(e))),i.Ut()}hn(e,n,i){if(i===null)return[];let r=[];r.push(new gl);let s=0;for(const a of fs(e)){const u=i[s++];for(const c of r)if(this.Rn(n,a.fieldPath)&&Ou(u))r=this.Vn(r,a,u);else{const d=c.jt(a.kind);gs.St.ht(u,d)}}return this.mn(r)}ln(e,n,i){return this.hn(e,n,i.position)}mn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Ut();return n}Vn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const u of r){const c=new gl;c.seed(u.Ut()),gs.St.ht(a,c.jt(n.kind)),s.push(c)}return s}Rn(e,n){return!!e.filters.find(i=>i instanceof _e&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=_l(e),r=Eo(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(s=>{const a=[];return R.forEach(s,u=>r.get([u.indexId,this.uid]).next(c=>{a.push(function(p,g){const _=g?new bu(g.sequenceNumber,new An(Ws(g.readTime),new H(gi(g.documentKey)),g.largestBatchId)):bu.empty(),y=p.fields.map(([S,P])=>new Mh($e.fromServerFormat(S),P));return new bd(p.indexId,p.collectionGroup,y,_)}(u,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ue(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=_l(e),s=Eo(e);return this.fn(e).next(a=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(u=>R.forEach(u,c=>s.put(iT(c.indexId,this.user,a,i)))))}updateIndexEntries(e,n){const i=new Map;return R.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?R.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(u=>(i.set(r.collectionGroup,u),R.forEach(u,c=>this.gn(e,r,c).next(d=>{const p=this.pn(s,c);return d.isEqual(p)?R.resolve():this.yn(e,s,c,d,p)}))))})}wn(e,n,i,r){return Io(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,i,r){return Io(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,n.key),n.key.path.toArray()])}gn(e,n,i){const r=Io(e);let s=new Ne(or);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,n)])},(a,u)=>{s=s.add(new _s(i.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>s)}pn(e,n){let i=new Ne(or);const r=this.dn(n,e);if(r==null)return i;const s=i_(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Ou(a))for(const u of a.arrayValue.values||[])i=i.add(new _s(n.indexId,e.key,this.In(u),r))}else i=i.add(new _s(n.indexId,e.key,yh,r));return i}yn(e,n,i,r,s){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(c,d,p,g,_){const y=c.getIterator(),S=d.getIterator();let P=wo(y),C=wo(S);for(;P||C;){let I=!1,w=!1;if(P&&C){const E=p(P,C);E<0?w=!0:E>0&&(I=!0)}else P!=null?w=!0:I=!0;I?(g(C),C=wo(S)):w?(_(P),P=wo(y)):(P=wo(y),C=wo(S))}}(r,s,or,u=>{a.push(this.wn(e,n,i,u))},u=>{a.push(this.Sn(e,n,i,u))}),R.waitFor(a)}fn(e){let n=1;return Eo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,u)=>or(a,u)).filter((a,u,c)=>!u||or(a,c[u-1])!==0);const r=[];r.push(e);for(const a of i){const u=or(a,e),c=or(a,n);if(u===0)r[0]=e.Ht();else if(u>0&&c<0)r.push(a),r.push(a.Ht());else if(c>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.bn(r[a],r[a+1]))return[];const u=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,yh,[]],c=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,yh,[]];s.push(IDBKeyRange.bound(u,c))}return s}bn(e,n){return or(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(hT)}getMinOffset(e,n){return R.mapArray(this.un(n),i=>this.cn(e,i).next(r=>r||Q())).next(hT)}}function cT(t){return Ct(t,"collectionParents")}function Io(t){return Ct(t,"indexEntries")}function _l(t){return Ct(t,"indexConfiguration")}function Eo(t){return Ct(t,"indexState")}function hT(t){te(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;cy(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new An(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class un{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let u=0;const c=i.Y({range:a},(p,g,_)=>(u++,_.delete()));s.push(c.next(()=>{te(u===1)}));const d=[];for(const p of n.mutations){const g=nR(e,p.key.path,n.batchId);s.push(r.delete(g)),d.push(p.key)}return R.waitFor(s).next(()=>d)}function Vd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(41943040,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class Mf{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,n,i,r){te(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Mf(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ar(e).Y({index:"userMutationsIndex",range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=ko(e),a=ar(e);return a.add({}).next(u=>{te(typeof u=="number");const c=new _y(u,n,i,r),d=function(y,S,P){const C=P.baseMutations.map(w=>Bu(y.ut,w)),I=P.mutations.map(w=>Bu(y.ut,w));return{userId:S,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:C,mutations:I}}(this.serializer,this.userId,c),p=[];let g=new Ne((_,y)=>ue(_.canonicalString(),y.canonicalString()));for(const _ of r){const y=nR(this.userId,_.key.path,u);g=g.add(_.key.path.popLast()),p.push(a.put(d)),p.push(s.put(y,b2))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[u]=c.keys()}),R.waitFor(p).next(()=>c)})}lookupMutationBatch(e,n){return ar(e).get(n).next(i=>i?(te(i.userId===this.userId),ms(this.serializer,i)):null)}Cn(e,n){return this.Dn[n]?R.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Dn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ar(e).Y({index:"userMutationsIndex",range:r},(a,u,c)=>{u.userId===this.userId&&(te(u.batchId>=i),s=ms(this.serializer,u)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ar(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ar(e).W("userMutationsIndex",n).next(i=>i.map(r=>ms(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Vh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return ko(e).Y({range:r},(a,u,c)=>{const[d,p,g]=a,_=gi(p);if(d===this.userId&&n.path.isEqual(_))return ar(e).get(g).next(y=>{if(!y)throw Q();te(y.userId===this.userId),s.push(ms(this.serializer,y))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(ue);const r=[];return n.forEach(s=>{const a=Vh(this.userId,s.path),u=IDBKeyRange.lowerBound(a),c=ko(e).Y({range:u},(d,p,g)=>{const[_,y,S]=d,P=gi(y);_===this.userId&&s.path.isEqual(P)?i=i.add(S):g.done()});r.push(c)}),R.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Vh(this.userId,i),a=IDBKeyRange.lowerBound(s);let u=new Ne(ue);return ko(e).Y({range:a},(c,d,p)=>{const[g,_,y]=c,S=gi(_);g===this.userId&&i.isPrefixOf(S)?S.length===r&&(u=u.add(y)):p.done()}).next(()=>this.vn(e,u))}vn(e,n){const i=[],r=[];return n.forEach(s=>{r.push(ar(e).get(s).next(a=>{if(a===null)throw Q();te(a.userId===this.userId),i.push(ms(this.serializer,a))}))}),R.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return XR(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),R.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return ko(e).Y({range:i},(s,a,u)=>{if(s[0]===this.userId){const c=gi(s[1]);r.push(c)}else u.done()}).next(()=>{te(r.length===0)})})}containsKey(e,n){return eC(e,this.userId,n)}Mn(e){return tC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function eC(t,e,n){const i=Vh(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return ko(t).Y({range:s,J:!0},(u,c,d)=>{const[p,g,_]=u;p===e&&g===r&&(a=!0),d.done()}).next(()=>a)}function ar(t){return Ct(t,"mutations")}function ko(t){return Ct(t,"documentMutations")}function tC(t){return Ct(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Hs(0)}static Nn(){return new Hs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const i=new Hs(n.highestTargetId);return n.highestTargetId=i.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ee.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Ln(e,r)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(n,i),this.Ln(e,i))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>To(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(te(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return To(e).Y((a,u)=>{const c=Nl(u);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>R.waitFor(s)).next(()=>r)}forEachTarget(e,n){return To(e).Y((i,r)=>{const s=Nl(r);n(s)})}Bn(e){return fT(e).get("targetGlobalKey").next(n=>(te(n!==null),n))}Ln(e,n){return fT(e).put("targetGlobalKey",n)}kn(e,n){return To(e).put(QR(this.serializer,n))}qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Us(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return To(e).Y({range:r,index:"queryTargetsIndex"},(a,u,c)=>{const d=Nl(u);fc(n,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=pr(e);return n.forEach(a=>{const u=tn(a.path);r.push(s.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,a))}),R.waitFor(r)}removeMatchingKeys(e,n,i){const r=pr(e);return R.forEach(n,s=>{const a=tn(s.path);return R.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=pr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=pr(e);let s=de();return r.Y({range:i,J:!0},(a,u,c)=>{const d=gi(a[1]),p=new H(d);s=s.add(p)}).next(()=>s)}containsKey(e,n){const i=tn(n.path),r=IDBKeyRange.bound([i],[QA(i)],!1,!0);let s=0;return pr(e).Y({index:"documentTargetsIndex",J:!0,range:r},([a,u],c,d)=>{a!==0&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return To(e).get(n).next(i=>i?Nl(i):null)}}function To(t){return Ct(t,"targets")}function fT(t){return Ct(t,"targetGlobal")}function pr(t){return Ct(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT([t,e],[n,i]){const r=ue(t,n);return r===0?ue(e,i):r}class WF{constructor(e){this.Qn=e,this.buffer=new Ne(pT),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();pT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HF{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){es(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Xr(n)}await this.Gn(3e5)})}}class GF{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return R.resolve(fn._e);const i=new WF(n);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.zn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(dT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dT):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let i,r,s,a,u,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(d=Date.now(),Ao()<=ge.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-p}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function KF(t,e){return new GF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n){this.db=e,this.garbageCollector=KF(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Yn(e){let n=0;return this.Hn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(i,r)=>n(r))}addReference(e,n,i){return wh(e,i)}removeReference(e,n,i){return wh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return wh(e,n)}Xn(e,n){return function(r,s){let a=!1;return tC(r).Z(u=>eC(r,u,s).next(c=>(c&&(a=!0),R.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Zn(e,(a,u)=>{if(u<=n){const c=this.Xn(e,a).next(d=>{if(!d)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,ee.min()),pr(e).delete(function(g){return[0,tn(g.path)]}(a))))});r.push(c)}}).next(()=>R.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return wh(e,n)}Zn(e,n){const i=pr(e);let r,s=fn._e;return i.Y({index:"documentTargetsIndex"},([a,u],{path:c,sequenceNumber:d})=>{a===0?(s!==fn._e&&n(new H(gi(r)),s),s=d,r=c):s=fn._e}).next(()=>{s!==fn._e&&n(new H(gi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wh(t,e){return pr(t).put(function(i,r){return{targetId:0,path:tn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.changes=new ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?R.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return us(e).put(i)}removeEntry(e,n,i){return us(e).delete(function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Od(a),u[u.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.er(e,i)))}getEntry(e,n){let i=Be.newInvalidDocument(n);return us(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(vl(n))},(r,s)=>{i=this.tr(n,s)}).next(()=>i)}nr(e,n){let i={size:0,document:Be.newInvalidDocument(n)};return us(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(vl(n))},(r,s)=>{i={document:this.tr(n,s),size:Vd(s)}}).next(()=>i)}getEntries(e,n){let i=mn();return this.rr(e,n,(r,s)=>{const a=this.tr(r,s);i=i.insert(r,a)}).next(()=>i)}ir(e,n){let i=mn(),r=new Me(H.comparator);return this.rr(e,n,(s,a)=>{const u=this.tr(s,a);i=i.insert(s,u),r=r.insert(s,Vd(a))}).next(()=>({documents:i,sr:r}))}rr(e,n,i){if(n.isEmpty())return R.resolve();let r=new Ne(_T);n.forEach(c=>r=r.add(c));const s=IDBKeyRange.bound(vl(r.first()),vl(r.last())),a=r.getIterator();let u=a.getNext();return us(e).Y({index:"documentKeyIndex",range:s},(c,d,p)=>{const g=H.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;u&&_T(u,g)<0;)i(u,null),u=a.getNext();u&&u.isEqual(g)&&(i(u,d),u=a.hasNext()?a.getNext():null),u?p.U(vl(u)):p.done()}).next(()=>{for(;u;)i(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,u=[a.popLast().toArray(),a.lastSegment(),Od(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return us(e).W(IDBKeyRange.bound(u,c,!0)).next(d=>{s==null||s.incrementDocumentReadCount(d.length);let p=mn();for(const g of d){const _=this.tr(H.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(mc(n,_)||r.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,i,r){let s=mn();const a=gT(n,i),u=gT(n,An.max());return us(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,u,!0)},(c,d,p)=>{const g=this.tr(H.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===r&&p.done()}).next(()=>s)}newChangeBuffer(e){return new YF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return mT(e).get("remoteDocumentGlobalKey").next(n=>(te(!!n),n))}er(e,n){return mT(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const i=OF(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(ee.min())))return i}return Be.newInvalidDocument(e)}}function iC(t){return new QF(t)}class YF extends nC{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new ts(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Ne((s,a)=>ue(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const u=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,u.readTime)),a.isValidDocument()){const c=tT(this._r.serializer,a);r=r.add(s.path.popLast());const d=Vd(c);i+=d-u.size,n.push(this._r.addEntry(e,s,c))}else if(i-=u.size,this.trackRemovals){const c=tT(this._r.serializer,a.convertToNoDocument(ee.min()));n.push(this._r.addEntry(e,s,c))}}),r.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,i)),R.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(i=>(this.ar.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:i,sr:r})=>(r.forEach((s,a)=>{this.ar.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function mT(t){return Ct(t,"remoteDocumentGlobal")}function us(t){return Ct(t,"remoteDocumentsV14")}function vl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gT(t,e){const n=e.documentKey.path.toArray();return[t,Od(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function _T(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=ue(n[s],i[s]),r)return r;return r=ue(n.length,i.length),r||(r=ue(n[n.length-2],i[i.length-2]),r||ue(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Kl(i.mutation,r,pn.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){const r=_i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=bl();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=_i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let s=mn();const a=Gl(),u=function(){return Gl()}();return n.forEach((c,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Ji)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Kl(p.mutation,d,p.mutation.getFieldMask(),qe.now())):a.set(d.key,pn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var g;return u.set(d,new JF(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=Gl();let r=new Me((a,u)=>a-u),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=i.get(c)||pn.empty();p=u.applyToLocalView(d,p),i.set(c,p);const g=(r.get(u.batchId)||de()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,p=c.value,g=TR();p.forEach(_=>{if(!s.has(_)){const y=bR(n.get(_),i.get(_));y!==null&&g.set(_,y),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return R.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return H.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):py(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):R.resolve(_i());let u=-1,c=s;return a.next(d=>R.forEach(d,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?R.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,de())).next(p=>({batchId:u,changes:ER(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(i=>{let r=bl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=bl();return this.indexManager.getCollectionParents(e,s).next(u=>R.forEach(u,c=>{const d=function(g,_){return new Yi(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((c,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Be.newInvalidDocument(p)))});let u=bl();return a.forEach((c,d)=>{const p=s.get(c);p!==void 0&&Kl(p.mutation,d,pn.empty(),qe.now()),mc(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return R.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:at(r.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(r){return{name:r.name,query:Ey(r.bundledQuery),readTime:at(r.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(){this.overlays=new Me(H.comparator),this.lr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){const i=_i();return R.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.lt(e,n,s)}),R.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),R.resolve()}getOverlaysForCollection(e,n,i){const r=_i(),s=n.length+1,a=new H(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return R.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Me((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=s.get(d.largestBatchId);p===null&&(p=_i(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=_i(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=r)););return R.resolve(u)}lt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new yy(n,i));let s=this.lr.get(n);s===void 0&&(s=de(),this.lr.set(n,s)),this.lr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.hr=new Ne(It.Pr),this.Ir=new Ne(It.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const i=new It(e,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.dr(new It(e,n))}Ar(e,n){e.forEach(i=>this.removeReference(i,n))}Rr(e){const n=new H(new Te([])),i=new It(n,e),r=new It(n,e+1),s=[];return this.Ir.forEachInRange([i,r],a=>{this.dr(a),s.push(a.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new H(new Te([])),i=new It(n,e),r=new It(n,e+1);let s=de();return this.Ir.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new It(e,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return H.comparator(e.key,n.key)||ue(e.gr,n.gr)}static Tr(e,n){return ue(e.gr,n.gr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ne(It.Pr)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new _y(s,n,i,r);this.mutationQueue.push(a);for(const u of r)this.yr=this.yr.add(new It(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return R.resolve(a)}lookupMutationBatch(e,n){return R.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Sr(i),s=r<0?0:r;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new It(n,0),r=new It(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],a=>{const u=this.wr(a.gr);s.push(u)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(ue);return n.forEach(r=>{const s=new It(r,0),a=new It(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,a],u=>{i=i.add(u.gr)})}),R.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;H.isDocumentKey(s)||(s=s.child(""));const a=new It(new H(s),0);let u=new Ne(ue);return this.yr.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(c.gr)),!0)},a),R.resolve(this.br(u))}br(e){const n=[];return e.forEach(i=>{const r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){te(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return R.forEach(n.mutations,r=>{const s=new It(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,n){const i=new It(n,0),r=this.yr.firstAfterOrEqual(i);return R.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.Cr=e,this.docs=function(){return new Me(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return R.resolve(i?i.document.mutableCopy():Be.newInvalidDocument(n))}getEntries(e,n){let i=mn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Be.newInvalidDocument(r))}),R.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=mn();const a=n.path,u=new H(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||cy(JA(p),i)<=0||(r.has(p.key)||mc(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Q()}vr(e,n){return R.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new iB(this)}getSize(e){return R.resolve(this.size)}}class iB extends nC{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),R.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.persistence=e,this.Fr=new ts(n=>Us(n),fc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Sy,this.targetCount=0,this.Nr=Hs.On()}forEachTarget(e,n){return this.Fr.forEach((i,r)=>n(r)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),R.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Hs(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.kn(n),R.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Fr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Fr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),R.waitFor(s).next(()=>r)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){const i=this.Fr.get(n)||null;return R.resolve(i)}addMatchingKeys(e,n,i){return this.Or.Er(n,i),R.resolve()}removeMatchingKeys(e,n,i){this.Or.Ar(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),R.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Or.mr(n);return R.resolve(i)}containsKey(e,n){return R.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new fn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new rB(this),this.indexManager=new $F,this.remoteDocumentCache=function(r){return new nB(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new ZR(n),this.Kr=new XF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new tB(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);const r=new sB(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,n){return R.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}}class sB extends eR{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Gr=new Sy,this.zr=null}static jr(e){return new Vf(e)}get Hr(){if(this.zr)return this.zr;throw Q()}addReference(e,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),R.resolve()}removeReference(e,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Hr,i=>{const r=H.fromPath(i);return this.Jr(e,r).next(s=>{s||n.removeEntry(r,ee.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return R.or([()=>R.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e){this.serializer=e}N(e,n,i,r){const s=new bf("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LE,{unique:!0}),c.createObjectStore("documentMutations")}(e),vT(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=R.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),vT(e)),a=a.next(()=>function(c){const d=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(c,d){return d.store("mutations").W().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LE,{unique:!0});const g=d.store("mutations"),_=p.map(y=>g.put(y));return R.waitFor(_)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Zr(s))),i<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(a=a.next(()=>this.ei(s))),i<8&&r>=8&&(a=a.next(()=>this.ti(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ni(s))),i<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(c){const d=c.createObjectStore("documentOverlays",{keyPath:j2});d.createIndex("collectionPathOverlayIndex",q2,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",W2,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(c){const d=c.createObjectStore("remoteDocumentsV14",{keyPath:L2});d.createIndex("documentKeyIndex",N2),d.createIndex("collectionGroupIndex",D2)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.ii(e,s))),i<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:B2}).createIndex("sequenceNumberIndex",z2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:U2}).createIndex("documentKeyIndex",$2,{unique:!1})}(e))),a}Xr(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=Vd(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>R.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",a).next(u=>R.forEach(u,c=>{te(c.userId===s.userId);const d=ms(this.serializer,c);return XR(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Y((a,u)=>{const c=new Te(a),d=function(g){return[0,tn(g)]}(c);s.push(n.get(d).next(p=>p?R.resolve():(g=>n.put({targetId:0,path:tn(g),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:F2});const i=n.store("collectionParents"),r=new Py,s=a=>{if(r.add(a)){const u=a.lastSegment(),c=a.popLast();return i.put({collectionId:u,parent:tn(c)})}};return n.store("remoteDocuments").Y({J:!0},(a,u)=>{const c=new Te(a);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([a,u,c],d)=>{const p=gi(u);return s(p.popLast())}))}ni(e){const n=e.store("targets");return n.Y((i,r)=>{const s=Nl(r),a=QR(this.serializer,s);return n.put(a)})}ri(e,n){const i=n.store("remoteDocuments"),r=[];return i.Y((s,a)=>{const u=n.store("remoteDocumentsV14"),c=function(g){return g.document?new H(Te.fromString(g.document.name).popFirst(5)):g.noDocument?H.fromSegments(g.noDocument.path):g.unknownDocument?H.fromSegments(g.unknownDocument.path):Q()}(a).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(u.put(d))}).next(()=>R.waitFor(r))}ii(e,n){const i=n.store("mutations"),r=iC(this.serializer),s=new sC(Vf.jr,this.serializer.ut);return i.W().next(a=>{const u=new Map;return a.forEach(c=>{var d;let p=(d=u.get(c.userId))!==null&&d!==void 0?d:de();ms(this.serializer,c).keys().forEach(g=>p=p.add(g)),u.set(c.userId,p)}),R.forEach(u,(c,d)=>{const p=new Tt(d),g=Of.ct(this.serializer,p),_=s.getIndexManager(p),y=Mf.ct(p,this.serializer,_,s.referenceDelegate);return new rC(r,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new r_(n,fn._e),c).next()})})}}function vT(t){t.createObjectStore("targetDocuments",{keyPath:M2}).createIndex("documentTargetsIndex",V2,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",O2,{unique:!0}),t.createObjectStore("targetGlobal")}const Om="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ay{constructor(e,n,i,r,s,a,u,c,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.si=s,this.window=a,this.document=u,this.oi=d,this._i=p,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!Ay.D())throw new V(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZF(this,r),this.Ii=n+"main",this.serializer=new ZR(c),this.Ti=new Zn(this.Ii,this.ai,new oB(this.serializer)),this.qr=new qF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iC(this.serializer),this.Kr=new MF,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,p===!1&&ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(b.FAILED_PRECONDITION,Om);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new fn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(async()=>{this.started&&await this.di()}))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ih(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(es(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return yl(e).get("owner").next(n=>R.resolve(this.wi(n)))}Si(e){return Ih(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Ct(n,"clientMetadata");return i.W().next(r=>{const s=this.Ci(r,18e5),a=r.filter(u=>s.indexOf(u)===-1);return R.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ei)for(const n of e)this.Ei.removeItem(this.vi(n.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?R.resolve(!0):yl(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new V(b.FAILED_PRECONDITION,Om);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ih(e).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,u=this.networkEnabled===r.networkEnabled;if(s||a&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new r_(e,fn._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()}Ci(e,n){return e.filter(i=>this.Di(i.updateTimeMs,n)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Ih(e).W().next(n=>this.Ci(n,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Mf.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jF(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Of.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,i){F("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?G2:c===14?sR:c===13?rR:c===12?H2:c===11?iR:void Q()}(this.ai);let a;return this.Ti.runTransaction(e,r,s,u=>(a=new r_(u,this.Lr?this.Lr.next():fn._e),n==="readwrite-primary"?this.fi(a).next(c=>!!c||this.gi(a)).next(c=>{if(!c)throw ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new V(b.FAILED_PRECONDITION,XA);return i(a)}).next(c=>this.yi(a).next(()=>c)):this.Li(a).next(()=>i(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}Li(e){return yl(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new V(b.FAILED_PRECONDITION,Om)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yl(e).put("owner",n)}static D(){return Zn.D()}pi(e){const n=yl(e);return n.get("owner").next(i=>this.wi(i)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Di(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;OO()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const i=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ot("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ot("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yl(t){return Ct(t,"owner")}function Ih(t){return Ct(t,"clientMetadata")}function Ry(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ki=i,this.qi=r}static Qi(e,n){let i=de(),r=de();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Cy(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.zi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ji(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new aB;return this.Hi(e,n,a).next(u=>{if(s.result=u,this.$i)return this.Ji(e,n,a,u.size)})}).next(()=>s.result)}Ji(e,n,i,r){return i.documentReadCount<this.Ui?(Ao()<=ge.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),R.resolve()):(Ao()<=ge.DEBUG&&F("QueryEngine","Query:",Ro(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Ao()<=ge.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(n))):R.resolve())}zi(e,n){if(qE(n))return R.resolve(null);let i=nn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Dd(n,null,"F"),i=nn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=de(...s);return this.Gi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.Yi(n,u);return this.Zi(n,d,a,c.readTime)?this.zi(e,Dd(n,null,"F")):this.Xi(e,d,n,c)}))})))}ji(e,n,i,r){return qE(n)||r.isEqual(ee.min())?R.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const a=this.Yi(n,s);return this.Zi(n,a,i,r)?R.resolve(null):(Ao()<=ge.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ro(n)),this.Xi(e,a,n,YA(r,-1)).next(u=>u))})}Yi(e,n){let i=new Ne(wR(e));return n.forEach((r,s)=>{mc(e,s)&&(i=i.add(s))}),i}Zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,n,i){return Ao()<=ge.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ro(n)),this.Gi.getDocumentsMatchingQuery(e,n,An.min(),i)}Xi(e,n,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n,i,r){this.persistence=e,this.es=n,this.serializer=r,this.ts=new Me(ue),this.ns=new ts(s=>Us(s),fc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rC(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function aC(t,e,n,i){return new lB(t,e,n,i)}async function lC(t,e){const n=G(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.os(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],u=[];let c=de();for(const d of r){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of s){u.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(d=>({_s:d,removedBatchIds:a,addedBatchIds:u}))})})}function uB(t,e){const n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(u,c,d,p){const g=d.batch,_=g.keys();let y=R.resolve();return _.forEach(S=>{y=y.next(()=>p.getEntry(c,S)).next(P=>{const C=d.docVersions.get(S);te(C!==null),P.version.compareTo(C)<0&&(g.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),p.addEntry(P)))})}),y.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=de();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function uC(t){const e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function cB(t,e){const n=G(t),i=e.snapshotVersion;let r=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.ss.newChangeBuffer({trackRemovals:!0});r=n.ts;const u=[];e.targetChanges.forEach((p,g)=>{const _=r.get(g);if(!_)return;u.push(n.qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,p.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?y=y.withResumeToken(yt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):p.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(p.resumeToken,i)),r=r.insert(g,y),function(P,C,I){return P.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,y,p)&&u.push(n.qr.updateTargetData(s,y))});let c=mn(),d=de();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(cC(s,a,e.documentUpdates).next(p=>{c=p.us,d=p.cs})),!i.isEqual(ee.min())){const p=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));u.push(p)}return R.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.ts=r,s))}function cC(t,e,n){let i=de(),r=de();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=mn();return n.forEach((u,c)=>{const d=s.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):F("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{us:a,cs:r}})}function hB(t,e){const n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function va(t,e){const n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.qr.getTargetData(i,e).next(s=>s?(r=s,R.resolve(r)):n.qr.allocateTargetId(i).next(a=>(r=new Vi(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(i.targetId,i),n.ns.set(e,i.targetId)),i})}async function ya(t,e,n){const i=G(t),r=i.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!es(a))throw a;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}function Fd(t,e,n){const i=G(t);let r=ee.min(),s=de();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,p){const g=G(c),_=g.ns.get(p);return _!==void 0?R.resolve(g.ts.get(_)):g.qr.getTargetData(d,p)}(i,a,nn(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>i.es.getDocumentsMatchingQuery(a,e,n?r:ee.min(),n?s:de())).next(u=>(fC(i,yR(e),u),{documents:u,ls:s})))}function hC(t,e){const n=G(t),i=G(n.qr),r=n.ts.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(a=>a?a.target:null))}function dC(t,e){const n=G(t),i=n.rs.get(e)||ee.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.ss.getAllFromCollectionGroup(r,e,YA(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(fC(n,e,r),r))}function fC(t,e,n){let i=t.rs.get(e)||ee.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.rs.set(e,i)}async function dB(t,e,n,i){const r=G(t);let s=de(),a=mn();for(const d of n){const p=e.hs(d.metadata.name);d.document&&(s=s.add(p));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),a=a.insert(p,g)}const u=r.ss.newChangeBuffer({trackRemovals:!0}),c=await va(r,function(p){return nn(Da(Te.fromString(`__bundle__/docs/${p}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",d=>cC(d,u,a).next(p=>(u.apply(d),p)).next(p=>r.qr.removeMatchingKeysForTargetId(d,c.targetId).next(()=>r.qr.addMatchingKeys(d,s,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,p.us,p.cs)).next(()=>p.us)))}async function fB(t,e,n=de()){const i=await va(t,nn(Ey(e.bundledQuery))),r=G(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=at(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Kr.saveNamedQuery(s,e);const u=i.withResumeToken(yt.EMPTY_BYTE_STRING,a);return r.ts=r.ts.insert(u.targetId,u),r.qr.updateTargetData(s,u).next(()=>r.qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.qr.addMatchingKeys(s,n,i.targetId)).next(()=>r.Kr.saveNamedQuery(s,e))})}function yT(t,e){return`firestore_clients_${t}_${e}`}function wT(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Mm(t,e){return`firestore_targets_${t}_${e}`}class Bd{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ts(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new V(r.error.code,r.error.message))),a?new Bd(e,n,r.state,s):(ot("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zl{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ts(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new V(i.error.code,i.error.message))),s?new Zl(e,i.state,r):(ot("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=my();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=tR(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new zd(e,s):(ot("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class xy{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new xy(n.clientId,n.onlineState):(ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class __{constructor(){this.activeTargetIds=my()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vm{constructor(e,n,i,r,s){this.window=e,this.si=n,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Me(ue),this.started=!1,this.ps=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=yT(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new __),this.Ss=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const i of e){if(i===this.Rs)continue;const r=this.getItem(yT(this.persistenceKey,i));if(r){const s=zd.Ts(i,r);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();const n=this.storage.getItem(this.Cs);if(n){const i=this.Ms(n);i&&this.xs(i)}for(const i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,i){this.Ns(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Mm(this.persistenceKey,e));if(i){const r=Zl.Ts(e,i);r&&(n=r.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mm(this.persistenceKey,e))}updateQueryState(e,n,i){this.ks(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return F("SharedClientState","READ",e,n),n}setItem(e,n){F("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const n=e;if(n.storageArea===this.storage){if(F("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){const i=this.Ks(n.key);return this.$s(i,null)}{const i=this.Us(n.key,n.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(n.key)){if(n.newValue!==null){const i=this.Ws(n.key,n.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const i=this.zs(n.key,n.newValue);if(i)return this.js(i)}}else if(n.key===this.Cs){if(n.newValue!==null){const i=this.Ms(n.newValue);if(i)return this.xs(i)}}else if(n.key===this.ws){const i=function(s){let a=fn._e;if(s!=null)try{const u=JSON.parse(s);te(typeof u=="number"),a=u}catch(u){ot("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(n.newValue);i!==fn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.vs){const i=this.Hs(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(n)})}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,i){const r=new Bd(this.currentUser,e,n,i),s=wT(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){const n=wT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){const n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,i){const r=Mm(this.persistenceKey,e),s=new Zl(e,n,i);this.setItem(r,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const i=this.Ks(e);return zd.Ts(i,n)}Ws(e,n){const i=this.bs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Bd.Ts(new Tt(s),r,n)}zs(e,n){const i=this.Ds.exec(e),r=Number(i[1]);return Zl.Ts(r,n)}Ms(e){return xy.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const i=n?this.gs.insert(e,n):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),a=[],u=[];return s.forEach(c=>{r.has(c)||a.push(c)}),r.forEach(c=>{s.has(c)||u.push(c)}),this.syncEngine.Xs(a,u).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=my();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class pC{constructor(){this.eo=new __,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,i){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new __,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=null;function Fm(){return Eh===null?Eh=function(){return 268435456+Math.round(2147483648*Math.random())}():Eh++,"0x"+Eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class _B extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+n.host,this.fo=`projects/${r}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(n,i,r,s,a){const u=Fm(),c=this.So(n,i);F("RestConnection",`Sending RPC '${n}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,a),this.Do(n,c,d,r).then(p=>(F("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw ei("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",r),p})}Co(n,i,r,s,a,u){return this.wo(n,i,r,s,a)}bo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>n[a]=s),r&&r.headers.forEach((s,a)=>n[a]=s)}So(n,i){const r=mB[n];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,i,r){const s=Fm();return new Promise((a,u)=>{const c=new f2;c.setWithCredentials(!0),c.listenOnce(c2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nm.NO_ERROR:const p=c.getResponseJson();F($t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Nm.TIMEOUT:F($t,`RPC '${e}' ${s} timed out`),u(new V(b.DEADLINE_EXCEEDED,"Request time out"));break;case Nm.HTTP_ERROR:const g=c.getStatus();if(F($t,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_==null?void 0:_.error;if(y&&y.status&&y.message){const S=function(C){const I=C.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(I)>=0?I:b.UNKNOWN}(y.status);u(new V(S,y.message))}else u(new V(b.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new V(b.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{F($t,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(r);F($t,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",d,i,15)})}vo(e,n,i){const r=Fm(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=l2(),u=u2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.xmlHttpFactory=new d2({})),this.bo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const p=s.join("");F($t,`Creating RPC '${e}' stream ${r}: ${p}`,c);const g=a.createWebChannel(p,c);let _=!1,y=!1;const S=new gB({co:C=>{y?F($t,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(_||(F($t,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),F($t,`RPC '${e}' stream ${r} sending:`,C),g.send(C))},lo:()=>g.close()}),P=(C,I,w)=>{C.listen(I,E=>{try{w(E)}catch(x){setTimeout(()=>{throw x},0)}})};return P(g,_h.EventType.OPEN,()=>{y||F($t,`RPC '${e}' stream ${r} transport opened.`)}),P(g,_h.EventType.CLOSE,()=>{y||(y=!0,F($t,`RPC '${e}' stream ${r} transport closed`),S.Ro())}),P(g,_h.EventType.ERROR,C=>{y||(y=!0,ei($t,`RPC '${e}' stream ${r} transport errored:`,C),S.Ro(new V(b.UNAVAILABLE,"The operation could not be completed")))}),P(g,_h.EventType.MESSAGE,C=>{var I;if(!y){const w=C.data[0];te(!!w);const E=w,x=E.error||((I=E[0])===null||I===void 0?void 0:I.error);if(x){F($t,`RPC '${e}' stream ${r} received error:`,x);const D=x.status;let U=function(ie){const X=ht[ie];if(X!==void 0)return DR(X)}(D),q=x.message;U===void 0&&(U=b.INTERNAL,q="Unknown error status: "+D+" with message "+x.message),y=!0,S.Ro(new V(U,q)),g.close()}else F($t,`RPC '${e}' stream ${r} received:`,w),S.Vo(w)}}),P(u,h2.STAT_EVENT,C=>{C.stat===CE.PROXY?F($t,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===CE.NOPROXY&&F($t,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.Ao()},0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return typeof window<"u"?window:null}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){return new SF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,i,r,s,a,u,c){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new ky(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(ot(n.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===n&&this.s_(i,r)},i=>{e(()=>{const r=new V(b.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,n){const i=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vB extends gC{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=CF(this.serializer,e),i=function(s){if(!("targetChange"in s))return ee.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ee.min():a.readTime?at(a.readTime):ee.min()}(e);return this.listener.a_(n,i)}u_(e){const n={};n.database=Fu(this.serializer),n.addTarget=function(s,a){let u;const c=a.target;if(u=Ld(c)?{documents:jR(s,c)}:{query:qR(s,c)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=FR(s,a.resumeToken);const d=h_(s,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(ee.min())>0){u.readTime=_a(s,a.snapshotVersion.toTimestamp());const d=h_(s,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const i=kF(this.serializer,e);i&&(n.labels=i),this.e_(n)}c_(e){const n={};n.database=Fu(this.serializer),n.removeTarget=e,this.e_(n)}}class yB extends gC{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=xF(e.writeResults,e.commitTime),i=at(e.commitTime);return this.listener.I_(i,n)}return te(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Fu(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Bu(this.serializer,i))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new V(b.UNKNOWN,r.toString())})}Co(e,n,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,n,i,s,a,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(b.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class IB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ot(n),this.f_=!1):F("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{i.enqueueAndForget(async()=>{ns(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=G(c);d.C_.add(4),await Va(d),d.M_.set("Unknown"),d.C_.delete(4),await wc(d)}(this))})}),this.M_=new IB(i,r)}}async function wc(t){if(ns(t))for(const e of t.v_)await e(!0)}async function Va(t){for(const e of t.v_)await e(!1)}function Ff(t,e){const n=G(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Ny(n)?Ly(n):Ba(n).Ho()&&by(n,e))}function zu(t,e){const n=G(t),i=Ba(n);n.D_.delete(e),i.Ho()&&_C(n,e),n.D_.size===0&&(i.Ho()?i.Zo():ns(n)&&n.M_.set("Unknown"))}function by(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ba(t).u_(e)}function _C(t,e){t.x_.Oe(e),Ba(t).c_(e)}function Ly(t){t.x_=new IF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ba(t).start(),t.M_.g_()}function Ny(t){return ns(t)&&!Ba(t).jo()&&t.D_.size>0}function ns(t){return G(t).C_.size===0}function vC(t){t.x_=void 0}async function TB(t){t.D_.forEach((e,n)=>{by(t,e)})}async function PB(t,e){vC(t),Ny(t)?(t.M_.w_(e),Ly(t)):t.M_.set("Unknown")}async function SB(t,e,n){if(t.M_.set("Online"),e instanceof VR&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const u of s.targetIds)r.D_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.D_.delete(u),r.x_.removeTarget(u))}(t,e)}catch(i){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ud(t,i)}else if(e instanceof Uh?t.x_.$e(e):e instanceof MR?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(ee.min()))try{const i=await uC(t.localStore);n.compareTo(i)>=0&&await function(s,a){const u=s.x_.it(a);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.D_.get(d);p&&s.D_.set(d,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,d)=>{const p=s.D_.get(c);if(!p)return;s.D_.set(c,p.withResumeToken(yt.EMPTY_BYTE_STRING,p.snapshotVersion)),_C(s,c);const g=new Vi(p.target,c,d,p.sequenceNumber);by(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){F("RemoteStore","Failed to raise snapshot:",i),await Ud(t,i)}}async function Ud(t,e,n){if(!es(e))throw e;t.C_.add(1),await Va(t),t.M_.set("Offline"),n||(n=()=>uC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await wc(t)})}function yC(t,e){return e().catch(n=>Ud(t,n,e))}async function Fa(t){const e=G(t),n=jr(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;AB(e);)try{const r=await hB(e.localStore,i);if(r===null){e.b_.length===0&&n.Zo();break}i=r.batchId,RB(e,r)}catch(r){await Ud(e,r)}wC(e)&&IC(e)}function AB(t){return ns(t)&&t.b_.length<10}function RB(t,e){t.b_.push(e);const n=jr(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function wC(t){return ns(t)&&!jr(t).jo()&&t.b_.length>0}function IC(t){jr(t).start()}async function CB(t){jr(t).E_()}async function xB(t){const e=jr(t);for(const n of t.b_)e.P_(n.mutations)}async function kB(t,e,n){const i=t.b_.shift(),r=vy.from(i,e,n);await yC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Fa(t)}async function bB(t,e){e&&jr(t).h_&&await async function(i,r){if(function(a){return NR(a)&&a!==b.ABORTED}(r.code)){const s=i.b_.shift();jr(i).Yo(),await yC(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Fa(i)}}(t,e),wC(t)&&IC(t)}async function ET(t,e){const n=G(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const i=ns(n);n.C_.add(3),await Va(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await wc(n)}async function v_(t,e){const n=G(t);e?(n.C_.delete(2),await wc(n)):e||(n.C_.add(2),await Va(n),n.M_.set("Unknown"))}function Ba(t){return t.O_||(t.O_=function(n,i,r){const s=G(n);return s.A_(),new vB(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{ho:TB.bind(null,t),Io:PB.bind(null,t),a_:SB.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),Ny(t)?Ly(t):t.M_.set("Unknown")):(await t.O_.stop(),vC(t))})),t.O_}function jr(t){return t.N_||(t.N_=function(n,i,r){const s=G(n);return s.A_(),new yB(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{ho:CB.bind(null,t),Io:bB.bind(null,t),T_:xB.bind(null,t),I_:kB.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await Fa(t)):(await t.N_.stop(),t.b_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new St,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,u=new Dy(e,n,a,r,s);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function za(t,e){if(ot("AsyncQueue",`${e}: ${t}`),es(t))return new V(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.comparator=e?(n,i)=>e(n,i)||H.comparator(n.key,i.key):(n,i)=>H.comparator(n.key,i.key),this.keyedMap=bl(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new ea(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ea)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ea;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.B_=new Me(H.comparator)}track(e){const n=e.doc.key,i=this.B_.get(n);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(n,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(n):e.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Q():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,i)=>{e.push(i)}),e}}class wa{constructor(e,n,i,r,s,a,u,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new wa(e,n,ea.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.k_=void 0,this.listeners=[]}}class NB{constructor(){this.queries=new ts(e=>vR(e),pc),this.onlineState="Unknown",this.q_=new Set}}async function Oy(t,e){const n=G(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new LB),r)try{s.k_=await n.onListen(i)}catch(a){const u=za(a,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&Vy(n)}async function My(t,e){const n=G(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function DB(t,e){const n=G(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const u of a.listeners)u.K_(r)&&(i=!0);a.k_=r}}i&&Vy(n)}function OB(t,e,n){const i=G(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function Vy(t){t.q_.forEach(e=>{e.next()})}class Fy{constructor(e,n,i){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.J_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.serializer=e}hs(e){return Ei(this.serializer,e)}Ps(e){return e.metadata.exists?$R(this.serializer,e.document,!1):Be.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return at(e)}}class VB{constructor(e,n,i){this.X_=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EC(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const i=Te.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,i=new PT(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.hs(r.metadata.name);for(const a of r.metadata.queries){const u=(n.get(a)||de()).add(s);n.set(a,u)}}return n}async complete(){const e=await dB(this.localStore,new PT(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(const i of this.queries)await fB(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function EC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.key=e}}class PC{constructor(e){this.key=e}}class SC{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=de(),this.mutatedKeys=de(),this._a=wR(e),this.aa=new ea(this._a)}get ua(){return this.ia}ca(e,n){const i=n?n.la:new TT,r=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,g)=>{const _=r.get(p),y=mc(this.query,g)?g:null,S=!!_&&this.mutatedKeys.has(_.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;_&&y?_.data.isEqual(y.data)?S!==P&&(i.track({type:3,doc:y}),C=!0):this.ha(_,y)||(i.track({type:2,doc:y}),C=!0,(c&&this._a(y,c)>0||d&&this._a(y,d)<0)&&(u=!0)):!_&&y?(i.track({type:0,doc:y}),C=!0):_&&!y&&(i.track({type:1,doc:_}),C=!0,(c||d)&&(u=!0)),C&&(y?(a=a.add(y),s=P?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{aa:a,la:i,Zi:u,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((d,p)=>function(_,y){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return S(_)-S(y)}(d.type,p.type)||this._a(d.doc,p.doc)),this.Pa(i);const a=n?this.Ia():[],u=this.oa.size===0&&this.current?1:0,c=u!==this.sa;return this.sa=u,s.length!==0||c?{snapshot:new wa(this.query,e.aa,r,s,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new TT,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=de(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const n=[];return e.forEach(i=>{this.oa.has(i)||n.push(new PC(i))}),this.oa.forEach(i=>{e.has(i)||n.push(new TC(i))}),n}da(e){this.ia=e.ls,this.oa=de();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return wa.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class FB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class BB{constructor(e){this.key=e,this.Ra=!1}}class zB{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Va={},this.ma=new ts(u=>vR(u),pc),this.fa=new Map,this.ga=new Set,this.pa=new Me(H.comparator),this.ya=new Map,this.wa=new Sy,this.Sa={},this.ba=new Map,this.Da=Hs.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function UB(t,e){const n=jy(t);let i,r;const s=n.ma.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{const a=await va(n.localStore,nn(e)),u=n.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=await By(n,e,i,u==="current",a.resumeToken),n.isPrimaryClient&&Ff(n.remoteStore,a)}return r}async function By(t,e,n,i,r){t.va=(g,_,y)=>async function(P,C,I,w){let E=C.view.ca(I);E.Zi&&(E=await Fd(P.localStore,C.query,!1).then(({documents:U})=>C.view.ca(U,E)));const x=w&&w.targetChanges.get(C.targetId),D=C.view.applyChanges(E,P.isPrimaryClient,x);return y_(P,C.targetId,D.Ta),D.snapshot}(t,g,_,y);const s=await Fd(t.localStore,e,!0),a=new SC(e,s.ls),u=a.ca(s.documents),c=vc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(u,t.isPrimaryClient,c);y_(t,n,d.Ta);const p=new FB(e,n,a);return t.ma.set(e,p),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}async function $B(t,e){const n=G(t),i=n.ma.get(e),r=n.fa.get(i.targetId);if(r.length>1)return n.fa.set(i.targetId,r.filter(s=>!pc(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await ya(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),zu(n.remoteStore,i.targetId),Ia(n,i.targetId)}).catch(Xr)):(Ia(n,i.targetId),await ya(n.localStore,i.targetId,!0))}async function jB(t,e,n){const i=qy(t);try{const r=await function(a,u){const c=G(a),d=qe.now(),p=u.reduce((y,S)=>y.add(S.key),de());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=mn(),P=de();return c.ss.getEntries(y,p).next(C=>{S=C,S.forEach((I,w)=>{w.isValidDocument()||(P=P.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,S)).next(C=>{g=C;const I=[];for(const w of u){const E=vF(w,g.get(w.key).overlayedDocument);E!=null&&I.push(new Ji(w.key,E,uR(E.value.mapValue),je.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,I,u)}).next(C=>{_=C;const I=C.applyToLocalDocumentSet(g,P);return c.documentOverlayCache.saveOverlays(y,C.batchId,I)})}).then(()=>({batchId:_.batchId,changes:ER(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let d=a.Sa[a.currentUser.toKey()];d||(d=new Me(ue)),d=d.insert(u,c),a.Sa[a.currentUser.toKey()]=d}(i,r.batchId,n),await Xi(i,r.changes),await Fa(i.remoteStore)}catch(r){const s=za(r,"Failed to persist write");n.reject(s)}}async function AC(t,e){const n=G(t);try{const i=await cB(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.ya.get(s);a&&(te(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ra=!0:r.modifiedDocuments.size>0?te(a.Ra):r.removedDocuments.size>0&&(te(a.Ra),a.Ra=!1))}),await Xi(n,i,e)}catch(i){await Xr(i)}}function ST(t,e,n){const i=G(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ma.forEach((s,a)=>{const u=a.view.Q_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=G(a);c.onlineState=u;let d=!1;c.queries.forEach((p,g)=>{for(const _ of g.listeners)_.Q_(u)&&(d=!0)}),d&&Vy(c)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function qB(t,e,n){const i=G(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.ya.get(e),s=r&&r.key;if(s){let a=new Me(H.comparator);a=a.insert(s,Be.newNoDocument(s,ee.min()));const u=de().add(s),c=new _c(ee.min(),new Map,new Me(ue),a,u);await AC(i,c),i.pa=i.pa.remove(s),i.ya.delete(e),$y(i)}else await ya(i.localStore,e,!1).then(()=>Ia(i,e,n)).catch(Xr)}async function WB(t,e){const n=G(t),i=e.batch.batchId;try{const r=await uB(n.localStore,e);Uy(n,i,null),zy(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xi(n,r)}catch(r){await Xr(r)}}async function HB(t,e,n){const i=G(t);try{const r=await function(a,u){const c=G(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(te(g!==null),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(i.localStore,e);Uy(i,e,n),zy(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xi(i,r)}catch(r){await Xr(r)}}async function GB(t,e){const n=G(t);ns(n.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const u=G(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();const r=n.ba.get(i)||[];r.push(e),n.ba.set(i,r)}catch(i){const r=za(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function zy(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function Uy(t,e,n){const i=G(t);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function Ia(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.fa.get(e))t.ma.delete(i),n&&t.Va.Fa(i,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(i=>{t.wa.containsKey(i)||RC(t,i)})}function RC(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(zu(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),$y(t))}function y_(t,e,n){for(const i of n)i instanceof TC?(t.wa.addReference(i.key,e),KB(t,i)):i instanceof PC?(F("SyncEngine","Document no longer in limbo: "+i.key),t.wa.removeReference(i.key,e),t.wa.containsKey(i.key)||RC(t,i.key)):Q()}function KB(t,e){const n=e.key,i=n.path.canonicalString();t.pa.get(n)||t.ga.has(i)||(F("SyncEngine","New document in limbo: "+n),t.ga.add(i),$y(t))}function $y(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new H(Te.fromString(e)),i=t.Da.next();t.ya.set(i,new BB(n)),t.pa=t.pa.insert(n,i),Ff(t.remoteStore,new Vi(nn(Da(n.path)),i,"TargetPurposeLimboResolution",fn._e))}}async function Xi(t,e,n){const i=G(t),r=[],s=[],a=[];i.ma.isEmpty()||(i.ma.forEach((u,c)=>{a.push(i.va(c,e,n).then(d=>{if((d||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,d!=null&&d.fromCache?"not-current":"current"),d){r.push(d);const p=Cy.Qi(c.targetId,d);s.push(p)}}))}),await Promise.all(a),i.Va.a_(r),await async function(c,d){const p=G(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>R.forEach(d,_=>R.forEach(_.ki,y=>p.persistence.referenceDelegate.addReference(g,_.targetId,y)).next(()=>R.forEach(_.qi,y=>p.persistence.referenceDelegate.removeReference(g,_.targetId,y)))))}catch(g){if(!es(g))throw g;F("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const y=p.ts.get(_),S=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(S);p.ts=p.ts.insert(_,P)}}}(i.localStore,s))}async function ZB(t,e){const n=G(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const i=await lC(n.localStore,e);n.currentUser=e,function(s,a){s.ba.forEach(u=>{u.forEach(c=>{c.reject(new V(b.CANCELLED,a))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xi(n,i._s)}}function QB(t,e){const n=G(t),i=n.ya.get(e);if(i&&i.Ra)return de().add(i.key);{let r=de();const s=n.fa.get(e);if(!s)return r;for(const a of s){const u=n.ma.get(a);r=r.unionWith(u.view.ua)}return r}}async function YB(t,e){const n=G(t),i=await Fd(n.localStore,e.query,!0),r=e.view.da(i);return n.isPrimaryClient&&y_(n,e.targetId,r.Ta),r}async function JB(t,e){const n=G(t);return dC(n.localStore,e).then(i=>Xi(n,i))}async function XB(t,e,n,i){const r=G(t),s=await function(u,c){const d=G(u),p=G(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Cn(g,c).next(_=>_?d.localDocuments.getDocuments(g,_):R.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Fa(r.remoteStore):n==="acknowledged"||n==="rejected"?(Uy(r,e,i||null),zy(r,e),function(u,c){G(G(u).mutationQueue).Fn(c)}(r.localStore,e)):Q(),await Xi(r,s)):F("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ez(t,e){const n=G(t);if(jy(n),qy(n),e===!0&&n.Ca!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await AT(n,i.toArray());n.Ca=!0,await v_(n.remoteStore,!0);for(const s of r)Ff(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){const i=[];let r=Promise.resolve();n.fa.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Ia(n,a),ya(n.localStore,a,!0))),zu(n.remoteStore,a)}),await r,await AT(n,i),function(a){const u=G(a);u.ya.forEach((c,d)=>{zu(u.remoteStore,d)}),u.wa.Vr(),u.ya=new Map,u.pa=new Me(H.comparator)}(n),n.Ca=!1,await v_(n.remoteStore,!1)}}async function AT(t,e,n){const i=G(t),r=[],s=[];for(const a of e){let u;const c=i.fa.get(a);if(c&&c.length!==0){u=await va(i.localStore,nn(c[0]));for(const d of c){const p=i.ma.get(d),g=await YB(i,p);g.snapshot&&s.push(g.snapshot)}}else{const d=await hC(i.localStore,a);u=await va(i.localStore,d),await By(i,CC(d),a,!1,u.resumeToken)}r.push(u)}return i.Va.a_(s),r}function CC(t){return _R(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tz(t){return function(n){return G(G(n).persistence).Bi()}(G(t).localStore)}async function nz(t,e,n,i){const r=G(t);if(r.Ca)return void F("SyncEngine","Ignoring unexpected query state notification.");const s=r.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await dC(r.localStore,yR(s[0])),u=_c.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);await Xi(r,a,u);break}case"rejected":await ya(r.localStore,e,!0),Ia(r,e,i);break;default:Q()}}async function iz(t,e,n){const i=jy(t);if(i.Ca){for(const r of e){if(i.fa.has(r)){F("SyncEngine","Adding an already active target "+r);continue}const s=await hC(i.localStore,r),a=await va(i.localStore,s);await By(i,CC(s),a.targetId,!1,a.resumeToken),Ff(i.remoteStore,a)}for(const r of n)i.fa.has(r)&&await ya(i.localStore,r,!1).then(()=>{zu(i.remoteStore,r),Ia(i,r)}).catch(Xr)}}function jy(t){const e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qB.bind(null,e),e.Va.a_=DB.bind(null,e.eventManager),e.Va.Fa=OB.bind(null,e.eventManager),e}function qy(t){const e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HB.bind(null,e),e}function rz(t,e,n){const i=G(t);(async function(s,a,u){try{const c=await a.getMetadata();if(await function(y,S){const P=G(y),C=at(S.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",I=>P.Kr.getBundleMetadata(I,S.id)).then(I=>!!I&&I.createTime.compareTo(C)>=0)}(s.localStore,c))return await a.close(),u._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(EC(c));const d=new VB(c,s.localStore,a.serializer);let p=await a.Ma();for(;p;){const _=await d.ea(p);_&&u._updateProgress(_),p=await a.Ma()}const g=await d.complete();return await Xi(s,g.ra,void 0),await function(y,S){const P=G(y);return P.persistence.runTransaction("Save bundle","readwrite",C=>P.Kr.saveBundleMetadata(C,S))}(s.localStore,c),u._completeWith(g.progress),Promise.resolve(g.na)}catch(c){return ei("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class w_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return aC(this.persistence,new oC,e.initialUser,this.serializer)}createPersistence(e){return new sC(Vf.jr,this.serializer)}createSharedClientState(e){return new pC}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xC extends w_{constructor(e,n,i){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await qy(this.xa.syncEngine),await Fa(this.xa.remoteStore),await this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return aC(this.persistence,new oC,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new HF(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new x2(n,this.persistence);return new C2(e.asyncQueue,i)}createPersistence(e){const n=Ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new Ay(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,mC(),$h(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new pC}}class sz extends xC{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xa.syncEngine;this.sharedClientState instanceof Vm&&(this.sharedClientState.syncEngine={Ys:XB.bind(null,n),Zs:nz.bind(null,n),Xs:iz.bind(null,n),Bi:tz.bind(null,n),Js:JB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.mi(async i=>{await ez(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=mC();if(!Vm.D(n))throw new V(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vm(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Wy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ST(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZB.bind(null,this.syncEngine),await v_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NB}()}createDatastore(e){const n=yc(e.databaseInfo.databaseId),i=function(s){return new _B(s)}(e.databaseInfo);return function(s,a,u,c){return new wB(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,u){return new EB(i,r,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>ST(this.syncEngine,n,0),function(){return IT.D()?new IT:new pB}())}createSyncEngine(e,n){return function(r,s,a,u,c,d,p){const g=new zB(r,s,a,u,c,d);return p&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const i=G(n);F("RemoteStore","RemoteStore shutting down."),i.C_.add(5),await Va(i),i.F_.shutdown(),i.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ot("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new St,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(e===null)return null;const n=this.La.decode(e),i=Number(n);isNaN(i)&&this.Qa(`length string (${n}) is not valid number`);const r=await this.Ka(i);return new MB(JSON.parse(r),e.length+i)}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(this.buffer.length===0)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ua(){const e=await this.Ba.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new V(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,s){const a=G(r),u=Fu(a.serializer)+"/documents",c={documents:s.map(_=>Vu(a.serializer,_))},d=await a.Co("BatchGetDocuments",u,c,s.length),p=new Map;d.forEach(_=>{const y=RF(a.serializer,_);p.set(y.key.toString(),y)});const g=[];return s.forEach(_=>{const y=p.get(_.toString());te(!!y),g.push(y)}),g}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ma(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=H.fromPath(i);this.mutations.push(new gy(r,this.precondition(r)))}),await async function(i,r){const s=G(i),a=Fu(s.serializer)+"/documents",u={writes:r.map(c=>Bu(s.serializer,c))};await s.wo("Commit",a,u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q();n=ee.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new V(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ee.min())?je.exists(!1):je.updateTime(n):je.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ee.min()))throw new V(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return je.updateTime(n)}return je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new ky(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(async()=>{const e=new az(this.datastore),n=this.za(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})})}za(e){try{const n=this.updateFunction(e);return!dc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!NR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Tt.UNAUTHENTICATED,this.clientId=ZA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{F("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new St;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=za(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function jh(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await lC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Hy(t);F("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>ET(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ET(e.remoteStore,s)),t._onlineComponents=e}function kC(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Hy(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!kC(n))throw n;ei("Error using user provided cache. Falling back to memory cache: "+n),await jh(t,new w_)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await jh(t,new w_);return t._offlineComponents}async function zf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await I_(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await I_(t,new Wy))),t._onlineComponents}function bC(t){return Hy(t).then(e=>e.persistence)}function Gy(t){return Hy(t).then(e=>e.localStore)}function LC(t){return zf(t).then(e=>e.remoteStore)}function Ky(t){return zf(t).then(e=>e.syncEngine)}function cz(t){return zf(t).then(e=>e.datastore)}async function Ea(t){const e=await zf(t),n=e.eventManager;return n.onListen=UB.bind(null,e.syncEngine),n.onUnlisten=$B.bind(null,e.syncEngine),n}function hz(t){return t.asyncQueue.enqueue(async()=>{const e=await bC(t),n=await LC(t);return e.setNetworkEnabled(!0),function(r){const s=G(r);return s.C_.delete(0),wc(s)}(n)})}function dz(t){return t.asyncQueue.enqueue(async()=>{const e=await bC(t),n=await LC(t);return e.setNetworkEnabled(!1),async function(r){const s=G(r);s.C_.add(0),await Va(s),s.M_.set("Offline")}(n)})}function fz(t,e){const n=new St;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const u=await function(d,p){const g=G(d);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,p))}(r,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new V(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=za(u,`Failed to get document '${s} from cache`);a.reject(c)}}(await Gy(t),e,n)),n.promise}function NC(t,e,n={}){const i=new St;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,d){const p=new Bf({next:_=>{a.enqueueAndForget(()=>My(s,g));const y=_.docs.has(u);!y&&_.fromCache?d.reject(new V(b.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&c&&c.source==="server"?d.reject(new V(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Fy(Da(u.path),p,{includeMetadataChanges:!0,J_:!0});return Oy(s,g)}(await Ea(t),t.asyncQueue,e,n,i)),i.promise}function pz(t,e){const n=new St;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const u=await Fd(r,s,!0),c=new SC(s,u.ls),d=c.ca(u.documents),p=c.applyChanges(d,!1);a.resolve(p.snapshot)}catch(u){const c=za(u,`Failed to execute query '${s} against cache`);a.reject(c)}}(await Gy(t),e,n)),n.promise}function DC(t,e,n={}){const i=new St;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,d){const p=new Bf({next:_=>{a.enqueueAndForget(()=>My(s,g)),_.fromCache&&c.source==="server"?d.reject(new V(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Fy(u,p,{includeMetadataChanges:!0,J_:!0});return Oy(s,g)}(await Ea(t),t.asyncQueue,e,n,i)),i.promise}function mz(t,e){const n=new Bf(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){G(r).q_.add(s),s.next()}(await Ea(t),n)),()=>{n.Na(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){G(r).q_.delete(s)}(await Ea(t),n))}}function gz(t,e,n,i){const r=function(a,u){let c;return c=typeof a=="string"?OR().encode(a):a,function(p,g){return new oz(p,g)}(function(p,g){if(p instanceof Uint8Array)return RT(p,g);if(p instanceof ArrayBuffer)return RT(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,yc(e));t.asyncQueue.enqueueAndForget(async()=>{rz(await Ky(t),r,i)})}function _z(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=G(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Kr.getNamedQuery(a,r))}(await Gy(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e,n){if(!n)throw new V(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MC(t,e,n,i){if(e===!0&&i===!0)throw new V(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xT(t){if(!H.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kT(t){if(H.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uf(t);throw new V(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function VC(t,e){if(e<=0)throw new V(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new V(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ic{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new _2;switch(i.type){case"firstParty":return new I2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new V(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=CT.get(n);i&&(F("ComponentProvider","Removing Datastore"),CT.delete(n),i.terminate())}(this),Promise.resolve()}}function vz(t,e,n,i={}){var r;const s=(t=Se(t,Ic))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let u,c;if(typeof i.mockUserToken=="string")u=i.mockUserToken,c=Tt.MOCK_USER;else{u=LO(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new V(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Tt(d)}t._authCredentials=new v2(new KA(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn=class FC{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new FC(this.firestore,e,this._query)}},Qe=class BC{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new BC(this.firestore,e,this._key)}},br=class zC extends rn{constructor(e,n,i){super(e,n,Da(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new H(e))}withConverter(e){return new zC(this.firestore,e,this._path)}};function UC(t,e,...n){if(t=re(t),Zy("collection","path",e),t instanceof Ic){const i=Te.fromString(e,...n);return kT(i),new br(t,null,i)}{if(!(t instanceof Qe||t instanceof br))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return kT(i),new br(t.firestore,null,i)}}function yz(t,e){if(t=Se(t,Ic),Zy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rn(t,null,function(i){return new Yi(Te.emptyPath(),i)}(e))}function $d(t,e,...n){if(t=re(t),arguments.length===1&&(e=ZA.newId()),Zy("doc","path",e),t instanceof Ic){const i=Te.fromString(e,...n);return xT(i),new Qe(t,null,new H(i))}{if(!(t instanceof Qe||t instanceof br))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return xT(i),new Qe(t.firestore,t instanceof br?t.converter:null,new H(i))}}function $C(t,e){return t=re(t),e=re(e),(t instanceof Qe||t instanceof br)&&(e instanceof Qe||e instanceof br)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function jC(t,e){return t=re(t),e=re(e),t instanceof rn&&e instanceof rn&&t.firestore===e.firestore&&pc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new ky(this,"async_queue_retry"),this.iu=()=>{const n=$h();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=$h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=$h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new St;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!es(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw ot("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);const r=Dy.createAndSchedule(this,e,n,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&Q()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function E_(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Iz{constructor(){this._progressObserver={},this._taskCompletionResolver=new St,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez=-1;let nt=class extends Ic{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new wz}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qC(this),this._firestoreClient.terminate()}};function xt(t){return t._firestoreClient||qC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qC(t){var e,n,i;const r=t._freezeSettings(),s=function(u,c,d,p){return new Q2(u,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,OC(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new uz(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function Tz(t,e){HC(t=Se(t,nt));const n=xt(t);if(n._uninitializedComponentsProvider)throw new V(b.FAILED_PRECONDITION,"SDK cache is already specified.");ei("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new Wy;return WC(n,r,new xC(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Pz(t){HC(t=Se(t,nt));const e=xt(t);if(e._uninitializedComponentsProvider)throw new V(b.FAILED_PRECONDITION,"SDK cache is already specified.");ei("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new Wy;return WC(e,i,new sz(i,n.cacheSizeBytes))}function WC(t,e,n){const i=new St;return t.asyncQueue.enqueue(async()=>{try{await jh(t,n),await I_(t,e),i.resolve()}catch(r){const s=r;if(!kC(s))throw s;ei("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}}).then(()=>i.promise)}function Sz(t){if(t._initialized&&!t._terminated)throw new V(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new St;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Zn.D())return Promise.resolve();const r=i+"main";await Zn.delete(r)}(Ry(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Az(t){return function(n){const i=new St;return n.asyncQueue.enqueueAndForget(async()=>GB(await Ky(n),i)),i.promise}(xt(t=Se(t,nt)))}function Rz(t){return hz(xt(t=Se(t,nt)))}function Cz(t){return dz(xt(t=Se(t,nt)))}function xz(t,e){const n=xt(t=Se(t,nt)),i=new Iz;return gz(n,t._databaseId,e,i),i}function kz(t,e){return _z(xt(t=Se(t,nt)),e).then(n=>n?new rn(t,null,n.query):null)}function HC(t){if(t._initialized||t._terminated)throw new V(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Si(yt.fromBase64String(e))}catch(n){throw new V(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Si(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=/^__.*__$/;class Lz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oa(e,this.data,n,this.fieldTransforms)}}class GC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class jf{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return jd(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(KC(this.Iu)&&bz.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Nz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||yc(e)}pu(e,n,i,r=!1){return new jf({Iu:e,methodName:n,gu:i,path:$e.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ro(t){const e=t._freezeSettings(),n=yc(t._databaseId);return new Nz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qf(t,e,n,i,r,s={}){const a=t.pu(s.merge||s.mergeFields?2:0,e,n,r);Xy("Data must be an object, but it was:",a,i);const u=YC(i,a);let c,d;if(s.merge)c=new pn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=T_(e,g,n);if(!a.contains(_))throw new V(b.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);XC(p,_)||p.push(_)}c=new pn(p),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new Lz(new Dt(u),c,d)}class Ec extends io{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ec}}function ZC(t,e,n){return new jf({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Qy extends io{_toFieldTransform(e){return new gc(e.path,new ma)}isEqual(e){return e instanceof Qy}}class Dz extends io{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ZC(this,e,!0),i=this.yu.map(s=>so(s,n)),r=new $s(i);return new gc(e.path,r)}isEqual(e){return this===e}}class Oz extends io{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ZC(this,e,!0),i=this.yu.map(s=>so(s,n)),r=new js(i);return new gc(e.path,r)}isEqual(e){return this===e}}class Mz extends io{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new ga(e.serializer,AR(e.serializer,this.wu));return new gc(e.path,n)}isEqual(e){return this===e}}function Yy(t,e,n,i){const r=t.pu(1,e,n);Xy("Data must be an object, but it was:",r,i);const s=[],a=Dt.empty();no(i,(c,d)=>{const p=ew(e,c,n);d=re(d);const g=r.Ru(p);if(d instanceof Ec)s.push(p);else{const _=so(d,g);_!=null&&(s.push(p),a.set(p,_))}});const u=new pn(s);return new GC(a,u,r.fieldTransforms)}function Jy(t,e,n,i,r,s){const a=t.pu(1,e,n),u=[T_(e,i,n)],c=[r];if(s.length%2!=0)throw new V(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(T_(e,s[_])),c.push(s[_+1]);const d=[],p=Dt.empty();for(let _=u.length-1;_>=0;--_)if(!XC(d,u[_])){const y=u[_];let S=c[_];S=re(S);const P=a.Ru(y);if(S instanceof Ec)d.push(y);else{const C=so(S,P);C!=null&&(d.push(y),p.set(y,C))}}const g=new pn(d);return new GC(p,g,a.fieldTransforms)}function QC(t,e,n,i=!1){return so(n,t.pu(i?4:3,e))}function so(t,e){if(JC(t=re(t)))return Xy("Unsupported field value:",e,t),YC(t,e);if(t instanceof io)return function(i,r){if(!KC(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const u of i){let c=so(u,r.Vu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=re(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=qe.fromDate(i);return{timestampValue:_a(r.serializer,s)}}if(i instanceof qe){const s=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_a(r.serializer,s)}}if(i instanceof $f)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Si)return{bytesValue:FR(r.serializer,i._byteString)};if(i instanceof Qe){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Iy(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${Uf(i)}`)}(t,e)}function YC(t,e){const n={};return oR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(i,r)=>{const s=so(r,e.Eu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function JC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof $f||t instanceof Si||t instanceof Qe||t instanceof io)}function Xy(t,e,n){if(!JC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Uf(n);throw i==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function T_(t,e,n){if((e=re(e))instanceof qr)return e._internalPath;if(typeof e=="string")return ew(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Vz=new RegExp("[~\\*/\\[\\]]");function ew(t,e,n){if(e.search(Vz)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qr(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new V(b.INVALID_ARGUMENT,u+t+c)}function XC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Fz extends Uu{data(){return super.data()}}function Wf(t,e){return typeof e=="string"?ew(t,e):e instanceof qr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tw{}class Tc extends tw{}function lr(t,e,...n){let i=[];e instanceof tw&&i.push(e),i=i.concat(n),function(s){const a=s.filter(c=>c instanceof nw).length,u=s.filter(c=>c instanceof Hf).length;if(a>1||a>0&&u>0)throw new V(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Hf extends Tc{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Hf(e,n,i)}_apply(e){const n=this._parse(e);return nx(e._query,n),new rn(e.firestore,e.converter,c_(e._query,n))}_parse(e){const n=ro(e.firestore);return function(s,a,u,c,d,p,g){let _;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new V(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){NT(g,p);const y=[];for(const S of g)y.push(LT(c,s,S));_={arrayValue:{values:y}}}else _=LT(c,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||NT(g,p),_=QC(u,a,g,p==="in"||p==="not-in");return _e.create(d,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bz(t,e,n){const i=e,r=Wf("where",t);return Hf._create(r,i,n)}class nw extends tw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nw(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ce.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const u=s.getFlattenedFilters();for(const c of u)nx(a,c),a=c_(a,c)}(e._query,n),new rn(e.firestore,e.converter,c_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iw extends Tc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new iw(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new V(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new V(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(s,a)}(e._query,this._field,this._direction);return new rn(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Yi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function zz(t,e="asc"){const n=e,i=Wf("orderBy",t);return iw._create(i,n)}class Gf extends Tc{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Gf(e,n,i)}_apply(e){return new rn(e.firestore,e.converter,Dd(e._query,this._limit,this._limitType))}}function Uz(t){return VC("limit",t),Gf._create("limit",t,"F")}function $z(t){return VC("limitToLast",t),Gf._create("limitToLast",t,"L")}class Kf extends Tc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Kf(e,n,i)}_apply(e){const n=tx(e,this.type,this._docOrFields,this._inclusive);return new rn(e.firestore,e.converter,function(r,s){return new Yi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function jz(...t){return Kf._create("startAt",t,!0)}function qz(...t){return Kf._create("startAfter",t,!1)}class Zf extends Tc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Zf(e,n,i)}_apply(e){const n=tx(e,this.type,this._docOrFields,this._inclusive);return new rn(e.firestore,e.converter,function(r,s){return new Yi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function Wz(...t){return Zf._create("endBefore",t,!1)}function Hz(...t){return Zf._create("endAt",t,!0)}function tx(t,e,n,i){if(n[0]=re(n[0]),n[0]instanceof Uu)return function(s,a,u,c,d){if(!c)throw new V(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const p=[];for(const g of Xo(s))if(g.field.isKeyField())p.push(zs(a,c.key));else{const _=c.data.field(g.field);if(Lf(_))throw new V(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const y=g.field.canonicalString();throw new V(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}p.push(_)}return new $r(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=ro(t.firestore);return function(a,u,c,d,p,g){const _=a.explicitOrderBy;if(p.length>_.length)throw new V(b.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let S=0;S<p.length;S++){const P=p[S];if(_[S].field.isKeyField()){if(typeof P!="string")throw new V(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof P}`);if(!py(a)&&P.indexOf("/")!==-1)throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${P}' contains a slash.`);const C=a.path.child(Te.fromString(P));if(!H.isDocumentKey(C))throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const I=new H(C);y.push(zs(u,I))}else{const C=QC(c,d,P);y.push(C)}}return new $r(y,g)}(t._query,t.firestore._databaseId,r,e,n,i)}}function LT(t,e,n){if(typeof(n=re(n))=="string"){if(n==="")throw new V(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!py(e)&&n.indexOf("/")!==-1)throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Te.fromString(n));if(!H.isDocumentKey(i))throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zs(t,new H(i))}if(n instanceof Qe)return zs(t,n._key);throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(n)}.`)}function NT(t,e){if(!Array.isArray(t)||t.length===0)throw new V(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nx(t,e){const n=function(r,s){for(const a of r)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rw{convertValue(e,n="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return no(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new $f(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=dy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Te.fromString(e);te(KR(i));const r=new zr(i.get(1),i.get(3)),s=new H(i.popFirst(5));return r.isEqual(n)||ot(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Gz extends rw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ki=class extends Uu{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Wf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Ql=class extends Ki{data(e={}){return super.data(e)}},Wr=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ps(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ql(this._firestore,this._userDataWriter,i.key,i,new Ps(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new Ql(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ps(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new Ql(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ps(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:Kz(u.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Kz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function ix(t,e){return t instanceof Ki&&e instanceof Ki?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wr&&e instanceof Wr&&t._firestore===e._firestore&&jC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(t){t=Se(t,Qe);const e=Se(t.firestore,nt);return NC(xt(e),t._key).then(n=>sw(e,t,n))}class oo extends rw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function Qz(t){t=Se(t,Qe);const e=Se(t.firestore,nt),n=xt(e),i=new oo(e);return fz(n,t._key).then(r=>new Ki(e,i,t._key,r,new Ps(r!==null&&r.hasLocalMutations,!0),t.converter))}function Yz(t){t=Se(t,Qe);const e=Se(t.firestore,nt);return NC(xt(e),t._key,{source:"server"}).then(n=>sw(e,t,n))}function Jz(t){t=Se(t,rn);const e=Se(t.firestore,nt),n=xt(e),i=new oo(e);return ex(t._query),DC(n,t._query).then(r=>new Wr(e,i,t,r))}function Xz(t){t=Se(t,rn);const e=Se(t.firestore,nt),n=xt(e),i=new oo(e);return pz(n,t._query).then(r=>new Wr(e,i,t,r))}function eU(t){t=Se(t,rn);const e=Se(t.firestore,nt),n=xt(e),i=new oo(e);return DC(n,t._query,{source:"server"}).then(r=>new Wr(e,i,t,r))}function DT(t,e,n){t=Se(t,Qe);const i=Se(t.firestore,nt),r=Qf(t.converter,e,n);return Pc(i,[qf(ro(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,je.none())])}function OT(t,e,n,...i){t=Se(t,Qe);const r=Se(t.firestore,nt),s=ro(r);let a;return a=typeof(e=re(e))=="string"||e instanceof qr?Jy(s,"updateDoc",t._key,e,n,i):Yy(s,"updateDoc",t._key,e),Pc(r,[a.toMutation(t._key,je.exists(!0))])}function tU(t){return Pc(Se(t.firestore,nt),[new Ma(t._key,je.none())])}function nU(t,e){const n=Se(t.firestore,nt),i=$d(t),r=Qf(t.converter,e);return Pc(n,[qf(ro(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,je.exists(!1))]).then(()=>i)}function rx(t,...e){var n,i,r;t=re(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||E_(e[a])||(s=e[a],a++);const u={includeMetadataChanges:s.includeMetadataChanges};if(E_(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let c,d,p;if(t instanceof Qe)d=Se(t.firestore,nt),p=Da(t._key.path),c={next:g=>{e[a]&&e[a](sw(d,t,g))},error:e[a+1],complete:e[a+2]};else{const g=Se(t,rn);d=Se(g.firestore,nt),p=g._query;const _=new oo(d);c={next:y=>{e[a]&&e[a](new Wr(d,_,g,y))},error:e[a+1],complete:e[a+2]},ex(t._query)}return function(_,y,S,P){const C=new Bf(P),I=new Fy(y,C,S);return _.asyncQueue.enqueueAndForget(async()=>Oy(await Ea(_),I)),()=>{C.Na(),_.asyncQueue.enqueueAndForget(async()=>My(await Ea(_),I))}}(xt(d),p,u,c)}function iU(t,e){return mz(xt(t=Se(t,nt)),E_(e)?e:{next:e})}function Pc(t,e){return function(i,r){const s=new St;return i.asyncQueue.enqueueAndForget(async()=>jB(await Ky(i),r,s)),s.promise}(xt(t),e)}function sw(t,e,n){const i=n.docs.get(e._key),r=new oo(t);return new Ki(t,r,e._key,i,new Ps(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sU=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ro(e)}set(e,n,i){this._verifyNotCommitted();const r=mr(e,this._firestore),s=Qf(r.converter,n,i),a=qf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,je.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=mr(e,this._firestore);let a;return a=typeof(n=re(n))=="string"||n instanceof qr?Jy(this._dataReader,"WriteBatch.update",s._key,n,i,r):Yy(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,je.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mr(e,this._firestore);return this._mutations=this._mutations.concat(new Ma(n._key,je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function mr(t,e){if((t=re(t)).firestore!==e)throw new V(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oU=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=ro(n)}get(n){const i=mr(n,this._firestore),r=new Gz(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return Q();const a=s[0];if(a.isFoundDocument())return new Uu(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new Uu(this._firestore,r,i._key,null,i.converter);throw Q()})}set(n,i,r){const s=mr(n,this._firestore),a=Qf(s.converter,i,r),u=qf(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,r);return this._transaction.set(s._key,u),this}update(n,i,r,...s){const a=mr(n,this._firestore);let u;return u=typeof(i=re(i))=="string"||i instanceof qr?Jy(this._dataReader,"Transaction.update",a._key,i,r,s):Yy(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,u),this}delete(n){const i=mr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=mr(e,this._firestore),i=new oo(this._firestore);return super.get(e).then(r=>new Ki(this._firestore,i,n._key,r._document,new Ps(!1,!1),n.converter))}};function aU(t,e,n){t=Se(t,nt);const i=Object.assign(Object.assign({},rU),n);return function(s){if(s.maxAttempts<1)throw new V(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,u){const c=new St;return s.asyncQueue.enqueueAndForget(async()=>{const d=await cz(s);new lz(s.asyncQueue,d,u,a,c).run()}),c.promise}(xt(t),r=>e(new oU(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(){return new Ec("deleteField")}function uU(){return new Qy("serverTimestamp")}function cU(...t){return new Dz("arrayUnion",t)}function hU(...t){return new Oz("arrayRemove",t)}function dU(t){return new Mz("increment",t)}(function(e,n=!0){(function(r){Na=r})(Qr),Mr(new Ti("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),u=new nt(new y2(i.getProvider("auth-internal")),new T2(i.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new V(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(d.options.projectId,p)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Ii(xE,"4.3.2",e),Ii(xE,"4.3.2","esm2017")})();const fU="@firebase/firestore-compat",pU="0.3.21";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function VT(){if(!K2())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}class $u{constructor(e){this._delegate=e}static fromBase64String(e){return VT(),new $u(Si.fromBase64String(e))}static fromUint8Array(e){return MT(),new $u(Si.fromUint8Array(e))}toBase64(){return VT(),this._delegate.toBase64()}toUint8Array(){return MT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){return mU(t,["next","error","complete"])}function mU(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{enableIndexedDbPersistence(e,n){return Tz(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Pz(e._delegate)}clearIndexedDbPersistence(e){return Sz(e._delegate)}}class sx{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof zr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ei("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){vz(this._delegate,e,n,i)}enableNetwork(){return Rz(this._delegate)}disableNetwork(){return Cz(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,MC("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Az(this._delegate)}onSnapshotsInSync(e){return iU(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ta(this,UC(this._delegate,e))}catch(n){throw Yt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Vn(this,$d(this._delegate,e))}catch(n){throw Yt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qt(this,yz(this._delegate,e))}catch(n){throw Yt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return aU(this._delegate,n=>e(new ox(this,n)))}batch(){return xt(this._delegate),new ax(new sU(this._delegate,e=>Pc(this._delegate,e)))}loadBundle(e){return xz(this._delegate,e)}namedQuery(e){return kz(this._delegate,e).then(n=>n?new Qt(this,n):null)}}class Yf extends rw{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(new Si(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Vn.forKey(n,this.firestore,null)}}function _U(t){m2(t)}class ox{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}get(e){const n=Ss(e);return this._delegate.get(n).then(i=>new ju(this._firestore,new Ki(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=Ss(e);return i?(ow("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Ss(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Ss(e);return this._delegate.delete(n),this}}class ax{constructor(e){this._delegate=e}set(e,n,i){const r=Ss(e);return i?(ow("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Ss(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Ss(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Gs{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Ql(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qu(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=Gs.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new Gs(e,new Yf(e),n),r.set(n,s)),s}}Gs.INSTANCES=new WeakMap;class Vn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}static forPath(e,n,i){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vn(n,new Qe(n._delegate,i,new H(e)))}static forKey(e,n,i){return new Vn(n,new Qe(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ta(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ta(this.firestore,UC(this._delegate,e))}catch(n){throw Yt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=re(e),e instanceof Qe?$C(this._delegate,e):!1}set(e,n){n=ow("DocumentReference.set",n);try{return n?DT(this._delegate,e,n):DT(this._delegate,e)}catch(i){throw Yt(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?OT(this._delegate,e):OT(this._delegate,e,n,...i)}catch(r){throw Yt(r,"updateDoc()","DocumentReference.update()")}}delete(){return tU(this._delegate)}onSnapshot(...e){const n=lx(e),i=ux(e,r=>new ju(this.firestore,new Ki(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return rx(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Qz(this._delegate):(e==null?void 0:e.source)==="server"?n=Yz(this._delegate):n=Zz(this._delegate),n.then(i=>new ju(this.firestore,new Ki(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Vn(this.firestore,e?this._delegate.withConverter(Gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Yt(t,e,n){return t.message=t.message.replace(e,n),t}function lx(t){for(const e of t)if(typeof e=="object"&&!P_(e))return e;return{}}function ux(t,e){var n,i;let r;return P_(t[0])?r=t[0]:P_(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:s=>{r.next&&r.next(e(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class ju{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Vn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ix(this._delegate,e._delegate)}}class qu extends ju{data(e){const n=this._delegate.data(e);return g2(n!==void 0),n}}class Qt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}where(e,n,i){try{return new Qt(this.firestore,lr(this._delegate,Bz(e,n,i)))}catch(r){throw Yt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Qt(this.firestore,lr(this._delegate,zz(e,n)))}catch(i){throw Yt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qt(this.firestore,lr(this._delegate,Uz(e)))}catch(n){throw Yt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Qt(this.firestore,lr(this._delegate,$z(e)))}catch(n){throw Yt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qt(this.firestore,lr(this._delegate,jz(...e)))}catch(n){throw Yt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qt(this.firestore,lr(this._delegate,qz(...e)))}catch(n){throw Yt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qt(this.firestore,lr(this._delegate,Wz(...e)))}catch(n){throw Yt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qt(this.firestore,lr(this._delegate,Hz(...e)))}catch(n){throw Yt(n,"endAt()","Query.endAt()")}}isEqual(e){return jC(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Xz(this._delegate):(e==null?void 0:e.source)==="server"?n=eU(this._delegate):n=Jz(this._delegate),n.then(i=>new S_(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=lx(e),i=ux(e,r=>new S_(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return rx(this._delegate,n,i)}withConverter(e){return new Qt(this.firestore,e?this._delegate.withConverter(Gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class vU{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new qu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class S_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Qt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new vU(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new qu(this._firestore,i))})}isEqual(e){return ix(this._delegate,e._delegate)}}class Ta extends Qt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vn(this.firestore,e):null}doc(e){try{return e===void 0?new Vn(this.firestore,$d(this._delegate)):new Vn(this.firestore,$d(this._delegate,e))}catch(n){throw Yt(n,"doc()","CollectionReference.doc()")}}add(e){return nU(this._delegate,e).then(n=>new Vn(this.firestore,n))}isEqual(e){return $C(this._delegate,e._delegate)}withConverter(e){return new Ta(this.firestore,e?this._delegate.withConverter(Gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ss(t){return Se(t,Qe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(...e){this._delegate=new qr(...e)}static documentId(){return new aw($e.keyField().canonicalString())}isEqual(e){return e=re(e),e instanceof qr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._delegate=e}static serverTimestamp(){const e=uU();return e._methodName="FieldValue.serverTimestamp",new vs(e)}static delete(){const e=lU();return e._methodName="FieldValue.delete",new vs(e)}static arrayUnion(...e){const n=cU(...e);return n._methodName="FieldValue.arrayUnion",new vs(n)}static arrayRemove(...e){const n=hU(...e);return n._methodName="FieldValue.arrayRemove",new vs(n)}static increment(e){const n=dU(e);return n._methodName="FieldValue.increment",new vs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={Firestore:sx,GeoPoint:$f,Timestamp:qe,Blob:$u,Transaction:ox,WriteBatch:ax,DocumentReference:Vn,DocumentSnapshot:ju,Query:Qt,QueryDocumentSnapshot:qu,QuerySnapshot:S_,CollectionReference:Ta,FieldPath:aw,FieldValue:vs,setLogLevel:_U,CACHE_SIZE_UNLIMITED:Ez};function wU(t,e){t.INTERNAL.registerComponent(new Ti("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},yU)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t){wU(t,(e,n)=>new sx(e,n,new gU)),t.registerVersion(fU,pU)}IU(Le);function lw(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}const wl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Po={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function cx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TU=EU,PU=cx,hx=new eo("auth","Firebase",cx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new mf("@firebase/auth");function SU(t,...e){qd.logLevel<=ge.WARN&&qd.warn(`Auth (${Qr}): ${t}`,...e)}function qh(t,...e){qd.logLevel<=ge.ERROR&&qd.error(`Auth (${Qr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t,...e){throw uw(t,...e)}function Vt(t,...e){return uw(t,...e)}function dx(t,e,n){const i=Object.assign(Object.assign({},PU()),{[e]:n});return new eo("auth","Firebase",i).create(e,{appName:t.name})}function Ua(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Bt(t,"argument-error"),dx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uw(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return hx.create(t,...e)}function j(t,e,...n){if(!t)throw uw(e,...n)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qh(e),new Error(e)}function ti(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cw(){return FT()==="http:"||FT()==="https:"}function FT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cw()||L1()||"connection"in navigator)?navigator.onLine:!0}function RU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ti(n>e,"Short delay should be less than long delay!"),this.isMobile=NO()||Vv()}get(){return AU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e){ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=new Sc(3e4,6e4);function lt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mt(t,e,n,i,r={}){return px(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const u=ka(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),fx.fetch()(mx(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function px(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},CU),e);try{const r=new bU(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Dl(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dl(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Dl(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Dl(t,"user-disabled",a);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw dx(t,p,d);Bt(t,p)}}catch(r){if(r instanceof en)throw r;Bt(t,"network-request-failed",{message:String(r)})}}async function er(t,e,n,i,r={}){const s=await mt(t,e,n,i,r);return"mfaPendingCredential"in s&&Bt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function mx(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?hw(t.config,r):`${t.config.apiScheme}://${r}`}function kU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vt(this.auth,"network-request-failed")),xU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Vt(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){return t!==void 0&&t.getResponse!==void 0}function zT(t){return t!==void 0&&t.enterprise!==void 0}class LU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return kU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t){return(await mt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function DU(t,e){return mt(t,"GET","/v2/recaptchaConfig",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(t,e){return mt(t,"POST","/v1/accounts:delete",e)}async function MU(t,e){return mt(t,"POST","/v1/accounts:update",e)}async function VU(t,e){return mt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FU(t,e=!1){const n=re(t),i=await n.getIdToken(e),r=Jf(i);j(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Yl(Bm(r.auth_time)),issuedAtTime:Yl(Bm(r.iat)),expirationTime:Yl(Bm(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bm(t){return Number(t)*1e3}function Jf(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const r=k1(n);return r?JSON.parse(r):(qh("Failed to decode base64 JWT payload"),null)}catch(r){return qh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function BU(t){const e=Jf(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof en&&zU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function zU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Zi(t,VU(n,{idToken:i}));j(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qU(s.providerUserInfo):[],u=jU(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new gx(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function $U(t){const e=re(t);await Hu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function qU(t){return t.map(e=>{var{providerId:n}=e,i=lw(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e){const n=await px(t,{},async()=>{const i=ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=mx(t,r,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",fx.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return j(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await WU(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Gu;return i&&(j(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(j(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(j(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gu,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ks{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=lw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gx(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Zi(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FU(this,e)}reload(){return $U(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Hu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Zi(this,OU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,u,c,d,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,P=(u=n.tenantId)!==null&&u!==void 0?u:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:E,emailVerified:x,isAnonymous:D,providerData:U,stsTokenManager:q}=n;j(E&&q,e,"internal-error");const z=Gu.fromJSON(this.name,q);j(typeof E=="string",e,"internal-error"),ur(g,e.name),ur(_,e.name),j(typeof x=="boolean",e,"internal-error"),j(typeof D=="boolean",e,"internal-error"),ur(y,e.name),ur(S,e.name),ur(P,e.name),ur(C,e.name),ur(I,e.name),ur(w,e.name);const ie=new ks({uid:E,auth:e,email:_,emailVerified:x,displayName:g,isAnonymous:D,photoURL:S,phoneNumber:y,tenantId:P,stsTokenManager:z,createdAt:I,lastLoginAt:w});return U&&Array.isArray(U)&&(ie.providerData=U.map(X=>Object.assign({},X))),C&&(ie._redirectEventId=C),ie}static async _fromIdTokenResponse(e,n,i=!1){const r=new Gu;r.updateFromServerResponse(n);const s=new ks({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Hu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;function En(t){ti(t instanceof Function,"Expected a class definition");let e=UT.get(t);return e?(ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_x.type="NONE";const Pa=_x;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t,e,n){return`firebase:${t}:${e}:${n}`}class ta{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=bs(this.userKey,r.apiKey,s),this.fullPersistenceKey=bs("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ks._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ta(En(Pa),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||En(Pa);const a=bs(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(a);if(p){const g=ks._fromJSON(e,p);d!==s&&(u=g),s=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ta(s,e,i):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new ta(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ix(e))return"Blackberry";if(Ex(e))return"Webos";if(dw(e))return"Safari";if((e.includes("chrome/")||yx(e))&&!e.includes("edge/"))return"Chrome";if(Ac(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function vx(t=Je()){return/firefox\//i.test(t)}function dw(t=Je()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yx(t=Je()){return/crios\//i.test(t)}function wx(t=Je()){return/iemobile/i.test(t)}function Ac(t=Je()){return/android/i.test(t)}function Ix(t=Je()){return/blackberry/i.test(t)}function Ex(t=Je()){return/webos/i.test(t)}function $a(t=Je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HU(t=Je()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function GU(t=Je()){var e;return $a(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KU(){return N1()&&document.documentMode===10}function Tx(t=Je()){return $a(t)||Ac(t)||Ex(t)||Ix(t)||/windows phone/i.test(t)||wx(t)}function ZU(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e=[]){let n;switch(t){case"Browser":n=$T(Je());break;case"Worker":n=`${$T(Je())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(t,e={}){return mt(t,"GET","/v2/passwordPolicy",lt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=6;class XU{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:JU,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jT(this),this.idTokenSubscription=new jT(this),this.beforeStateQueue=new QU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await ta.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?re(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YU(this),n=new XU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&En(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=await ta.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Px(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function it(t){return re(t)}class jT{constructor(e){this.auth=e,this.observer=null,this.addObserver=D1(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function fw(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Vt("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",t4().appendChild(i)})}function Sx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const n4="https://www.google.com/recaptcha/enterprise.js?render=",i4="recaptcha-enterprise",r4="NO_RECAPTCHA";class s4{constructor(e){this.type=i4,this.auth=it(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{DU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new LU(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(c=>{u(c)})})}function r(s,a,u){const c=window.grecaptcha;zT(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(r4)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{i(this.auth).then(u=>{if(!n&&zT(window.grecaptcha))r(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}fw(n4+u).then(()=>{r(u,s,a)}).catch(c=>{a(c)})}}).catch(u=>{a(u)})})}}async function qT(t,e,n,i=!1){const r=new s4(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xf(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await qT(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await qT(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(s)})}function o4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function a4(t,e,n){const i=it(t);j(i._canInitEmulator,i,"emulator-config-failed"),j(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=Ax(e),{host:a,port:u}=l4(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${s}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||u4()}function Ax(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l4(t){const e=Ax(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:WT(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:WT(a)}}}function WT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function u4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,n){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(t,e){return mt(t,"POST","/v1/accounts:resetPassword",lt(t,e))}async function Cx(t,e){return mt(t,"POST","/v1/accounts:update",e)}async function c4(t,e){return mt(t,"POST","/v1/accounts:update",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(t,e){return er(t,"POST","/v1/accounts:signInWithPassword",lt(t,e))}async function ep(t,e){return mt(t,"POST","/v1/accounts:sendOobCode",lt(t,e))}async function d4(t,e){return ep(t,e)}async function f4(t,e){return ep(t,e)}async function p4(t,e){return ep(t,e)}async function m4(t,e){return ep(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e){return er(t,"POST","/v1/accounts:signInWithEmailLink",lt(t,e))}async function _4(t,e){return er(t,"POST","/v1/accounts:signInWithEmailLink",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends ja{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ku(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ku(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,n,"signInWithPassword",h4);case"emailLink":return g4(e,{email:this._email,oobCode:this._password});default:Bt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Cx(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return _4(e,{idToken:n,email:this._email,oobCode:this._password});default:Bt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(t,e){return er(t,"POST","/v1/accounts:signInWithIdp",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="http://localhost";class Ai extends ja{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=lw(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Ai(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return $i(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,$i(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$i(e,n)}buildRequest(){const e={requestUri:v4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(t,e){return mt(t,"POST","/v1/accounts:sendVerificationCode",lt(t,e))}async function w4(t,e){return er(t,"POST","/v1/accounts:signInWithPhoneNumber",lt(t,e))}async function I4(t,e){const n=await er(t,"POST","/v1/accounts:signInWithPhoneNumber",lt(t,e));if(n.temporaryProof)throw Dl(t,"account-exists-with-different-credential",n);return n}const E4={USER_NOT_FOUND:"user-not-found"};async function T4(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return er(t,"POST","/v1/accounts:signInWithPhoneNumber",lt(t,n),E4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends ja{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ls({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ls({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return w4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return I4(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return T4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new Ls({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S4(t){const e=jo(Cl(t)).link,n=e?jo(Cl(e)).deep_link_id:null,i=jo(Cl(t)).deep_link_id;return(i?jo(Cl(i)).link:null)||i||n||e||t}class tp{constructor(e){var n,i,r,s,a,u;const c=jo(Cl(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(i=c.oobCode)!==null&&i!==void 0?i:null,g=P4((r=c.mode)!==null&&r!==void 0?r:null);j(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=S4(e);try{return new tp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.providerId=is.PROVIDER_ID}static credential(e,n){return Ku._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=tp.parseLink(n);return j(i,"argument-error"),Ku._fromEmailAndCode(e,i.code,i.tenantId)}}is.PROVIDER_ID="password";is.EMAIL_PASSWORD_SIGN_IN_METHOD="password";is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends tr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class na extends qa{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return j("providerId"in n&&"signInMethod"in n,"argument-error"),Ai._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return j(e.idToken||e.accessToken,"argument-error"),Ai._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return na.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return na.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:u}=e;if(!i&&!r&&!n&&!s||!u)return null;try{return new na(u)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends qa{constructor(){super("facebook.com")}static credential(e){return Ai._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ai._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return hi.credential(n,i)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends qa{constructor(){super("github.com")}static credential(e){return Ai._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="http://localhost";class Sa extends ja{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return $i(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,$i(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$i(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new Sa(i,s)}static _create(e,n){return new Sa(e,n)}buildRequest(){return{requestUri:A4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="saml.";class Wd extends tr{constructor(e){j(e.startsWith(R4),"argument-error"),super(e)}static credentialFromResult(e){return Wd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Wd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Sa.fromJSON(e);return j(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Sa._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends qa{constructor(){super("twitter.com")}static credential(e,n){return Ai._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return fi.credential(n,i)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(t,e){return er(t,"POST","/v1/accounts:signUp",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ks._fromIdTokenResponse(e,i,r),a=HT(i);return new Un({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=HT(i);return new Un({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function HT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t){var e;const n=it(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Un({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await xx(n,{returnSecureToken:!0}),r=await Un._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends en{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Hd(e,n,i,r)}}function kx(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t,e){const n=re(t);await np(!0,n,e);const{providerUserInfo:i}=await MU(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=bx(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function pw(t,e,n=!1){const i=await Zi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Un._forOperation(t,"link",i)}async function np(t,e,n){await Hu(e);const i=bx(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";j(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Zi(t,kx(i,r,e,t),n);j(s.idToken,i,"internal-error");const a=Jf(s.idToken);j(a,i,"internal-error");const{sub:u}=a;return j(t.uid===u,i,"user-mismatch"),Un._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(t,e,n=!1){const i="signIn",r=await kx(t,i,e),s=await Un._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function ip(t,e){return Nx(it(t),e)}async function Dx(t,e){const n=re(t);return await np(!1,n,e.providerId),pw(n,e)}async function Ox(t,e){return Lx(re(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e){return er(t,"POST","/v1/accounts:signInWithCustomToken",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4(t,e){const n=it(t),i=await k4(n,{token:e,returnSecureToken:!0}),r=await Un._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?mw._fromServerResponse(e,n):"totpInfo"in n?gw._fromServerResponse(e,n):Bt(e,"internal-error")}}class mw extends Rc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new mw(n)}}class gw extends Rc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new gw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e,n){var i;j(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),j(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(j(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(j(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(t){const e=it(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function L4(t,e,n){const i=it(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&rp(i,r,n),await Xf(i,r,"getOobCode",f4)}async function N4(t,e,n){await Rx(re(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_w(t),i})}async function D4(t,e){await c4(re(t),{oobCode:e})}async function Mx(t,e){const n=re(t),i=await Rx(n,{oobCode:e}),r=i.requestType;switch(j(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(i.mfaInfo,n,"internal-error");default:j(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=Rc._fromServerResponse(it(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function O4(t,e){const{data:n}=await Mx(re(t),e);return n.email}async function M4(t,e,n){const i=it(t),a=await Xf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xx).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_w(t),c}),u=await Un._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function V4(t,e,n){return ip(re(t),is.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_w(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(t,e,n){const i=it(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,u){j(u.handleCodeInApp,i,"argument-error"),u&&rp(i,a,u)}s(r,n),await Xf(i,r,"getOobCode",p4)}function B4(t,e){const n=tp.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function z4(t,e,n){const i=re(t),r=is.credentialWithLink(e,n||Wu());return j(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),ip(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4(t,e){return mt(t,"POST","/v1/accounts:createAuthUri",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(t,e){const n=cw()?Wu():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await U4(re(t),i);return r||[]}async function j4(t,e){const n=re(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&rp(n.auth,r,e);const{email:s}=await d4(n.auth,r);s!==t.email&&await t.reload()}async function q4(t,e,n){const i=re(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&rp(i.auth,s,n);const{email:a}=await m4(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){return mt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=re(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Zi(i,W4(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const u=i.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function G4(t,e){return Vx(re(t),e,null)}function K4(t,e){return Vx(re(t),null,e)}async function Vx(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Zi(t,Cx(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const a=(n=(e=Jf(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(a){const u=a!=="anonymous"&&a!=="custom"?a:null;return new ia(s,u)}}if(!i)return null;switch(i){case"facebook.com":return new Q4(s,r);case"github.com":return new Y4(s,r);case"google.com":return new J4(s,r);case"twitter.com":return new X4(s,r,t.screenName||null);case"custom":case"anonymous":return new ia(s,null);default:return new ia(s,i,r)}}class ia{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class Fx extends ia{constructor(e,n,i,r){super(e,n,i),this.username=r}}class Q4 extends ia{constructor(e,n){super(e,"facebook.com",n)}}class Y4 extends Fx{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class J4 extends ia{constructor(e,n){super(e,"google.com",n)}}class X4 extends Fx{constructor(e,n,i){super(e,"twitter.com",n,i)}}function e$(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Z4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new As("enroll",e,n)}static _fromMfaPendingCredential(e){return new As("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return As._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return As._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=it(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(u=>Rc._fromServerResponse(i,u));j(r.mfaPendingCredential,i,"internal-error");const a=As._fromMfaPendingCredential(r.mfaPendingCredential);return new vw(a,s,async u=>{const c=await u._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const d=Object.assign(Object.assign({},r),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const p=await Un._fromIdTokenResponse(i,n.operationType,d);return await i._updateCurrentUser(p.user),p;case"reauthenticate":return j(n.user,i,"internal-error"),Un._forOperation(n.user,n.operationType,d);default:Bt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function t$(t,e){var n;const i=re(t),r=e;return j(e.customData.operationType,i,"argument-error"),j((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),vw._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:start",lt(t,e))}function i$(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:finalize",lt(t,e))}function r$(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",lt(t,e))}class yw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Rc._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new yw(e)}async getSession(){return As._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Zi(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Zi(this.user,r$(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const zm=new WeakMap;function s$(t){const e=re(t);return zm.has(e)||zm.set(e,yw._fromUser(e)),zm.get(e)}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(){const t=Je();return dw(t)||$a(t)}const a$=1e3,l$=10;class zx extends Bx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=o$()&&ZU(),this.fallbackToPolling=Tx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);KU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,l$):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},a$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zx.type="LOCAL";const ww=zx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux extends Bx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ux.type="SESSION";const Ks=Ux;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async d=>d(n.origin,s)),c=await u$(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const d=Cc("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return window}function h$(t){dt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(){return typeof dt().WorkerGlobalScope<"u"&&typeof dt().importScripts=="function"}async function d$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function p$(){return Iw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="firebaseLocalStorageDb",m$=1,Kd="firebaseLocalStorage",jx="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function op(t,e){return t.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function g$(){const t=indexedDB.deleteDatabase($x);return new xc(t).toPromise()}function A_(){const t=indexedDB.open($x,m$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Kd,{keyPath:jx})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Kd)?e(i):(i.close(),await g$(),e(await A_()))})})}async function GT(t,e,n){const i=op(t,!0).put({[jx]:e,value:n});return new xc(i).toPromise()}async function _$(t,e){const n=op(t,!1).get(e),i=await new xc(n).toPromise();return i===void 0?null:i.value}function KT(t,e){const n=op(t,!0).delete(e);return new xc(n).toPromise()}const v$=800,y$=3;class qx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>y$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Iw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sp._getInstance(p$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await d$(),!this.activeServiceWorker)return;this.sender=new c$(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A_();return await GT(e,Gd,"1"),await KT(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>GT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>_$(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=op(r,!1).getAll();return new xc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qx.type="LOCAL";const Zu=qx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w$(t,e){return mt(t,"POST","/v2/accounts/mfaSignIn:start",lt(t,e))}function I$(t,e){return mt(t,"POST","/v2/accounts/mfaSignIn:finalize",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=500,T$=6e4,Th=1e12;class P${constructor(e){this.auth=e,this.counter=Th,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new S$(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Th;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Th;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Th;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class S${constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;j(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=A$(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},T$)},E$))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function A$(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=Sx("rcb"),R$=new Sc(3e4,6e4),C$="https://www.google.com/recaptcha/api.js?";class x${constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=dt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return j(k$(n),e,"argument-error"),this.shouldResolveImmediately(n)&&BT(dt().grecaptcha)?Promise.resolve(dt().grecaptcha):new Promise((i,r)=>{const s=dt().setTimeout(()=>{r(Vt(e,"network-request-failed"))},R$.get());dt()[Um]=()=>{dt().clearTimeout(s),delete dt()[Um];const u=dt().grecaptcha;if(!u||!BT(u)){r(Vt(e,"internal-error"));return}const c=u.render;u.render=(d,p)=>{const g=c(d,p);return this.counter++,g},this.hostLanguage=n,i(u)};const a=`${C$}?${ka({onload:Um,render:"explicit",hl:n})}`;fw(a).catch(()=>{clearTimeout(s),r(Vt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=dt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function k$(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class b${async load(e){return new P$(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="recaptcha",L$={theme:"light",type:"image"};let N$=class{constructor(e,n,i=Object.assign({},L$)){this.parameters=i,this.type=Wx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=it(e),this.isInvisible=this.parameters.size==="invisible",j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;j(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new b$:new x$,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=dt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){j(cw()&&!Iw(),this.auth,"internal-error"),await D$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await NU(this.auth);j(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function D$(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ls._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function O$(t,e,n){const i=it(t),r=await ap(i,e,re(n));return new Ew(r,s=>ip(i,s))}async function M$(t,e,n){const i=re(t);await np(!1,i,"phone");const r=await ap(i.auth,e,re(n));return new Ew(r,s=>Dx(i,s))}async function V$(t,e,n){const i=re(t),r=await ap(i.auth,e,re(n));return new Ew(r,s=>Ox(i,s))}async function ap(t,e,n){var i;const r=await n.verify();try{j(typeof r=="string",t,"argument-error"),j(n.type===Wx,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return j(a.type==="enroll",t,"internal-error"),(await n$(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{j(a.type==="signin",t,"internal-error");const u=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return j(u,t,"missing-multi-factor-info"),(await w$(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await y4(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return a}}finally{n._reset()}}async function F$(t,e){await pw(re(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs=class Wh{constructor(e){this.providerId=Wh.PROVIDER_ID,this.auth=it(e)}verifyPhoneNumber(e,n){return ap(this.auth,e,re(n))}static credential(e,n){return Ls._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Wh.credentialFromTaggedObject(n)}static credentialFromError(e){return Wh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Ls._fromTokenResponse(n,i):null}};Zs.PROVIDER_ID="phone";Zs.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t,e){return e?En(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends ja{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $i(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $i(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $i(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B$(t){return Nx(t.auth,new Tw(t),t.bypassAuthState)}function z$(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),Lx(n,new Tw(t),t.bypassAuthState)}async function U$(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),pw(n,new Tw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B$;case"linkViaPopup":case"linkViaRedirect":return U$;case"reauthViaPopup":case"reauthViaRedirect":return z$;default:Bt(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=new Sc(2e3,1e4);async function j$(t,e,n){const i=it(t);Ua(t,e,tr);const r=ao(i,n);return new Fi(i,"signInViaPopup",e,r).executeNotNull()}async function q$(t,e,n){const i=re(t);Ua(i.auth,e,tr);const r=ao(i.auth,n);return new Fi(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function W$(t,e,n){const i=re(t);Ua(i.auth,e,tr);const r=ao(i.auth,n);return new Fi(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class Fi extends Hx{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Fi.currentPopupAction&&Fi.currentPopupAction.cancel(),Fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return j(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=Cc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$$.get())};e()}}Fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="pendingRedirect",Jl=new Map;class G$ extends Hx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Jl.get(this.auth._key());if(!e){try{const i=await K$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Jl.set(this.auth._key(),e)}return this.bypassAuthState||Jl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K$(t,e){const n=Kx(e),i=Gx(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function Pw(t,e){return Gx(t)._set(Kx(e),"true")}function Z$(){Jl.clear()}function Sw(t,e){Jl.set(t._key(),e)}function Gx(t){return En(t._redirectPersistence)}function Kx(t){return bs(H$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t,e,n){return Y$(t,e,n)}async function Y$(t,e,n){const i=it(t);Ua(t,e,tr),await i._initializationPromise;const r=ao(i,n);return await Pw(r,i),r._openRedirect(i,e,"signInViaRedirect")}function J$(t,e,n){return X$(t,e,n)}async function X$(t,e,n){const i=re(t);Ua(i.auth,e,tr),await i.auth._initializationPromise;const r=ao(i.auth,n);await Pw(r,i.auth);const s=await Zx(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function e3(t,e,n){return t3(t,e,n)}async function t3(t,e,n){const i=re(t);Ua(i.auth,e,tr),await i.auth._initializationPromise;const r=ao(i.auth,n);await np(!1,i,e.providerId),await Pw(r,i.auth);const s=await Zx(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function n3(t,e){return await it(t)._initializationPromise,lp(t,e,!1)}async function lp(t,e,n=!1){const i=it(t),r=ao(i,e),a=await new G$(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function Zx(t){const e=Cc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=10*60*1e3;class Qx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Yx(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i3&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZT(e))}saveEventToCache(e){this.cachedEventUids.add(ZT(e)),this.lastProcessedEventTime=Date.now()}}function ZT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(t,e={}){return mt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o3=/^https?/;async function a3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Jx(t);for(const n of e)try{if(l3(n))return}catch{}Bt(t,"unauthorized-domain")}function l3(t){const e=Wu(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!o3.test(n))return!1;if(s3.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=new Sc(3e4,6e4);function QT(){const t=dt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function c3(t){return new Promise((e,n)=>{var i,r,s;function a(){QT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QT(),n(Vt(t,"network-request-failed"))},timeout:u3.get()})}if(!((r=(i=dt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=dt().gapi)===null||s===void 0)&&s.load)a();else{const u=Sx("iframefcb");return dt()[u]=()=>{gapi.load?a():n(Vt(t,"network-request-failed"))},fw(`https://apis.google.com/js/api.js?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Hh=null,e})}let Hh=null;function h3(t){return Hh=Hh||c3(t),Hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new Sc(5e3,15e3),f3="__/auth/iframe",p3="emulator/auth/iframe",m3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _3(t){const e=t.config;j(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hw(e,p3):`https://${t.config.authDomain}/${f3}`,i={apiKey:e.apiKey,appName:t.name,v:Qr},r=g3.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ka(i).slice(1)}`}async function v3(t){const e=await h3(t),n=dt().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:_3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m3,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Vt(t,"network-request-failed"),u=dt().setTimeout(()=>{s(a)},d3.get());function c(){dt().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w3=500,I3=600,E3="_blank",T3="http://localhost";class YT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P3(t,e,n,i=w3,r=I3){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},y3),{width:i.toString(),height:r.toString(),top:s,left:a}),d=Je().toLowerCase();n&&(u=yx(d)?E3:n),vx(d)&&(e=e||T3,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[y,S])=>`${_}${y}=${S},`,"");if(GU(d)&&u!=="_self")return S3(e||"",u),new YT(null);const g=window.open(e||"",u,p);j(g,t,"popup-blocked");try{g.focus()}catch{}return new YT(g)}function S3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="__/auth/handler",R3="emulator/auth/handler",C3=encodeURIComponent("fac");async function R_(t,e,n,i,r,s){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Qr,eventId:r};if(e instanceof tr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",zO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries(s||{}))a[p]=g}if(e instanceof qa){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),d=c?`#${C3}=${encodeURIComponent(c)}`:"";return`${x3(t)}?${ka(u).slice(1)}${d}`}function x3({config:t}){return t.emulator?hw(t,R3):`https://${t.authDomain}/${A3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class k3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ks,this._completeRedirectFn=lp,this._overrideRedirectResult=Sw}async _openPopup(e,n,i,r){var s;ti((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await R_(e,n,i,Wu(),r);return P3(e,a,Cc())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await R_(e,n,i,Wu(),r);return h$(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ti(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await v3(e),i=new Qx(e);return n.register("authEvent",r=>(j(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($m,{type:$m},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[$m];a!==void 0&&n(!!a),Bt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Tx()||dw()||$a()}}const b3=k3;class L3{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return vi("unexpected MultiFactorSessionType")}}}class Aw extends L3{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Aw(e)}_finalizeEnroll(e,n,i){return i$(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return I$(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Xx{constructor(){}static assertion(e){return Aw._fromCredential(e)}}Xx.FACTOR_ID="phone";var JT="@firebase/auth",XT="1.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function O3(t){Mr(new Ti("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;j(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Px(t)},d=new e4(i,r,s,c);return o4(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Mr(new Ti("auth-internal",e=>{const n=it(e.getProvider("auth").getImmediate());return(i=>new N3(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(JT,XT,D3(t)),Ii(JT,XT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=5*60;kO("authIdTokenMaxAge");O3("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=2e3;async function F3(t,e,n){var i;const{BuildInfo:r}=Qs();ti(e.sessionId,"AuthEvent did not contain a session ID");const s=await j3(e.sessionId),a={};return $a()?a.ibi=r.packageName:Ac()?a.apn=r.packageName:Bt(t,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=s,R_(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,a)}async function B3(t){const{BuildInfo:e}=Qs(),n={};$a()?n.iosBundleId=e.packageName:Ac()?n.androidPackageName=e.packageName:Bt(t,"operation-not-supported-in-this-environment"),await Jx(t,n)}function z3(t){const{cordova:e}=Qs();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,HU()?"_blank":"_system","location=yes"),n(r)})})}async function U3(t,e,n){const{cordova:i}=Qs();let r=()=>{};try{await new Promise((s,a)=>{let u=null;function c(){var g;s();const _=(g=i.plugins.browsertab)===null||g===void 0?void 0:g.close;typeof _=="function"&&_(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function d(){u||(u=window.setTimeout(()=>{a(Vt(t,"redirect-cancelled-by-user"))},V3))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&d()}e.addPassiveListener(c),document.addEventListener("resume",d,!1),Ac()&&document.addEventListener("visibilitychange",p,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",d,!1),document.removeEventListener("visibilitychange",p,!1),u&&window.clearTimeout(u)}})}finally{r()}}function $3(t){var e,n,i,r,s,a,u,c,d,p;const g=Qs();j(typeof((e=g==null?void 0:g.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof((n=g==null?void 0:g.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j(typeof((s=(r=(i=g==null?void 0:g.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j(typeof((c=(u=(a=g==null?void 0:g.cordova)===null||a===void 0?void 0:a.plugins)===null||u===void 0?void 0:u.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j(typeof((p=(d=g==null?void 0:g.cordova)===null||d===void 0?void 0:d.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function j3(t){const e=q3(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function q3(t){if(ti(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=20;class H3 extends Qx{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function G3(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Q3(),postBody:null,tenantId:t.tenantId,error:Vt(t,"no-auth-event")}}function K3(t,e){return C_()._set(x_(t),e)}async function eP(t){const e=await C_()._get(x_(t));return e&&await C_()._remove(x_(t)),e}function Z3(t,e){var n,i;const r=J3(e);if(r.includes("/__/auth/callback")){const s=Gh(r),a=s.firebaseError?Y3(decodeURIComponent(s.firebaseError)):null,u=(i=(n=a==null?void 0:a.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],c=u?Vt(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function Q3(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<W3;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function C_(){return En(ww)}function x_(t){return bs("authEvent",t.config.apiKey,t.name)}function Y3(t){try{return JSON.parse(t)}catch{return null}}function J3(t){const e=Gh(t),n=e.link?decodeURIComponent(e.link):void 0,i=Gh(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Gh(r).link||r||i||n||t}function Gh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return jo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=500;class e9{constructor(){this._redirectPersistence=Ks,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lp,this._overrideRedirectResult=Sw}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new H3(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Bt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){$3(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Z$(),await this._originValidation(e);const a=G3(e,i,r);await K3(e,a);const u=await F3(e,a,n),c=await z3(u);return U3(e,s,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=B3(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=Qs(),a=setTimeout(async()=>{await eP(e),n.onEvent(tP())},X3),u=async p=>{clearTimeout(a);const g=await eP(e);let _=null;g&&(p!=null&&p.url)&&(_=Z3(g,p.url)),n.onEvent(_||tP())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,u);const c=r,d=`${s.packageName.toLowerCase()}://`;Qs().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(d)&&u({url:p}),typeof c=="function")try{c(p)}catch(g){console.error(g)}}}}const t9=e9;function tP(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(t,e){it(t)._logFramework(e)}var i9="@firebase/auth-compat",r9="0.4.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=1e3;function Xl(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function o9(){return Xl()==="http:"||Xl()==="https:"}function ek(t=Je()){return!!((Xl()==="file:"||Xl()==="ionic:"||Xl()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function a9(){return Vv()||Mv()}function l9(){return N1()&&(document==null?void 0:document.documentMode)===11}function u9(t=Je()){return/Edge\/\d+/.test(t)}function c9(t=Je()){return l9()||u9(t)}function tk(){try{const t=self.localStorage,e=Cc();if(t)return t.setItem(e,"1"),t.removeItem(e),c9()?yu():!0}catch{return Rw()&&yu()}return!1}function Rw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jm(){return(o9()||L1()||ek())&&!a9()&&tk()&&!Rw()}function nk(){return ek()&&typeof document<"u"}async function h9(){return nk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},s9);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function d9(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn={LOCAL:"local",NONE:"none",SESSION:"session"},Il=j,ik="persistence";function f9(t,e){if(Il(Object.values(wn).includes(e),t,"invalid-persistence-type"),Vv()){Il(e!==wn.SESSION,t,"unsupported-persistence-type");return}if(Mv()){Il(e===wn.NONE,t,"unsupported-persistence-type");return}if(Rw()){Il(e===wn.NONE||e===wn.LOCAL&&yu(),t,"unsupported-persistence-type");return}Il(e===wn.NONE||tk(),t,"unsupported-persistence-type")}async function k_(t){await t._initializationPromise;const e=rk(),n=bs(ik,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function p9(t,e){const n=rk();if(!n)return[];const i=bs(ik,t,e);switch(n.getItem(i)){case wn.NONE:return[Pa];case wn.LOCAL:return[Zu,Ks];case wn.SESSION:return[Ks];default:return[]}}function rk(){var t;try{return((t=d9())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=j;class wr{constructor(){this.browserResolver=En(b3),this.cordovaResolver=En(t9),this.underlyingResolver=null,this._redirectPersistence=Ks,this._completeRedirectFn=lp,this._overrideRedirectResult=Sw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return nk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return m9(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await h9();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){return t.unwrap()}function g9(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(t){return ok(t)}function v9(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new y9(t,t$(t,e))}else if(i){const r=ok(e),s=e;r&&(s.credential=r,s.tenantId=i.tenantId||void 0,s.email=i.email||void 0,s.phoneNumber=i.phoneNumber||void 0)}}function ok(t){const{_tokenResponse:e}=t instanceof en?t.customData:t;if(!e)return null;if(!(t instanceof en)&&"temporaryProof"in e&&"phoneNumber"in e)return Zs.credentialFromResult(t);const n=e.providerId;if(!n||n===wl.PASSWORD)return null;let i;switch(n){case wl.GOOGLE:i=hi;break;case wl.FACEBOOK:i=ci;break;case wl.GITHUB:i=di;break;case wl.TWITTER:i=fi;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:u,nonce:c}=e;return!s&&!a&&!r&&!u?null:u?n.startsWith("saml.")?Sa._create(n,u):Ai._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:r,accessToken:s}):new na(n).credential({idToken:r,accessToken:s,rawNonce:c})}return t instanceof en?i.credentialFromError(t):i.credentialFromResult(t)}function cn(t,e){return e.catch(n=>{throw n instanceof en&&v9(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:_9(n),additionalUserInfo:e$(n),user:Bi.getOrCreate(r)}})}async function b_(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>cn(t,n.confirm(i))}}class y9{constructor(e,n){this.resolver=n,this.auth=g9(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return cn(sk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._delegate=e,this.multiFactor=s$(e)}static getOrCreate(e){return Bi.USER_MAP.has(e)||Bi.USER_MAP.set(e,new Bi(e)),Bi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return cn(this.auth,Dx(this._delegate,e))}async linkWithPhoneNumber(e,n){return b_(this.auth,M$(this._delegate,e,n))}async linkWithPopup(e){return cn(this.auth,W$(this._delegate,e,wr))}async linkWithRedirect(e){return await k_(it(this.auth)),e3(this._delegate,e,wr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return cn(this.auth,Ox(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return b_(this.auth,V$(this._delegate,e,n))}reauthenticateWithPopup(e){return cn(this.auth,q$(this._delegate,e,wr))}async reauthenticateWithRedirect(e){return await k_(it(this.auth)),J$(this._delegate,e,wr)}sendEmailVerification(e){return j4(this._delegate,e)}async unlink(e){return await x4(this._delegate,e),this}updateEmail(e){return G4(this._delegate,e)}updatePassword(e){return K4(this._delegate,e)}updatePhoneNumber(e){return F$(this._delegate,e)}updateProfile(e){return H4(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return q4(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=j;class L_{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;El(i,"invalid-api-key",{appName:e.name}),El(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?wr:void 0;this._delegate=n.initialize({options:{persistence:w9(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(TU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){a4(this._delegate,e,n)}applyActionCode(e){return D4(this._delegate,e)}checkActionCode(e){return Mx(this._delegate,e)}confirmPasswordReset(e,n){return N4(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return cn(this._delegate,M4(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return $4(this._delegate,e)}isSignInWithEmailLink(e){return B4(this._delegate,e)}async getRedirectResult(){El(jm(),this._delegate,"operation-not-supported-in-this-environment");const e=await n3(this._delegate,wr);return e?cn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){n9(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=nP(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=nP(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return F4(this._delegate,e,n)}sendPasswordResetEmail(e,n){return L4(this._delegate,e,n||void 0)}async setPersistence(e){f9(this._delegate,e);let n;switch(e){case wn.SESSION:n=Ks;break;case wn.LOCAL:n=await En(Zu)._isAvailable()?Zu:ww;break;case wn.NONE:n=Pa;break;default:return Bt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return cn(this._delegate,C4(this._delegate))}signInWithCredential(e){return cn(this._delegate,ip(this._delegate,e))}signInWithCustomToken(e){return cn(this._delegate,b4(this._delegate,e))}signInWithEmailAndPassword(e,n){return cn(this._delegate,V4(this._delegate,e,n))}signInWithEmailLink(e,n){return cn(this._delegate,z4(this._delegate,e,n))}signInWithPhoneNumber(e,n){return b_(this._delegate,O$(this._delegate,e,n))}async signInWithPopup(e){return El(jm(),this._delegate,"operation-not-supported-in-this-environment"),cn(this._delegate,j$(this._delegate,e,wr))}async signInWithRedirect(e){return El(jm(),this._delegate,"operation-not-supported-in-this-environment"),await k_(this._delegate),Q$(this._delegate,e,wr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return O4(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}L_.Persistence=wn;function nP(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&Bi.getOrCreate(a)),error:e,complete:n}}function w9(t,e){const n=p9(t,e);if(typeof self<"u"&&!n.includes(Zu)&&n.push(Zu),typeof window<"u")for(const i of[ww,Ks])n.includes(i)||n.push(i);return n.includes(Pa)||n.push(Pa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.providerId="phone",this._delegate=new Zs(sk(Le.auth()))}static credential(e,n){return Zs.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Cw.PHONE_SIGN_IN_METHOD=Zs.PHONE_SIGN_IN_METHOD;Cw.PROVIDER_ID=Zs.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=j;class E9{constructor(e,n,i=Le.app()){var r;I9((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new N$(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9="auth-compat";function P9(t){t.INTERNAL.registerComponent(new Ti(T9,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new L_(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Po.EMAIL_SIGNIN,PASSWORD_RESET:Po.PASSWORD_RESET,RECOVER_EMAIL:Po.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Po.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Po.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Po.VERIFY_EMAIL}},EmailAuthProvider:is,FacebookAuthProvider:ci,GithubAuthProvider:di,GoogleAuthProvider:hi,OAuthProvider:na,SAMLAuthProvider:Wd,PhoneAuthProvider:Cw,PhoneMultiFactorGenerator:Xx,RecaptchaVerifier:E9,TwitterAuthProvider:fi,Auth:L_,AuthCredential:ja,Error:en}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(i9,r9)}P9(Le);const S9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Le.initializeApp(S9);const A9=()=>{const[t,e]=N.useState([]);N.useEffect(()=>{n()},[]);const n=()=>{const r=Le.firestore().collection("rooms").onSnapshot(s=>{const a=[];s.forEach(u=>{a.push(u.id)}),e(a)});return()=>{r()}};return B.jsx(B.Fragment,{children:t.map(i=>B.jsxs("div",{className:wm.rooms_container,children:[B.jsx("div",{className:wm.dot}),B.jsx(zg,{to:`/room/${i}`,className:wm.room,children:i})]},i))})},R9="_input_rciil_1",C9={input:R9},N_=({children:t,...e})=>B.jsx("input",{...e,className:C9.input,type:"text",placeholder:t}),x9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Le.initializeApp(x9);const k9=()=>{const[t,e]=N.useState(!1),[n,i]=N.useState(""),[r,s]=N.useState(null),a=nc();N.useEffect(()=>{Le.auth().onAuthStateChanged(d=>{d&&s(d)})},[]);const u=()=>{a(r?`/room/${n}`:"/login")},c=()=>{r?e(!t):a("/login")};return B.jsxs("div",{className:iE.home_page_container,children:[B.jsxs("div",{className:iE.buttons_container,children:[B.jsx(Oi,{style:{background:"#C7B8EA"},children:"Створити кімнату"}),B.jsx(Oi,{style:{background:"#E9E9E9"},onClick:c,children:"Підʼєднатися до кімнати"})]}),B.jsxs(R1,{visible:t,setVisible:e,children:[B.jsx(N_,{children:"ID Кімнати",value:n,onChange:d=>{i(d.target.value)}}),B.jsx(Oi,{onClick:u,style:{background:"#C7B8EA",marginBottom:"2rem",marginTop:"1rem"},children:"Підʼєднатися"}),B.jsx(A9,{})]})]})},b9="_room_page_container_zs6ph_1",L9="_back_zs6ph_9",N9="_settings_zs6ph_23",D9="_users_list_container_zs6ph_37",O9="_users_list_zs6ph_37",M9="_user_zs6ph_37",V9="_ready_point_zs6ph_60",Wn={room_page_container:b9,back:L9,settings:N9,users_list_container:D9,users_list:O9,user:M9,ready_point:V9},F9={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Le.initializeApp(F9);const B9=()=>{var q;const[t,e]=N.useState(!1),{roomId:n}=Dv(),[i,r]=N.useState([]),[s,a]=N.useState([]),[u,c]=N.useState(!1),[d,p]=N.useState("Готовий");N.useState(null);const[g,_]=N.useState(!1),y=nc(),S=Le.firestore();N.useEffect(()=>{Le.auth().onAuthStateChanged(z=>{z&&(a(z),z.uid=="PkwdudbBl2PMWHShdFZgPAgmEkN2"&&e(!0))})},[]),N.useEffect(()=>{P()},[]);const P=()=>{const ie=S.collection("rooms").doc(n).onSnapshot(X=>{X.exists?r(X.data()):console.log("Документ не існує")});return()=>{ie()}};N.useEffect(()=>{i.length!=0&&(I(),C())},[i]);const C=()=>{const z=i.users.every(ye=>ye.ready===!0),ie=S.collection("rooms").doc(n);if(z){console.log("ALL READY");var X=[];i.users.map(ye=>{X.push(ye.id)});var J;t&&(J=X[Math.floor(Math.random()*X.length)]),console.log(J),ie.update({seeking:J});var fe=10;setInterval(()=>{if(fe!=-1&&z)p(fe),fe--;else return},1e3),fe==0&&z&&(s.uid=J)&&y()}else clearInterval(),ie.update({seeking:""})},I=()=>{s.uid?i.users.some(ie=>ie.id===s.uid)?console.log("Є"):w():console.log("Не зареєстровані")},w=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(z=>{var ie={latitude:z.coords.latitude,longitude:z.coords.longitude};const X={id:s.uid,location:ie,ready:!1,color:"#20a7f5"};S.collection("rooms").doc(n).update({users:Le.firestore.FieldValue.arrayUnion(X)})}):console.log("Геолока не надана")},E=()=>{const z=S.collection("rooms").doc(n);u?z.get().then(ie=>{if(ie.exists){const fe=ie.data().users.map(ye=>ye.id===s.uid?{...ye,ready:!1}:ye);z.update({users:fe}),c(!1),p("Готовий")}}):u||z.get().then(ie=>{if(ie.exists){const fe=ie.data().users.map(ye=>ye.id===s.uid?{...ye,ready:!0}:ye);z.update({users:fe}),c(!0),p("Не готовий")}})},x=()=>{y(-1)},D=()=>{t&&_(!g)},U=()=>{t&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(z=>{var ie={latitude:z.coords.latitude,longitude:z.coords.longitude};console.log(ie);const X=new Le.firestore.GeoPoint(ie.latitude,ie.longitude);console.log(X),Le.firestore().collection("rooms").doc(n).update({settings:{...i.settings,centerField:X}}).then(()=>{console.log("Місцеположення оновлено успішно")}).catch(ye=>{console.error("Помилка оновлення місцеположення:",ye)})}):console.log("Геолока не надана"))};return B.jsxs("div",{className:Wn.room_page_container,children:[B.jsx("div",{onClick:x,className:Wn.back,children:B.jsx("svg",{className:Wn.back_icon,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:B.jsx("path",{d:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"})})}),B.jsx("div",{onClick:D,className:Wn.settings,children:B.jsx("svg",{className:Wn.settings_icon,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:B.jsx("path",{d:"m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm0-80q-25 0-42.5-17.5T422-480q0-25 17.5-42.5T482-540q25 0 42.5 17.5T542-480q0 25-17.5 42.5T482-420Zm-2-60Zm-40 320h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Z"})})}),B.jsxs("div",{className:Wn.users_list_container,children:[B.jsx("h3",{children:"Список гравців:"}),B.jsx("div",{className:Wn.users_list,children:(q=i==null?void 0:i.users)==null?void 0:q.map(z=>B.jsxs("div",{className:Wn.user,children:[B.jsx("div",{className:Wn.ready_point,style:z.ready?{background:"#62FF48"}:{background:"#FD3A3A"}}),B.jsx("p",{style:i.seeking==z.id?{color:"red"}:{},children:z.id})]},z.id))})]}),B.jsx(Oi,{onClick:E,style:{background:"#C7B8EA",width:"70% "},children:d}),B.jsx("p",{children:"ID Кімнати:"}),B.jsx("div",{children:n}),B.jsx(zg,{to:`/map/seeking/${n}`,children:"Seeking Map"}),B.jsx(zg,{to:`/map/hiding/${n}`,children:"Hiding Map"}),B.jsx("p",{children:s.uid||s.id||"Немає"}),B.jsx(R1,{visible:g,setVisible:()=>{_(!g)},children:B.jsx("div",{className:Wn.modal_settings_container,children:B.jsxs("div",{className:Wn.modal_content,children:[B.jsx("h2",{id:"modal-modal-title",children:"Налаштування кімнати"}),B.jsx(N_,{children:"Час на ховання"}),B.jsx(Oi,{children:"Змінити час"}),B.jsx(N_,{children:"Радіус"}),B.jsx(Oi,{children:"Змінити радіус"}),B.jsx(Oi,{onClick:U,children:"Змінити геолокацію центра"})]})})})]})};function ak(t,e){const n=N.useRef(e);N.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function z9(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const U9=1;function $9(t){return Object.freeze({__version:U9,map:t})}function lk(t,e){return Object.freeze({...t,...e})}const uk=N.createContext(null),ck=uk.Provider;function xw(){const t=N.useContext(uk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function hk(t){function e(n,i){const{instance:r,context:s}=t(n).current;return N.useImperativeHandle(i,()=>r),n.children==null?null:eu.createElement(ck,{value:s},n.children)}return N.forwardRef(e)}function j9(t){function e(n,i){const[r,s]=N.useState(!1),{instance:a}=t(n,s).current;N.useImperativeHandle(i,()=>a),N.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?g1.createPortal(n.children,u):null}return N.forwardRef(e)}function q9(t){function e(n,i){const{instance:r}=t(n).current;return N.useImperativeHandle(i,()=>r),null}return N.forwardRef(e)}function kw(t,e){const n=N.useRef();N.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function up(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function W9(t,e){return function(i,r){const s=xw(),a=t(up(i,s),s);return ak(s.map,i.attribution),kw(a.current,i.eventHandlers),e(a.current,s,i,r),a}}var D_={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})($b,function(n){var i="1.9.4";function r(o){var l,h,f,m;for(h=1,f=arguments.length;h<f;h++){m=arguments[h];for(l in m)o[l]=m[l]}return o}var s=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function a(o,l){var h=Array.prototype.slice;if(o.bind)return o.bind.apply(o,h.call(arguments,1));var f=h.call(arguments,2);return function(){return o.apply(l,f.length?f.concat(h.call(arguments)):arguments)}}var u=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function d(o,l,h){var f,m,v,T;return T=function(){f=!1,m&&(v.apply(h,m),m=!1)},v=function(){f?m=arguments:(o.apply(h,arguments),setTimeout(T,l),f=!0)},v}function p(o,l,h){var f=l[1],m=l[0],v=f-m;return o===f&&h?o:((o-m)%v+v)%v+m}function g(){return!1}function _(o,l){if(l===!1)return o;var h=Math.pow(10,l===void 0?6:l);return Math.round(o*h)/h}function y(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function S(o){return y(o).split(/\s+/)}function P(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var h in l)o.options[h]=l[h];return o.options}function C(o,l,h){var f=[];for(var m in o)f.push(encodeURIComponent(h?m.toUpperCase():m)+"="+encodeURIComponent(o[m]));return(!l||l.indexOf("?")===-1?"?":"&")+f.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function w(o,l){return o.replace(I,function(h,f){var m=l[f];if(m===void 0)throw new Error("No value provided for variable "+h);return typeof m=="function"&&(m=m(l)),m})}var E=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function x(o,l){for(var h=0;h<o.length;h++)if(o[h]===l)return h;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var q=0;function z(o){var l=+new Date,h=Math.max(0,16-(l-q));return q=l+h,window.setTimeout(o,h)}var ie=window.requestAnimationFrame||U("RequestAnimationFrame")||z,X=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function J(o,l,h){if(h&&ie===z)o.call(l);else return ie.call(window,a(o,l))}function fe(o){o&&X.call(window,o)}var ye={__proto__:null,extend:r,create:s,bind:a,get lastId(){return u},stamp:c,throttle:d,wrapNum:p,falseFn:g,formatNum:_,trim:y,splitWords:S,setOptions:P,getParamString:C,template:w,isArray:E,indexOf:x,emptyImageUrl:D,requestFn:ie,cancelFn:X,requestAnimFrame:J,cancelAnimFrame:fe};function We(){}We.extend=function(o){var l=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,f=s(h);f.constructor=l,l.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(l[m]=this[m]);return o.statics&&r(l,o.statics),o.includes&&(xn(o.includes),r.apply(null,[f].concat(o.includes))),r(f,o),delete f.statics,delete f.includes,f.options&&(f.options=h.options?s(h.options):{},r(f.options,o.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,T=f._initHooks.length;v<T;v++)f._initHooks[v].call(this)}},l},We.include=function(o){var l=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},We.mergeOptions=function(o){return r(this.prototype.options,o),this},We.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),h=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function xn(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=E(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var He={on:function(o,l,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],l);else{o=S(o);for(var m=0,v=o.length;m<v;m++)this._on(o[m],l,h)}return this},off:function(o,l,h){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var f in o)this._off(f,o[f],l);else{o=S(o);for(var m=arguments.length===1,v=0,T=o.length;v<T;v++)m?this._off(o[v]):this._off(o[v],l,h)}return this},_on:function(o,l,h,f){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,h)===!1){h===this&&(h=void 0);var m={fn:l,ctx:h};f&&(m.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(m)}},_off:function(o,l,h){var f,m,v;if(this._events&&(f=this._events[o],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,v=f.length;m<v;m++)f[m].fn=g;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var T=this._listens(o,l,h);if(T!==!1){var A=f[T];this._firingCount&&(A.fn=g,this._events[o]=f=f.slice()),f.splice(T,1)}}},fire:function(o,l,h){if(!this.listens(o,h))return this;var f=r({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var m=this._events[o];if(m){this._firingCount=this._firingCount+1||1;for(var v=0,T=m.length;v<T;v++){var A=m[v],k=A.fn;A.once&&this.off(o,k,A.ctx),k.call(A.ctx||this,f)}this._firingCount--}}return h&&this._propagateEvent(f),this},listens:function(o,l,h,f){typeof o!="string"&&console.warn('"string" type argument expected');var m=l;typeof l!="function"&&(f=!!l,m=void 0,h=void 0);var v=this._events&&this._events[o];if(v&&v.length&&this._listens(o,m,h)!==!1)return!0;if(f){for(var T in this._eventParents)if(this._eventParents[T].listens(o,l,h,f))return!0}return!1},_listens:function(o,l,h){if(!this._events)return!1;var f=this._events[o]||[];if(!l)return!!f.length;h===this&&(h=void 0);for(var m=0,v=f.length;m<v;m++)if(f[m].fn===l&&f[m].ctx===h)return m;return!1},once:function(o,l,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],l,!0);else{o=S(o);for(var m=0,v=o.length;m<v;m++)this._on(o[m],l,h,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};He.addEventListener=He.on,He.removeEventListener=He.clearAllEventListeners=He.off,He.addOneTimeEventListener=He.once,He.fireEvent=He.fire,He.hasEventListeners=He.listens;var Gt=We.extend(He);function O(o,l,h){this.x=h?Math.round(o):o,this.y=h?Math.round(l):l}var oe=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(o){return this.clone()._add(W(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(W(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new O(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new O(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(o){o=W(o);var l=o.x-this.x,h=o.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(o){return o=W(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=W(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function W(o,l,h){return o instanceof O?o:E(o)?new O(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new O(o.x,o.y):new O(o,l,h)}function ae(o,l){if(o)for(var h=l?[o,l]:o,f=0,m=h.length;f<m;f++)this.extend(h[f])}ae.prototype={extend:function(o){var l,h;if(!o)return this;if(o instanceof O||typeof o[0]=="number"||"x"in o)l=h=W(o);else if(o=we(o),l=o.min,h=o.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(o){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,h;return typeof o[0]=="number"||o instanceof O?o=W(o):o=we(o),o instanceof ae?(l=o.min,h=o.max):l=h=o,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(o){o=we(o);var l=this.min,h=this.max,f=o.min,m=o.max,v=m.x>=l.x&&f.x<=h.x,T=m.y>=l.y&&f.y<=h.y;return v&&T},overlaps:function(o){o=we(o);var l=this.min,h=this.max,f=o.min,m=o.max,v=m.x>l.x&&f.x<h.x,T=m.y>l.y&&f.y<h.y;return v&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,h=this.max,f=Math.abs(l.x-h.x)*o,m=Math.abs(l.y-h.y)*o;return we(W(l.x-f,l.y-m),W(h.x+f,h.y+m))},equals:function(o){return o?(o=we(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function we(o,l){return!o||o instanceof ae?o:new ae(o,l)}function gt(o,l){if(o)for(var h=l?[o,l]:o,f=0,m=h.length;f<m;f++)this.extend(h[f])}gt.prototype={extend:function(o){var l=this._southWest,h=this._northEast,f,m;if(o instanceof Ae)f=o,m=o;else if(o instanceof gt){if(f=o._southWest,m=o._northEast,!f||!m)return this}else return o?this.extend(ce(o)||be(o)):this;return!l&&!h?(this._southWest=new Ae(f.lat,f.lng),this._northEast=new Ae(m.lat,m.lng)):(l.lat=Math.min(f.lat,l.lat),l.lng=Math.min(f.lng,l.lng),h.lat=Math.max(m.lat,h.lat),h.lng=Math.max(m.lng,h.lng)),this},pad:function(o){var l=this._southWest,h=this._northEast,f=Math.abs(l.lat-h.lat)*o,m=Math.abs(l.lng-h.lng)*o;return new gt(new Ae(l.lat-f,l.lng-m),new Ae(h.lat+f,h.lng+m))},getCenter:function(){return new Ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Ae||"lat"in o?o=ce(o):o=be(o);var l=this._southWest,h=this._northEast,f,m;return o instanceof gt?(f=o.getSouthWest(),m=o.getNorthEast()):f=m=o,f.lat>=l.lat&&m.lat<=h.lat&&f.lng>=l.lng&&m.lng<=h.lng},intersects:function(o){o=be(o);var l=this._southWest,h=this._northEast,f=o.getSouthWest(),m=o.getNorthEast(),v=m.lat>=l.lat&&f.lat<=h.lat,T=m.lng>=l.lng&&f.lng<=h.lng;return v&&T},overlaps:function(o){o=be(o);var l=this._southWest,h=this._northEast,f=o.getSouthWest(),m=o.getNorthEast(),v=m.lat>l.lat&&f.lat<h.lat,T=m.lng>l.lng&&f.lng<h.lng;return v&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=be(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(o,l){return o instanceof gt?o:new gt(o,l)}function Ae(o,l,h){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,h!==void 0&&(this.alt=+h)}Ae.prototype={equals:function(o,l){if(!o)return!1;o=ce(o);var h=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return h<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+_(this.lat,o)+", "+_(this.lng,o)+")"},distanceTo:function(o){return nr.distance(this,ce(o))},wrap:function(){return nr.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,h=l/Math.cos(Math.PI/180*this.lat);return be([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Ae(this.lat,this.lng,this.alt)}};function ce(o,l,h){return o instanceof Ae?o:E(o)&&typeof o[0]!="object"?o.length===3?new Ae(o[0],o[1],o[2]):o.length===2?new Ae(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Ae(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new Ae(o,l,h)}var an={latLngToPoint:function(o,l){var h=this.projection.project(o),f=this.scale(l);return this.transformation._transform(h,f)},pointToLatLng:function(o,l){var h=this.scale(l),f=this.transformation.untransform(o,h);return this.projection.unproject(f)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(o),f=this.transformation.transform(l.min,h),m=this.transformation.transform(l.max,h);return new ae(f,m)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,h=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,f=o.alt;return new Ae(h,l,f)},wrapLatLngBounds:function(o){var l=o.getCenter(),h=this.wrapLatLng(l),f=l.lat-h.lat,m=l.lng-h.lng;if(f===0&&m===0)return o;var v=o.getSouthWest(),T=o.getNorthEast(),A=new Ae(v.lat-f,v.lng-m),k=new Ae(T.lat-f,T.lng-m);return new gt(A,k)}},nr=r({},an,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var h=Math.PI/180,f=o.lat*h,m=l.lat*h,v=Math.sin((l.lat-o.lat)*h/2),T=Math.sin((l.lng-o.lng)*h/2),A=v*v+Math.cos(f)*Math.cos(m)*T*T,k=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*k}}),bw=6378137,dp={R:bw,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,h=this.MAX_LATITUDE,f=Math.max(Math.min(h,o.lat),-h),m=Math.sin(f*l);return new O(this.R*o.lng*l,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(o){var l=180/Math.PI;return new Ae((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=bw*Math.PI;return new ae([-o,-o],[o,o])}()};function fp(o,l,h,f){if(E(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=h,this._d=f}fp.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new O((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function Wa(o,l,h,f){return new fp(o,l,h,f)}var pp=r({},nr,{code:"EPSG:3857",projection:dp,transformation:function(){var o=.5/(Math.PI*dp.R);return Wa(o,.5,-o,.5)}()}),_k=r({},pp,{code:"EPSG:900913"});function Lw(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Nw(o,l){var h="",f,m,v,T,A,k;for(f=0,v=o.length;f<v;f++){for(A=o[f],m=0,T=A.length;m<T;m++)k=A[m],h+=(m?"L":"M")+k.x+" "+k.y;h+=l?ne.svg?"z":"x":""}return h||"M0 0"}var mp=document.documentElement.style,bc="ActiveXObject"in window,vk=bc&&!document.addEventListener,Dw="msLaunchUri"in navigator&&!("documentMode"in document),gp=ni("webkit"),Ow=ni("android"),Mw=ni("android 2")||ni("android 3"),yk=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),wk=Ow&&ni("Google")&&yk<537&&!("AudioNode"in window),_p=!!window.opera,Vw=!Dw&&ni("chrome"),Fw=ni("gecko")&&!gp&&!_p&&!bc,Ik=!Vw&&ni("safari"),Bw=ni("phantom"),zw="OTransition"in mp,Ek=navigator.platform.indexOf("Win")===0,Uw=bc&&"transition"in mp,vp="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mw,$w="MozPerspective"in mp,Tk=!window.L_DISABLE_3D&&(Uw||vp||$w)&&!zw&&!Bw,Ha=typeof orientation<"u"||ni("mobile"),Pk=Ha&&gp,Sk=Ha&&vp,jw=!window.PointerEvent&&window.MSPointerEvent,qw=!!(window.PointerEvent||jw),Ww="ontouchstart"in window||!!window.TouchEvent,Ak=!window.L_NO_TOUCH&&(Ww||qw),Rk=Ha&&_p,Ck=Ha&&Fw,xk=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,kk=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return o}(),bk=function(){return!!document.createElement("canvas").getContext}(),yp=!!(document.createElementNS&&Lw("svg").createSVGRect),Lk=!!yp&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Nk=!yp&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Dk=navigator.platform.indexOf("Mac")===0,Ok=navigator.platform.indexOf("Linux")===0;function ni(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ne={ie:bc,ielt9:vk,edge:Dw,webkit:gp,android:Ow,android23:Mw,androidStock:wk,opera:_p,chrome:Vw,gecko:Fw,safari:Ik,phantom:Bw,opera12:zw,win:Ek,ie3d:Uw,webkit3d:vp,gecko3d:$w,any3d:Tk,mobile:Ha,mobileWebkit:Pk,mobileWebkit3d:Sk,msPointer:jw,pointer:qw,touch:Ak,touchNative:Ww,mobileOpera:Rk,mobileGecko:Ck,retina:xk,passiveEvents:kk,canvas:bk,svg:yp,vml:Nk,inlineSvg:Lk,mac:Dk,linux:Ok},Hw=ne.msPointer?"MSPointerDown":"pointerdown",Gw=ne.msPointer?"MSPointerMove":"pointermove",Kw=ne.msPointer?"MSPointerUp":"pointerup",Zw=ne.msPointer?"MSPointerCancel":"pointercancel",wp={touchstart:Hw,touchmove:Gw,touchend:Kw,touchcancel:Zw},Qw={touchstart:Uk,touchmove:Lc,touchend:Lc,touchcancel:Lc},lo={},Yw=!1;function Mk(o,l,h){return l==="touchstart"&&zk(),Qw[l]?(h=Qw[l].bind(this,h),o.addEventListener(wp[l],h,!1),h):(console.warn("wrong event specified:",l),g)}function Vk(o,l,h){if(!wp[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(wp[l],h,!1)}function Fk(o){lo[o.pointerId]=o}function Bk(o){lo[o.pointerId]&&(lo[o.pointerId]=o)}function Jw(o){delete lo[o.pointerId]}function zk(){Yw||(document.addEventListener(Hw,Fk,!0),document.addEventListener(Gw,Bk,!0),document.addEventListener(Kw,Jw,!0),document.addEventListener(Zw,Jw,!0),Yw=!0)}function Lc(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in lo)l.touches.push(lo[h]);l.changedTouches=[l],o(l)}}function Uk(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&kt(l),Lc(o,l)}function $k(o){var l={},h,f;for(f in o)h=o[f],l[f]=h&&h.bind?h.bind(o):h;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var jk=200;function qk(o,l){o.addEventListener("dblclick",l);var h=0,f;function m(v){if(v.detail!==1){f=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var T=iI(v);if(!(T.some(function(k){return k instanceof HTMLLabelElement&&k.attributes.for})&&!T.some(function(k){return k instanceof HTMLInputElement||k instanceof HTMLSelectElement}))){var A=Date.now();A-h<=jk?(f++,f===2&&l($k(v))):f=1,h=A}}}return o.addEventListener("click",m),{dblclick:l,simDblclick:m}}function Wk(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var Ip=Oc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ga=Oc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xw=Ga==="webkitTransition"||Ga==="OTransition"?Ga+"End":"transitionend";function eI(o){return typeof o=="string"?document.getElementById(o):o}function Ka(o,l){var h=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(o,null);h=f?f[l]:null}return h==="auto"?null:h}function Re(o,l,h){var f=document.createElement(o);return f.className=l||"",h&&h.appendChild(f),f}function Ge(o){var l=o.parentNode;l&&l.removeChild(o)}function Nc(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function uo(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function co(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function Ep(o,l){if(o.classList!==void 0)return o.classList.contains(l);var h=Dc(o);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function pe(o,l){if(o.classList!==void 0)for(var h=S(l),f=0,m=h.length;f<m;f++)o.classList.add(h[f]);else if(!Ep(o,l)){var v=Dc(o);Tp(o,(v?v+" ":"")+l)}}function rt(o,l){o.classList!==void 0?o.classList.remove(l):Tp(o,y((" "+Dc(o)+" ").replace(" "+l+" "," ")))}function Tp(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function Dc(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function kn(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&Hk(o,l)}function Hk(o,l){var h=!1,f="DXImageTransform.Microsoft.Alpha";try{h=o.filters.item(f)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):o.style.filter+=" progid:"+f+"(opacity="+l+")"}function Oc(o){for(var l=document.documentElement.style,h=0;h<o.length;h++)if(o[h]in l)return o[h];return!1}function rs(o,l,h){var f=l||new O(0,0);o.style[Ip]=(ne.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(h?" scale("+h+")":"")}function ut(o,l){o._leaflet_pos=l,ne.any3d?rs(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function ss(o){return o._leaflet_pos||new O(0,0)}var Za,Qa,Pp;if("onselectstart"in document)Za=function(){he(window,"selectstart",kt)},Qa=function(){De(window,"selectstart",kt)};else{var Ya=Oc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Za=function(){if(Ya){var o=document.documentElement.style;Pp=o[Ya],o[Ya]="none"}},Qa=function(){Ya&&(document.documentElement.style[Ya]=Pp,Pp=void 0)}}function Sp(){he(window,"dragstart",kt)}function Ap(){De(window,"dragstart",kt)}var Mc,Rp;function Cp(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Vc(),Mc=o,Rp=o.style.outlineStyle,o.style.outlineStyle="none",he(window,"keydown",Vc))}function Vc(){Mc&&(Mc.style.outlineStyle=Rp,Mc=void 0,Rp=void 0,De(window,"keydown",Vc))}function tI(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function xp(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var Gk={__proto__:null,TRANSFORM:Ip,TRANSITION:Ga,TRANSITION_END:Xw,get:eI,getStyle:Ka,create:Re,remove:Ge,empty:Nc,toFront:uo,toBack:co,hasClass:Ep,addClass:pe,removeClass:rt,setClass:Tp,getClass:Dc,setOpacity:kn,testProp:Oc,setTransform:rs,setPosition:ut,getPosition:ss,get disableTextSelection(){return Za},get enableTextSelection(){return Qa},disableImageDrag:Sp,enableImageDrag:Ap,preventOutline:Cp,restoreOutline:Vc,getSizedParentNode:tI,getScale:xp};function he(o,l,h,f){if(l&&typeof l=="object")for(var m in l)bp(o,m,l[m],h);else{l=S(l);for(var v=0,T=l.length;v<T;v++)bp(o,l[v],h,f)}return this}var ii="_leaflet_events";function De(o,l,h,f){if(arguments.length===1)nI(o),delete o[ii];else if(l&&typeof l=="object")for(var m in l)Lp(o,m,l[m],h);else if(l=S(l),arguments.length===2)nI(o,function(A){return x(l,A)!==-1});else for(var v=0,T=l.length;v<T;v++)Lp(o,l[v],h,f);return this}function nI(o,l){for(var h in o[ii]){var f=h.split(/\d/)[0];(!l||l(f))&&Lp(o,f,null,null,h)}}var kp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bp(o,l,h,f){var m=l+c(h)+(f?"_"+c(f):"");if(o[ii]&&o[ii][m])return this;var v=function(A){return h.call(f||o,A||window.event)},T=v;!ne.touchNative&&ne.pointer&&l.indexOf("touch")===0?v=Mk(o,l,v):ne.touch&&l==="dblclick"?v=qk(o,v):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(kp[l]||l,v,ne.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(v=function(A){A=A||window.event,Dp(o,A)&&T(A)},o.addEventListener(kp[l],v,!1)):o.addEventListener(l,T,!1):o.attachEvent("on"+l,v),o[ii]=o[ii]||{},o[ii][m]=v}function Lp(o,l,h,f,m){m=m||l+c(h)+(f?"_"+c(f):"");var v=o[ii]&&o[ii][m];if(!v)return this;!ne.touchNative&&ne.pointer&&l.indexOf("touch")===0?Vk(o,l,v):ne.touch&&l==="dblclick"?Wk(o,v):"removeEventListener"in o?o.removeEventListener(kp[l]||l,v,!1):o.detachEvent("on"+l,v),o[ii][m]=null}function os(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Np(o){return bp(o,"wheel",os),this}function Ja(o){return he(o,"mousedown touchstart dblclick contextmenu",os),o._leaflet_disable_click=!0,this}function kt(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function as(o){return kt(o),os(o),this}function iI(o){if(o.composedPath)return o.composedPath();for(var l=[],h=o.target;h;)l.push(h),h=h.parentNode;return l}function rI(o,l){if(!l)return new O(o.clientX,o.clientY);var h=xp(l),f=h.boundingClientRect;return new O((o.clientX-f.left)/h.x-l.clientLeft,(o.clientY-f.top)/h.y-l.clientTop)}var Kk=ne.linux&&ne.chrome?window.devicePixelRatio:ne.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function sI(o){return ne.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Kk:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Dp(o,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==o;)h=h.parentNode}catch{return!1}return h!==o}var Zk={__proto__:null,on:he,off:De,stopPropagation:os,disableScrollPropagation:Np,disableClickPropagation:Ja,preventDefault:kt,stop:as,getPropagationPath:iI,getMousePosition:rI,getWheelDelta:sI,isExternalTarget:Dp,addListener:he,removeListener:De},oI=Gt.extend({run:function(o,l,h,f){this.stop(),this._el=o,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=ss(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=J(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var h=this._startPos.add(this._offset.multiplyBy(o));l&&h._round(),ut(this._el,h),this.fire("step")},_complete:function(){fe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Ie=Gt.extend({options:{crs:pp,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=P(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ga&&ne.any3d&&!ne.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,Xw,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(ce(o),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=r({animate:h.animate},h.zoom),h.pan=r({animate:h.animate,duration:h.duration},h.pan));var f=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,h.zoom):this._tryAnimatedPan(o,h.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,h){var f=this.getZoomScale(l),m=this.getSize().divideBy(2),v=o instanceof O?o:this.latLngToContainerPoint(o),T=v.subtract(m).multiplyBy(1-1/f),A=this.containerPointToLatLng(m.add(T));return this.setView(A,l,{zoom:h})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():be(o);var h=W(l.paddingTopLeft||l.padding||[0,0]),f=W(l.paddingBottomRight||l.padding||[0,0]),m=this.getBoundsZoom(o,!1,h.add(f));if(m=typeof l.maxZoom=="number"?Math.min(l.maxZoom,m):m,m===1/0)return{center:o.getCenter(),zoom:m};var v=f.subtract(h).divideBy(2),T=this.project(o.getSouthWest(),m),A=this.project(o.getNorthEast(),m),k=this.unproject(T.add(A).divideBy(2).add(v),m);return{center:k,zoom:m}},fitBounds:function(o,l){if(o=be(o),!o.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(o,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=W(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new oI,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){pe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,h){if(h=h||{},h.animate===!1||!ne.any3d)return this.setView(o,l,h);this._stop();var f=this.project(this.getCenter()),m=this.project(o),v=this.getSize(),T=this._zoom;o=ce(o),l=l===void 0?T:l;var A=Math.max(v.x,v.y),k=A*this.getZoomScale(T,l),M=m.distanceTo(f)||1,Z=1.42,se=Z*Z;function me(ct){var Zc=ct?-1:1,Vb=ct?k:A,Fb=k*k-A*A+Zc*se*se*M*M,Bb=2*Vb*se*M,Wp=Fb/Bb,zI=Math.sqrt(Wp*Wp+1)-Wp,zb=zI<1e-9?-18:Math.log(zI);return zb}function Kt(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function wt(ct){return(Math.exp(ct)+Math.exp(-ct))/2}function Ln(ct){return Kt(ct)/wt(ct)}var ln=me(0);function _o(ct){return A*(wt(ln)/wt(ln+Z*ct))}function Nb(ct){return A*(wt(ln)*Ln(ln+Z*ct)-Kt(ln))/se}function Db(ct){return 1-Math.pow(1-ct,1.5)}var Ob=Date.now(),FI=(me(1)-ln)/Z,Mb=h.duration?1e3*h.duration:1e3*FI*.8;function BI(){var ct=(Date.now()-Ob)/Mb,Zc=Db(ct)*FI;ct<=1?(this._flyToFrame=J(BI,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(Nb(Zc)/M)),T),this.getScaleZoom(A/_o(Zc),T),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),BI.call(this),this},flyToBounds:function(o,l){var h=this._getBoundsCenterZoom(o,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(o){return o=be(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var h=this.getCenter(),f=this._limitCenter(h,this._zoom,be(o));return h.equals(f)||this.panTo(f,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var h=W(l.paddingTopLeft||l.padding||[0,0]),f=W(l.paddingBottomRight||l.padding||[0,0]),m=this.project(this.getCenter()),v=this.project(o),T=this.getPixelBounds(),A=we([T.min.add(h),T.max.subtract(f)]),k=A.getSize();if(!A.contains(v)){this._enforcingBounds=!0;var M=v.subtract(A.getCenter()),Z=A.extend(v).getSize().subtract(k);m.x+=M.x<0?-Z.x:Z.x,m.y+=M.y<0?-Z.y:Z.y,this.panTo(this.unproject(m),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),f=l.divideBy(2).round(),m=h.divideBy(2).round(),v=f.subtract(m);return!v.x&&!v.y?this:(o.animate&&o.pan?this.panBy(v):(o.pan&&this._rawPanBy(v),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,o):navigator.geolocation.getCurrentPosition(l,h,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,h=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,h=o.coords.longitude,f=new Ae(l,h),m=f.toBounds(o.coords.accuracy*2),v=this._locateOptions;if(v.setView){var T=this.getBoundsZoom(m);this.setView(f,v.maxZoom?Math.min(T,v.maxZoom):T)}var A={latlng:f,bounds:m,timestamp:o.timestamp};for(var k in o.coords)typeof o.coords[k]=="number"&&(A[k]=o.coords[k]);this.fire("locationfound",A)}},addHandler:function(o,l){if(!l)return this;var h=this[o]=new l(this);return this._handlers.push(h),this.options[o]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(fe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Ge(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var h="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),f=Re("div",h,l||this._mapPane);return o&&(this._panes[o]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),h=this.unproject(o.getTopRight());return new gt(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,h){o=be(o),h=W(h||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),v=this.getMaxZoom(),T=o.getNorthWest(),A=o.getSouthEast(),k=this.getSize().subtract(h),M=we(this.project(A,f),this.project(T,f)).getSize(),Z=ne.any3d?this.options.zoomSnap:1,se=k.x/M.x,me=k.y/M.y,Kt=l?Math.max(se,me):Math.min(se,me);return f=this.getScaleZoom(Kt,f),Z&&(f=Math.round(f/(Z/100))*(Z/100),f=l?Math.ceil(f/Z)*Z:Math.floor(f/Z)*Z),Math.max(m,Math.min(v,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var h=this._getTopLeftPoint(o,l);return new ae(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(o)/h.scale(l)},getScaleZoom:function(o,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var f=h.zoom(o*h.scale(l));return isNaN(f)?1/0:f},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(W(o),l)},layerPointToLatLng:function(o){var l=W(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(ce(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ce(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(be(o))},distance:function(o,l){return this.options.crs.distance(ce(o),ce(l))},containerPointToLayerPoint:function(o){return W(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return W(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(W(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(o)))},mouseEventToContainerPoint:function(o){return rI(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=eI(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");he(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ne.any3d,pe(o,"leaflet-container"+(ne.touch?" leaflet-touch":"")+(ne.retina?" leaflet-retina":"")+(ne.ielt9?" leaflet-oldie":"")+(ne.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ka(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ut(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(o.markerPane,"leaflet-zoom-hide"),pe(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,h){ut(this._mapPane,new O(0,0));var f=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var m=this._zoom!==l;this._moveStart(m,h)._move(o,l)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,h,f){l===void 0&&(l=this._zoom);var m=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),f?h&&h.pinch&&this.fire("zoom",h):((m||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return fe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){ut(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var l=o?De:he;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ne.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){fe(this._resizeRequest),this._resizeRequest=J(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var h=[],f,m=l==="mouseout"||l==="mouseover",v=o.target||o.srcElement,T=!1;v;){if(f=this._targets[c(v)],f&&(l==="click"||l==="preclick")&&this._draggableMoved(f)){T=!0;break}if(f&&f.listens(l,!0)&&(m&&!Dp(v,o)||(h.push(f),m))||v===this._container)break;v=v.parentNode}return!h.length&&!T&&!m&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var h=o.type;h==="mousedown"&&Cp(l),this._fireDOMEvent(o,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,h){if(o.type==="click"){var f=r({},o);f.type="preclick",this._fireDOMEvent(f,f.type,h)}var m=this._findEventTargets(o,l);if(h){for(var v=[],T=0;T<h.length;T++)h[T].listens(l,!0)&&v.push(h[T]);m=v.concat(m)}if(m.length){l==="contextmenu"&&kt(o);var A=m[0],k={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var M=A.getLatLng&&(!A._radius||A._radius<=10);k.containerPoint=M?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(o),k.layerPoint=this.containerPointToLayerPoint(k.containerPoint),k.latlng=M?A.getLatLng():this.layerPointToLatLng(k.layerPoint)}for(T=0;T<m.length;T++)if(m[T].fire(l,k,!0),k.originalEvent._stopped||m[T].options.bubblingMouseEvents===!1&&x(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return ss(this._mapPane)||new O(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var h=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var h=this.getSize()._divideBy(2);return this.project(o,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,h){var f=this._getNewPixelOrigin(h,l);return this.project(o,l)._subtract(f)},_latLngBoundsToNewLayerBounds:function(o,l,h){var f=this._getNewPixelOrigin(h,l);return we([this.project(o.getSouthWest(),l)._subtract(f),this.project(o.getNorthWest(),l)._subtract(f),this.project(o.getSouthEast(),l)._subtract(f),this.project(o.getNorthEast(),l)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,h){if(!h)return o;var f=this.project(o,l),m=this.getSize().divideBy(2),v=new ae(f.subtract(m),f.add(m)),T=this._getBoundsOffset(v,h,l);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?o:this.unproject(f.add(T),l)},_limitOffset:function(o,l){if(!l)return o;var h=this.getPixelBounds(),f=new ae(h.min.add(o),h.max.add(o));return o.add(this._getBoundsOffset(f,l))},_getBoundsOffset:function(o,l,h){var f=we(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),m=f.min.subtract(o.min),v=f.max.subtract(o.max),T=this._rebound(m.x,-v.x),A=this._rebound(m.y,-v.y);return new O(T,A)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),h=this.getMaxZoom(),f=ne.any3d?this.options.zoomSnap:1;return f&&(o=Math.round(o/f)*f),Math.max(l,Math.min(h,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var h=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var o=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var h=Ip,f=this._proxy.style[h];rs(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),f===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();rs(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(l),m=this._getCenterOffset(o)._divideBy(1-1/f);return h.animate!==!0&&!this.getSize().contains(m)?!1:(J(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,h,f){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qk(o,l){return new Ie(o,l)}var $n=We.extend({options:{position:"topright"},initialize:function(o){P(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),h=this.getPosition(),f=o._controlCorners[h];return pe(l,"leaflet-control"),h.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Xa=function(o){return new $n(o)};Ie.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",h=this._controlContainer=Re("div",l+"control-container",this._container);function f(m,v){var T=l+m+" "+l+v;o[m+v]=Re("div",T,h)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Ge(this._controlCorners[o]);Ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var aI=$n.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,h,f){return h<f?-1:f<h?1:0}},initialize:function(o,l,h){P(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in o)this._addLayer(o[f],f);for(f in l)this._addLayer(l[f],f,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return $n.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):rt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=Re("div",o),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ja(l),Np(l);var f=this._section=Re("section",o+"-list");h&&(this._map.on("click",this.collapse,this),he(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Re("a",o+"-toggle",l);m.href="#",m.title="Layers",m.setAttribute("role","button"),he(m,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){kt(v),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Re("div",o+"-base",f),this._separator=Re("div",o+"-separator",f),this._overlaysList=Re("div",o+"-overlays",f),l.appendChild(f)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,h){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Nc(this._baseLayersList),Nc(this._overlaysList),this._layerControlInputs=[];var o,l,h,f,m=0;for(h=0;h<this._layers.length;h++)f=this._layers[h],this._addItem(f),l=l||f.overlay,o=o||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(o=o&&m>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(c(o.target)),h=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(o,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=h,f.firstChild},_addItem:function(o){var l=document.createElement("label"),h=this._map.hasLayer(o.layer),f;o.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=h):f=this._createRadioElement("leaflet-base-layers_"+c(this),h),this._layerControlInputs.push(f),f.layerId=c(o.layer),he(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+o.name;var v=document.createElement("span");l.appendChild(v),v.appendChild(f),v.appendChild(m);var T=o.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,h,f=[],m=[];this._handlingClick=!0;for(var v=o.length-1;v>=0;v--)l=o[v],h=this._getLayer(l.layerId).layer,l.checked?f.push(h):l.checked||m.push(h);for(v=0;v<m.length;v++)this._map.hasLayer(m[v])&&this._map.removeLayer(m[v]);for(v=0;v<f.length;v++)this._map.hasLayer(f[v])||this._map.addLayer(f[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,h,f=this._map.getZoom(),m=o.length-1;m>=0;m--)l=o[m],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&f<h.options.minZoom||h.options.maxZoom!==void 0&&f>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,he(o,"click",kt),this.expand();var l=this;setTimeout(function(){De(o,"click",kt),l._preventClick=!1})}}),Yk=function(o,l,h){return new aI(o,l,h)},Op=$n.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",h=Re("div",l+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,h,f,m){var v=Re("a",h,f);return v.innerHTML=o,v.href="#",v.title=l,v.setAttribute("role","button"),v.setAttribute("aria-label",l),Ja(v),he(v,"click",as),he(v,"click",m,this),he(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";rt(this._zoomInButton,l),rt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(pe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(pe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Op,this.addControl(this.zoomControl))});var Jk=function(o){return new Op(o)},lI=$n.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",h=Re("div",l),f=this.options;return this._addScales(f,l+"-line",h),o.on(f.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),h},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,h){o.metric&&(this._mScale=Re("div",l,h)),o.imperial&&(this._iScale=Re("div",l,h))},_update:function(){var o=this._map,l=o.getSize().y/2,h=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/o)},_updateImperial:function(o){var l=o*3.2808399,h,f,m;l>5280?(h=l/5280,f=this._getRoundNum(h),this._updateScale(this._iScale,f+" mi",f/h)):(m=this._getRoundNum(l),this._updateScale(this._iScale,m+" ft",m/l))},_updateScale:function(o,l,h){o.style.width=Math.round(this.options.maxWidth*h)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),h=o/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),Xk=function(o){return new lI(o)},eb='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Mp=$n.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ne.inlineSvg?eb+" ":"")+"Leaflet</a>"},initialize:function(o){P(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),Ja(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),o.length&&h.push(o.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new Mp().addTo(this)});var tb=function(o){return new Mp(o)};$n.Layers=aI,$n.Zoom=Op,$n.Scale=lI,$n.Attribution=Mp,Xa.layers=Yk,Xa.zoom=Jk,Xa.scale=Xk,Xa.attribution=tb;var ri=We.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ri.addTo=function(o,l){return o.addHandler(l,this),this};var nb={Events:He},uI=ne.touch?"touchstart mousedown":"mousedown",ir=Gt.extend({options:{clickTolerance:3},initialize:function(o,l,h,f){P(this,f),this._element=o,this._dragStartTarget=l||o,this._preventOutline=h},enable:function(){this._enabled||(he(this._dragStartTarget,uI,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ir._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,uI,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Ep(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ir._dragging===this&&this.finishDrag();return}if(!(ir._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ir._dragging=this,this._preventOutline&&Cp(this._element),Sp(),Za(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,h=tI(this._element);this._startPoint=new O(l.clientX,l.clientY),this._startPos=ss(this._element),this._parentScale=xp(h);var f=o.type==="mousedown";he(document,f?"mousemove":"touchmove",this._onMove,this),he(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,h=new O(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,kt(o),this._moved||(this.fire("dragstart"),this._moved=!0,pe(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),ut(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){rt(document.body,"leaflet-dragging"),this._lastTarget&&(rt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),Ap(),Qa();var l=this._moved&&this._moving;this._moving=!1,ir._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function cI(o,l,h){var f,m=[1,4,2,8],v,T,A,k,M,Z,se,me;for(v=0,Z=o.length;v<Z;v++)o[v]._code=ls(o[v],l);for(A=0;A<4;A++){for(se=m[A],f=[],v=0,Z=o.length,T=Z-1;v<Z;T=v++)k=o[v],M=o[T],k._code&se?M._code&se||(me=Fc(M,k,se,l,h),me._code=ls(me,l),f.push(me)):(M._code&se&&(me=Fc(M,k,se,l,h),me._code=ls(me,l),f.push(me)),f.push(k));o=f}return o}function hI(o,l){var h,f,m,v,T,A,k,M,Z;if(!o||o.length===0)throw new Error("latlngs not passed");bn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var se=ce([0,0]),me=be(o),Kt=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());Kt<1700&&(se=Vp(o));var wt=o.length,Ln=[];for(h=0;h<wt;h++){var ln=ce(o[h]);Ln.push(l.project(ce([ln.lat-se.lat,ln.lng-se.lng])))}for(A=k=M=0,h=0,f=wt-1;h<wt;f=h++)m=Ln[h],v=Ln[f],T=m.y*v.x-v.y*m.x,k+=(m.x+v.x)*T,M+=(m.y+v.y)*T,A+=T*3;A===0?Z=Ln[0]:Z=[k/A,M/A];var _o=l.unproject(W(Z));return ce([_o.lat+se.lat,_o.lng+se.lng])}function Vp(o){for(var l=0,h=0,f=0,m=0;m<o.length;m++){var v=ce(o[m]);l+=v.lat,h+=v.lng,f++}return ce([l/f,h/f])}var ib={__proto__:null,clipPolygon:cI,polygonCenter:hI,centroid:Vp};function dI(o,l){if(!l||!o.length)return o.slice();var h=l*l;return o=ob(o,h),o=sb(o,h),o}function fI(o,l,h){return Math.sqrt(el(o,l,h,!0))}function rb(o,l,h){return el(o,l,h)}function sb(o,l){var h=o.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,m=new f(h);m[0]=m[h-1]=1,Fp(o,m,l,0,h-1);var v,T=[];for(v=0;v<h;v++)m[v]&&T.push(o[v]);return T}function Fp(o,l,h,f,m){var v=0,T,A,k;for(A=f+1;A<=m-1;A++)k=el(o[A],o[f],o[m],!0),k>v&&(T=A,v=k);v>h&&(l[T]=1,Fp(o,l,h,f,T),Fp(o,l,h,T,m))}function ob(o,l){for(var h=[o[0]],f=1,m=0,v=o.length;f<v;f++)ab(o[f],o[m])>l&&(h.push(o[f]),m=f);return m<v-1&&h.push(o[v-1]),h}var pI;function mI(o,l,h,f,m){var v=f?pI:ls(o,h),T=ls(l,h),A,k,M;for(pI=T;;){if(!(v|T))return[o,l];if(v&T)return!1;A=v||T,k=Fc(o,l,A,h,m),M=ls(k,h),A===v?(o=k,v=M):(l=k,T=M)}}function Fc(o,l,h,f,m){var v=l.x-o.x,T=l.y-o.y,A=f.min,k=f.max,M,Z;return h&8?(M=o.x+v*(k.y-o.y)/T,Z=k.y):h&4?(M=o.x+v*(A.y-o.y)/T,Z=A.y):h&2?(M=k.x,Z=o.y+T*(k.x-o.x)/v):h&1&&(M=A.x,Z=o.y+T*(A.x-o.x)/v),new O(M,Z,m)}function ls(o,l){var h=0;return o.x<l.min.x?h|=1:o.x>l.max.x&&(h|=2),o.y<l.min.y?h|=4:o.y>l.max.y&&(h|=8),h}function ab(o,l){var h=l.x-o.x,f=l.y-o.y;return h*h+f*f}function el(o,l,h,f){var m=l.x,v=l.y,T=h.x-m,A=h.y-v,k=T*T+A*A,M;return k>0&&(M=((o.x-m)*T+(o.y-v)*A)/k,M>1?(m=h.x,v=h.y):M>0&&(m+=T*M,v+=A*M)),T=o.x-m,A=o.y-v,f?T*T+A*A:new O(m,v)}function bn(o){return!E(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function gI(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),bn(o)}function _I(o,l){var h,f,m,v,T,A,k,M;if(!o||o.length===0)throw new Error("latlngs not passed");bn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Z=ce([0,0]),se=be(o),me=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());me<1700&&(Z=Vp(o));var Kt=o.length,wt=[];for(h=0;h<Kt;h++){var Ln=ce(o[h]);wt.push(l.project(ce([Ln.lat-Z.lat,Ln.lng-Z.lng])))}for(h=0,f=0;h<Kt-1;h++)f+=wt[h].distanceTo(wt[h+1])/2;if(f===0)M=wt[0];else for(h=0,v=0;h<Kt-1;h++)if(T=wt[h],A=wt[h+1],m=T.distanceTo(A),v+=m,v>f){k=(v-f)/m,M=[A.x-k*(A.x-T.x),A.y-k*(A.y-T.y)];break}var ln=l.unproject(W(M));return ce([ln.lat+Z.lat,ln.lng+Z.lng])}var lb={__proto__:null,simplify:dI,pointToSegmentDistance:fI,closestPointOnSegment:rb,clipSegment:mI,_getEdgeIntersection:Fc,_getBitCode:ls,_sqClosestPointOnSegment:el,isFlat:bn,_flat:gI,polylineCenter:_I},Bp={project:function(o){return new O(o.lng,o.lat)},unproject:function(o){return new Ae(o.y,o.x)},bounds:new ae([-180,-90],[180,90])},zp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ae([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,h=this.R,f=o.lat*l,m=this.R_MINOR/h,v=Math.sqrt(1-m*m),T=v*Math.sin(f),A=Math.tan(Math.PI/4-f/2)/Math.pow((1-T)/(1+T),v/2);return f=-h*Math.log(Math.max(A,1e-10)),new O(o.lng*l*h,f)},unproject:function(o){for(var l=180/Math.PI,h=this.R,f=this.R_MINOR/h,m=Math.sqrt(1-f*f),v=Math.exp(-o.y/h),T=Math.PI/2-2*Math.atan(v),A=0,k=.1,M;A<15&&Math.abs(k)>1e-7;A++)M=m*Math.sin(T),M=Math.pow((1-M)/(1+M),m/2),k=Math.PI/2-2*Math.atan(v*M)-T,T+=k;return new Ae(T*l,o.x*l/h)}},ub={__proto__:null,LonLat:Bp,Mercator:zp,SphericalMercator:dp},cb=r({},nr,{code:"EPSG:3395",projection:zp,transformation:function(){var o=.5/(Math.PI*zp.R);return Wa(o,.5,-o,.5)}()}),vI=r({},nr,{code:"EPSG:4326",projection:Bp,transformation:Wa(1/180,1,-1/180,.5)}),hb=r({},an,{projection:Bp,transformation:Wa(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var h=l.lng-o.lng,f=l.lat-o.lat;return Math.sqrt(h*h+f*f)},infinite:!0});an.Earth=nr,an.EPSG3395=cb,an.EPSG3857=pp,an.EPSG900913=_k,an.EPSG4326=vI,an.Simple=hb;var jn=Gt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=c(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,l){for(var h in this._layers)o.call(l,this._layers[h]);return this},_addLayers:function(o){o=o?E(o)?o:[o]:[];for(var l=0,h=o.length;l<h;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=c(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,h=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;o=m.minZoom===void 0?o:Math.min(o,m.minZoom),l=m.maxZoom===void 0?l:Math.max(l,m.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ho=jn.extend({initialize:function(o,l){P(this,l),this._layers={};var h,f;if(o)for(h=0,f=o.length;h<f;h++)this.addLayer(o[h])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),h,f;for(h in this._layers)f=this._layers[h],f[o]&&f[o].apply(f,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var h in this._layers)o.call(l,this._layers[h]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),db=function(o,l){return new ho(o,l)},Ri=ho.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),ho.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),ho.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new gt;for(var l in this._layers){var h=this._layers[l];o.extend(h.getBounds?h.getBounds():h.getLatLng())}return o}}),fb=function(o,l){return new Ri(o,l)},fo=We.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){P(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var h=this._getIconUrl(o);if(!h){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(f,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(o,l){var h=this.options,f=h[l+"Size"];typeof f=="number"&&(f=[f,f]);var m=W(f),v=W(l==="shadow"&&h.shadowAnchor||h.iconAnchor||m&&m.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(h.className||""),v&&(o.style.marginLeft=-v.x+"px",o.style.marginTop=-v.y+"px"),m&&(o.style.width=m.x+"px",o.style.height=m.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return ne.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function pb(o){return new fo(o)}var tl=fo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof tl.imagePath!="string"&&(tl.imagePath=this._detectIconPath()),(this.options.imagePath||tl.imagePath)+fo.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(h,f,m){var v=f.exec(h);return v&&v[m]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Re("div","leaflet-default-icon-path",document.body),l=Ka(o,"background-image")||Ka(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),yI=ri.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ir(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,h=l._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,v=ss(l._icon),T=h.getPixelBounds(),A=h.getPixelOrigin(),k=we(T.min._subtract(A).add(m),T.max._subtract(A).subtract(m));if(!k.contains(v)){var M=W((Math.max(k.max.x,v.x)-k.max.x)/(T.max.x-k.max.x)-(Math.min(k.min.x,v.x)-k.min.x)/(T.min.x-k.min.x),(Math.max(k.max.y,v.y)-k.max.y)/(T.max.y-k.max.y)-(Math.min(k.min.y,v.y)-k.min.y)/(T.min.y-k.min.y)).multiplyBy(f);h.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),ut(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=J(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(fe(this._panRequest),this._panRequest=J(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,h=l._shadow,f=ss(l._icon),m=l._map.layerPointToLatLng(f);h&&ut(h,f),l._latlng=m,o.latlng=m,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){fe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Bc=jn.extend({options:{icon:new tl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){P(this,l),this._latlng=ce(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=ce(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=o.icon.createIcon(this._icon),f=!1;h!==this._icon&&(this._icon&&this._removeIcon(),f=!0,o.title&&(h.title=o.title),h.tagName==="IMG"&&(h.alt=o.alt||"")),pe(h,l),o.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(h,"focus",this._panOnFocus,this);var m=o.icon.createShadow(this._shadow),v=!1;m!==this._shadow&&(this._removeShadow(),v=!0),m&&(pe(m,l),m.alt=""),this._shadow=m,o.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&v&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ge(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&ut(this._icon,o),this._shadow&&ut(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yI)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yI(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&kn(this._icon,o),this._shadow&&kn(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,h=l.iconSize?W(l.iconSize):W(0,0),f=l.iconAnchor?W(l.iconAnchor):W(0,0);o.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:h.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function mb(o,l){return new Bc(o,l)}var rr=jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return P(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zc=rr.extend({options:{fill:!0,radius:10},initialize:function(o,l){P(this,l),this._latlng=ce(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=ce(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return rr.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,h=this._clickTolerance(),f=[o+h,l+h];this._pxBounds=new ae(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gb(o,l){return new zc(o,l)}var Up=zc.extend({initialize:function(o,l,h){if(typeof l=="number"&&(l=r({},h,{radius:l})),P(this,l),this._latlng=ce(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new gt(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:rr.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,h=this._map,f=h.options.crs;if(f.distance===nr.distance){var m=Math.PI/180,v=this._mRadius/nr.R/m,T=h.project([l+v,o]),A=h.project([l-v,o]),k=T.add(A).divideBy(2),M=h.unproject(k).lat,Z=Math.acos((Math.cos(v*m)-Math.sin(l*m)*Math.sin(M*m))/(Math.cos(l*m)*Math.cos(M*m)))/m;(isNaN(Z)||Z===0)&&(Z=v/Math.cos(Math.PI/180*l)),this._point=k.subtract(h.getPixelOrigin()),this._radius=isNaN(Z)?0:k.x-h.project([M,o-Z]).x,this._radiusY=k.y-T.y}else{var se=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(se).x}this._updateBounds()}});function _b(o,l,h){return new Up(o,l,h)}var Ci=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){P(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,h=null,f=el,m,v,T=0,A=this._parts.length;T<A;T++)for(var k=this._parts[T],M=1,Z=k.length;M<Z;M++){m=k[M-1],v=k[M];var se=f(o,m,v,!0);se<l&&(l=se,h=f(o,m,v))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _I(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=ce(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new gt,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return bn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],h=bn(o),f=0,m=o.length;f<m;f++)h?(l[f]=ce(o[f]),this._bounds.extend(l[f])):l[f]=this._convertLatLngs(o[f]);return l},_project:function(){var o=new ae;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new O(o,o);this._rawPxBounds&&(this._pxBounds=new ae([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,h){var f=o[0]instanceof Ae,m=o.length,v,T;if(f){for(T=[],v=0;v<m;v++)T[v]=this._map.latLngToLayerPoint(o[v]),h.extend(T[v]);l.push(T)}else for(v=0;v<m;v++)this._projectLatlngs(o[v],l,h)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,f,m,v,T,A,k;for(h=0,m=0,v=this._rings.length;h<v;h++)for(k=this._rings[h],f=0,T=k.length;f<T-1;f++)A=mI(k[f],k[f+1],o,f,!0),A&&(l[m]=l[m]||[],l[m].push(A[0]),(A[1]!==k[f+1]||f===T-2)&&(l[m].push(A[1]),m++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,h=0,f=o.length;h<f;h++)o[h]=dI(o[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var h,f,m,v,T,A,k=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(h=0,v=this._parts.length;h<v;h++)for(A=this._parts[h],f=0,T=A.length,m=T-1;f<T;m=f++)if(!(!l&&f===0)&&fI(o,A[m],A[f])<=k)return!0;return!1}});function vb(o,l){return new Ci(o,l)}Ci._flat=gI;var po=Ci.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hI(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=Ci.prototype._convertLatLngs.call(this,o),h=l.length;return h>=2&&l[0]instanceof Ae&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(o){Ci.prototype._setLatLngs.call(this,o),bn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return bn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,h=new O(l,l);if(o=new ae(o.min.subtract(h),o.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,v;f<m;f++)v=cI(this._rings[f],o,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,h,f,m,v,T,A,k,M;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(v=0,k=this._parts.length;v<k;v++)for(h=this._parts[v],T=0,M=h.length,A=M-1;T<M;A=T++)f=h[T],m=h[A],f.y>o.y!=m.y>o.y&&o.x<(m.x-f.x)*(o.y-f.y)/(m.y-f.y)+f.x&&(l=!l);return l||Ci.prototype._containsPoint.call(this,o,!0)}});function yb(o,l){return new po(o,l)}var xi=Ri.extend({initialize:function(o,l){P(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=E(o)?o:o.features,h,f,m;if(l){for(h=0,f=l.length;h<f;h++)m=l[h],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var v=this.options;if(v.filter&&!v.filter(o))return this;var T=Uc(o,v);return T?(T.feature=qc(o),T.defaultOptions=T.options,this.resetStyle(T),v.onEachFeature&&v.onEachFeature(o,T),this.addLayer(T)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function Uc(o,l){var h=o.type==="Feature"?o.geometry:o,f=h?h.coordinates:null,m=[],v=l&&l.pointToLayer,T=l&&l.coordsToLatLng||$p,A,k,M,Z;if(!f&&!h)return null;switch(h.type){case"Point":return A=T(f),wI(v,o,A,l);case"MultiPoint":for(M=0,Z=f.length;M<Z;M++)A=T(f[M]),m.push(wI(v,o,A,l));return new Ri(m);case"LineString":case"MultiLineString":return k=$c(f,h.type==="LineString"?0:1,T),new Ci(k,l);case"Polygon":case"MultiPolygon":return k=$c(f,h.type==="Polygon"?1:2,T),new po(k,l);case"GeometryCollection":for(M=0,Z=h.geometries.length;M<Z;M++){var se=Uc({geometry:h.geometries[M],type:"Feature",properties:o.properties},l);se&&m.push(se)}return new Ri(m);case"FeatureCollection":for(M=0,Z=h.features.length;M<Z;M++){var me=Uc(h.features[M],l);me&&m.push(me)}return new Ri(m);default:throw new Error("Invalid GeoJSON object.")}}function wI(o,l,h,f){return o?o(l,h):new Bc(h,f&&f.markersInheritOptions&&f)}function $p(o){return new Ae(o[1],o[0],o[2])}function $c(o,l,h){for(var f=[],m=0,v=o.length,T;m<v;m++)T=l?$c(o[m],l-1,h):(h||$p)(o[m]),f.push(T);return f}function jp(o,l){return o=ce(o),o.alt!==void 0?[_(o.lng,l),_(o.lat,l),_(o.alt,l)]:[_(o.lng,l),_(o.lat,l)]}function jc(o,l,h,f){for(var m=[],v=0,T=o.length;v<T;v++)m.push(l?jc(o[v],bn(o[v])?0:l-1,h,f):jp(o[v],f));return!l&&h&&m.length>0&&m.push(m[0].slice()),m}function mo(o,l){return o.feature?r({},o.feature,{geometry:l}):qc(l)}function qc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var qp={toGeoJSON:function(o){return mo(this,{type:"Point",coordinates:jp(this.getLatLng(),o)})}};Bc.include(qp),Up.include(qp),zc.include(qp),Ci.include({toGeoJSON:function(o){var l=!bn(this._latlngs),h=jc(this._latlngs,l?1:0,!1,o);return mo(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),po.include({toGeoJSON:function(o){var l=!bn(this._latlngs),h=l&&!bn(this._latlngs[0]),f=jc(this._latlngs,h?2:l?1:0,!0,o);return l||(f=[f]),mo(this,{type:(h?"Multi":"")+"Polygon",coordinates:f})}}),ho.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(o).geometry.coordinates)}),mo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var h=l==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var v=m.toGeoJSON(o);if(h)f.push(v.geometry);else{var T=qc(v);T.type==="FeatureCollection"?f.push.apply(f,T.features):f.push(T)}}}),h?mo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function II(o,l){return new xi(o,l)}var wb=II,Wc=jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,h){this._url=o,this._bounds=be(l),P(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&uo(this._image),this},bringToBack:function(){return this._map&&co(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=be(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:Re("img");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;rs(this._image,h,l)},_reset:function(){var o=this._image,l=new ae(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();ut(o,l.min),o.style.width=h.x+"px",o.style.height=h.y+"px"},_updateOpacity:function(){kn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ib=function(o,l,h){return new Wc(o,l,h)},EI=Wc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:Re("video");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),o){for(var h=l.getElementsByTagName("source"),f=[],m=0;m<h.length;m++)f.push(h[m].src);this._url=h.length>0?f:[l.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var T=Re("source");T.src=this._url[v],l.appendChild(T)}}});function Eb(o,l,h){return new EI(o,l,h)}var TI=Wc.extend({_initImage:function(){var o=this._image=this._url;pe(o,"leaflet-image-layer"),this._zoomAnimated&&pe(o,"leaflet-zoom-animated"),this.options.className&&pe(o,this.options.className),o.onselectstart=g,o.onmousemove=g}});function Tb(o,l,h){return new TI(o,l,h)}var si=jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof Ae||E(o))?(this._latlng=ce(o),P(this,l)):(P(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&kn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&kn(this._container,1),this.bringToFront(),this.options.interactive&&(pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(kn(this._container,0),this._removeTimeout=setTimeout(a(Ge,void 0,this._container),200)):Ge(this._container),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ce(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&uo(this._container),this},bringToBack:function(){return this._map&&co(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof Ri){l=null;var h=this._source._layers;for(var f in h)if(h[f]._map){l=h[f];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=W(this.options.offset),h=this._getAnchor();this._zoomAnimated?ut(this._container,o.add(h)):l=l.add(o).add(h);var f=this._containerBottom=-l.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(o,l,h,f){var m=l;return m instanceof o||(m=new o(f).setContent(l)),h&&m.setLatLng(h),m}}),jn.include({_initOverlay:function(o,l,h,f){var m=h;return m instanceof o?(P(m,f),m._source=this):(m=l&&!f?l:new o(f,this),m.setContent(h)),m}});var Hc=si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,si.prototype.openOn.call(this,o)},onAdd:function(o){si.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",os))},onRemove:function(o){si.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",os))},getEvents:function(){var o=si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=Re("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Re("div",o+"-content-wrapper",l);if(this._contentNode=Re("div",o+"-content",h),Ja(l),Np(this._contentNode),he(l,"contextmenu",os),this._tipContainer=Re("div",o+"-tip-container",l),this._tip=Re("div",o+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Re("a",o+"-close-button",l);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',he(f,"click",function(m){kt(m),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var h=o.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var f=o.offsetHeight,m=this.options.maxHeight,v="leaflet-popup-scrolled";m&&f>m?(l.height=m+"px",pe(o,v)):rt(o,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),h=this._getAnchor();ut(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Ka(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,f=this._containerWidth,m=new O(this._containerLeft,-h-this._containerBottom);m._add(ss(this._container));var v=o.layerPointToContainerPoint(m),T=W(this.options.autoPanPadding),A=W(this.options.autoPanPaddingTopLeft||T),k=W(this.options.autoPanPaddingBottomRight||T),M=o.getSize(),Z=0,se=0;v.x+f+k.x>M.x&&(Z=v.x+f-M.x+k.x),v.x-Z-A.x<0&&(Z=v.x-A.x),v.y+h+k.y>M.y&&(se=v.y+h-M.y+k.y),v.y-se-A.y<0&&(se=v.y-A.y),(Z||se)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Z,se]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pb=function(o,l){return new Hc(o,l)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(o,l,h){return this._initOverlay(Hc,o,l,h).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),jn.include({bindPopup:function(o,l){return this._popup=this._initOverlay(Hc,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Ri||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){as(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Gc=si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){si.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){si.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=si.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,h,f=this._map,m=this._container,v=f.latLngToContainerPoint(f.getCenter()),T=f.layerPointToContainerPoint(o),A=this.options.direction,k=m.offsetWidth,M=m.offsetHeight,Z=W(this.options.offset),se=this._getAnchor();A==="top"?(l=k/2,h=M):A==="bottom"?(l=k/2,h=0):A==="center"?(l=k/2,h=M/2):A==="right"?(l=0,h=M/2):A==="left"?(l=k,h=M/2):T.x<v.x?(A="right",l=0,h=M/2):(A="left",l=k+(Z.x+se.x)*2,h=M/2),o=o.subtract(W(l,h,!0)).add(Z).add(se),rt(m,"leaflet-tooltip-right"),rt(m,"leaflet-tooltip-left"),rt(m,"leaflet-tooltip-top"),rt(m,"leaflet-tooltip-bottom"),pe(m,"leaflet-tooltip-"+A),ut(m,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&kn(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Sb=function(o,l){return new Gc(o,l)};Ie.include({openTooltip:function(o,l,h){return this._initOverlay(Gc,o,l,h).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),jn.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gc,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Ri||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(he(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),he(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,h,f;this._tooltip.options.sticky&&o.originalEvent&&(h=this._map.mouseEventToContainerPoint(o.originalEvent),f=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(l)}});var PI=fo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Nc(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var f=W(h.bgPos);l.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Ab(o){return new PI(o)}fo.Default=tl;var nl=jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ne.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){P(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Ge(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(uo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(co(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof O?o:new O(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,h=-o(-1/0,1/0),f=0,m=l.length,v;f<m;f++)v=l[f].style.zIndex,l[f]!==this._container&&v&&(h=o(h,+v));isFinite(h)&&(this.options.zIndex=h+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ne.ielt9){kn(this._container,this.options.opacity);var o=+new Date,l=!1,h=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var v=Math.min(1,(o-m.loaded)/200);kn(m.el,v),v<1?l=!0:(m.active?h=!0:this._onOpaqueTile(m),m.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(fe(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===o?(this._levels[h].el.style.zIndex=l-Math.abs(o-h),this._onUpdateLevel(h)):(Ge(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var f=this._levels[o],m=this._map;return f||(f=this._levels[o]={},f.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=l,f.origin=m.project(m.unproject(m.getPixelOrigin()),o).round(),f.zoom=o,this._setZoomTransform(f,m.getCenter(),m.getZoom()),g(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var o,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var f=l.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Ge(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,h,f){var m=Math.floor(o/2),v=Math.floor(l/2),T=h-1,A=new O(+m,+v);A.z=+T;var k=this._tileCoordsToKey(A),M=this._tiles[k];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),T>f?this._retainParent(m,v,T,f):!1)},_retainChildren:function(o,l,h,f){for(var m=2*o;m<2*o+2;m++)for(var v=2*l;v<2*l+2;v++){var T=new O(m,v);T.z=h+1;var A=this._tileCoordsToKey(T),k=this._tiles[A];if(k&&k.active){k.retain=!0;continue}else k&&k.loaded&&(k.retain=!0);h+1<f&&this._retainChildren(m,v,h+1,f)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,h,f){var m=Math.round(l);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var v=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||v)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(o),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],o,l)},_setZoomTransform:function(o,l,h){var f=this._map.getZoomScale(h,o.zoom),m=o.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(l,h)).round();ne.any3d?rs(o.el,m,f):ut(o.el,m)},_resetGrid:function(){var o=this._map,l=o.options.crs,h=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],f).x/h.x),Math.ceil(o.project([0,l.wrapLng[1]],f).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],f).y/h.x),Math.ceil(o.project([l.wrapLat[1],0],f).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),f=l.getZoomScale(h,this._tileZoom),m=l.project(o,this._tileZoom).floor(),v=l.getSize().divideBy(f*2);return new ae(m.subtract(v),m.add(v))},_update:function(o){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(o),m=this._pxBoundsToTileRange(f),v=m.getCenter(),T=[],A=this.options.keepBuffer,k=new ae(m.getBottomLeft().subtract([A,-A]),m.getTopRight().add([A,-A]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var Z=this._tiles[M].coords;(Z.z!==this._tileZoom||!k.contains(new O(Z.x,Z.y)))&&(this._tiles[M].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(o,h);return}for(var se=m.min.y;se<=m.max.y;se++)for(var me=m.min.x;me<=m.max.x;me++){var Kt=new O(me,se);if(Kt.z=this._tileZoom,!!this._isValidTile(Kt)){var wt=this._tiles[this._tileCoordsToKey(Kt)];wt?wt.current=!0:T.push(Kt)}}if(T.sort(function(ln,_o){return ln.distanceTo(v)-_o.distanceTo(v)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ln=document.createDocumentFragment();for(me=0;me<T.length;me++)this._addTile(T[me],Ln);this._level.el.appendChild(Ln)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(o.x<h.min.x||o.x>h.max.x)||!l.wrapLat&&(o.y<h.min.y||o.y>h.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(o);return be(this.options.bounds).overlaps(f)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,h=this.getTileSize(),f=o.scaleBy(h),m=f.add(h),v=l.unproject(f,o.z),T=l.unproject(m,o.z);return[v,T]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),h=new gt(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),h=new O(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(o){var l=this._tiles[o];l&&(Ge(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){pe(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=g,o.onmousemove=g,ne.ielt9&&this.options.opacity<1&&kn(o,this.options.opacity)},_addTile:function(o,l){var h=this._getTilePos(o),f=this._tileCoordsToKey(o),m=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(m),this.createTile.length<2&&J(a(this._tileReady,this,o,null,m)),ut(m,h),this._tiles[f]={el:m,coords:o,current:!0},l.appendChild(m),this.fire("tileloadstart",{tile:m,coords:o})},_tileReady:function(o,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:o});var f=this._tileCoordsToKey(o);h=this._tiles[f],h&&(h.loaded=+new Date,this._map._fadeAnimated?(kn(h.el,0),fe(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(pe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ne.ielt9||!this._map._fadeAnimated?J(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new O(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new ae(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Rb(o){return new nl(o)}var go=nl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=P(this,l),l.detectRetina&&ne.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var h=document.createElement("img");return he(h,"load",a(this._tileOnLoad,this,l,h)),he(h,"error",a(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(o),h},getTileUrl:function(o){var l={r:ne.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=h),l["-y"]=h}return w(this._url,r(l,this.options))},_tileOnLoad:function(o,l){ne.ielt9?setTimeout(a(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,h){var f=this.options.errorTileUrl;f&&l.getAttribute("src")!==f&&(l.src=f),o(h,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,f=this.options.zoomOffset;return h&&(o=l-o),o+f},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=g,l.onerror=g,!l.complete)){l.src=D;var h=this._tiles[o].coords;Ge(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",D),nl.prototype._removeTile.call(this,o)},_tileReady:function(o,l,h){if(!(!this._map||h&&h.getAttribute("src")===D))return nl.prototype._tileReady.call(this,o,l,h)}});function SI(o,l){return new go(o,l)}var AI=go.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var h=r({},this.defaultWmsParams);for(var f in l)f in this.options||(h[f]=l[f]);l=P(this,l);var m=l.detectRetina&&ne.retina?2:1,v=this.getTileSize();h.width=v.x*m,h.height=v.y*m,this.wmsParams=h},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,go.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),h=this._crs,f=we(h.project(l[0]),h.project(l[1])),m=f.min,v=f.max,T=(this._wmsVersion>=1.3&&this._crs===vI?[m.y,m.x,v.y,v.x]:[m.x,m.y,v.x,v.y]).join(","),A=go.prototype.getTileUrl.call(this,o);return A+C(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(o,l){return r(this.wmsParams,o),l||this.redraw(),this}});function Cb(o,l){return new AI(o,l)}go.WMS=AI,SI.wms=Cb;var ki=jn.extend({options:{padding:.1},initialize:function(o){P(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var h=this._map.getZoomScale(l,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,l),v=f.multiplyBy(-h).add(m).subtract(this._map._getNewPixelOrigin(o,l));ne.any3d?rs(this._container,v,h):ut(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new ae(h,h.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),RI=ki.extend({options:{tolerance:0},getEvents:function(){var o=ki.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ki.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");he(o,"mousemove",this._onMouseMove,this),he(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){fe(this._redrawRequest),delete this._ctx,Ge(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var o=this._bounds,l=this._container,h=o.getSize(),f=ne.retina?2:1;ut(l,o.min),l.width=f*h.x,l.height=f*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",ne.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){ki.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,h=l.next,f=l.prev;h?h.prev=f:this._drawLast=f,f?f.next=h:this._drawFirst=h,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),h=[],f,m;for(m=0;m<l.length;m++){if(f=Number(l[m]),isNaN(f))return;h.push(f)}o.options._dashArray=h}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||J(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ae,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)o=f.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var h,f,m,v,T=o._parts,A=T.length,k=this._ctx;if(A){for(k.beginPath(),h=0;h<A;h++){for(f=0,m=T[h].length;f<m;f++)v=T[h][f],k[f?"lineTo":"moveTo"](v.x,v.y);l&&k.closePath()}this._fillStroke(k,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,h=this._ctx,f=Math.max(Math.round(o._radius),1),m=(Math.max(Math.round(o._radiusY),1)||f)/f;m!==1&&(h.save(),h.scale(1,m)),h.beginPath(),h.arc(l.x,l.y/m,f,0,Math.PI*2,!1),m!==1&&h.restore(),this._fillStroke(h,o)}},_fillStroke:function(o,l){var h=l.options;h.fill&&(o.globalAlpha=h.fillOpacity,o.fillStyle=h.fillColor||h.color,o.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=h.opacity,o.lineWidth=h.weight,o.strokeStyle=h.color,o.lineCap=h.lineCap,o.lineJoin=h.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),h,f,m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(h))&&(f=h);this._fireEvent(f?[f]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(rt(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var h,f,m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(l)&&(f=h);f!==this._hoveredLayer&&(this._handleMouseOut(o),f&&(pe(this._container,"leaflet-interactive"),this._fireEvent([f],o,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,h){this._map._fireDOMEvent(l,h||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var h=l.next,f=l.prev;if(h)h.prev=f;else return;f?f.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var h=l.next,f=l.prev;if(f)f.next=h;else return;h?h.prev=f:f&&(this._drawLast=f),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function CI(o){return ne.canvas?new RI(o):null}var il=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xb={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ki.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=il("shape");pe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=il("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;Ge(l),o.removeInteractiveTarget(l),delete this._layers[c(o)]},_updateStyle:function(o){var l=o._stroke,h=o._fill,f=o.options,m=o._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(l||(l=o._stroke=il("stroke")),m.appendChild(l),l.weight=f.weight+"px",l.color=f.color,l.opacity=f.opacity,f.dashArray?l.dashStyle=E(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=f.lineCap.replace("butt","flat"),l.joinstyle=f.lineJoin):l&&(m.removeChild(l),o._stroke=null),f.fill?(h||(h=o._fill=il("fill")),m.appendChild(h),h.color=f.fillColor||f.color,h.opacity=f.fillOpacity):h&&(m.removeChild(h),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),h=Math.round(o._radius),f=Math.round(o._radiusY||h);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+f+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){uo(o._container)},_bringToBack:function(o){co(o._container)}},Kc=ne.vml?il:Lw,rl=ki.extend({_initContainer:function(){this._container=Kc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Kc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ge(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var o=this._bounds,l=o.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),ut(h,o.min),h.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=Kc("path");o.options.className&&pe(l,o.options.className),o.options.interactive&&pe(l,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Ge(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,h=o.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,Nw(o._parts,l))},_updateCircle:function(o){var l=o._point,h=Math.max(Math.round(o._radius),1),f=Math.max(Math.round(o._radiusY),1)||h,m="a"+h+","+f+" 0 1,0 ",v=o._empty()?"M0 0":"M"+(l.x-h)+","+l.y+m+h*2+",0 "+m+-h*2+",0 ";this._setPath(o,v)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){uo(o._path)},_bringToBack:function(o){co(o._path)}});ne.vml&&rl.include(xb);function xI(o){return ne.svg||ne.vml?new rl(o):null}Ie.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&CI(o)||xI(o)}});var kI=po.extend({initialize:function(o,l){po.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=be(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function kb(o,l){return new kI(o,l)}rl.create=Kc,rl.pointsToPath=Nw,xi.geometryToLayer=Uc,xi.coordsToLatLng=$p,xi.coordsToLatLngs=$c,xi.latLngToCoords=jp,xi.latLngsToCoords=jc,xi.getFeature=mo,xi.asFeature=qc,Ie.mergeOptions({boxZoom:!0});var bI=ri.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Za(),Sp(),this._startPoint=this._map.mouseEventToContainerPoint(o),he(document,{contextmenu:as,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new ae(this._point,this._startPoint),h=l.getSize();ut(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ge(this._box),rt(this._container,"leaflet-crosshair")),Qa(),Ap(),De(document,{contextmenu:as,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new gt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",bI),Ie.mergeOptions({doubleClickZoom:!0});var LI=ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,h=l.getZoom(),f=l.options.zoomDelta,m=o.originalEvent.shiftKey?h-f:h+f;l.options.doubleClickZoom==="center"?l.setZoom(m):l.setZoomAround(o.containerPoint,m)}});Ie.addInitHook("addHandler","doubleClickZoom",LI),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var NI=ri.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ir(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rt(this._map._container,"leaflet-grab"),rt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=be(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),h=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-l+h)%o+l-h,v=(f+l+h)%o-l-h,T=Math.abs(m+h)<Math.abs(v+h)?m:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(o){var l=this._map,h=l.options,f=!h.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),f)l.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,T=h.easeLinearity,A=m.multiplyBy(T/v),k=A.distanceTo([0,0]),M=Math.min(h.inertiaMaxSpeed,k),Z=A.multiplyBy(M/k),se=M/(h.inertiaDeceleration*T),me=Z.multiplyBy(-se/2).round();!me.x&&!me.y?l.fire("moveend"):(me=l._limitOffset(me,l.options.maxBounds),J(function(){l.panBy(me,{duration:se,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",NI),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var DI=ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),he(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,h=o.scrollTop||l.scrollTop,f=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(f,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},h=this.keyCodes,f,m;for(f=0,m=h.left.length;f<m;f++)l[h.left[f]]=[-1*o,0];for(f=0,m=h.right.length;f<m;f++)l[h.right[f]]=[o,0];for(f=0,m=h.down.length;f<m;f++)l[h.down[f]]=[0,o];for(f=0,m=h.up.length;f<m;f++)l[h.up[f]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},h=this.keyCodes,f,m;for(f=0,m=h.zoomIn.length;f<m;f++)l[h.zoomIn[f]]=o;for(f=0,m=h.zoomOut.length;f<m;f++)l[h.zoomOut[f]]=-o},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,h=this._map,f;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(f=this._panKeys[l],o.shiftKey&&(f=W(f).multiplyBy(3)),h.options.maxBounds&&(f=h._limitOffset(W(f),h.options.maxBounds)),h.options.worldCopyJump){var m=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(f)));h.panTo(m)}else h.panBy(f)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;as(o)}}});Ie.addInitHook("addHandler","keyboard",DI),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var OI=ri.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=sI(o),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var f=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),f),as(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),h=this._map.options.zoomSnap||0;o._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,v=h?Math.ceil(m/h)*h:m,T=o._limitZoom(l+(this._delta>0?v:-v))-l;this._delta=0,this._startTime=null,T&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+T):o.setZoomAround(this._lastMousePos,l+T))}});Ie.addInitHook("addHandler","scrollWheelZoom",OI);var bb=600;Ie.mergeOptions({tapHold:ne.touchNative&&ne.safari&&ne.mobile,tapTolerance:15});var MI=ri.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new O(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(he(document,"touchend",kt),he(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),bb),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){De(document,"touchend",kt),De(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new O(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var h=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});Ie.addInitHook("addHandler","tapHold",MI),Ie.mergeOptions({touchZoom:ne.touch,bounceAtZoomLimits:!0});var VI=ri.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(o.touches[0]),f=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(f)._divideBy(2))),this._startDist=h.distanceTo(f),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),kt(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(o.touches[0]),f=l.mouseEventToContainerPoint(o.touches[1]),m=h.distanceTo(f)/this._startDist;if(this._zoom=l.getScaleZoom(m,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&m<1||this._zoom>l.getMaxZoom()&&m>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var v=h._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&v.x===0&&v.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),fe(this._animRequest);var T=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=J(T,this,!0),kt(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,fe(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",VI),Ie.BoxZoom=bI,Ie.DoubleClickZoom=LI,Ie.Drag=NI,Ie.Keyboard=DI,Ie.ScrollWheelZoom=OI,Ie.TapHold=MI,Ie.TouchZoom=VI,n.Bounds=ae,n.Browser=ne,n.CRS=an,n.Canvas=RI,n.Circle=Up,n.CircleMarker=zc,n.Class=We,n.Control=$n,n.DivIcon=PI,n.DivOverlay=si,n.DomEvent=Zk,n.DomUtil=Gk,n.Draggable=ir,n.Evented=Gt,n.FeatureGroup=Ri,n.GeoJSON=xi,n.GridLayer=nl,n.Handler=ri,n.Icon=fo,n.ImageOverlay=Wc,n.LatLng=Ae,n.LatLngBounds=gt,n.Layer=jn,n.LayerGroup=ho,n.LineUtil=lb,n.Map=Ie,n.Marker=Bc,n.Mixin=nb,n.Path=rr,n.Point=O,n.PolyUtil=ib,n.Polygon=po,n.Polyline=Ci,n.Popup=Hc,n.PosAnimation=oI,n.Projection=ub,n.Rectangle=kI,n.Renderer=ki,n.SVG=rl,n.SVGOverlay=TI,n.TileLayer=go,n.Tooltip=Gc,n.Transformation=fp,n.Util=ye,n.VideoOverlay=EI,n.bind=a,n.bounds=we,n.canvas=CI,n.circle=_b,n.circleMarker=gb,n.control=Xa,n.divIcon=Ab,n.extend=r,n.featureGroup=fb,n.geoJSON=II,n.geoJson=wb,n.gridLayer=Rb,n.icon=pb,n.imageOverlay=Ib,n.latLng=ce,n.latLngBounds=be,n.layerGroup=db,n.map=Qk,n.marker=mb,n.point=W,n.polygon=yb,n.polyline=vb,n.popup=Pb,n.rectangle=kb,n.setOptions=P,n.stamp=c,n.svg=xI,n.svgOverlay=Tb,n.tileLayer=SI,n.tooltip=Sb,n.transformation=Wa,n.version=i,n.videoOverlay=Eb;var Lb=window.L;n.noConflict=function(){return window.L=Lb,this},window.L=n})})(D_,D_.exports);var kc=D_.exports;function cp(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function hp(t,e){return e==null?function(i,r){const s=N.useRef();return s.current||(s.current=t(i,r)),s}:function(i,r){const s=N.useRef();s.current||(s.current=t(i,r));const a=N.useRef(i),{instance:u}=s.current;return N.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),s}}function dk(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function fk(t){return function(n){const i=xw(),r=t(up(n,i),i);return ak(i.map,n.attribution),kw(r.current,n.eventHandlers),dk(r.current,i),r}}function H9(t,e){const n=N.useRef();N.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function G9(t){return function(n){const i=xw(),r=t(up(n,i),i);return kw(r.current,n.eventHandlers),dk(r.current,i),H9(r.current,n),r}}function K9(t,e){const n=hp(t,e),i=fk(n);return hk(i)}function Z9(t,e){const n=hp(t),i=W9(n,e);return j9(i)}function Q9(t,e){const n=hp(t,e),i=G9(n);return hk(i)}function Y9(t,e){const n=hp(t,e),i=fk(n);return q9(i)}function J9(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}const O_=Q9(function({center:e,children:n,...i},r){const s=new kc.Circle(e,i);return cp(s,lk(r,{overlayContainer:s}))},z9);function M_(){return M_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},M_.apply(this,arguments)}function X9({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:s,placeholder:a,style:u,whenReady:c,zoom:d,...p},g){const[_]=N.useState({className:r,id:s,style:u}),[y,S]=N.useState(null);N.useImperativeHandle(g,()=>(y==null?void 0:y.map)??null,[y]);const P=N.useCallback(I=>{if(I!==null&&y===null){const w=new kc.Map(I,p);n!=null&&d!=null?w.setView(n,d):t!=null&&w.fitBounds(t,e),c!=null&&w.whenReady(c),S($9(w))}},[]);N.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const C=y?eu.createElement(ck,{value:y},i):a??null;return eu.createElement("div",M_({},_,{ref:P}),C)}const pk=N.forwardRef(X9),mk=K9(function({position:e,...n},i){const r=new kc.Marker(e,n);return cp(r,lk(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),V_=Z9(function(e,n){const i=new kc.Popup(e,n.overlayContainer);return cp(i,n)},function(e,n,{position:i},r){N.useEffect(function(){const{instance:a}=e;function u(d){d.popup===a&&(a.update(),r(!0))}function c(d){d.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var p;n.map.off({popupopen:u,popupclose:c}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),gk=Y9(function({url:e,...n},i){const r=new kc.TileLayer(e,up(n,i));return cp(r,i)},function(e,n,i){J9(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});const e5={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Le.initializeApp(e5);const t5=()=>{const{roomId:t}=Dv(),[e,n]=N.useState(null),[i,r]=N.useState(null),[s,a]=N.useState(null),[u,c]=N.useState(100),[d,p]=N.useState(null),[g,_]=N.useState([49.190199,16.593468]),[y,S]=N.useState(1e3),[P,C]=N.useState(!1),[I,w]=N.useState(!1),[E,x]=N.useState(0),D=nc();N.useEffect(()=>{Le.auth().onAuthStateChanged(J=>{J&&r(J)})},[]),N.useEffect(()=>{if(navigator.geolocation){const J=navigator.geolocation.watchPosition(fe=>{n([fe.coords.latitude,fe.coords.longitude])});return()=>{navigator.geolocation.clearWatch(J)}}else console.log("Геолока не надана")},[]),N.useEffect(()=>{var J=10;setInterval(()=>{J>=0&&(x(J),J--,J===0&&(w(!0),ie()))},10)},[]),N.useEffect(()=>{i&&z()},[i]),N.useEffect(()=>{e&&q()},[e]);function U(J,fe,ye,We){const xn=Math.PI*J/180,He=Math.PI*ye/180,Gt=He-xn,O=(Math.PI*We-Math.PI*fe)/180,oe=Math.sin(Gt/2)*Math.sin(Gt/2)+Math.cos(xn)*Math.cos(He)*Math.sin(O/2)*Math.sin(O/2);return 6371*(2*Math.atan2(Math.sqrt(oe),Math.sqrt(1-oe)))}N.useEffect(()=>{if(e&&s){let J=null,fe=1/0;s.forEach(ye=>{const We=U(e[0],e[1],ye[0],ye[1]);We<fe&&(fe=We,J=ye)}),J&&fe<u/1e3?p(J):p(null)}},[e,s]);const q=()=>{U(e[0],e[1],g[0],g[1])>y/1e3?(C(!0),console.log("ВИ НЕ В ЗОНІ")):C(!1)},z=()=>{const ye=Le.firestore().collection("rooms").doc(t).onSnapshot(We=>{if(We.exists){var xn=[];We.data().users.map(He=>{if(He.id!=i.uid){var Gt=He.location;xn.push([Gt.latitude,Gt.longitude])}}),a(xn)}else console.log("Документ не існує")});return()=>{ye()}},ie=()=>{const ye=Le.firestore().collection("rooms").doc(t).onSnapshot(We=>{if(We.exists){var xn=We.data().settings.centerField;_([xn.latitude,xn.longitude]),q()}else console.log("Документ не існує")});return()=>{ye()}},X=()=>{D(-1)};return N.useEffect(()=>{console.log(s)},[s]),B.jsxs("div",{className:"seeking_container",children:[P&&B.jsxs("div",{className:"warning_zone",children:[B.jsx("h1",{children:"ВИ ЗА ЗОНОЮ"}),B.jsx("h2",{children:"Поверніться до зони"})]}),I?e?B.jsxs(B.Fragment,{children:[B.jsx("div",{onClick:X,className:"back",children:B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:B.jsx("path",{d:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"})})}),B.jsxs(pk,{center:e,zoom:13,style:{height:"400px",width:"100%"},children:[B.jsx(gk,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),B.jsx(mk,{position:e,children:B.jsxs(V_,{children:["Your Location",e==null?void 0:e.map(J=>B.jsx("div",{children:J},J))]})}),s==null?void 0:s.map((J,fe)=>d&&J===d&&B.jsx(O_,{center:[J[0]+Math.random()*.0023,J[1]+Math.random()*.0023],radius:u,children:B.jsxs(V_,{children:["Position ",J.map(ye=>B.jsx("div",{children:ye},ye))]})},fe)),B.jsx(O_,{center:g,radius:y,className:"field_circle"})]})]}):B.jsx("p",{children:"Loading map..."}):B.jsx("div",{className:"timer",children:B.jsx("h1",{children:E})})]})};const n5={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Le.initializeApp(n5);const i5=()=>{const{roomId:t}=Dv(),[e,n]=N.useState(null),[i,r]=N.useState([]),[s,a]=N.useState([49.190199,16.593468]),[u,c]=N.useState(1e3),[d,p]=N.useState(!1),g=Le.firestore();N.useEffect(()=>{Le.auth().onAuthStateChanged(C=>{C&&(r(C),console.log(C))})},[]),N.useEffect(()=>{if(P(),navigator.geolocation){const C=navigator.geolocation.watchPosition(I=>{n([I.coords.latitude,I.coords.longitude])});return()=>{navigator.geolocation.clearWatch(C)}}else console.log("Геолока не надана")},[]),N.useEffect(()=>{e&&(y(),S(),console.log(e))},[e]);function _(C,I,w,E){const x=Math.PI*C/180,D=Math.PI*w/180,U=D-x,q=(Math.PI*E-Math.PI*I)/180,z=Math.sin(U/2)*Math.sin(U/2)+Math.cos(x)*Math.cos(D)*Math.sin(q/2)*Math.sin(q/2);return 6371*(2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z)))}const y=()=>{_(e[0],e[1],s[0],s[1])>u/1e3?(p(!0),console.log("ВИ НЕ В ЗОНІ")):p(!1)},S=()=>{const C=g.collection("rooms").doc(t);i&&C.get().then(I=>{if(I.exists){const x=I.data().users.map(D=>D.id===i.uid?{...D,location:{latitude:e[0],longitude:e[1]}}:D);C.update({users:x})}})},P=()=>{const w=Le.firestore().collection("rooms").doc(t).onSnapshot(E=>{if(E.exists){var x=E.data().settings.centerField;a([x.latitude,x.longitude]),console.log(x),y()}else console.log("Документ не існує")});return()=>{w()}};return B.jsxs("div",{children:[d&&B.jsxs("div",{className:"warning_zone",children:[B.jsx("h1",{children:"ВИ ЗА ЗОНОЮ"}),B.jsx("h2",{children:"Поверніться до зони"})]}),e?B.jsxs(pk,{center:e,zoom:13,style:{height:"400px",width:"100%"},children:[B.jsx(gk,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),B.jsx(mk,{position:e,children:B.jsxs(V_,{children:["Your Location",e==null?void 0:e.map(C=>B.jsx("div",{children:C},C))]})}),B.jsx(O_,{center:s,radius:u,className:"field_circle"})]}):B.jsx("p",{children:"Loading map..."})]})},r5="_login_page_container_y2iww_1",s5="_buttons_container_y2iww_9",o5="_google_svg_y2iww_20",a5="_anonymous_svg_y2iww_25",l5="_back_icon_y2iww_30",Tl={login_page_container:r5,buttons_container:s5,google_svg:o5,anonymous_svg:a5,back_icon:l5},u5={apiKey:"AIzaSyBr9tJ_kpF95qefrcpchFBiV-wuxsacoGU",authDomain:"fantqhns.firebaseapp.com",projectId:"fantqhns",storageBucket:"fantqhns.appspot.com",messagingSenderId:"22208453528",appId:"1:22208453528:web:3c6b75d06b8a1ccd6469ed",measurementId:"G-JY768BVBB8"};Le.initializeApp(u5);const c5=()=>{const[t,e]=N.useState(null),n=nc();N.useEffect(()=>{Le.auth().onAuthStateChanged(a=>{a&&(e(a),n("/"))})},[]);const i=()=>{const a=new Le.auth.GoogleAuthProvider;Le.auth().signInWithPopup(a).then(u=>{const c=u.user;e(c)}).catch(u=>{const c=u.code,d=u.message;console.log(c,d)})},r=()=>{Le.auth().signInAnonymously().then(a=>{const u=a.user;e(u)}).catch(a=>{console.error(a)})},s=()=>{n(-1)};return B.jsxs("div",{className:Tl.login_page_container,children:[B.jsx("svg",{onClick:s,className:Tl.back_icon,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:B.jsx("path",{d:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"})}),B.jsxs("div",{className:Tl.buttons_container,children:[B.jsxs(Oi,{onClick:i,style:{background:"#E9E9E9"},children:[B.jsxs("svg",{className:Tl.google_svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"30px",height:"30px",children:["    ",B.jsx("path",{d:"M 15.003906 3 C 8.3749062 3 3 8.373 3 15 C 3 21.627 8.3749062 27 15.003906 27 C 25.013906 27 27.269078 17.707 26.330078 13 L 25 13 L 22.732422 13 L 15 13 L 15 17 L 22.738281 17 C 21.848702 20.448251 18.725955 23 15 23 C 10.582 23 7 19.418 7 15 C 7 10.582 10.582 7 15 7 C 17.009 7 18.839141 7.74575 20.244141 8.96875 L 23.085938 6.1289062 C 20.951937 4.1849063 18.116906 3 15.003906 3 z"})]}),"Google"]}),B.jsxs(Oi,{onClick:r,style:{background:"#E9E9E9"},children:[B.jsx("svg",{className:Tl.anonymous_svg,xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:B.jsx("path",{d:"M480-481q-66 0-108-42t-42-108q0-66 42-108t108-42q66 0 108 42t42 108q0 66-42 108t-108 42ZM160-160v-94q0-38 19-65t49-41q67-30 128.5-45T480-420q62 0 123 15.5T731-360q31 14 50 41t19 65v94H160Z"})}),"Anonymous"]})]})]})};function h5(){return B.jsx("div",{className:"App",children:B.jsx(lO,{basename:"/fantqhns/",children:B.jsxs(nO,{children:[B.jsx(So,{index:!0,element:B.jsx(k9,{})}),B.jsx(So,{path:"/login",element:B.jsx(c5,{})}),B.jsx(So,{path:"/room/:roomId",element:B.jsx(B9,{})}),B.jsx(So,{path:"/map/seeking/:roomId",element:B.jsx(t5,{})}),B.jsx(So,{path:"/map/hiding/:roomId",element:B.jsx(i5,{})})]})})})}qm.createRoot(document.getElementById("root")).render(B.jsx(eu.StrictMode,{children:B.jsx(h5,{})}));
